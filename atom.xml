<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Clay çš„æŠ€æœ¯ç©ºé—´</title>
  
  <subtitle>ç”¨è¿›åºŸé€€ | è‰ºä¸å‹èº«</subtitle>
  <link href="https://www.techgrow.cn/atom.xml" rel="self"/>
  
  <link href="https://www.techgrow.cn/"/>
  <updated>2023-08-01T15:12:42.000Z</updated>
  <id>https://www.techgrow.cn/</id>
  
  <author>
    <name>Clay</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸ƒåŸºç¡€ç‰¹æ€§</title>
    <link href="https://www.techgrow.cn/posts/6bcf09.html"/>
    <id>https://www.techgrow.cn/posts/6bcf09.html</id>
    <published>2023-08-01T15:12:42.000Z</published>
    <updated>2023-08-01T15:12:42.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="SpringApplication"><a href="#SpringApplication" class="headerlink" title="SpringApplication"></a>SpringApplication</h2><h3 id="è‡ªå®šä¹‰-banner"><a href="#è‡ªå®šä¹‰-banner" class="headerlink" title="è‡ªå®šä¹‰ banner"></a>è‡ªå®šä¹‰ banner</h3><p>æ¨èä½¿ç”¨ <a href="https://www.bootschool.net/ascii">Spring Boot Banner åœ¨çº¿ç”Ÿæˆå·¥å…·</a>ï¼Œåˆ¶ä½œå¹¶ä¸‹è½½è‹±æ–‡ <code>banner.txt</code> æ–‡ä»¶ï¼Œç„¶åå°†å®ƒæ”¾åˆ°é¡¹ç›®çš„ <code>/src/main/resources</code> ç›®å½•ä¸‹ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°åº”ç”¨çš„ä¸ªæ€§åŒ–å¯åŠ¨ã€‚</p><h3 id="è‡ªå®šä¹‰-SpringApplication"><a href="#è‡ªå®šä¹‰-SpringApplication" class="headerlink" title="è‡ªå®šä¹‰ SpringApplication"></a>è‡ªå®šä¹‰ SpringApplication</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.Banner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication application = <span class="keyword">new</span> SpringApplication(MyApplication.class);</span><br><span class="line">        <span class="comment">// å…³é—­Bannerï¼ˆæ­¤æ–¹å¼çš„é…ç½®ä¼˜å…ˆçº§è¾ƒä½ï¼Œä½äºé…ç½®æ–‡ä»¶ï¼‰</span></span><br><span class="line">        application.setBannerMode(Banner.Mode.OFF);</span><br><span class="line">        application.run(args);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><p>ä¸Šé¢çš„ä»£ç ç­‰åŒäºä»¥ä¸‹é…ç½®å†…å®¹ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œé…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§æ›´é«˜</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…³é—­Banner</span></span><br><span class="line"><span class="meta">spring.main.banner-mode</span>=<span class="string">off</span></span><br></pre></td></tr></tbody></table></figure><h3 id="FluentBuilder-API"><a href="#FluentBuilder-API" class="headerlink" title="FluentBuilder API"></a>FluentBuilder API</h3><p>SpringBoot æ”¯æŒä»¥ Builder æ–¹å¼æ„å»º <code>SpringApplication</code>ï¼Œé€šè¿‡ FluentBuilder API è®¾ç½®åº”ç”¨å±æ€§ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.Banner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.builder.SpringApplicationBuilder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder()</span><br><span class="line">            .main(MainApplication.class)</span><br><span class="line">            .sources(MainApplication.class)</span><br><span class="line">            .bannerMode(Banner.Mode.OFF) <span class="comment">// å…³é—­Bannerï¼ˆæ­¤æ–¹å¼çš„é…ç½®ä¼˜å…ˆçº§è¾ƒä½ï¼Œä½äºé…ç½®æ–‡ä»¶ï¼‰</span></span><br><span class="line">            .run(args);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="Profiles-ç¯å¢ƒéš”ç¦»"><a href="#Profiles-ç¯å¢ƒéš”ç¦»" class="headerlink" title="Profiles ç¯å¢ƒéš”ç¦»"></a>Profiles ç¯å¢ƒéš”ç¦»</h2><h3 id="ç®€å•ä»‹ç»"><a href="#ç®€å•ä»‹ç»" class="headerlink" title="ç®€å•ä»‹ç»"></a>ç®€å•ä»‹ç»</h3><p>Profiles æä¾›ç¯å¢ƒéš”ç¦»èƒ½åŠ›ï¼Œæ”¯æŒå¿«é€Ÿåˆ‡æ¢å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒï¼Œä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>1ã€<code>æŒ‡å®šç¯å¢ƒ</code>ï¼šæŒ‡å®šå“ªäº›ç»„ä»¶ã€é…ç½®åœ¨å“ªä¸ªç¯å¢ƒç”Ÿæ•ˆ</li><li> 2ã€<code>æ¿€æ´»ç¯å¢ƒ</code>ï¼šè¿™ä¸ªç¯å¢ƒå¯¹åº”çš„æ‰€æœ‰ç»„ä»¶å’Œé…ç½®å°±åº”è¯¥ç”Ÿæ•ˆ</li></ul><h3 id="åŸºç¡€ä½¿ç”¨"><a href="#åŸºç¡€ä½¿ç”¨" class="headerlink" title="åŸºç¡€ä½¿ç”¨"></a>åŸºç¡€ä½¿ç”¨</h3><h4 id="æŒ‡å®šç¯å¢ƒ"><a href="#æŒ‡å®šç¯å¢ƒ" class="headerlink" title="æŒ‡å®šç¯å¢ƒ"></a>æŒ‡å®šç¯å¢ƒ</h4><ul><li>Spring Profiles æä¾›ä¸€ç§éš”ç¦»é…ç½®çš„æ–¹å¼ï¼Œä½¿å…¶ä»…åœ¨ç‰¹å®šç¯å¢ƒç”Ÿæ•ˆ</li><li>ä»»ä½• <code>@Component</code>ã€<code>@Configuration</code> æˆ– <code>@ConfigurationProperties</code> éƒ½å¯ä»¥ä½¿ç”¨ <code>@Profile</code> æ³¨è§£ï¼Œæ¥æŒ‡å®šè‡ªèº«ä½•æ—¶è¢«åŠ è½½ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒSpring å®¹å™¨ä¸­çš„ç»„ä»¶éƒ½å¯ä»¥è¢« <code>@Profile</code> æ³¨è§£æ ‡è®°ã€‚</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Profile({"dev"})</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Profile({"prod", "test"})</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="ç¯å¢ƒæ¿€æ´»"><a href="#ç¯å¢ƒæ¿€æ´»" class="headerlink" title="ç¯å¢ƒæ¿€æ´»"></a>ç¯å¢ƒæ¿€æ´»</h4><p>åœ¨ <code>application.properties</code> é…ç½®æ–‡ä»¶ä¸­ï¼ŒæŒ‡å®šéœ€è¦æ¿€æ´»çš„ç¯å¢ƒ</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></tbody></table></figure><p>æˆ–è€…åŒæ—¶æ¿€æ´»å¤šä¸ªç¯å¢ƒ</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev,test</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li>ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œæ¿€æ´»ç¯å¢ƒï¼Œå¦‚ <code>java -jar xxxx.jar --spring.profiles.active=dev,test</code></li><li>è¿˜å¯ä»¥é…ç½®é»˜è®¤ç¯å¢ƒï¼Œå³ä¸æ ‡æ³¨ <code>@Profile</code> æ³¨è§£çš„ç»„ä»¶æ°¸è¿œéƒ½ä¼šç”Ÿæ•ˆ</li><li>ä»¥å‰é»˜è®¤ç¯å¢ƒå« <code>default</code></li><li>è‡ªå®šä¹‰é»˜è®¤ç¯å¢ƒ <code>spring.profiles.default=test</code>ï¼Œ</li><li>ä¸æ¨èä½¿ç”¨è‡ªå®šä¹‰é»˜è®¤ç¯å¢ƒçš„æ–¹å¼ï¼Œè€Œæ˜¯æ¨èä½¿ç”¨æ¿€æ´»æ–¹å¼æ¿€æ´»æŒ‡å®šç¯å¢ƒ</li></ul></div><h4 id="ç¯å¢ƒåŒ…å«"><a href="#ç¯å¢ƒåŒ…å«" class="headerlink" title="ç¯å¢ƒåŒ…å«"></a>ç¯å¢ƒåŒ…å«</h4><p>åŒ…å«æŒ‡å®šçš„ç¯å¢ƒï¼Œå³ä¸ç®¡æ¿€æ´»å“ªä¸ªç¯å¢ƒï¼ŒåŒ…å«æŒ‡å®šçš„ç¯å¢ƒéƒ½ä¼šç”Ÿæ•ˆ</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.profiles.include</span>=<span class="string">dev</span></span><br></pre></td></tr></tbody></table></figure><h4 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h4><ul><li>ç”Ÿæ•ˆçš„ç¯å¢ƒ = æ¿€æ´»çš„ç¯å¢ƒ / é»˜è®¤ç¯å¢ƒ + åŒ…å«çš„ç¯å¢ƒ</li><li>ä¼ä¸šé¡¹ç›®é‡Œé¢çš„ä½¿ç”¨è§„åˆ™<ul><li>åŸºç¡€çš„é…ç½®å†…å®¹ï¼Œå¦‚ MyBatisã€Log å†™åˆ°åŒ…å«ç¯å¢ƒä¸­</li><li>éœ€è¦åŠ¨æ€åˆ‡æ¢å˜åŒ–çš„é…ç½®å†…å®¹ï¼Œå¦‚ DataBaseã€Redis å†™åˆ°æ¿€æ´»çš„ç¯å¢ƒä¸­</li></ul></li></ul><h3 id="Profiles-åˆ†ç»„"><a href="#Profiles-åˆ†ç»„" class="headerlink" title="Profiles åˆ†ç»„"></a>Profiles åˆ†ç»„</h3><p>åˆ›å»º <code>prod</code> åˆ†ç»„ï¼ŒæŒ‡å®šåŒ…å«çš„ <code>db</code> å’Œ <code>mq</code> é…ç½®ã€‚å½“ä½¿ç”¨å‘½ä»¤è¡Œæ¿€æ´» <code>java -jar xxx.jar --spring.profiles.active=prod</code> ï¼Œå°±ä¼šæ¿€æ´» <code>prod</code> åˆ†ç»„ï¼ŒåŒ…æ‹¬æ¿€æ´» <code>db</code>ï¼Œ<code>mq</code> çš„é…ç½®æ–‡ä»¶ã€‚</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.profiles.group.prod</span>=<span class="string">db,mq</span></span><br></pre></td></tr></tbody></table></figure><p>æˆ–è€…ä½¿ç”¨æ•°ç»„çš„å†™æ³•</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.profiles.group.prod[0]</span>=<span class="string">db</span></span><br><span class="line"><span class="meta">spring.profiles.group.prod[1]</span>=<span class="string">mq</span></span><br></pre></td></tr></tbody></table></figure><h3 id="Profiles-é…ç½®æ–‡ä»¶"><a href="#Profiles-é…ç½®æ–‡ä»¶" class="headerlink" title="Profiles é…ç½®æ–‡ä»¶"></a>Profiles é…ç½®æ–‡ä»¶</h3><ul><li><code>application-{profile}.properties</code> å¯ä»¥ä½œä¸ºæŒ‡å®šç¯å¢ƒçš„é…ç½®æ–‡ä»¶</li><li>æ¿€æ´»è¿™ä¸ªç¯å¢ƒï¼Œå¯¹åº”çš„é…ç½®æ–‡ä»¶å°±ä¼šç”Ÿæ•ˆï¼Œæœ€ç»ˆç”Ÿæ•ˆçš„æ‰€æœ‰é…ç½®å¦‚ä¸‹<ul><li><code>application.properties</code> ä¸»é…ç½®æ–‡ä»¶ï¼Œä»»æ„æ—¶å€™éƒ½ä¼šç”Ÿæ•ˆ</li><li><code>application-{profile}.properties</code> æŒ‡å®šç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œæ¿€æ´»æŒ‡å®šç¯å¢ƒæ—¶ä¼šç”Ÿæ•ˆ</li><li>å¦‚æœå‘ç”Ÿäº†é…ç½®å†²çªï¼Œé»˜è®¤ä»¥æ¿€æ´»çš„ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸ºå‡†ï¼Œå³ <code>application-{profile}.properties</code> çš„ä¼˜å…ˆçº§é«˜äº <code>application.properties</code></li></ul></li></ul><div class="admonition warning"><p class="admonition-title">ç‰¹åˆ«æ³¨æ„</p><p><code>spring.profiles.default</code>ã€<code>spring.profiles.active</code>ã€<code>spring.profiles.include</code> çš„é…ç½®ä¿¡æ¯åªèƒ½å†™åœ¨ <code>application.properties</code> ä¸­ï¼Œå¦‚æœå†™åœ¨ <code>application-{profile}.properties</code> æ˜¯æ— æ•ˆçš„ã€‚</p></div><h2 id="å¤–éƒ¨åŒ–é…ç½®"><a href="#å¤–éƒ¨åŒ–é…ç½®" class="headerlink" title="å¤–éƒ¨åŒ–é…ç½®"></a>å¤–éƒ¨åŒ–é…ç½®</h2><div class="admonition note"><p class="admonition-title">çº¿ä¸Šåº”ç”¨å¦‚ä½•å¿«é€Ÿä¿®æ”¹é…ç½®ï¼Œå¹¶åº”ç”¨æœ€æ–°é…ç½®ï¼Ÿ</p><ul><li>SpringBoot ä½¿ç”¨ <code>é…ç½®ä¼˜å…ˆçº§</code> + <code>å¤–éƒ¨é…ç½®</code>ï¼Œå¯ä»¥ç®€åŒ–é…ç½®æ›´æ–°ã€ç®€åŒ–è¿ç»´ã€‚</li><li>åªéœ€è¦å¾€ Jar åº”ç”¨æ‰€åœ¨çš„æ–‡ä»¶å¤¹æ”¾ä¸€ä¸ª <code>application.properties</code> æœ€æ–°é…ç½®æ–‡ä»¶ï¼Œé‡å¯é¡¹ç›®åå°±èƒ½è‡ªåŠ¨åº”ç”¨æœ€æ–°çš„é…ç½®ä¿¡æ¯ï¼Œæ— éœ€é‡æ–°ç¼–è¯‘æ‰“åŒ…ä»£ç ã€‚</li></ul></div><h3 id="é…ç½®ä¼˜å…ˆçº§"><a href="#é…ç½®ä¼˜å…ˆçº§" class="headerlink" title="é…ç½®ä¼˜å…ˆçº§"></a>é…ç½®ä¼˜å…ˆçº§</h3><p>SpringBoot å…è®¸å°†é…ç½®å¤–éƒ¨åŒ–ï¼Œä»¥ä¾¿å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä½¿ç”¨ç›¸åŒçš„åº”ç”¨ç¨‹åºä»£ç ã€‚æ”¯æŒä½¿ç”¨å„ç§å¤–éƒ¨é…ç½®æºï¼ŒåŒ…æ‹¬ Properties æ–‡ä»¶ã€YAML æ–‡ä»¶ã€ç¯å¢ƒå˜é‡å’Œå‘½ä»¤è¡Œå‚æ•°ã€‚ä½¿ç”¨ <code>@Value</code> æ³¨è§£å¯ä»¥è·å–åˆ°é…ç½®å‚æ•°çš„å€¼ï¼Œä¹Ÿå¯ä»¥ç”¨ <code>@ConfigurationProperties</code> æ³¨è§£å°†æ‰€æœ‰å±æ€§ç»‘å®šåˆ° POJO ä¸­ã€‚</p><ul><li>ä»¥ä¸‹æ˜¯ SpringBoot å±æ€§æºçš„åŠ è½½é¡ºåºï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„å€¼ã€‚ç”±ä½åˆ°é«˜ï¼Œé«˜ä¼˜å…ˆçº§é…ç½®ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§é…ç½®ã€‚<ul><li>é»˜è®¤å±æ€§ï¼ˆé€šè¿‡ <code>SpringApplication.setDefaultProperties()</code> æŒ‡å®šçš„ï¼‰</li><li><code>@PropertySource</code> åŠ è½½æŒ‡å®šçš„é…ç½®ï¼ˆéœ€è¦å†™åœ¨ <code>@Configuration</code> ç±»ä¸Šæ‰å¯ç”Ÿæ•ˆï¼‰</li><li>é…ç½®æ–‡ä»¶ï¼ˆ<code>application.properties/yml</code> ç­‰ï¼‰</li><li><code>RandomValuePropertySource</code> æ”¯æŒçš„ <code>random.*</code> é…ç½®ï¼ˆå¦‚ <code>@Value("${random.int}")</code>ï¼‰</li><li>ç³»ç»Ÿç¯å¢ƒå˜é‡</li><li> Java ç³»ç»Ÿå±æ€§ï¼ˆ<code>System.getProperties()</code>ï¼‰</li><li>JNDI å±æ€§ï¼ˆæ¥è‡ª <code>java:comp/env</code>ï¼‰</li><li>ServletContext åˆå§‹åŒ–å‚æ•°</li><li> ServletConfig åˆå§‹åŒ–å‚æ•°</li><li> SPRING_APPLICATION_JSON å±æ€§ï¼ˆå†…ç½®åœ¨ç¯å¢ƒå˜é‡æˆ–ç³»ç»Ÿå±æ€§ä¸­çš„ JSONï¼‰</li><li>å‘½ä»¤è¡Œå‚æ•°</li><li>æµ‹è¯•å±æ€§ (<code>@SpringBootTest</code> è¿›è¡Œæµ‹è¯•æ—¶æŒ‡å®šçš„å±æ€§)</li><li> æµ‹è¯•ç±» <code>@TestPropertySource</code> æ³¨è§£</li><li> Devtools è®¾ç½®çš„å…¨å±€å±æ€§ï¼ˆ<code>$HOME/.config/spring-boot</code>ï¼‰</li></ul></li></ul><div class="admonition note"><p class="admonition-title">æ€»ç»“</p><p>é…ç½®ä¿¡æ¯å¯ä»¥å†™åœ¨å¾ˆå¤šä½ç½®ï¼Œå¸¸è§çš„ä¼˜å…ˆçº§é¡ºåºï¼š <code>å‘½ä»¤è¡Œ</code> &gt; <code>é…ç½®æ–‡ä»¶</code> &gt; <code>SpringApplication é…ç½®</code>ã€‚</p></div><ul><li>é…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§å¦‚ä¸‹ï¼ˆè¶Šå¾€åä¼˜å…ˆçº§è¶Šé«˜ï¼‰<ul><li>Jar åŒ…å†…çš„ <code>application.properties/yml</code></li><li>Jar åŒ…å†…çš„ <code>application-{profile}.properties/yml</code></li><li>Jar åŒ…å¤–çš„ <code>application.properties/yml</code></li><li>Jar åŒ…å¤–çš„ <code>application-{profile}.properties/yml</code></li></ul></li></ul><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li>ä¼˜å…ˆçº§é¡ºåºï¼š<code>åŒ…å¤–</code> &gt; <code>åŒ…å†…</code>ï¼› åŒçº§æƒ…å†µï¼š<code>Profiles é…ç½®</code> &gt; <code>Application é…ç½®</code></li><li>å»ºè®®ä½¿ç”¨åŒä¸€ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœ <code>xxx.properties</code> å’Œ <code>xxx.yml</code> åŒæ—¶å­˜åœ¨ï¼Œåˆ™ <code>xxx.properties</code> çš„ä¼˜å…ˆçº§æ›´é«˜</li><li>æ‰€æœ‰å‚æ•°å‡å¯ç”±å‘½ä»¤è¡Œä¼ å…¥ï¼Œä½¿ç”¨ <code>--å‚æ•°é¡¹=å‚æ•°å€¼</code> æ ¼å¼ï¼Œå‚æ•°å°†ä¼šè¢«æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œä¸”ä¼˜å…ˆçº§å¤§äºé…ç½®æ–‡ä»¶ã€‚æ¯”å¦‚ <code>java -jar app.jar --name="Spring"</code>ï¼Œå¯ä»¥ä½¿ç”¨ <code>@Value("${name}")</code> è·å–å‚æ•°å€¼ã€‚</li></ul></div><ul><li>å®é™…åº”ç”¨åœºæ™¯<ul><li>åŒ…å†…ï¼š <code>application.properties</code> <code>server.port=8000</code></li><li>åŒ…å†…ï¼š <code>application-dev.properties</code> <code>server.port=9000</code></li><li>åŒ…å¤–ï¼š <code>application.properties</code> <code>server.port=8001</code></li><li>åŒ…å¤–ï¼š <code>application-dev.properties</code> <code>server.port=9001</code></li><li>åº”ç”¨å¯åŠ¨åçš„ç«¯å£ï¼š å‘½ä»¤è¡Œ &gt; 9001 &gt; 8001 &gt; 9000 &gt; 8000</li></ul></li></ul><h3 id="å¤–éƒ¨é…ç½®è¯´æ˜"><a href="#å¤–éƒ¨é…ç½®è¯´æ˜" class="headerlink" title="å¤–éƒ¨é…ç½®è¯´æ˜"></a>å¤–éƒ¨é…ç½®è¯´æ˜</h3><p>SpringBoot åº”ç”¨åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¯»æ‰¾ <code>application.properties</code> å’Œ <code>application.yaml</code> é…ç½®æ–‡ä»¶ï¼Œç„¶åè¿›è¡ŒåŠ è½½ã€‚é…ç½®æ–‡ä»¶çš„åŠ è½½é¡ºåºå¦‚ä¸‹ï¼ˆè¶Šå¾€åä¼˜å…ˆçº§è¶Šé«˜ï¼‰ï¼š</p><ul><li><p>ç±»è·¯å¾„ï¼ˆå†…éƒ¨ï¼‰</p><ul><li>ç±»æ ¹è·¯å¾„ï¼ˆ<code>classpath</code>ï¼‰</li><li>ç±»æ ¹è·¯å¾„ï¼ˆ<code>classpath</code>ï¼‰ä¸‹çš„ <code>/config</code> å­ç›®å½•</li></ul></li><li><p>å½“å‰è·¯å¾„ï¼ˆJar åº”ç”¨æ‰€åœ¨çš„ä½ç½®ï¼‰</p><ul><li>å½“å‰è·¯å¾„</li><li>å½“å‰è·¯å¾„ä¸‹çš„ <code>/config</code> å­ç›®å½•</li><li><code>/config</code> ç›®å½•çš„ç›´æ¥å­ç›®å½•</li></ul></li></ul><h3 id="å¤–éƒ¨é…ç½®æ€»ç»“"><a href="#å¤–éƒ¨é…ç½®æ€»ç»“" class="headerlink" title="å¤–éƒ¨é…ç½®æ€»ç»“"></a>å¤–éƒ¨é…ç½®æ€»ç»“</h3><p><img data-src="../../../asset/2023/08/spring-boot3-study-20.png"></p><ul><li><p>æœ€ç»ˆæ•ˆæœï¼šä¼˜å…ˆçº§ç”±é«˜åˆ°ä½ï¼Œå‰é¢çš„è¦†ç›–åé¢çš„</p><ul><li><code>å‘½ä»¤è¡Œ</code> &gt; <code>åŒ…å¤– config ç›´æ¥å­ç›®å½•</code> &gt; <code>åŒ…å¤– config ç›®å½•</code> &gt; <code>åŒ…å¤–æ ¹ç›®å½•</code> &gt; <code>åŒ…å†…ç›®å½•</code></li><li>åŒçº§æ¯”è¾ƒ<ul><li><code>Profiles é…ç½®</code> &gt; <code>Application é…ç½®</code></li><li><code>Properties é…ç½®</code> &gt; <code>YAML é…ç½®</code></li></ul></li></ul></li><li><p>è§„å¾‹æ€»ç»“ï¼šæœ€å¤–å±‚çš„æœ€ä¼˜å…ˆ</p><ul><li>å‘½ä»¤è¡Œ &gt; æ‰€æœ‰æ–¹å¼</li><li>åŒ…å¤– &gt; åŒ…å†…</li><li><code>/config</code> å­ç›®å½• &gt; æ ¹ç›®å½•</li><li> Profiles é…ç½® &gt; Application é…ç½®</li><li>é…ç½®ä¸åŒå°±éƒ½ç”Ÿæ•ˆï¼ˆäº’è¡¥ï¼‰ï¼Œé…ç½®ç›¸åŒåˆ™é«˜ä¼˜å…ˆçº§ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®</li></ul></li></ul><h3 id="å¯¼å…¥é…ç½®ä½¿ç”¨"><a href="#å¯¼å…¥é…ç½®ä½¿ç”¨" class="headerlink" title="å¯¼å…¥é…ç½®ä½¿ç”¨"></a>å¯¼å…¥é…ç½®ä½¿ç”¨</h3><p>ä½¿ç”¨ <code>spring.config.import</code> å¯ä»¥å¯¼å…¥é¢å¤–çš„é…ç½®ã€‚</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.config.import</span>=<span class="string">classpath:/my.properties</span></span><br><span class="line"><span class="meta">my.property</span>=<span class="string">value</span></span><br></pre></td></tr></tbody></table></figure><p>æ— è®ºä»¥ä¸Šå†™æ³•çš„å…ˆåé¡ºåºæ˜¯æ€æ ·ï¼Œ<code>my.properties</code> çš„å€¼æ€»æ˜¯ä¼˜å…ˆäºç›´æ¥åœ¨æ–‡ä»¶ä¸­ç¼–å†™çš„ <code>my.property</code>ã€‚</p><h3 id="å±æ€§å ä½ç¬¦ä½¿ç”¨"><a href="#å±æ€§å ä½ç¬¦ä½¿ç”¨" class="headerlink" title="å±æ€§å ä½ç¬¦ä½¿ç”¨"></a>å±æ€§å ä½ç¬¦ä½¿ç”¨</h3><p>é…ç½®æ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨ <code>${name:default}</code> å½¢å¼å–å‡ºä¹‹å‰é…ç½®è¿‡çš„å€¼ã€‚</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">app.name</span>=<span class="string">MyApp</span></span><br><span class="line"><span class="meta">app.description</span>=<span class="string">${app.name} is a Spring Boot application written by ${username:Unknown}</span></span><br></pre></td></tr></tbody></table></figure><h2 id="JUnit-5-å•å…ƒæµ‹è¯•"><a href="#JUnit-5-å•å…ƒæµ‹è¯•" class="headerlink" title="JUnit 5 å•å…ƒæµ‹è¯•"></a>JUnit 5 å•å…ƒæµ‹è¯•</h2><h3 id="æ•´åˆå•å…ƒæµ‹è¯•"><a href="#æ•´åˆå•å…ƒæµ‹è¯•" class="headerlink" title="æ•´åˆå•å…ƒæµ‹è¯•"></a>æ•´åˆå•å…ƒæµ‹è¯•</h3><p>SpringBoot æä¾›ä¸€ç³»åˆ—æµ‹è¯•å·¥å…·é›†åŠæ³¨è§£æ–¹ä¾¿å¼€å‘è€…è¿›è¡Œæµ‹è¯•ã€‚<code>spring-boot-test</code> æä¾›æ ¸å¿ƒæµ‹è¯•èƒ½åŠ›ï¼Œ<code>spring-boot-test-autoconfigure</code> æä¾›æµ‹è¯•çš„ä¸€äº›è‡ªåŠ¨é…ç½®ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸€èˆ¬åªéœ€è¦å¯¼å…¥ <code>spring-boot-starter-test</code> å³å¯æ•´åˆå•å…ƒæµ‹è¯•ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><code>spring-boot-starter-test</code> é»˜è®¤æä¾›äº†ä»¥ä¸‹åº“ä¾›å¼€å‘è€…è¿›è¡Œå•å…ƒæµ‹è¯•ä½¿ç”¨ï¼š</p><ul><li><a href="https://junit.org/junit5/">JUnit 5</a></li><li><a href="https://docs.spring.io/spring-framework/docs/6.0.4/reference/html/testing.html#integration-testing">Spring Test</a></li><li><a href="https://assertj.github.io/doc/">AssertJ</a></li><li><a href="https://github.com/hamcrest/JavaHamcrest">Hamcrest</a></li><li><a href="https://site.mockito.org/">Mockito</a></li><li><a href="https://github.com/skyscreamer/JSONassert">JSONassert</a></li><li><a href="https://github.com/json-path/JsonPath">JsonPath</a></li></ul><h3 id="ä½¿ç”¨å•å…ƒæµ‹è¯•"><a href="#ä½¿ç”¨å•å…ƒæµ‹è¯•" class="headerlink" title="ä½¿ç”¨å•å…ƒæµ‹è¯•"></a>ä½¿ç”¨å•å…ƒæµ‹è¯•</h3><h4 id="ç»„ä»¶æµ‹è¯•"><a href="#ç»„ä»¶æµ‹è¯•" class="headerlink" title="ç»„ä»¶æµ‹è¯•"></a>ç»„ä»¶æµ‹è¯•</h4><p>ç›´æ¥é€šè¿‡ <code>@Autowired</code> æ³¨å…¥å®¹å™¨ä¸­çš„ç»„ä»¶å³å¯è¿›è¡Œæµ‹è¯•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assumptions.assumeTrue;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StandardTests</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> User userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserById</span><span class="params">()</span> </span>{</span><br><span class="line">        User user = userService.getById(<span class="number">1L</span>);</span><br><span class="line">        assumeTrue(user != <span class="keyword">null</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><div class="admonition warning"><p class="admonition-title">ç‰¹åˆ«æ³¨æ„</p><p>å•å…ƒæµ‹è¯•ç±»æ‰€åœ¨åŒ…çš„åç§°ï¼Œå¿…é¡»ä¸ä¸»å¯åŠ¨ç±»æ‰€åœ¨çš„åŒ…æˆ–è€…å…¶å­åŒ…çš„åç§°ç›¸åŒï¼›å¦åˆ™å•å…ƒæµ‹è¯•ç±»éœ€è¦é€šè¿‡ <code>@SpringBootTest</code> æ³¨è§£çš„ <code>class</code> å±æ€§æŒ‡å®šä¸»å¯åŠ¨ç±»ã€‚</p></div><h4 id="å¸¸ç”¨æ³¨è§£"><a href="#å¸¸ç”¨æ³¨è§£" class="headerlink" title="å¸¸ç”¨æ³¨è§£"></a>å¸¸ç”¨æ³¨è§£</h4><div class="admonition note"><p class="admonition-title">æç¤º</p><p>JUnit5 çš„æ³¨è§£ä¸ JUnit4 çš„æ³¨è§£æœ‰æ‰€åŒºåˆ«ï¼Œè¯¦ç»†è¯´æ˜è¯·å‚è€ƒ <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p></div><ul><li><code>@Test</code>: è¡¨ç¤ºæ–¹æ³•æ˜¯æµ‹è¯•æ–¹æ³•ã€‚ä½†æ˜¯ä¸ JUnit4 çš„ <code>@Test</code> ä¸åŒï¼Œå®ƒçš„èŒè´£éå¸¸å•ä¸€ä¸èƒ½å£°æ˜ä»»ä½•å±æ€§ï¼Œæ‹“å±•çš„æµ‹è¯•å°†ä¼šç”± Jupiter æä¾›é¢å¤–æµ‹è¯•</li><li><code>@ParameterizedTest</code>: è¡¨ç¤ºæ–¹æ³•æ˜¯å‚æ•°åŒ–æµ‹è¯•ï¼Œä¸‹é¢ä¼šæœ‰è¯¦ç»†ä»‹ç»</li><li><code>@RepeatedTest</code>: è¡¨ç¤ºæ–¹æ³•å¯é‡å¤æ‰§è¡Œï¼Œä¸‹é¢ä¼šæœ‰è¯¦ç»†ä»‹ç»</li><li><code>@DisplayName</code>: ä¸ºæµ‹è¯•ç±»æˆ–è€…æµ‹è¯•æ–¹æ³•è®¾ç½®å±•ç¤ºåç§°</li><li><code>@BeforeEach</code>: è¡¨ç¤ºåœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•ä¹‹å‰æ‰§è¡Œ</li><li><code>@AfterEach</code>: è¡¨ç¤ºåœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•ä¹‹åæ‰§è¡Œ</li><li><code>@BeforeAll</code>: è¡¨ç¤ºåœ¨æ‰€æœ‰å•å…ƒæµ‹è¯•ä¹‹å‰æ‰§è¡Œ</li><li><code>@AfterAll</code>: è¡¨ç¤ºåœ¨æ‰€æœ‰å•å…ƒæµ‹è¯•ä¹‹åæ‰§è¡Œ</li><li><code>@Tag</code>: è¡¨ç¤ºå•å…ƒæµ‹è¯•ç±»åˆ«ï¼Œç±»ä¼¼äº JUnit4 ä¸­çš„ <code>@Categories</code></li><li><code>@Disabled</code>: è¡¨ç¤ºæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•ä¸æ‰§è¡Œï¼Œç±»ä¼¼äº JUnit4 ä¸­çš„ <code>@Ignore</code></li><li><code>@Timeout</code>: è¡¨ç¤ºæµ‹è¯•æ–¹æ³•è¿è¡Œå¦‚æœè¶…è¿‡äº†æŒ‡å®šæ—¶é—´å°†ä¼šè¿”å›é”™è¯¯</li><li><code>@ExtendWith</code>: ä¸ºæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•æä¾›æ‰©å±•ç±»å¼•ç”¨ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.fail;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assumptions.assumeTrue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.AfterAll;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.AfterEach;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.BeforeAll;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.BeforeEach;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Disabled;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StandardTests</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeAll</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initAll</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeEach</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DisplayName("ğŸ˜±")</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">succeedingTest</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">failingTest</span><span class="params">()</span> </span>{</span><br><span class="line">        fail(<span class="string">"a failing test"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@Disabled("for demonstration purposes")</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">skippedTest</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">abortedTest</span><span class="params">()</span> </span>{</span><br><span class="line">        assumeTrue(<span class="string">"abc"</span>.contains(<span class="string">"Z"</span>));</span><br><span class="line">        fail(<span class="string">"test should have been aborted"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterEach</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">tearDown</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterAll</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">tearDownAll</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="å¸¸ç”¨æ–­è¨€"><a href="#å¸¸ç”¨æ–­è¨€" class="headerlink" title="å¸¸ç”¨æ–­è¨€"></a>å¸¸ç”¨æ–­è¨€</h4><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td> assertEquals</td><td> åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æˆ–ä¸¤ä¸ªåŸå§‹ç±»å‹æ˜¯å¦ç›¸ç­‰</td></tr><tr><td> assertNotEquals</td><td> åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æˆ–ä¸¤ä¸ªåŸå§‹ç±»å‹æ˜¯å¦ä¸ç›¸ç­‰</td></tr><tr><td> assertSame</td><td> åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</td></tr><tr><td> assertNotSame</td><td> åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦æŒ‡å‘ä¸åŒçš„å¯¹è±¡</td></tr><tr><td> assertTrue</td><td> åˆ¤æ–­ç»™å®šçš„å¸ƒå°”å€¼æ˜¯å¦ä¸º true</td></tr><tr><td>assertFalse</td><td> åˆ¤æ–­ç»™å®šçš„å¸ƒå°”å€¼æ˜¯å¦ä¸º false</td></tr><tr><td>assertNull</td><td> åˆ¤æ–­ç»™å®šçš„å¯¹è±¡å¼•ç”¨æ˜¯å¦ä¸º null</td></tr><tr><td>assertNotNull</td><td> åˆ¤æ–­ç»™å®šçš„å¯¹è±¡å¼•ç”¨æ˜¯å¦ä¸ä¸º null</td></tr><tr><td>assertArrayEquals</td><td> æ•°ç»„æ–­è¨€</td></tr><tr><td> assertAll</td><td> ç»„åˆæ–­è¨€</td></tr><tr><td> assertThrows</td><td> å¼‚å¸¸æ–­è¨€</td></tr><tr><td> assertTimeout</td><td> è¶…æ—¶æ–­è¨€</td></tr><tr><td> fail</td><td> å¿«é€Ÿå¤±è´¥</td></tr></tbody></table><h4 id="åµŒå¥—æµ‹è¯•"><a href="#åµŒå¥—æµ‹è¯•" class="headerlink" title="åµŒå¥—æµ‹è¯•"></a>åµŒå¥—æµ‹è¯•</h4><p>JUnit 5 å¯ä»¥é€šè¿‡ Java ä¸­çš„å†…éƒ¨ç±»å’Œ <code>@Nested</code> æ³¨è§£å®ç°åµŒå¥—æµ‹è¯•ï¼Œä»è€Œå¯ä»¥æ›´å¥½çš„æŠŠç›¸å…³çš„æµ‹è¯•æ–¹æ³•ç»„ç»‡åœ¨ä¸€èµ·ã€‚åœ¨å†…éƒ¨ç±»ä¸­å¯ä»¥ä½¿ç”¨ <code>@BeforeEach</code> å’Œ <code>@AfterEach</code> æ³¨è§£ï¼Œè€Œä¸”åµŒå¥—çš„å±‚æ¬¡æ²¡æœ‰é™åˆ¶ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.clay.boot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.BeforeEach;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.DisplayName;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Nested;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.EmptyStackException;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertEquals;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertFalse;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertThrows;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertTrue;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@DisplayName("A stack")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestingAStack</span> </span>{</span><br><span class="line"></span><br><span class="line">    Stack&lt;Object&gt; stack;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@DisplayName("is instantiated with new Stack()")</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">isInstantiatedWithNew</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nested</span></span><br><span class="line">    <span class="meta">@DisplayName("when new")</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">WhenNew</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="meta">@BeforeEach</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">createNewStack</span><span class="params">()</span> </span>{</span><br><span class="line">            stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Test</span></span><br><span class="line">        <span class="meta">@DisplayName("is empty")</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">isEmpty</span><span class="params">()</span> </span>{</span><br><span class="line">            assertTrue(stack.isEmpty());</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Test</span></span><br><span class="line">        <span class="meta">@DisplayName("throws EmptyStackException when popped")</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">throwsExceptionWhenPopped</span><span class="params">()</span> </span>{</span><br><span class="line">            assertThrows(EmptyStackException.class, stack::pop);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Test</span></span><br><span class="line">        <span class="meta">@DisplayName("throws EmptyStackException when peeked")</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">throwsExceptionWhenPeeked</span><span class="params">()</span> </span>{</span><br><span class="line">            assertThrows(EmptyStackException.class, stack::peek);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Nested</span></span><br><span class="line">        <span class="meta">@DisplayName("after pushing an element")</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">AfterPushing</span> </span>{</span><br><span class="line"></span><br><span class="line">            String anElement = <span class="string">"an element"</span>;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@BeforeEach</span></span><br><span class="line">            <span class="function"><span class="keyword">void</span> <span class="title">pushAnElement</span><span class="params">()</span> </span>{</span><br><span class="line">                stack.push(anElement);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Test</span></span><br><span class="line">            <span class="meta">@DisplayName("it is no longer empty")</span></span><br><span class="line">            <span class="function"><span class="keyword">void</span> <span class="title">isNotEmpty</span><span class="params">()</span> </span>{</span><br><span class="line">                assertFalse(stack.isEmpty());</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Test</span></span><br><span class="line">            <span class="meta">@DisplayName("returns the element when popped and is empty")</span></span><br><span class="line">            <span class="function"><span class="keyword">void</span> <span class="title">returnElementWhenPopped</span><span class="params">()</span> </span>{</span><br><span class="line">                assertEquals(anElement, stack.pop());</span><br><span class="line">                assertTrue(stack.isEmpty());</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Test</span></span><br><span class="line">            <span class="meta">@DisplayName("returns the element when peeked but remains not empty")</span></span><br><span class="line">            <span class="function"><span class="keyword">void</span> <span class="title">returnElementWhenPeeked</span><span class="params">()</span> </span>{</span><br><span class="line">                assertEquals(anElement, stack.peek());</span><br><span class="line">                assertFalse(stack.isEmpty());</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="å‚æ•°åŒ–æµ‹è¯•"><a href="#å‚æ•°åŒ–æµ‹è¯•" class="headerlink" title="å‚æ•°åŒ–æµ‹è¯•"></a>å‚æ•°åŒ–æµ‹è¯•</h4><p>å‚æ•°åŒ–æµ‹è¯•æ˜¯ JUnit5 å¾ˆé‡è¦çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒä½¿å¾—ç”¨ä¸åŒçš„å‚æ•°å¤šæ¬¡è¿è¡Œæµ‹è¯•æˆä¸ºäº†å¯èƒ½ï¼Œä¹Ÿä¸ºå•å…ƒæµ‹è¯•å¸¦æ¥è®¸å¤šä¾¿åˆ©ã€‚åˆ©ç”¨ <code>@ValueSource</code> ç­‰æ³¨è§£ï¼ŒæŒ‡å®šä¼ å…¥çš„å‚æ•°ï¼Œå°†å¯ä»¥ä½¿ç”¨ä¸åŒçš„å‚æ•°è¿›è¡Œå¤šæ¬¡å•å…ƒæµ‹è¯•ï¼Œè€Œä¸éœ€è¦æ¯æ–°å¢ä¸€ä¸ªå‚æ•°å°±æ–°å¢ä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œçœå»äº†å¾ˆå¤šå†—ä½™ä»£ç ã€‚</p><ul><li><code>@ValueSource</code>: ä¸ºå‚æ•°åŒ–æµ‹è¯•æŒ‡å®šå…¥å‚æ¥æºï¼Œæ”¯æŒå…«å¤§åŸºç¡€ç±»ä»¥åŠ String ç±»å‹ï¼ŒClass ç±»å‹</li><li><code>@NullSource</code>: è¡¨ç¤ºä¸ºå‚æ•°åŒ–æµ‹è¯•æä¾›ä¸€ä¸ª <code>null</code> çš„å…¥å‚</li><li><code>@EnumSource</code>: è¡¨ç¤ºä¸ºå‚æ•°åŒ–æµ‹è¯•æä¾›ä¸€ä¸ªæšä¸¾å…¥å‚</li><li><code>@CsvFileSource</code>ï¼šè¡¨ç¤ºè¯»å–æŒ‡å®š CSV æ–‡ä»¶å†…å®¹ä½œä¸ºå‚æ•°åŒ–æµ‹è¯•å…¥å‚</li><li><code>@MethodSource</code>ï¼šè¡¨ç¤ºè¯»å–æŒ‡å®šæ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºå‚æ•°åŒ–æµ‹è¯•å…¥å‚ï¼ˆæ³¨æ„æ–¹æ³•çš„è¿”å›å€¼éœ€è¦æ˜¯ä¸€ä¸ªæµï¼‰</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Assertions;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.DisplayName;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.params.ParameterizedTest;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.params.provider.MethodSource;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.params.provider.ValueSource;</span><br><span class="line"><span class="keyword">import</span> org.junit.platform.commons.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@DisplayName("Input Param")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestingInputParam</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ParameterizedTest</span></span><br><span class="line">    <span class="meta">@ValueSource(strings = {"one", "two", "three"})</span></span><br><span class="line">    <span class="meta">@DisplayName("å‚æ•°åŒ–æµ‹è¯•")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">parameterizedTest1</span><span class="params">(String string)</span> </span>{</span><br><span class="line">        System.out.println(string);</span><br><span class="line">        Assertions.assertTrue(StringUtils.isNotBlank(string));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ParameterizedTest</span></span><br><span class="line">    <span class="meta">@MethodSource("method")</span></span><br><span class="line">    <span class="meta">@DisplayName("æ–¹æ³•æ¥æºå‚æ•°æµ‹è¯•")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWithExplicitLocalMethodSource</span><span class="params">(String name)</span> </span>{</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        Assertions.assertNotNull(name);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> Stream&lt;String&gt; <span class="title">method</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> Stream.of(<span class="string">"apple"</span>, <span class="string">"banana"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦è®°å½• SpringBoot 3 çš„åŸºç¡€æ•™ç¨‹ï¼ŒåŒ…æ‹¬ Banner è‡ªå®šä¹‰ ï¼ŒProfiles ç¯å¢ƒéš”ç¦»ã€å¤–éƒ¨é…ç½®ã€JUnit 5 å•å…ƒæµ‹è¯•ç­‰å†…å®¹ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å¾®æœåŠ¡" scheme="https://www.techgrow.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot é¡¹ç›®å°† Logback æ—¥å¿—å†™å…¥æ•°æ®åº“</title>
    <link href="https://www.techgrow.cn/posts/5217ca97.html"/>
    <id>https://www.techgrow.cn/posts/5217ca97.html</id>
    <published>2023-07-29T15:12:42.000Z</published>
    <updated>2023-07-29T15:12:42.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡ä¸»è¦ä»‹ç» SpringBoot é¡¹ç›®å¦‚ä½•å°† Logback æ—¥å¿—å†™å…¥ MySQL æ•°æ®åº“ï¼Œä½¿ç”¨å„ç»„ä»¶çš„ç‰ˆæœ¬å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç»„ä»¶</th><th>ç‰ˆæœ¬</th></tr></thead><tbody><tr><td> SpringBoot</td><td>2.2.6</td></tr><tr><td>Logback</td><td>1.2.3</td></tr><tr><td>Druid</td><td>1.1.9</td></tr></tbody></table><span id="more"></span><h2 id="åˆ›å»ºæ•°æ®åº“è¡¨"><a href="#åˆ›å»ºæ•°æ®åº“è¡¨" class="headerlink" title="åˆ›å»ºæ•°æ®åº“è¡¨"></a>åˆ›å»ºæ•°æ®åº“è¡¨</h2><p>é¦–å…ˆæ‰‹åŠ¨åˆ›å»º Logback æ‰€éœ€çš„ä¸‰å¼ æ•°æ®åº“è¡¨ï¼Œåˆ†åˆ«æ˜¯ <code>logging_event</code>ã€<code>logging_event_property</code>ã€<code>logging_event_exception</code>ï¼Œå¯ä»¥é€šè¿‡ä¸‹è¿°çš„æ–¹å¼æ‰¾åˆ°åˆ›å»ºæ•°æ®åº“è¡¨çš„ SQL è„šæœ¬æ–‡ä»¶ã€‚</p><p><img data-src="../../../asset/2023/07/springboot-logback-db-1.png"></p><h2 id="æ•°æ®æºé…ç½®"><a href="#æ•°æ®æºé…ç½®" class="headerlink" title="æ•°æ®æºé…ç½®"></a>æ•°æ®æºé…ç½®</h2><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/demo?characterEncoding=utf8&amp;autoReconnect=true&amp;useSSL=false&amp;useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&amp;zeroDateTimeBehavior=CONVERT_TO_NULL</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Logback-é…ç½®"><a href="#Logback-é…ç½®" class="headerlink" title="Logback é…ç½®"></a>Logback é…ç½®</h2><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ—¥å¿—çº§åˆ«ä»ä½åˆ°é«˜åˆ†ä¸ºTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATALï¼Œå¦‚æœè®¾ç½®ä¸ºWARNï¼Œåˆ™ä½äºWARNçš„ä¿¡æ¯éƒ½ä¸ä¼šè¾“å‡º --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- scan:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡ä»¶å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrue --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- scanPeriod:è®¾ç½®ç›‘æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’ã€‚å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±æ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- de<span class="doctag">bug:</span>å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">scan</span>=<span class="string">"true"</span> <span class="attr">scanPeriod</span>=<span class="string">"60 seconds"</span> <span class="attr">debug</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- JMX æ”¯æŒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jmxConfigurator</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ—¥å¿—ä¸Šä¸‹æ–‡åç§°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">contextName</span>&gt;</span>logback<span class="tag">&lt;/<span class="name">contextName</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ—¥å¿—æ–‡ä»¶çš„ç›®å½•è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"log.path"</span> <span class="attr">value</span>=<span class="string">"/tmp/log/demo"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ•°æ®åº“çš„è¿æ¥å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"DATA_SOURCE"</span> <span class="attr">source</span>=<span class="string">"spring.datasource.type"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"JDBC_URL"</span> <span class="attr">source</span>=<span class="string">"spring.datasource.druid.url"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"USER_NAME"</span> <span class="attr">source</span>=<span class="string">"spring.datasource.druid.username"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"PASSWORD"</span> <span class="attr">source</span>=<span class="string">"spring.datasource.druid.password"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"DRIVER_CLASS_NAME"</span> <span class="attr">source</span>=<span class="string">"spring.datasource.druid.driver-class-name"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å½©è‰²æ—¥å¿—ä¾èµ–çš„æ¸²æŸ“ç±»ä¸å½©è‰²æ—¥å¿—æ ¼å¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">conversionRule</span> <span class="attr">conversionWord</span>=<span class="string">"clr"</span> <span class="attr">converterClass</span>=<span class="string">"org.springframework.boot.logging.logback.ColorConverter"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">conversionRule</span> <span class="attr">conversionWord</span>=<span class="string">"wex"</span> <span class="attr">converterClass</span>=<span class="string">"org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">conversionRule</span> <span class="attr">conversionWord</span>=<span class="string">"wEx"</span> <span class="attr">converterClass</span>=<span class="string">"org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"CONSOLE_LOG_PATTERN"</span> <span class="attr">value</span>=<span class="string">"${CONSOLE_LOG_PATTERN:-%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è¾“å‡ºåˆ°æ§åˆ¶å°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"CONSOLE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ­¤æ—¥å¿—appenderæ˜¯ä¸ºå¼€å‘ä½¿ç”¨ï¼Œåªé…ç½®æœ€åº•çº§åˆ«ï¼Œæ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çº§åˆ«æ˜¯å¤§äºæˆ–ç­‰äºæ­¤çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.ThresholdFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Pattern</span>&gt;</span>${CONSOLE_LOG_PATTERN}<span class="tag">&lt;/<span class="name">Pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ—¶é—´æ»šåŠ¨è¾“å‡ºlevelä¸ºDEBUGæ—¥å¿— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"DEBUG_FILE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„åŠæ–‡ä»¶å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>${log.path}/log_debug.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºæ ¼å¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ—¥å¿—å½’æ¡£ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>${log.path}/debug/log-debug-%d{yyyy-MM-dd}.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>500MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­¤æ—¥å¿—æ–‡ä»¶åªè®°å½•DEBUGçº§åˆ«çš„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.LevelFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ—¶é—´æ»šåŠ¨è¾“å‡ºlevelä¸ºINFOæ—¥å¿— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"INFO_FILE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„åŠæ–‡ä»¶å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>${log.path}/log_info.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºæ ¼å¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ¯å¤©æ—¥å¿—å½’æ¡£è·¯å¾„ä»¥åŠæ ¼å¼ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>${log.path}/info/log-info-%d{yyyy-MM-dd}.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>500MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­¤æ—¥å¿—æ–‡ä»¶åªè®°å½•INFOçº§åˆ«çš„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.LevelFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ—¶é—´æ»šåŠ¨è¾“å‡ºlevelä¸ºWARNæ—¥å¿— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"WARN_FILE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„åŠæ–‡ä»¶å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>${log.path}/log_warn.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºæ ¼å¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>${log.path}/warn/log-warn-%d{yyyy-MM-dd}.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>500MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­¤æ—¥å¿—æ–‡ä»¶åªè®°å½•WARNçº§åˆ«çš„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.LevelFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>WARN<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ—¶é—´æ»šåŠ¨è¾“å‡ºlevelä¸ºERRORæ—¥å¿— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"ERROR_FILE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„åŠæ–‡ä»¶å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>${log.path}/log_error.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºæ ¼å¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>${log.path}/error/log-error-%d{yyyy-MM-dd}.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>500MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­¤æ—¥å¿—æ–‡ä»¶åªè®°å½•ERRORçº§åˆ«çš„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.LevelFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¾“å‡ºåˆ°æ•°æ®åº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"DB"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.db.DBAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connectionSource</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.db.DataSourceConnectionSource"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">class</span>=<span class="string">"${DATA_SOURCE}"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">url</span>&gt;</span>${JDBC_URL}<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">username</span>&gt;</span>${USER_NAME}<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">password</span>&gt;</span>${PASSWORD}<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">driverClassName</span>&gt;</span>${DRIVER_CLASS_NAME}<span class="tag">&lt;/<span class="name">driverClassName</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">connectionSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"DB"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"CONSOLE"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"DEBUG_FILE"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"INFO_FILE"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"WARN_FILE"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"ERROR_FILE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>åœ¨ä¸Šé¢çš„é…ç½®å†…å®¹ä¸­ï¼Œæœ€é‡ç‚¹çš„æ˜¯é…ç½® MySQL æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯å’Œ <code>DBAppender</code>ï¼Œå¹¶å¼•ç”¨ <code>DBAppender</code>ï¼Œå¦‚ä¸‹æ‰€ç¤º </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ•°æ®åº“çš„è¿æ¥å±æ€§ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"DATA_SOURCE"</span> <span class="attr">source</span>=<span class="string">"spring.datasource.type"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"JDBC_URL"</span> <span class="attr">source</span>=<span class="string">"spring.datasource.druid.url"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"USER_NAME"</span> <span class="attr">source</span>=<span class="string">"spring.datasource.druid.username"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"PASSWORD"</span> <span class="attr">source</span>=<span class="string">"spring.datasource.druid.password"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"DRIVER_CLASS_NAME"</span> <span class="attr">source</span>=<span class="string">"spring.datasource.druid.driver-class-name"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è¾“å‡ºåˆ°æ•°æ®åº“ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"DB"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.db.DBAppender"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">connectionSource</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.db.DataSourceConnectionSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">class</span>=<span class="string">"${DATA_SOURCE}"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>${JDBC_URL}<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">username</span>&gt;</span>${USER_NAME}<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">password</span>&gt;</span>${PASSWORD}<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">driverClassName</span>&gt;</span>${DRIVER_CLASS_NAME}<span class="tag">&lt;/<span class="name">driverClassName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">connectionSource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼•ç”¨ DBAppender --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"DB"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"CONSOLE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"DEBUG_FILE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"INFO_FILE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"WARN_FILE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"ERROR_FILE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>å¦‚æœåªå¸Œæœ›è®°å½•æŸä¸ªåŒ…ï¼ˆå¦‚ <code>com.clay.demo</code>ï¼‰çš„é”™è¯¯æ—¥å¿—ä¿¡æ¯åˆ° MySQL æ•°æ®åº“ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹é…ç½®å†…å®¹ </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¾“å‡ºåˆ°æ•°æ®åº“ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"DB"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.db.DBAppender"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">connectionSource</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.db.DataSourceConnectionSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">class</span>=<span class="string">"${DATA_SOURCE}"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>${JDBC_URL}<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">username</span>&gt;</span>${USER_NAME}<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">password</span>&gt;</span>${PASSWORD}<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">driverClassName</span>&gt;</span>${DRIVER_CLASS_NAME}<span class="tag">&lt;/<span class="name">driverClassName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">connectionSource</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ•°æ®åº“åªè®°å½•ERRORçº§åˆ«çš„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.LevelFilter"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šæŸä¸ªåŒ…çš„æ—¥å¿—è®°å½•æ–¹å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.clay.demo"</span> <span class="attr">value</span>=<span class="string">"ERROR"</span>  <span class="attr">additivity</span>=<span class="string">"false"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"DB"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"CONSOLE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"ERROR_FILE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"CONSOLE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"DEBUG_FILE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"INFO_FILE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"WARN_FILE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"ERROR_FILE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogbackTest</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger= LoggerFactory.getLogger(LogbackTest.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">LogToSql</span><span class="params">()</span></span>{</span><br><span class="line">        logger.debug(<span class="string">"æ•°æ®åº“æ—¥å¿— Debug"</span>);</span><br><span class="line">        logger.info(<span class="string">"æ•°æ®åº“æ—¥å¿— Info"</span>);</span><br><span class="line">        logger.warn(<span class="string">"æ•°æ®åº“æ—¥å¿— Warn"</span>);</span><br><span class="line">        logger.error(<span class="string">"æ•°æ®åº“æ—¥å¿— Error"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>Logback æˆåŠŸå°†æ—¥å¿—ä¿¡æ¯å†™å…¥ MySQL æ•°æ®åº“åï¼Œ<code>logging_event</code> è¡¨çš„æ•°æ®å¦‚ä¸‹ï¼š</p></blockquote><p><img data-src="../../../asset/2023/07/springboot-logback-db-2.png"></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://www.freesion.com/article/3147233431/">Logback å°†æ—¥å¿—å†™åˆ° MySQL æ•°æ®åº“</a><br><a href="https://blog.csdn.net/sinat_38628764/article/details/121748560">SpringBoot é¡¹ç›®å°† Logback å†™å…¥æ•°æ®åº“</a><br><a href="https://blog.csdn.net/philip502/article/details/105268526/">Logback æŒ‡å®šæŸä¸€åŒ…æˆ–è€…ç±»ä¸‹æ—¥å¿—è®°å½•åˆ°ä¸åŒæ–‡ä»¶ä¸­</a></p>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç» SpringBoot é¡¹ç›®å¦‚ä½•å°† Logback æ—¥å¿—å†™å…¥ MySQL æ•°æ®åº“ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å¾®æœåŠ¡" scheme="https://www.techgrow.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å…­åœºæ™¯æ•´åˆ</title>
    <link href="https://www.techgrow.cn/posts/b6463873.html"/>
    <id>https://www.techgrow.cn/posts/b6463873.html</id>
    <published>2023-07-22T15:12:42.000Z</published>
    <updated>2023-07-22T15:12:42.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å¤§çº²"><a href="#å¤§çº²" class="headerlink" title="å¤§çº²"></a>å¤§çº²</h2><ul><li><a href="/posts/79ae6590.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸€å¿«é€Ÿå…¥é—¨</a></li><li><a href="/posts/e7a270a6.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äºŒå¸¸è§„é…ç½®</a></li><li><a href="/posts/12fb0f17.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸‰ Web å¼€å‘</a></li><li><a href="/posts/223fd9f.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å›› Web å¼€å‘</a></li><li><a href="/posts/1dfe3056.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äº”æ ¸å¿ƒåŸç†</a></li><li><a href="/posts/b6463873.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å…­åœºæ™¯æ•´åˆ</a></li><li><a href="/posts/6bcf09.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸ƒåŸºç¡€ç‰¹æ€§</a></li></ul><h2 id="SSM-æ•´åˆ"><a href="#SSM-æ•´åˆ" class="headerlink" title="SSM æ•´åˆ"></a>SSM æ•´åˆ</h2><p>SpringBoot æ•´åˆ Springã€Spring MVCã€MyBatisï¼Œå®ç°å¯¹ MySQL æ•°æ®åº“çš„è®¿é—®ã€‚æœ¬ç« èŠ‚æ‰€éœ€çš„æ¡ˆä¾‹ä»£ç ï¼Œå¯ä»¥ç›´æ¥ä» <a href="https://github.com/rqh656418510/spring-cloud-share/tree/main/spring-boot-3/spring-boot-3-study">GitHub</a> ä¸‹è½½å¯¹åº”ç« èŠ‚ <code>spring-boot3-05</code>ã€‚</p><span id="more"></span><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p><img data-src="../../../asset/2023/07/spring-boot3-study-19.png"></p><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><h4 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--- åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `demo` <span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- åˆ›å»ºæ•°æ®åº“è¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t_user`</span><br><span class="line">(</span><br><span class="line">    `id`         <span class="type">BIGINT</span>(<span class="number">20</span>)   <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">'ç¼–å·'</span>,</span><br><span class="line">    `login_name` <span class="type">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">'ç”¨æˆ·åç§°'</span> <span class="keyword">COLLATE</span> <span class="string">'utf8_general_ci'</span>,</span><br><span class="line">    `nick_name`  <span class="type">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">'ç”¨æˆ·æ˜µç§°'</span> <span class="keyword">COLLATE</span> <span class="string">'utf8_general_ci'</span>,</span><br><span class="line">    `passwd`     <span class="type">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">'ç”¨æˆ·å¯†ç '</span> <span class="keyword">COLLATE</span> <span class="string">'utf8_general_ci'</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">--- æ’å…¥æµ‹è¯•æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(login_name, nick_name, passwd) <span class="keyword">VALUES</span> (<span class="string">'zhangsan'</span>, <span class="string">'å¼ ä¸‰'</span>, <span class="string">'123456'</span>);</span><br></pre></td></tr></tbody></table></figure><h4 id="å¼•å…¥ä¾èµ–é¡¹"><a href="#å¼•å…¥ä¾èµ–é¡¹" class="headerlink" title="å¼•å…¥ä¾èµ–é¡¹"></a>å¼•å…¥ä¾èµ–é¡¹</h4><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.33<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºé…ç½®æ–‡ä»¶"></a>åˆ›å»ºé…ç½®æ–‡ä»¶</h4><p>åœ¨é¡¹ç›®çš„ <code>/src/main/resources</code> ç›®å½•ä¸‹ï¼Œåˆ›å»º <code>application.properties</code> é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ•°æ®æºå’Œ MyBatis çš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚ä¸‹ï¼‰ã€‚</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®æºé…ç½®</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.type</span>=<span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/demo?characterEncoding=utf8&amp;autoReconnect=true&amp;useSSL=false&amp;useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># æŒ‡å®šæ˜ å°„æ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line"><span class="meta">mybatis.mapper-locations</span>=<span class="string">classpath:/mapper/*.xml</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># å¼€å¯é©¼å³°å‘½åæ˜ å°„</span></span><br><span class="line"><span class="meta">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br></pre></td></tr></tbody></table></figure><h4 id="åˆ›å»ºæ˜ å°„æ–‡ä»¶"><a href="#åˆ›å»ºæ˜ å°„æ–‡ä»¶" class="headerlink" title="åˆ›å»ºæ˜ å°„æ–‡ä»¶"></a>åˆ›å»ºæ˜ å°„æ–‡ä»¶</h4><p>åœ¨é¡¹ç›®çš„ <code>/src/main/resources/mapper</code> ç›®å½•ä¸‹ï¼Œåˆ›å»º <code>UserMapper.xml</code> æ˜ å°„æ–‡ä»¶ï¼ˆå¦‚ä¸‹ï¼‰ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.clay.boot.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getById"</span> <span class="attr">resultType</span>=<span class="string">"com.clay.boot.domain.User"</span>&gt;</span></span><br><span class="line">        select id, login_name, nick_name, passwd</span><br><span class="line">        from `t_user`</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="æ¡ˆä¾‹ä»£ç "><a href="#æ¡ˆä¾‹ä»£ç " class="headerlink" title="æ¡ˆä¾‹ä»£ç "></a>æ¡ˆä¾‹ä»£ç </h3><h4 id="åˆ›å»ºå®ä½“ç±»"><a href="#åˆ›å»ºå®ä½“ç±»" class="headerlink" title="åˆ›å»ºå®ä½“ç±»"></a>åˆ›å»ºå®ä½“ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¼–å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String loginName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·æ˜µç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String nickName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·å¯†ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String passwd;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="åˆ›å»ºæ˜ å°„æ¥å£"><a href="#åˆ›å»ºæ˜ å°„æ¥å£" class="headerlink" title="åˆ›å»ºæ˜ å°„æ¥å£"></a>åˆ›å»ºæ˜ å°„æ¥å£</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="åˆ›å»ºæœåŠ¡ç±»"><a href="#åˆ›å»ºæœåŠ¡ç±»" class="headerlink" title="åˆ›å»ºæœåŠ¡ç±»"></a>åˆ›å»ºæœåŠ¡ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getById</span><span class="params">(Long id)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> userMapper.getById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="åˆ›å»ºæ§åˆ¶å™¨ç±»"><a href="#åˆ›å»ºæ§åˆ¶å™¨ç±»" class="headerlink" title="åˆ›å»ºæ§åˆ¶å™¨ç±»"></a>åˆ›å»ºæ§åˆ¶å™¨ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping("/user/{id}")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">(<span class="meta">@PathVariable("id")</span> Long id)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> userService.getById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="åˆ›å»ºä¸»å¯åŠ¨ç±»"><a href="#åˆ›å»ºä¸»å¯åŠ¨ç±»" class="headerlink" title="åˆ›å»ºä¸»å¯åŠ¨ç±»"></a>åˆ›å»ºä¸»å¯åŠ¨ç±»</h4><p>è¿™é‡Œéœ€è¦ä½¿ç”¨ <code>@MapperScan</code> æ³¨è§£ï¼ŒæŒ‡å®š <code>Mapper</code> æ¥å£çš„åŒ…æ‰«æè·¯å¾„ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºç‹¬ç«‹çš„ MyBatis é…ç½®ç±»ï¼ˆå¦‚ <code>MyBatisConfiguration</code>ï¼‰ï¼Œç„¶åå°† <code>@MapperScan</code> æ³¨è§£æ ‡æ³¨åœ¨é…ç½®ç±»ä¸Šã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = "com.clay.boot.mapper")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(MainApplication.class, args);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="è‡ªåŠ¨é…ç½®åŸç†"><a href="#è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†"></a>è‡ªåŠ¨é…ç½®åŸç†</h3><h4 id="SSM-æ•´åˆæµç¨‹æ€»ç»“"><a href="#SSM-æ•´åˆæµç¨‹æ€»ç»“" class="headerlink" title="SSM æ•´åˆæµç¨‹æ€»ç»“"></a>SSM æ•´åˆæµç¨‹æ€»ç»“</h4><ul><li>1ã€å¯¼å…¥ <code>mybatis-spring-boot-starter</code></li><li>2ã€é…ç½®æ•°æ®æºä¿¡æ¯</li><li> 3ã€é…ç½® MyBatis çš„ Mapper æ¥å£æ‰«æä¸ XML æ˜ å°„æ–‡ä»¶æ‰«æ</li><li> 4ã€ç¼–å†™ Beanã€Mapperï¼Œåˆ›å»º SQL æ˜ å°„æ–‡ä»¶ï¼ˆXMLï¼‰ï¼Œç¼–å†™ SQL è¯­å¥æ‰§è¡Œ CRUD æ“ä½œï¼Œäº‹åŠ¡ç­‰æ“ä½œä¾ç„¶å’Œ Spring ä¸­çš„ç”¨æ³•ä¸€æ ·</li><li> 5ã€å®ç°çš„æ•ˆæœ<br>  i. æ‰€æœ‰ SQL éƒ½å¯ä»¥å†™åœ¨ XML ä¸­<br>  ii. æ‰€æœ‰ MyBatis é…ç½®å¯ä»¥å†™åœ¨ <code>application.properties</code> é‡Œé¢</li></ul><h4 id="JDBC-åœºæ™¯çš„è‡ªåŠ¨é…ç½®"><a href="#JDBC-åœºæ™¯çš„è‡ªåŠ¨é…ç½®" class="headerlink" title="JDBC åœºæ™¯çš„è‡ªåŠ¨é…ç½®"></a>JDBC åœºæ™¯çš„è‡ªåŠ¨é…ç½®</h4><ul><li>JDBC åœºæ™¯çš„è‡ªåŠ¨é…ç½®<ul><li><code>mybatis-spring-boot-starter</code> å¯¼å…¥äº† <code>spring-boot-starter-jdbc</code>ï¼ŒJDBC ç”¨äºæ“ä½œæ•°æ®åº“çš„åœºæ™¯</li><li> JDBC åœºæ™¯çš„å‡ ä¸ªè‡ªåŠ¨é…ç½®<ul><li><code>org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</code><ul><li>æ”¯æŒæ•°æ®æºçš„è‡ªåŠ¨é…ç½®</li><li>æ‰€æœ‰å’Œæ•°æ®æºç›¸å…³çš„é…ç½®éƒ½ç»‘å®šåœ¨ <code>DataSourceProperties</code> é…ç½®ç±»</li><li>é»˜è®¤ä½¿ç”¨ <code>HikariDataSource</code> æ•°æ®æº</li></ul></li><li><code>org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration</code><ul><li>å¾€å®¹å™¨æ³¨å†Œ <code>JdbcTemplate</code>ï¼Œæ“ä½œæ•°æ®åº“</li></ul></li><li><code>org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration</code></li><li><code>org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration</code><ul><li>åŸºäº XA äºŒé˜¶æäº¤åè®®çš„åˆ†å¸ƒå¼äº‹åŠ¡æ•°æ®æº</li></ul></li><li><code>org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration</code><ul><li>æ”¯æŒäº‹åŠ¡çš„è‡ªåŠ¨é…ç½®</li></ul></li></ul></li><li>æ‹¥æœ‰çš„åº•å±‚èƒ½åŠ›ï¼šæ•°æ®æºã€JdbcTemplateã€äº‹åŠ¡å¤„ç†</li></ul></li></ul><h4 id="MyBatisAutoConfiguration"><a href="#MyBatisAutoConfiguration" class="headerlink" title="MyBatisAutoConfiguration"></a>MyBatisAutoConfiguration</h4><ul><li><code>MyBatisAutoConfiguration</code> é…ç½®äº† MyBatis çš„æ•´åˆæµç¨‹<ul><li><code>mybatis-spring-boot-starter</code> å¯¼å…¥ <code>mybatis-spring-boot-autoconfigure</code>ï¼ˆMyBatis çš„è‡ªåŠ¨é…ç½®åŒ…ï¼‰</li><li>é»˜è®¤åŠ è½½ä¸¤ä¸ªè‡ªåŠ¨é…ç½®ç±»<ul><li><code>org.mybatis.spring.boot.autoconfigure.MybatisLanguageDriverAutoConfiguration</code></li><li><code>org.mybatis.spring.boot.autoconfigure.MybatisAutoConfiguration</code><ul><li>å¿…é¡»åœ¨æ•°æ®æºé…ç½®å¥½ä¹‹åæ‰é…ç½®</li><li>å¾€å®¹å™¨æ³¨å†Œ <code>SqlSessionFactory</code> ç»„ä»¶ï¼Œç”¨äºåˆ›å»ºè®¿é—®æ•°æ®åº“çš„ä¸€æ¬¡ä¼šè¯</li><li>å¾€å®¹å™¨æ³¨å†Œ <code>SqlSessionTemplate</code> ç»„ä»¶ï¼Œç”¨äºæ“ä½œæ•°æ®åº“</li></ul></li></ul></li><li> MyBatis çš„æ‰€æœ‰é…ç½®ç»‘å®šåœ¨ <code>MybatisProperties</code></li><li>æ¯ä¸ª <code>Mapper</code> æ¥å£çš„ä»£ç†å¯¹è±¡æ˜¯æ€ä¹ˆåˆ›å»ºå¹¶æ”¾åˆ°å®¹å™¨ä¸­ï¼Œè¯¦è§ <code>@MapperScan</code> çš„åº•å±‚æºç <ul><li>åˆ©ç”¨ <code>@Import(MapperScannerRegistrar.class)</code> æ‰¹é‡å¾€å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ã€‚è§£ææŒ‡å®šçš„åŒ…è·¯å¾„ä¸‹çš„æ¯ä¸€ä¸ªç±»ï¼Œä¸ºæ¯ä¸€ä¸ª <code>Mapper</code> æ¥å£ç±»åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå¹¶æ³¨å†Œåˆ°å®¹å™¨ä¸­</li></ul></li></ul></li></ul><div class="admonition note"><p class="admonition-title">å¦‚ä½•åˆ†æå“ªä¸ªåœºæ™¯å¯¼å…¥ä»¥åï¼Œå¼€å¯äº†å“ªäº›è‡ªåŠ¨é…ç½®ç±»ï¼Ÿ</p><ul><li>åœ¨ <code>spring.boot.autoconfigure</code> åŒ…é‡Œé¢æ‰¾ <code>classpath:/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> æ–‡ä»¶ä¸­é…ç½®çš„æ‰€æœ‰å€¼ï¼Œå°±æ˜¯è¦å¼€å¯çš„è‡ªåŠ¨é…ç½®ç±»ï¼›ä½†æ˜¯æ¯ä¸ªç±»å¯èƒ½æœ‰æ¡ä»¶æ³¨è§£ï¼ŒåŸºäºæ¡ä»¶æ³¨è§£åˆ¤æ–­å“ªä¸ªè‡ªåŠ¨é…ç½®ç±»ä¼šç”Ÿæ•ˆã€‚</li><li>å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„è‡ªåŠ¨é…ç½®ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</li></ul></div><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜¯å¦å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œå¯ä»¥è¯¦ç»†æ‰“å°å¼€å¯äº†å“ªäº›è‡ªåŠ¨é…ç½®ï¼ŒPositiveï¼ˆç”Ÿæ•ˆçš„è‡ªåŠ¨é…ç½®ï¼‰ï¼ŒNegativeï¼ˆä¸ç”Ÿæ•ˆçš„è‡ªåŠ¨é…ç½®ï¼‰</span></span><br><span class="line"><span class="attr">debug</span>=<span class="string">true</span></span><br></pre></td></tr></tbody></table></figure><h3 id="æ•´åˆå…¶ä»–æ•°æ®æº"><a href="#æ•´åˆå…¶ä»–æ•°æ®æº" class="headerlink" title="æ•´åˆå…¶ä»–æ•°æ®æº"></a>æ•´åˆå…¶ä»–æ•°æ®æº</h3><p>SpringBoot é»˜è®¤ä½¿ç”¨ <code>Hikari</code> ä½œä¸ºæ•°æ®æºã€‚</p><h4 id="Druid-æ•°æ®æº"><a href="#Druid-æ•°æ®æº" class="headerlink" title="Druid æ•°æ®æº"></a>Druid æ•°æ®æº</h4><p>è‹¥å¸Œæœ› MyBatis ä½¿ç”¨ <a href="https://github.com/alibaba/druid">Druid</a> æ•°æ®æºï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹é…ç½®å†…å®¹ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆªæ­¢ç›®å‰ä¸ºæ­¢ Druid æš‚æ—¶ä¸æ”¯æŒ SpringBoot 3ã€‚</p><ul><li>å¼•å…¥ Druid æ•°æ®æº </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>${druid-version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>é…ç½® Druid æ•°æ®æº </li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®æºåŸºæœ¬é…ç½®</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://192.168.200.100:3306/demo</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="meta">spring.datasource.type</span>=<span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># é…ç½®StatFilterç›‘æ§</span></span><br><span class="line"><span class="meta">spring.datasource.druid.filter.stat.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.datasource.druid.filter.stat.db-type</span>=<span class="string">mysql</span></span><br><span class="line"><span class="meta">spring.datasource.druid.filter.stat.log-slow-sql</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.datasource.druid.filter.stat.slow-sql-millis</span>=<span class="string">2000</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># é…ç½®WallFilteré˜²ç«å¢™</span></span><br><span class="line"><span class="meta">spring.datasource.druid.filter.wall.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.datasource.druid.filter.wall.db-type</span>=<span class="string">mysql</span></span><br><span class="line"><span class="meta">spring.datasource.druid.filter.wall.config.delete-allow</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">spring.datasource.druid.filter.wall.config.drop-table-allow</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># é…ç½®ç›‘æ§é¡µï¼Œå†…ç½®ç›‘æ§é¡µé¢çš„é¦–é¡µæ˜¯ /druid/index.html</span></span><br><span class="line"><span class="meta">spring.datasource.druid.stat-view-servlet.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.datasource.druid.stat-view-servlet.login-username</span>=<span class="string">admin</span></span><br><span class="line"><span class="meta">spring.datasource.druid.stat-view-servlet.login-password</span>=<span class="string">admin</span></span><br><span class="line"><span class="meta">spring.datasource.druid.stat-view-servlet.allow</span>=<span class="string">*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># å…¶ä»– Filter çš„é…ç½®è¿™é‡Œä¸å†æ¼”ç¤ºï¼Œç›®å‰æ”¯æŒä»¥ä¸‹ Filter çš„é…ç½®ï¼Œè¯¦ç»†è¯´æ˜è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–è€…æ ¹æ® IDE æç¤ºï¼ˆspring.datasource.druid.filter.*ï¼‰è¿›è¡Œé…ç½®</span></span><br><span class="line"><span class="comment"># StatFilter</span></span><br><span class="line"><span class="comment"># WallFilter</span></span><br><span class="line"><span class="comment"># ConfigFilter</span></span><br><span class="line"><span class="comment"># EncodingConvertFilter</span></span><br><span class="line"><span class="comment"># Slf4jLogFilter</span></span><br><span class="line"><span class="comment"># Log4jFilter</span></span><br><span class="line"><span class="comment"># Log4j2Filter</span></span><br><span class="line"><span class="comment"># CommonsLogFilter</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦è®°å½• SpringBoot 3 çš„åŸºç¡€æ•™ç¨‹ï¼ŒåŒ…æ‹¬ SSM æ•´åˆç­‰å†…å®¹ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å¾®æœåŠ¡" scheme="https://www.techgrow.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>å½©ç¥¨è´­ä¹°æ”»ç•¥</title>
    <link href="https://www.techgrow.cn/posts/3055749e.html"/>
    <id>https://www.techgrow.cn/posts/3055749e.html</id>
    <published>2023-07-05T14:38:22.000Z</published>
    <updated>2023-07-05T14:38:22.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å½©ç§çš„é€‰æ‹©"><a href="#å½©ç§çš„é€‰æ‹©" class="headerlink" title="å½©ç§çš„é€‰æ‹©"></a>å½©ç§çš„é€‰æ‹©</h2><p>å°†ä¸­å¥–å¥–é‡‘æŒ‰ä¸åŒçš„çº§åˆ«è¿›è¡Œåˆ†ç±»ï¼Œä¸åŒå½©ç§ä¹‹é—´çš„ä¸­å¥–æ¦‚ç‡æ˜¯æœ‰æ¯”è¾ƒå¤§çš„å·®å¼‚çš„ï¼Œé€šè¿‡åˆ†æå„ç±»ä¸­å¥–å¥–é‡‘ä¸ä¸­å¥–æ¦‚ç‡ï¼Œè´­ä¹°å½©ç¥¨æ—¶åº”è¯¥ä¼˜å…ˆé€‰æ‹©ä¸­å¥–æ¦‚ç‡è¾ƒå¤§çš„å½©ç§ã€‚æ¯”å¦‚ï¼Œå½“ä½ å¸Œæœ›å¾—åˆ°äºŒåä¸‡å…ƒçš„å¥–é‡‘æ—¶ï¼Œåº”è¯¥ä¼˜å…ˆé€‰æ‹©è´­ä¹°è¶…çº§å¤§ä¹é€ã€‚</p><h3 id="ä¸­å¥–å¥–é‡‘äº”ç™¾ä¸‡ä»¥ä¸Š"><a href="#ä¸­å¥–å¥–é‡‘äº”ç™¾ä¸‡ä»¥ä¸Š" class="headerlink" title="ä¸­å¥–å¥–é‡‘äº”ç™¾ä¸‡ä»¥ä¸Š"></a>ä¸­å¥–å¥–é‡‘äº”ç™¾ä¸‡ä»¥ä¸Š</h3><table><thead><tr><th>è´­ä¹°ä¼˜å…ˆçº§</th><th>å½©ç§</th><th>ä¸­å¥–å¥–é‡‘</th><th>ä¸­å¥–æ¦‚ç‡</th><th>æŠ•æ³¨é‡‘é¢</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td> 1</td><td> å¿«ä¹ 8 ï¼ˆé€‰åï¼‰</td><td>~ 5000000ï¼ˆæµ®åŠ¨ï¼Œå•æ³¨å°é¡¶ï¼‰</td><td>1/8911711</td><td>2 å…ƒ</td><td>ç¦å½©</td></tr><tr><td> 2</td><td> åŒè‰²çƒ</td><td> ~ 5000000ï¼ˆæµ®åŠ¨ï¼‰</td><td>1/17721088</td><td>2 å…ƒ</td><td>ç¦å½©</td></tr><tr><td> 3</td><td> è¶…çº§å¤§ä¹é€</td><td> ~ 5000000ï¼ˆæµ®åŠ¨ï¼‰</td><td>1/21425712</td><td>2 å…ƒ</td><td>ä½“å½©</td></tr></tbody></table><span id="more"></span><h3 id="ä¸­å¥–å¥–é‡‘äºŒåä¸‡ä»¥ä¸Š"><a href="#ä¸­å¥–å¥–é‡‘äºŒåä¸‡ä»¥ä¸Š" class="headerlink" title="ä¸­å¥–å¥–é‡‘äºŒåä¸‡ä»¥ä¸Š"></a>ä¸­å¥–å¥–é‡‘äºŒåä¸‡ä»¥ä¸Š</h3><table><thead><tr><th>è´­ä¹°ä¼˜å…ˆçº§</th><th>å½©ç§</th><th>ä¸­å¥–å¥–é‡‘</th><th>ä¸­å¥–æ¦‚ç‡</th><th>æŠ•æ³¨é‡‘é¢</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td> 1</td><td> è¶…çº§å¤§ä¹é€</td><td> ~ 200000ï¼ˆæµ®åŠ¨ï¼‰</td><td>1/1071286</td><td>2 å…ƒ</td><td>ä½“å½©</td></tr><tr><td> 2</td><td> åŒè‰²çƒ</td><td> ~ 200000ï¼ˆæµ®åŠ¨ï¼‰</td><td>1/1181406</td><td>2 å…ƒ</td><td>ç¦å½©</td></tr><tr><td> 3</td><td> å¿«ä¹ 8 ï¼ˆé€‰ä¹ï¼‰</td><td>300000</td><td>1/1380688</td><td>2 å…ƒ</td><td>ç¦å½©</td></tr></tbody></table><h3 id="ä¸­å¥–å¥–é‡‘äº”ä¸‡å…ƒä»¥ä¸Š"><a href="#ä¸­å¥–å¥–é‡‘äº”ä¸‡å…ƒä»¥ä¸Š" class="headerlink" title="ä¸­å¥–å¥–é‡‘äº”ä¸‡å…ƒä»¥ä¸Š"></a>ä¸­å¥–å¥–é‡‘äº”ä¸‡å…ƒä»¥ä¸Š</h3><table><thead><tr><th>è´­ä¹°ä¼˜å…ˆçº§</th><th>å½©ç§</th><th>ä¸­å¥–å¥–é‡‘</th><th>ä¸­å¥–æ¦‚ç‡</th><th>æŠ•æ³¨é‡‘é¢</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td> 1</td><td> æ’åˆ—äº”</td><td> 100000</td><td>1/100000</td><td>2 å…ƒ</td><td>ä½“å½©</td></tr><tr><td> 2</td><td> å¿«ä¹ 8 ï¼ˆé€‰å…«ï¼‰</td><td>50000</td><td>1/230115</td><td>2 å…ƒ</td><td>ç¦å½©</td></tr></tbody></table><h3 id="ä¸­å¥–å¥–é‡‘ä¸€ä¸‡å…ƒä»¥ä¸Š"><a href="#ä¸­å¥–å¥–é‡‘ä¸€ä¸‡å…ƒä»¥ä¸Š" class="headerlink" title="ä¸­å¥–å¥–é‡‘ä¸€ä¸‡å…ƒä»¥ä¸Š"></a>ä¸­å¥–å¥–é‡‘ä¸€ä¸‡å…ƒä»¥ä¸Š</h3><table><thead><tr><th>è´­ä¹°ä¼˜å…ˆçº§</th><th>å½©ç§</th><th>ä¸­å¥–å¥–é‡‘</th><th>ä¸­å¥–æ¦‚ç‡</th><th>æŠ•æ³¨é‡‘é¢</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td> 1</td><td> å¿«ä¹ 8 ï¼ˆé€‰ä¸ƒï¼‰</td><td>10000</td><td>1/40979</td><td>2 å…ƒ</td><td>ç¦å½©</td></tr></tbody></table><h3 id="ä¸­å¥–å¥–é‡‘ä¸€åƒå…ƒä»¥ä¸Š"><a href="#ä¸­å¥–å¥–é‡‘ä¸€åƒå…ƒä»¥ä¸Š" class="headerlink" title="ä¸­å¥–å¥–é‡‘ä¸€åƒå…ƒä»¥ä¸Š"></a>ä¸­å¥–å¥–é‡‘ä¸€åƒå…ƒä»¥ä¸Š</h3><table><thead><tr><th>è´­ä¹°ä¼˜å…ˆçº§</th><th>å½©ç§</th><th>ä¸­å¥–å¥–é‡‘</th><th>ä¸­å¥–æ¦‚ç‡</th><th>æŠ•æ³¨é‡‘é¢</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td> 1</td><td> æ’åˆ—ä¸‰</td><td> 1040</td><td>1/1000</td><td>2 å…ƒ</td><td>ä½“å½©</td></tr><tr><td> 2</td><td> å¿«ä¹ 8 ï¼ˆé€‰äº”ï¼‰</td><td>1000</td><td>1/1551</td><td>2 å…ƒ</td><td>ç¦å½©</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç»å½©ç¥¨çš„è´­ä¹°æ”»ç•¥ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å½©ç¥¨ç«çŒœ" scheme="https://www.techgrow.cn/tags/%E5%BD%A9%E7%A5%A8%E7%AB%9E%E7%8C%9C/"/>
    
  </entry>
  
  <entry>
    <title>æ’åˆ— 5 è´­ä¹°æ”»ç•¥</title>
    <link href="https://www.techgrow.cn/posts/50a483da.html"/>
    <id>https://www.techgrow.cn/posts/50a483da.html</id>
    <published>2023-07-03T14:38:21.000Z</published>
    <updated>2023-07-03T14:38:21.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å¼€å¥–æ—¥æœŸ"><a href="#å¼€å¥–æ—¥æœŸ" class="headerlink" title="å¼€å¥–æ—¥æœŸ"></a>å¼€å¥–æ—¥æœŸ</h2><ul><li>å¼€å¥–æ—¶é—´ï¼š 21:25</li><li> å¼€å¥–æ—¥æœŸï¼š æ¯å¤©</li><li>æˆªæ­¢åœå”®æ—¶é—´ï¼š å¼€å¥–æ—¥æœŸçš„ 21:00</li></ul><h2 id="è´­ä¹°è§„åˆ™"><a href="#è´­ä¹°è§„åˆ™" class="headerlink" title="è´­ä¹°è§„åˆ™"></a>è´­ä¹°è§„åˆ™</h2><p>æ’åˆ— 5 æ˜¯æŒ‡ä» 00000 - 99999 çš„æ•°å­—ä¸­é€‰å–ä¸€ä¸ª 5 ä½æ•°ä½œä¸ºä¸€æ³¨æŠ•æ³¨å·ç è¿›è¡ŒæŠ•æ³¨ã€‚æ¯æ³¨åŸºæœ¬æŠ•æ³¨é‡‘é¢äººæ°‘å¸ä¸º 2 å…ƒã€‚</p><div class="admonition note"><p class="admonition-title">æç¤º</p><p>ä½“å½©æ’åˆ— 5 å¯ä»¥è¿›è¡Œå¤šå€æŠ•æ³¨ï¼ŒæŠ•æ³¨å€æ•°èŒƒå›´ä¸º 2 - 99 å€ï¼Œå•å¼ å½©ç¥¨çš„æŠ•æ³¨é‡‘é¢æœ€é«˜ä¸è¶…è¿‡ 20000 å…ƒã€‚</p></div><span id="more"></span><h2 id="è´­ä¹°æ”»ç•¥"><a href="#è´­ä¹°æ”»ç•¥" class="headerlink" title="è´­ä¹°æ”»ç•¥"></a>è´­ä¹°æ”»ç•¥</h2><ul><li>1ã€è´­ä¹°æ›´å¤šçš„å½©ç¥¨ï¼šè¿™ä¼šå¢åŠ ä¸­å¥–çš„æœºä¼šï¼Œä½†æ˜¯ä¹Ÿæ„å‘³ç€éœ€è¦æŠ•å…¥æ›´å¤šçš„èµ„é‡‘ã€‚</li><li>2ã€é€‰æ‹©å†·é—¨å·ç ï¼šå†·é—¨å·ç æ˜¯æŒ‡åœ¨è¿‡å»çš„å¼€å¥–ä¸­å‡ºç°é¢‘ç‡è¾ƒä½çš„å·ç ï¼Œè™½ç„¶ä¸­å¥–æ¦‚ç‡è¾ƒä½ï¼Œä½†å¦‚æœä¸­å¥–å¯ä»¥è·å¾—è¾ƒé«˜çš„å¥–é‡‘ã€‚</li><li>3ã€ä½¿ç”¨ç»Ÿè®¡å­¦æ–¹æ³•ï¼šé€šè¿‡åˆ†æå†å²å¼€å¥–æ•°æ®ï¼Œåˆ©ç”¨ç»Ÿè®¡å­¦æ–¹æ³•é¢„æµ‹ä¸‹ä¸€æœŸçš„ä¸­å¥–å·ç ï¼Œä¾‹å¦‚æ•°å­¦å…¬å¼ã€é—æ¼æ•°æ®ã€èµ°åŠ¿å›¾ç­‰ã€‚</li><li>4ã€å‚åŠ åˆä¹°ï¼šåˆä¹°æ˜¯æŒ‡å¤šäººå…±åŒè´­ä¹°å½©ç¥¨ï¼Œå¢åŠ äº†ä¸­å¥–çš„æœºä¼šï¼Œä½†ä¸­å¥–å¥–é‡‘éœ€è¦åˆ†é…ç»™æ‰€æœ‰å‚ä¸è€…ã€‚</li><li>5ã€é€‰æ‹©çƒ­é—¨å·ç ï¼šçƒ­é—¨å·ç æ˜¯æŒ‡åœ¨è¿‡å»çš„å¼€å¥–ä¸­å‡ºç°é¢‘ç‡è¾ƒé«˜çš„å·ç ï¼Œå¯ä»¥é€šè¿‡åˆ†æå†å²å¼€å¥–æ•°æ®æ¥é€‰æ‹©çƒ­é—¨å·ç ï¼Œä½†è¿™æ ·çš„å·ç ä¹Ÿä¼šæœ‰å¾ˆå¤šäººé€‰æ‹©ï¼Œå¯¼è‡´æœ€ç»ˆçš„å¥–é‡‘åˆ†é…æ¯”è¾ƒå¹³å‡ã€‚</li></ul><div class="admonition warning"><p class="admonition-title">ç‰¹åˆ«æ³¨æ„</p><p>å½©ç¥¨æ˜¯ä¸€ç§çº¯ç²¹çš„éšæœºæ¸¸æˆï¼Œæ²¡æœ‰ä»»ä½•ç­–ç•¥å¯ä»¥ä¿è¯ä¸­å¥–ã€‚æ‰€ä»¥ï¼Œç©å½©ç¥¨åº”è¯¥ç†æ€§çœ‹å¾…ï¼Œé‡åŠ›è€Œè¡Œã€‚</p></div><h2 id="ä¸­å¥–è§„åˆ™"><a href="#ä¸­å¥–è§„åˆ™" class="headerlink" title="ä¸­å¥–è§„åˆ™"></a>ä¸­å¥–è§„åˆ™</h2><p><img data-src="../../../asset/2023/07/ticks_buy_rule_11.png"></p><h2 id="ä¸­å¥–æ¦‚ç‡"><a href="#ä¸­å¥–æ¦‚ç‡" class="headerlink" title="ä¸­å¥–æ¦‚ç‡"></a>ä¸­å¥–æ¦‚ç‡</h2><p>æ’åˆ— 5 çš„ä¸­å¥–æ¦‚ç‡æ˜¯ 1/100000ã€‚</p>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç»æ’åˆ— 5 çš„è´­ä¹°æ”»ç•¥ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å½©ç¥¨ç«çŒœ" scheme="https://www.techgrow.cn/tags/%E5%BD%A9%E7%A5%A8%E7%AB%9E%E7%8C%9C/"/>
    
  </entry>
  
  <entry>
    <title>æ’åˆ— 3 è´­ä¹°æ”»ç•¥</title>
    <link href="https://www.techgrow.cn/posts/301483de.html"/>
    <id>https://www.techgrow.cn/posts/301483de.html</id>
    <published>2023-07-01T14:38:21.000Z</published>
    <updated>2023-07-01T14:38:21.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å¼€å¥–æ—¥æœŸ"><a href="#å¼€å¥–æ—¥æœŸ" class="headerlink" title="å¼€å¥–æ—¥æœŸ"></a>å¼€å¥–æ—¥æœŸ</h2><ul><li>å¼€å¥–æ—¶é—´ï¼š 21:25</li><li> å¼€å¥–æ—¥æœŸï¼š æ¯å¤©</li><li>æˆªæ­¢åœå”®æ—¶é—´ï¼š å¼€å¥–æ—¥æœŸçš„ 21:00</li></ul><h2 id="è´­ä¹°è§„åˆ™"><a href="#è´­ä¹°è§„åˆ™" class="headerlink" title="è´­ä¹°è§„åˆ™"></a>è´­ä¹°è§„åˆ™</h2><p>æ’åˆ— 3 çš„æŠ•æ³¨åŒºåˆ†ä¸ºç™¾ä½ã€åä½å’Œä¸ªä½ï¼Œæ¯ä¸€ä½å·ç èŒƒå›´ä¸º 0 - 9ï¼Œè´­å½©è€…éœ€ä»å„ä½ä¸Šé€‰å‡º 1 ä¸ªå·ç è¿›è¡ŒæŠ•æ³¨ï¼Œä¹Ÿå°±æ˜¯ä» 000 - 999 çš„æ•°å­—ä¸­é€‰å–ä¸€ä¸ªä¸‰ä½æ•°ä½œä¸ºä¸€æ³¨æŠ•æ³¨å·ç è¿›è¡ŒæŠ•æ³¨ã€‚æ’åˆ— 3 æœ‰ä¸‰ç§æŠ•æ³¨æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ <code>ç›´é€‰</code>ã€<code>ç»„é€‰ 3</code> å’Œ <code>ç»„é€‰ 6</code>ã€‚æ¯æ³¨åŸºæœ¬æŠ•æ³¨é‡‘é¢äººæ°‘å¸ä¸º 2 å…ƒã€‚</p><span id="more"></span><p><img data-src="../../../asset/2023/07/ticks_buy_rule_8.png"></p><div class="admonition note"><p class="admonition-title">æç¤º</p><p>ä½“å½©æ’åˆ— 3 å¯ä»¥è¿›è¡Œå¤šå€æŠ•æ³¨ï¼ŒæŠ•æ³¨å€æ•°èŒƒå›´ä¸º 2 - 99 å€ï¼Œå•å¼ å½©ç¥¨çš„æŠ•æ³¨é‡‘é¢æœ€é«˜ä¸è¶…è¿‡ 20000 å…ƒã€‚</p></div><h2 id="è´­ä¹°æ”»ç•¥"><a href="#è´­ä¹°æ”»ç•¥" class="headerlink" title="è´­ä¹°æ”»ç•¥"></a>è´­ä¹°æ”»ç•¥</h2><ul><li>1ã€è´­ä¹°æ›´å¤šçš„å½©ç¥¨ï¼šè¿™ä¼šå¢åŠ ä¸­å¥–çš„æœºä¼šï¼Œä½†æ˜¯ä¹Ÿæ„å‘³ç€éœ€è¦æŠ•å…¥æ›´å¤šçš„èµ„é‡‘ã€‚</li><li>2ã€é€‰æ‹©å†·é—¨å·ç ï¼šå†·é—¨å·ç æ˜¯æŒ‡åœ¨è¿‡å»çš„å¼€å¥–ä¸­å‡ºç°é¢‘ç‡è¾ƒä½çš„å·ç ï¼Œè™½ç„¶ä¸­å¥–æ¦‚ç‡è¾ƒä½ï¼Œä½†å¦‚æœä¸­å¥–å¯ä»¥è·å¾—è¾ƒé«˜çš„å¥–é‡‘ã€‚</li><li>3ã€ä½¿ç”¨ç»Ÿè®¡å­¦æ–¹æ³•ï¼šé€šè¿‡åˆ†æå†å²å¼€å¥–æ•°æ®ï¼Œåˆ©ç”¨ç»Ÿè®¡å­¦æ–¹æ³•é¢„æµ‹ä¸‹ä¸€æœŸçš„ä¸­å¥–å·ç ï¼Œä¾‹å¦‚æ•°å­¦å…¬å¼ã€é—æ¼æ•°æ®ã€èµ°åŠ¿å›¾ç­‰ã€‚</li><li>4ã€å‚åŠ åˆä¹°ï¼šåˆä¹°æ˜¯æŒ‡å¤šäººå…±åŒè´­ä¹°å½©ç¥¨ï¼Œå¢åŠ äº†ä¸­å¥–çš„æœºä¼šï¼Œä½†ä¸­å¥–å¥–é‡‘éœ€è¦åˆ†é…ç»™æ‰€æœ‰å‚ä¸è€…ã€‚</li><li>5ã€é€‰æ‹©çƒ­é—¨å·ç ï¼šçƒ­é—¨å·ç æ˜¯æŒ‡åœ¨è¿‡å»çš„å¼€å¥–ä¸­å‡ºç°é¢‘ç‡è¾ƒé«˜çš„å·ç ï¼Œå¯ä»¥é€šè¿‡åˆ†æå†å²å¼€å¥–æ•°æ®æ¥é€‰æ‹©çƒ­é—¨å·ç ï¼Œä½†è¿™æ ·çš„å·ç ä¹Ÿä¼šæœ‰å¾ˆå¤šäººé€‰æ‹©ï¼Œå¯¼è‡´æœ€ç»ˆçš„å¥–é‡‘åˆ†é…æ¯”è¾ƒå¹³å‡ã€‚</li></ul><div class="admonition warning"><p class="admonition-title">ç‰¹åˆ«æ³¨æ„</p><p>å½©ç¥¨æ˜¯ä¸€ç§çº¯ç²¹çš„éšæœºæ¸¸æˆï¼Œæ²¡æœ‰ä»»ä½•ç­–ç•¥å¯ä»¥ä¿è¯ä¸­å¥–ã€‚æ‰€ä»¥ï¼Œç©å½©ç¥¨åº”è¯¥ç†æ€§çœ‹å¾…ï¼Œé‡åŠ›è€Œè¡Œã€‚</p></div><h2 id="ä¸­å¥–è§„åˆ™"><a href="#ä¸­å¥–è§„åˆ™" class="headerlink" title="ä¸­å¥–è§„åˆ™"></a>ä¸­å¥–è§„åˆ™</h2><p><img data-src="../../../asset/2023/07/ticks_buy_rule_9.png"></p><h2 id="ä¸­å¥–æ¦‚ç‡"><a href="#ä¸­å¥–æ¦‚ç‡" class="headerlink" title="ä¸­å¥–æ¦‚ç‡"></a>ä¸­å¥–æ¦‚ç‡</h2><p><img data-src="../../../asset/2023/07/ticks_buy_rule_10.png"></p>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç»æ’åˆ— 3 çš„è´­ä¹°æ”»ç•¥ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å½©ç¥¨ç«çŒœ" scheme="https://www.techgrow.cn/tags/%E5%BD%A9%E7%A5%A8%E7%AB%9E%E7%8C%9C/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äº”æ ¸å¿ƒåŸç†</title>
    <link href="https://www.techgrow.cn/posts/1dfe3056.html"/>
    <id>https://www.techgrow.cn/posts/1dfe3056.html</id>
    <published>2023-06-25T15:12:42.000Z</published>
    <updated>2023-06-25T15:12:42.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å¤§çº²"><a href="#å¤§çº²" class="headerlink" title="å¤§çº²"></a>å¤§çº²</h2><ul><li><a href="/posts/79ae6590.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸€å¿«é€Ÿå…¥é—¨</a></li><li><a href="/posts/e7a270a6.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äºŒå¸¸è§„é…ç½®</a></li><li><a href="/posts/12fb0f17.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸‰ Web å¼€å‘</a></li><li><a href="/posts/223fd9f.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å›› Web å¼€å‘</a></li><li><a href="/posts/1dfe3056.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äº”æ ¸å¿ƒåŸç†</a></li><li><a href="/posts/b6463873.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å…­åœºæ™¯æ•´åˆ</a></li><li><a href="/posts/6bcf09.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸ƒåŸºç¡€ç‰¹æ€§</a></li></ul><h2 id="ä¾èµ–ç®¡ç†æœºåˆ¶"><a href="#ä¾èµ–ç®¡ç†æœºåˆ¶" class="headerlink" title="ä¾èµ–ç®¡ç†æœºåˆ¶"></a>ä¾èµ–ç®¡ç†æœºåˆ¶</h2><p><img data-src="../../../asset/2023/06/spring-boot3-study-1.png"></p><span id="more"></span><div class="admonition note"><p class="admonition-title">ä¸ºä»€ä¹ˆå¯¼å…¥ spring-boot-starter-web åï¼Œæ‰€æœ‰ç›¸å…³çš„ä¾èµ–éƒ½å¯¼å…¥è¿›æ¥äº†ï¼Ÿ</p><ul><li>å¼€å‘ä»€ä¹ˆåœºæ™¯ï¼Œå¯¼å…¥ä»€ä¹ˆåœºæ™¯å¯åŠ¨å™¨</li><li> Maven ä¾èµ–çš„ä¼ é€’åŸåˆ™ã€‚A -&gt; B -&gt; Cï¼Œé‚£ä¹ˆ A å°±æ‹¥æœ‰ B å’Œ C</li><li> å¯¼å…¥åœºæ™¯å¯åŠ¨å™¨åï¼Œä¼šè‡ªåŠ¨æŠŠè¿™ä¸ªåœºæ™¯çš„æ‰€æœ‰æ ¸å¿ƒä¾èµ–å…¨éƒ¨å¯¼å…¥è¿›æ¥</li></ul></div><div class="admonition note"><p class="admonition-title">ä¸ºä»€ä¹ˆç‰ˆæœ¬å·éƒ½ä¸ç”¨å†™ï¼Ÿ</p><ul><li>æ¯ä¸ª SpringBoot é¡¹ç›®éƒ½æœ‰ä¸€ä¸ªçˆ¶é¡¹ç›® <code>spring-boot-starter-parent</code></li><li><code>parent</code> çš„çˆ¶é¡¹ç›®æ˜¯ <code>spring-boot-dependencies</code></li><li>çˆ¶é¡¹ç›®æ˜¯ç‰ˆæœ¬ä»²è£ä¸­å¿ƒï¼Œä¼šå°†æ‰€æœ‰å¸¸è§ Jar åŒ…çš„ä¾èµ–ç‰ˆæœ¬éƒ½å£°æ˜å¥½äº†ï¼Œæ¯”å¦‚ <code>mysql-connector-j</code></li></ul></div><div class="admonition note"><p class="admonition-title">å¦‚ä½•è‡ªå®šä¹‰ä¾èµ–çš„ç‰ˆæœ¬å·ï¼Ÿ</p><ul><li>ç¬¬ä¸€ç§æ–¹å¼ï¼šç›´æ¥åœ¨å½“å‰ Maven é…ç½®æ–‡ä»¶çš„ <code>&lt;properties&gt;&lt;/properties&gt;</code> æ ‡ç­¾ä¸­å£°æ˜çˆ¶é¡¹ç›®ç”¨çš„ç‰ˆæœ¬å±æ€§çš„ Key</li><li> ç¬¬äºŒç§æ–¹å¼ï¼šç›´æ¥åœ¨å¯¼å…¥ä¾èµ–çš„æ—¶å€™å£°æ˜ç‰ˆæœ¬</li><li>ä¸Šè¿°ä¸¤ç§æ–¹å¼éƒ½æ˜¯åˆ©ç”¨ Maven çš„å°±è¿‘åŸåˆ™ç‰¹æ€§</li></ul></div><div class="admonition note"><p class="admonition-title">å¦‚ä½•å¯¼å…¥ç¬¬ä¸‰æ–¹çš„ Jar åŒ…</p><ul><li>å¯¹äº <code>spring-boot-starter-parent</code> æ²¡æœ‰ç®¡ç†çš„ Jar åŒ…ä¾èµ–ï¼Œç›´æ¥åœ¨ Maven çš„é…ç½®æ–‡ä»¶ä¸­è‡ªè¡Œå£°æ˜å°±å¯ä»¥</li></ul></div><h2 id="è‡ªåŠ¨é…ç½®æœºåˆ¶"><a href="#è‡ªåŠ¨é…ç½®æœºåˆ¶" class="headerlink" title="è‡ªåŠ¨é…ç½®æœºåˆ¶"></a>è‡ªåŠ¨é…ç½®æœºåˆ¶</h2><h3 id="åˆæ­¥ç†è§£"><a href="#åˆæ­¥ç†è§£" class="headerlink" title="åˆæ­¥ç†è§£"></a>åˆæ­¥ç†è§£</h3><ul><li>è‡ªåŠ¨é…ç½® SpringMVCã€Tomcat ç­‰<ul><li>å¯¼å…¥åœºæ™¯ï¼Œå®¹å™¨ä¸­å°±ä¼šè‡ªåŠ¨é…ç½®å¥½è¿™ä¸ªåœºæ™¯çš„æ ¸å¿ƒç»„ä»¶</li><li>ä»¥å‰ï¼šDispatcherServletã€ViewResolverã€CharacterEncodingFilter â€¦.</li><li> ç°åœ¨ï¼šè‡ªåŠ¨é…ç½®å¥½çš„è¿™äº›ç»„ä»¶</li><li>éªŒè¯ï¼šå®¹å™¨ä¸­æœ‰äº†ä»€ä¹ˆç»„ä»¶ï¼Œå°±å…·æœ‰ä»€ä¹ˆåŠŸèƒ½ </li></ul></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">// JDK 10 çš„æ–°ç‰¹æ€§ï¼Œå±€éƒ¨å˜é‡ç±»å‹çš„è‡ªåŠ¨æ¨æ–­</span></span><br><span class="line">        <span class="keyword">var</span> ioc = SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        <span class="comment">// è·å–å®¹å™¨ä¸­æ‰€æœ‰ç»„ä»¶çš„åç§°</span></span><br><span class="line">        String[] names = ioc.getBeanDefinitionNames();</span><br><span class="line">        <span class="comment">// éå†å®¹å™¨ä¸­çš„æ‰€æœ‰ç»„ä»¶ï¼ŒSpringBoot æŠŠä»¥å‰éœ€è¦æ‰‹åŠ¨é…ç½®çš„æ ¸å¿ƒç»„ä»¶ç°åœ¨éƒ½ç»™è‡ªåŠ¨é…ç½®å¥½</span></span><br><span class="line">        <span class="keyword">for</span> (String name : names) {</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li><p>é»˜è®¤çš„åŒ…æ‰«æè§„åˆ™</p><ul><li><code>@SpringBootApplication</code> æ³¨è§£æ ‡æ³¨çš„ç±»å°±æ˜¯ä¸»ç¨‹åºç±»</li><li> SpringBoot åªä¼šæ‰«æä¸»ç¨‹åºç±»æ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹é¢çš„å­åŒ…ï¼Œå³è‡ªåŠ¨çš„ <code>component-scan</code> åŠŸèƒ½</li><li>è‡ªå®šä¹‰åŒ…çš„æ‰«æè·¯å¾„<ul><li>ç¬¬ä¸€ç§æ–¹å¼ï¼š<code>@SpringBootApplication(scanBasePackages = "com.clay")</code></li><li>ç¬¬äºŒç§æ–¹å¼ï¼š<code>@ComponentScan("com.clay")</code> ç›´æ¥æŒ‡å®šæ‰«æçš„åŒ…è·¯å¾„</li></ul></li></ul></li><li><p>é…ç½®é»˜è®¤å€¼</p><ul><li>é…ç½®æ–‡ä»¶çš„æ‰€æœ‰é…ç½®é¡¹æ˜¯å’ŒæŸä¸ªç±»çš„å¯¹è±¡å€¼è¿›è¡Œä¸€ä¸€ç»‘å®šçš„</li><li>ç»‘å®šäº†é…ç½®æ–‡ä»¶ä¸­æ¯ä¸€é¡¹å€¼çš„ç±»ï¼Œç§°ä¸ºé…ç½®å±æ€§ç±»</li><li>æ¯”å¦‚ï¼š<ul><li><code>ServerProperties</code> ç»‘å®šäº†æ‰€æœ‰ Tomcat æœåŠ¡å™¨æœ‰å…³çš„é…ç½®</li><li><code>MultipartProperties</code> ç»‘å®šäº†æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ ç›¸å…³çš„é…ç½®</li><li>â€¦.. å‚ç…§ <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html">å®˜æ–¹æ–‡æ¡£</a> æˆ–è€…å‚ç…§ç»‘å®šçš„é…ç½®å±æ€§ç±»</li></ul></li></ul></li><li><p>æŒ‰éœ€åŠ è½½è‡ªåŠ¨é…ç½®</p><ul><li>å¯¼å…¥åœºæ™¯å¯åŠ¨å™¨ <code>spring-boot-starter-web</code></li><li>åœºæ™¯å¯åŠ¨å™¨é™¤äº†ä¼šå¯¼å…¥ç›¸å…³åŠŸèƒ½çš„ä¾èµ–ï¼Œè¿˜ä¼šå¯¼å…¥ <code>spring-boot-starter</code>ï¼Œå®ƒæ˜¯æ‰€æœ‰ <code>starter</code> çš„ <code>starter</code>ï¼Œæ˜¯åŸºç¡€æ ¸å¿ƒ <code>starter</code></li><li><code>spring-boot-starter</code> å¯¼å…¥äº†ä¸€ä¸ªåŒ… <code>spring-boot-autoconfigure</code>ï¼Œé‡Œé¢éƒ½æ˜¯å„ç§åœºæ™¯çš„ <code>AutoConfiguration</code> è‡ªåŠ¨é…ç½®ç±»</li><li>è™½ç„¶å…¨åœºæ™¯çš„è‡ªåŠ¨é…ç½®éƒ½åœ¨ <code>spring-boot-autoconfigure</code> è¿™ä¸ªåŒ…ä¸­ï¼Œä½†å¹¶ä¸æ˜¯å…¨éƒ¨éƒ½é»˜è®¤å¼€å¯çš„ï¼Œå¯¼å…¥å“ªä¸ªåœºæ™¯å¯åŠ¨å™¨æ‰ä¼šå¼€å¯å“ªä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®</li></ul></li></ul><div class="admonition note"><p class="admonition-title">æ€»ç»“</p><p>å¯¼å…¥åœºæ™¯å¯åŠ¨å™¨ä¼šè§¦å‘ <code>spring-boot-autoconfigure</code> è¿™ä¸ªåŒ…çš„è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆï¼ŒSpring çš„ IOC å®¹å™¨ä¸­å°±ä¼šå…·æœ‰ç›¸å…³åœºæ™¯çš„åŠŸèƒ½ã€‚</p></div><h3 id="æ·±å…¥ç†è§£"><a href="#æ·±å…¥ç†è§£" class="headerlink" title="æ·±å…¥ç†è§£"></a>æ·±å…¥ç†è§£</h3><div class="admonition note"><p class="admonition-title">æ€è€ƒä»¥ä¸‹é—®é¢˜</p><ul><li>1ã€SpringBoot æ˜¯æ€ä¹ˆå®ç°å¯¼ä¸€ä¸ª <code>starter</code>ï¼Œå†™ä¸€äº›ç®€å•é…ç½®ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒæ•´åˆï¼Œåº”ç”¨å°±èƒ½è·‘èµ·æ¥çš„ï¼Ÿ</li><li>2ã€ä¸ºä»€ä¹ˆ Tomcat çš„ç«¯å£å·å¯ä»¥é…ç½®åœ¨ <code>application.properties</code> ä¸­ï¼Œå¹¶ä¸” Tomcat èƒ½å¯åŠ¨æˆåŠŸï¼Ÿ</li><li>3ã€å¯¼å…¥åœºæ™¯å¯åŠ¨å™¨åï¼Œå“ªäº›è‡ªåŠ¨é…ç½®èƒ½ç”Ÿæ•ˆï¼Ÿ</li></ul></div><p><img data-src="../../../asset/2023/06/spring-boot3-study-2.png"></p><ul><li><p>å¯¼å…¥ Web å¼€å‘åœºæ™¯ <code>spring-boot-starter-web</code></p><ul><li>1ã€åœºæ™¯å¯åŠ¨å™¨å¯¼å…¥äº†ç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–ï¼Œå¦‚ <code>spring-boot-starter-json</code>ã€<code>spring-boot-starter-tomcat</code>ã€<code>spring-webmvc</code>ã€‚</li><li>2ã€æ¯ä¸ªåœºæ™¯å¯åŠ¨å™¨éƒ½å¼•å…¥äº†ä¸€ä¸ª <code>spring-boot-starter</code>ï¼Œå³æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨ã€‚</li><li>3ã€æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨å¼•å…¥äº† <code>spring-boot-autoconfigure</code> åŒ…ã€‚</li><li>4ã€<code>spring-boot-autoconfigure</code> é‡Œé¢å›Šæ‹¬äº†æ‰€æœ‰åœºæ™¯çš„è‡ªåŠ¨é…ç½®ã€‚</li><li>5ã€åªè¦ <code>spring-boot-autoconfigure</code> è¿™ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½èƒ½ç”Ÿæ•ˆï¼Œé‚£ä¹ˆç›¸å½“äº SpringBoot å®˜æ–¹å†™å¥½çš„æ•´åˆåŠŸèƒ½å°±ç”Ÿæ•ˆäº†ã€‚</li><li>6ã€SpringBoot é»˜è®¤æ˜¯æ‰«æä¸åˆ° <code>spring-boot-autoconfigure</code> ä¸‹å†™å¥½çš„æ‰€æœ‰é…ç½®ç±»ï¼ˆè¿™äº›é…ç½®ç±»ç»™æˆ‘ä»¬åšäº†æ•´åˆæ“ä½œï¼‰ï¼Œé»˜è®¤åªæ‰«æä¸»ç¨‹åºç±»æ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹é¢çš„å­åŒ…ã€‚</li></ul></li><li><p>ä¸»ç¨‹åºæ³¨è§£ <code>@SpringBootApplication</code></p><ul><li>1ã€<code>@SpringBootApplication</code> ç”±ä¸‰ä¸ªæ³¨è§£ç»„æˆï¼Œåˆ†åˆ«æ˜¯ <code>@SpringBootConfiguration</code>ã€<code>@EnableAutoConfiguration</code>ã€<code>@ComponentScan</code>ã€‚</li><li>2ã€SpringBoot é»˜è®¤åªèƒ½æ‰«æè‡ªå·±ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹é¢çš„å­åŒ…ï¼Œæ‰«æä¸åˆ° <code>spring-boot-autoconfigure</code> åŒ…ä¸­å®˜æ–¹å†™å¥½çš„é…ç½®ç±»ã€‚</li><li>3ã€<code>@EnableAutoConfiguration</code> æ˜¯ SpringBoot å¼€å¯è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒã€‚<ul><li>1ã€æ˜¯ç”± <code>@Import(AutoConfigurationImportSelector.class)</code> æä¾›æ ¸å¿ƒåŠŸèƒ½ï¼Œæ‰¹é‡å¾€å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ã€‚</li><li>2ã€SpringBoot å¯åŠ¨æ—¶ä¼šé»˜è®¤åŠ è½½ 142 ä¸ªé…ç½®ç±»ï¼Œè¿™ 142 ä¸ªé…ç½®ç±»æ˜¯ç”± <code>spring-boot-autoconfigure</code> åŒ…ä¸‹çš„ <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> æ–‡ä»¶æŒ‡å®šã€‚</li><li>3ã€é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åˆ©ç”¨ <code>@Import</code> æ‰¹é‡å¯¼å…¥ç»„ä»¶çš„æœºåˆ¶ï¼Œå°† <code>spring-boot-autoconfigure</code> åŒ…ä¸‹çš„ 142 ä¸ª <code>xxxxAutoConfiguration</code> ç±»å¯¼å…¥è¿›æ¥ï¼ˆè‡ªåŠ¨é…ç½®ç±»ï¼‰ã€‚</li><li>4ã€è™½ç„¶å¯¼å…¥äº† 142 ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œä½†å¹¶ä¸æ˜¯è¿™ 142 ä¸ªè‡ªåŠ¨é…ç½®ç±»éƒ½èƒ½ç”Ÿæ•ˆï¼›æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œéƒ½æœ‰æ¡ä»¶æ³¨è§£ <code>@ConditionalOnxxx</code>ï¼Œåªæœ‰æ¡ä»¶æˆç«‹æ‰èƒ½ç”Ÿæ•ˆã€‚</li></ul></li></ul></li><li><p><code>xxxxAutoConfiguration</code> è‡ªåŠ¨é…ç½®ç±»</p><ul><li>1ã€å¾€å®¹å™¨ä¸­ä½¿ç”¨ <code>@Bean</code> æ³¨å†Œä¸€å †ç»„ä»¶</li><li> 2ã€æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»éƒ½å¯èƒ½æœ‰è¿™ä¸ªæ³¨è§£ <code>@EnableConfigurationProperties(ServerProperties.class)</code>ï¼Œç”¨æ¥æŠŠé…ç½®æ–‡ä»¶ä¸­é…çš„æŒ‡å®šå‰ç¼€çš„å±æ€§å€¼å°è£…åˆ° <code>xxxProperties</code> å±æ€§ç±»ä¸­ã€‚</li><li>3ã€ä»¥ Tomcat ä¸ºä¾‹ï¼ŒæŠŠæœåŠ¡å™¨çš„æ‰€æœ‰é…ç½®éƒ½æ˜¯ä»¥ <code>server</code> å¼€å¤´çš„é…ç½®éƒ½å°è£…åˆ°äº†å±æ€§ç±»ä¸­ã€‚</li><li>4ã€å¾€å®¹å™¨ä¸­æ”¾çš„æ‰€æœ‰ç»„ä»¶çš„ä¸€äº›æ ¸å¿ƒå‚æ•°ï¼Œéƒ½æ¥è‡ªäº <code>xxxProperties</code> å±æ€§ç±»ï¼Œå®ƒéƒ½æ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ã€‚</li><li>5ã€åªéœ€è¦æ›´æ”¹é…ç½®æ–‡ä»¶çš„å€¼ï¼Œæ ¸å¿ƒç»„ä»¶çš„åº•å±‚å‚æ•°å°±èƒ½ä¿®æ”¹ã€‚</li><li>6ã€å°†ç²¾åŠ›éƒ½ç”¨äºå†™ä¸šåŠ¡ï¼Œå…¨ç¨‹æ— éœ€å…³å¿ƒå„ç§æ¡†æ¶çš„æ•´åˆï¼ˆåº•å±‚è¿™äº›æ•´åˆéƒ½å†™å¥½äº†ï¼Œè€Œä¸”ä¹ŸæŒ‰éœ€ç”Ÿæ•ˆäº†ï¼‰</li></ul></li></ul><div class="admonition note"><p class="admonition-title">è‡ªåŠ¨é…ç½®æµç¨‹çš„æ€»ç»“</p><ul><li>1ã€å¯¼å…¥ <code>spring-boot-starter-xxxx</code>ï¼Œä¼šå¯¼å…¥ <code>spring-boot-starter</code>ï¼Œä¹Ÿå°±ä¼šå¯¼å…¥ <code>spring-boot-autoconfigure</code> åŒ…ã€‚</li><li>2ã€<code>spring-boot-autoconfigure</code> åŒ…é‡Œé¢æœ‰ä¸€ä¸ªæ–‡ä»¶ <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>ï¼Œé‡Œé¢æŒ‡å®šäº†åº”ç”¨å¯åŠ¨æ—¶æ‰€æœ‰è¦åŠ è½½çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</li><li>3ã€<code>@EnableAutoConfiguration</code> ä¼šè‡ªåŠ¨åœ°å°†ä¸Šé¢æ–‡ä»¶é‡Œå†™çš„æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»éƒ½å¯¼å…¥è¿›æ¥ï¼ŒåŒæ—¶ <code>xxxAutoConfiguration</code> æ˜¯æœ‰å£°æ˜æ¡ä»¶æ³¨è§£çš„ï¼Œç›®çš„æ˜¯æŒ‰éœ€åŠ è½½ã€‚</li><li>4ã€<code>xxxAutoConfiguration</code> å¾€å®¹å™¨ä¸­å¯¼å…¥ä¸€å †ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶éƒ½æ˜¯ä» <code>xxxProperties</code> ä¸­è·å–å±æ€§å€¼ã€‚</li><li>5ã€<code>xxxProperties</code> åˆæ˜¯å’Œé…ç½®æ–‡ä»¶è¿›è¡Œäº†ç»‘å®šã€‚</li></ul></div><blockquote><p>æœ€ç»ˆæ•ˆæœï¼šå¯¼å…¥ <code>starter</code>ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°±èƒ½ä¿®æ”¹æ¡†æ¶çš„åº•å±‚è¡Œä¸ºã€‚</p></blockquote><h2 id="åµŒå…¥å¼å®¹å™¨"><a href="#åµŒå…¥å¼å®¹å™¨" class="headerlink" title="åµŒå…¥å¼å®¹å™¨"></a>åµŒå…¥å¼å®¹å™¨</h2><p>Servlet å®¹å™¨æŒ‡çš„æ˜¯ç®¡ç†ã€è¿è¡Œ Servlet ç»„ä»¶ï¼ˆ<code>Servlet</code>ã€<code>Filter</code>ã€<code>Listener</code>ï¼‰çš„ç¯å¢ƒï¼Œä¸€èˆ¬æŒ‡ Web æœåŠ¡å™¨ã€‚</p><h3 id="è‡ªåŠ¨é…ç½®åŸç†"><a href="#è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†"></a>è‡ªåŠ¨é…ç½®åŸç†</h3><ul><li>SpringBoot é»˜è®¤ä½¿ç”¨åµŒå…¥çš„ Tomcat ä½œä¸º Servlet å®¹å™¨</li><li>åµŒå…¥å¼å®¹å™¨çš„è‡ªåŠ¨é…ç½®ç±»æ˜¯ <code>ServletWebServerFactoryAutoConfiguration</code>ï¼Œ<code>EmbeddedWebServerFactoryCustomizerAutoConfiguration</code></li><li><code>ServletWebServerFactoryAutoConfiguration</code> è‡ªåŠ¨é…ç½®äº†åµŒå…¥å¼å®¹å™¨åœºæ™¯</li><li>ç»‘å®šäº† <code>ServerProperties</code> é…ç½®ç±»ï¼Œæ‰€æœ‰å’ŒæœåŠ¡å™¨ç›¸å…³çš„é…ç½®éƒ½ä½¿ç”¨ <code>server</code> ä½œä¸ºå¼€å§‹å‰ç¼€</li><li><code>ServletWebServerFactoryAutoConfiguration</code> é»˜è®¤å¯¼å…¥äº†åµŒå…¥å¼çš„ä¸‰å¤§æœåŠ¡å™¨ï¼ŒåŒ…æ‹¬ <code>Tomcat</code>ã€<code>Jetty</code>ã€<code>Undertow</code><ul><li>å¯¼å…¥ <code>Tomcat</code>ã€<code>Jetty</code>ã€<code>Undertow</code> æ—¶éƒ½æœ‰æ¡ä»¶æ³¨è§£ï¼Œç³»ç»Ÿä¸­æœ‰å¯¹åº”çš„ç±»æ‰ä¼šç”Ÿæ•ˆï¼ˆä¹Ÿå°±æ˜¯å¯¼äº†åŒ…ï¼‰</li><li>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒTomcat çš„é…ç½®ä¼šç”Ÿæ•ˆï¼ŒSpringBoot å¾€å®¹å™¨ä¸­æ”¾äº† <code>TomcatServletWebServerFactory</code> ç»„ä»¶</li><li>å¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª Web æœåŠ¡å™¨å·¥å‚ <code>ServletWebServerFactory</code> åï¼Œå¯ä»¥åˆ›å»º Web æœåŠ¡å™¨</li><li> Web æœåŠ¡å™¨å·¥å‚éƒ½æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥è°ƒç”¨ <code>getWebServer()</code> è·å– Web æœåŠ¡å™¨</li><li><code>TomcatServletWebServerFactory</code> åˆ›å»ºäº† Tomcat Web æœåŠ¡å™¨</li></ul></li><li><code>ServletWebServerApplicationContext</code> IOC å®¹å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ <code>ServletWebServerFactory</code> åˆ›å»º Web æœåŠ¡å™¨</li><li> Spring å®¹å™¨åˆ·æ–°ï¼ˆå¯åŠ¨ï¼‰çš„æ—¶å€™ï¼Œä¼šé¢„ç•™ä¸€ä¸ªæ—¶æœºï¼Œè°ƒç”¨ <code>onRefresh()</code> åˆ·æ–°å­å®¹å™¨</li><li><code>refresh()</code> å®¹å™¨åˆ·æ–°ï¼ŒåäºŒå¤§æ­¥çš„åˆ·æ–°å­å®¹å™¨ä¼šè°ƒç”¨ <code>onRefresh()</code></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(ServletRequest.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(ServerProperties.class)</span></span><br><span class="line"><span class="meta">@Import({ ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class,</span></span><br><span class="line"><span class="meta">ServletWebServerFactoryConfiguration.EmbeddedTomcat.class,</span></span><br><span class="line"><span class="meta">ServletWebServerFactoryConfiguration.EmbeddedJetty.class,</span></span><br><span class="line"><span class="meta">ServletWebServerFactoryConfiguration.EmbeddedUndertow.class })</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletWebServerFactoryAutoConfiguration</span> </span>{</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRefresh</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">super</span>.onRefresh();</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        createWebServer();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">catch</span> (Throwable ex) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ApplicationContextException(<span class="string">"Unable to start web server"</span>, ex);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">æ€»ç»“</p><ul><li>Web åœºæ™¯çš„ Spring å®¹å™¨å¯åŠ¨ï¼Œåœ¨è°ƒç”¨ <code>onRefresh()</code> çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨åˆ›å»º Web æœåŠ¡å™¨çš„æ–¹æ³•ã€‚</li><li>Web æœåŠ¡å™¨çš„åˆ›å»ºæ˜¯é€šè¿‡ <code>WebServerFactory</code> å®ç°çš„ï¼Œå®¹å™¨ä¸­åˆä¼šæ ¹æ®æ¡ä»¶æ³¨è§£ï¼Œå¯åŠ¨ç›¸å…³çš„æœåŠ¡å™¨é…ç½®ï¼Œé»˜è®¤ <code>EmbeddedTomcat</code> ä¼šå¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª <code>TomcatServletWebServerFactory</code> ç»„ä»¶ï¼Œå¯¼è‡´é¡¹ç›®å¯åŠ¨åï¼Œè‡ªåŠ¨åˆ›å»ºå‡º Tomcat æœåŠ¡å™¨ã€‚</li></ul></div><h2 id="å†…å®¹åå•†"><a href="#å†…å®¹åå•†" class="headerlink" title="å†…å®¹åå•†"></a>å†…å®¹åå•†</h2><h3 id="åº•å±‚åŸç†åˆ†æ"><a href="#åº•å±‚åŸç†åˆ†æ" class="headerlink" title="åº•å±‚åŸç†åˆ†æ"></a>åº•å±‚åŸç†åˆ†æ</h3><blockquote><p>1ã€<code>@ResponseBody</code> çš„åº•å±‚ç”± <code>HttpMessageConverter</code> å¤„ç†æ•°æ®ï¼Œå³æ ‡æ³¨äº† <code>@ResponseBody</code> çš„è¿”å›å€¼ï¼Œå°†ä¼šç”±æ”¯æŒå®ƒçš„ <code>HttpMessageConverter</code> å°†æ•°æ®è¿”å›ç»™æµè§ˆå™¨ã€‚</p></blockquote><ul><li><p>å¦‚æœ <code>Controller</code> æ–¹æ³•çš„è¿”å›å€¼æ ‡æ³¨äº† <code>@ResponseBody</code> æ³¨è§£</p><ul><li>è¯·æ±‚è¿›æ¥å…ˆæ¥åˆ° <code>DispatcherServlet</code> çš„ <code>doDispatch()</code> è¿›è¡Œå¤„ç†</li><li>æ‰¾åˆ°ä¸€ä¸ª <code>HandlerAdapter</code> é€‚é…å™¨ï¼Œåˆ©ç”¨é€‚é…å™¨æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li><code>RequestMappingHandlerAdapter</code> ä¼šæ‰§è¡Œï¼Œè°ƒç”¨ <code>invokeHandlerMethod()</code> æ¥æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦å‡†å¤‡å¥½ä¸¤æ ·ä¸œè¥¿<ul><li><code>HandlerMethodArgumentResolver</code>ï¼šå‚æ•°è§£æå™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•çš„æ¯ä¸ªå‚æ•°å€¼</li><li><code>HandlerMethodReturnValueHandler</code>ï¼šè¿”å›å€¼å¤„ç†å™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼è¯¥æ€ä¹ˆå¤„ç†</li></ul></li><li><code>RequestMappingHandlerAdapter</code> é‡Œé¢çš„ <code>invokeAndHandle()</code> çœŸæ­£æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œä¼šè¿”å›è¿”å›å€¼çš„å¯¹è±¡</li><li>å»æ‰¾ä¸€ä¸ªåˆé€‚çš„è¿”å›å€¼å¤„ç†å™¨ <code>HandlerMethodReturnValueHandler</code></li><li>æœ€ç»ˆæ‰¾åˆ° <code>RequestResponseBodyMethodProcessor</code>ï¼Œå®ƒèƒ½å¤„ç†æ ‡æ³¨äº† <code>@ResponseBody</code> æ³¨è§£çš„æ–¹æ³•</li><li><code>RequestResponseBodyMethodProcessor</code> è°ƒç”¨ <code>writeWithMessageConverters()</code>ï¼Œåˆ©ç”¨ <code>MessageConverter</code> æŠŠè¿”å›å€¼è¾“å‡ºç»™æµè§ˆå™¨</li></ul></li><li><p><code>HttpMessageConverter</code> ä¼šå…ˆè¿›è¡Œå†…å®¹åå•†</p><ul><li>éå†æ‰€æœ‰çš„ <code>MessageConverter</code>ï¼Œçœ‹å“ªä¸ªæ”¯æŒè¿™ç§å†…å®¹ç±»å‹çš„æ•°æ®</li><li>é»˜è®¤çš„ <code>MessageConverter</code> æœ‰<a href="../../../asset/2023/06/spring-boot3-study-10.png">è¿™äº›</a></li><li>æœ€ç»ˆå› ä¸ºéœ€è¦è¿”å› JSON æ•°æ®ï¼Œæ‰€ä»¥é€šè¿‡ <code>MappingJackson2HttpMessageConverter</code> è¾“å‡º JSON æ•°æ®</li><li> Jackson åˆ©ç”¨ <code>ObjectMapper</code> æŠŠè¿”å›å€¼å¯¹è±¡å†™å‡ºå»</li></ul></li></ul><blockquote><p>2ã€<code>WebMvcAutoConfiguration</code> æä¾›äº† <a href="../../../asset/2023/06/spring-boot3-study-11.png">6 ç§</a> é»˜è®¤çš„ <code>HttpMessageConverters</code></p></blockquote><ul><li><code>EnableWebMvcConfiguration</code> é€šè¿‡ <code>addDefaultHttpMessageConverters</code> æ·»åŠ äº†é»˜è®¤çš„ <code>MessageConverter</code>ï¼Œå¦‚ä¸‹ï¼š<ul><li><code>ByteArrayHttpMessageConverter</code>ï¼šæ”¯æŒå­—èŠ‚æ•°æ®è¯»å†™</li><li><code>StringHttpMessageConverter</code>ï¼šæ”¯æŒå­—ç¬¦ä¸²è¯»å†™</li><li><code>ResourceHttpMessageConverter</code>ï¼šæ”¯æŒèµ„æºè¯»å†™</li><li><code>ResourceRegionHttpMessageConverter</code>ï¼šæ”¯æŒåˆ†åŒºèµ„æºå†™å‡º</li><li><code>AllEncompassingFormHttpMessageConverter</code>ï¼šæ”¯æŒè¡¨å• XML/JSON è¯»å†™</li><li><code>MappingJackson2HttpMessageConverter</code>ï¼šæ”¯æŒè¯·æ±‚å“åº”ä½“ JSON è¯»å†™</li></ul></li></ul><div class="admonition note"><p class="admonition-title">æç¤º</p><p>SpringBoot æä¾›é»˜è®¤çš„ <code>MessageConverter</code> åŠŸèƒ½æœ‰é™ï¼Œä»…ç”¨äº JSON æˆ–è€…æ™®é€šçš„è¿”å›æ•°æ®ã€‚å¦‚æœéœ€è¦å¢åŠ æ–°çš„å†…å®¹åå•†åŠŸèƒ½ï¼Œå¿…é¡»æ·»åŠ æ–°çš„ <code>HttpMessageConverter</code>ã€‚</p></div><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/">SpringBoot 3 å®˜æ–¹è‹±æ–‡æ–‡æ¡£</a></li><li><a href="https://doc.qzxdp.cn/spring/spring-boot.html">SpringBoot 3 æœ€æ–°ä¸­æ–‡æ–‡æ¡£</a></li></ul>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦è®°å½• SpringBoot 3 çš„åŸºç¡€æ•™ç¨‹ï¼ŒåŒ…æ‹¬æ ¸å¿ƒåŸç†ç­‰å†…å®¹ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å¾®æœåŠ¡" scheme="https://www.techgrow.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å›› Web å¼€å‘</title>
    <link href="https://www.techgrow.cn/posts/223fd9f.html"/>
    <id>https://www.techgrow.cn/posts/223fd9f.html</id>
    <published>2023-06-21T15:12:42.000Z</published>
    <updated>2023-07-21T15:12:42.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><ul><li><a href="/posts/79ae6590.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸€å¿«é€Ÿå…¥é—¨</a></li><li><a href="/posts/e7a270a6.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äºŒå¸¸è§„é…ç½®</a></li><li><a href="/posts/12fb0f17.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸‰ Web å¼€å‘</a></li><li><a href="/posts/223fd9f.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å›› Web å¼€å‘</a></li><li><a href="/posts/1dfe3056.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äº”æ ¸å¿ƒåŸç†</a></li><li><a href="/posts/b6463873.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å…­åœºæ™¯æ•´åˆ</a></li><li><a href="/posts/6bcf09.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸ƒåŸºç¡€ç‰¹æ€§</a></li></ul><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬ç« èŠ‚æ‰€éœ€çš„æ¡ˆä¾‹ä»£ç ï¼Œå¯ä»¥ç›´æ¥ä» <a href="https://github.com/rqh656418510/spring-cloud-share/tree/main/spring-boot-3/spring-boot-3-study">GitHub</a> ä¸‹è½½å¯¹åº”ç« èŠ‚ <code>spring-boot3-04</code>ã€‚</p><h2 id="å›½é™…åŒ–"><a href="#å›½é™…åŒ–" class="headerlink" title="å›½é™…åŒ–"></a>å›½é™…åŒ–</h2><h3 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h3><p>å›½é™…åŒ–çš„å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>1ã€Spring Boot åœ¨ç±»è·¯å¾„æ ¹ä¸‹æŸ¥æ‰¾ <code>messages</code> èµ„æºç»‘å®šæ–‡ä»¶ï¼Œæ–‡ä»¶åé»˜è®¤ä¸º <code>messages.properties</code></li><li>2ã€å¤šè¯­è¨€ç¯å¢ƒå¯ä»¥å®šä¹‰å¤šä¸ªèµ„æºæ–‡ä»¶ï¼Œå‘½åè§„åˆ™ä¸º <code>messages_åŒºåŸŸä»£ç .properties</code>ï¼Œå¦‚ï¼š<ul><li><code>messages.properties</code>ï¼šé»˜è®¤ç¯å¢ƒ</li><li><code>messages_zh_CN.properties</code>ï¼šä¸­æ–‡ç¯å¢ƒ</li><li><code>messages_en_US.properties</code>ï¼šè‹±æ–‡ç¯å¢ƒ</li></ul></li><li> 3ã€åœ¨ç¨‹åºä¸­å¯ä»¥è‡ªåŠ¨æ³¨å…¥ <code>MessageSource</code> ç»„ä»¶ï¼Œè·å–å›½é™…åŒ–çš„é…ç½®é¡¹å€¼</li><li> 4ã€åœ¨é¡µé¢ä¸­å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ <code>#{}</code> è·å–å›½é™…åŒ–çš„é…ç½®é¡¹å€¼</li></ul><span id="more"></span><h3 id="å¸¸ç”¨é…ç½®"><a href="#å¸¸ç”¨é…ç½®" class="headerlink" title="å¸¸ç”¨é…ç½®"></a>å¸¸ç”¨é…ç½®</h3><p>å›½é™…åŒ–çš„è‡ªåŠ¨é…ç½®å¯å‚è€ƒ <code>MessageSourceAutoConfiguration</code> è‡ªåŠ¨é…ç½®ç±»ã€‚</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å­—ç¬¦é›†ç¼–ç </span></span><br><span class="line"><span class="meta">spring.messages.encoding</span>=<span class="string">UTF-8</span></span><br><span class="line"><span class="comment"># èµ„æºæ–‡ä»¶åçš„å‰ç¼€</span></span><br><span class="line"><span class="meta">spring.messages.basename</span>=<span class="string">messages</span></span><br></pre></td></tr></tbody></table></figure><h3 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å›½é™…åŒ–æ¶ˆæ¯çš„ç»„ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> MessageSource messageSource;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping("/login")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(HttpServletRequest request)</span> </span>{</span><br><span class="line">        Locale local = request.getLocale();</span><br><span class="line">        <span class="comment">// é€šè¿‡ä»£ç çš„æ–¹å¼è·å–å›½é™…åŒ–é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„é…ç½®é¡¹çš„å€¼</span></span><br><span class="line">        String login = messageSource.getMessage(<span class="string">"login"</span>, <span class="keyword">null</span>, local);</span><br><span class="line">        log.info(<span class="string">"login: {}"</span>, login);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="è·¯å¾„åŒ¹é…"><a href="#è·¯å¾„åŒ¹é…" class="headerlink" title="è·¯å¾„åŒ¹é…"></a>è·¯å¾„åŒ¹é…</h2><p>Spring 5.3 ä¹‹ååŠ å…¥äº†æ›´å¤šçš„è¯·æ±‚è·¯å¾„åŒ¹é…çš„å®ç°ç­–ç•¥ï¼Œä»¥å‰åªæ”¯æŒ <code>AntPathMatcher</code> ç­–ç•¥ï¼Œç°åœ¨é¢å¤–æä¾›äº† <code>PathPatternParser</code> ç­–ç•¥ï¼ˆé»˜è®¤ï¼‰ï¼Œå¹¶ä¸”æ”¯æŒæŒ‡å®šä½¿ç”¨å“ªç§ç­–ç•¥ã€‚</p><h3 id="Ant-é£æ ¼"><a href="#Ant-é£æ ¼" class="headerlink" title="Ant é£æ ¼"></a>Ant é£æ ¼</h3><p>Ant é£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•å…·æœ‰ä»¥ä¸‹è§„åˆ™ï¼š</p><ul><li><code>*</code>ï¼šè¡¨ç¤ºä»»æ„æ•°é‡çš„å­—ç¬¦ã€‚</li><li><code>?</code>ï¼šè¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚</li><li><code>**</code>ï¼šè¡¨ç¤ºä»»æ„æ•°é‡çš„ç›®å½•ã€‚</li><li><code>{}</code>ï¼šè¡¨ç¤ºä¸€ä¸ªå‘½åçš„æ¨¡å¼å ä½ç¬¦ã€‚</li><li><code>[]</code>ï¼šè¡¨ç¤ºå­—ç¬¦é›†åˆï¼Œä¾‹å¦‚ <code>[a-z]</code> è¡¨ç¤ºå°å†™å­—æ¯ã€‚</li></ul><p>Ant é£æ ¼çš„è·¯å¾„æ¨¡å¼ä½¿ç”¨ä¾‹å­ï¼š</p><ul><li><code>*.html</code>ï¼šåŒ¹é…ä»»æ„åç§°ï¼Œæ‰©å±•åä¸º <code>.html</code> çš„æ–‡ä»¶</li><li><code>/folder1/*/*.java</code>ï¼šåŒ¹é…åœ¨ <code>folder1</code> ç›®å½•ä¸‹çš„ä»»æ„ä¸¤çº§ç›®å½•ä¸‹çš„ <code>.java</code> æ–‡ä»¶ã€‚</li><li><code>/folder2/**/*.jsp</code>ï¼šåŒ¹é…åœ¨ <code>folder2</code> ç›®å½•ä¸‹ä»»æ„ç›®å½•æ·±åº¦çš„ <code>.jsp</code> æ–‡ä»¶ã€‚</li><li><code>/{type}/{id}.html</code>ï¼šåŒ¹é…ä»»æ„æ–‡ä»¶åä¸º <code>{id}.html</code>ï¼Œä¸”åœ¨ä»»æ„å‘½åçš„ <code>{type}</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚</li></ul><div class="admonition warning"><p class="admonition-title">ç‰¹åˆ«æ³¨æ„</p><ul><li>Ant é£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•ä¸­çš„ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰ï¼Œå¦‚ï¼š</li><li>è¦åŒ¹é…æ–‡ä»¶è·¯å¾„ä¸­çš„æ˜Ÿå·ï¼Œåˆ™éœ€è¦è½¬ä¹‰ä¸º <code>\\*</code></li><li>è¦åŒ¹é…æ–‡ä»¶è·¯å¾„ä¸­çš„é—®å·ï¼Œåˆ™éœ€è¦è½¬ä¹‰ä¸º <code>\\?</code></li></ul></div><h3 id="æ¨¡å¼åˆ‡æ¢"><a href="#æ¨¡å¼åˆ‡æ¢" class="headerlink" title="æ¨¡å¼åˆ‡æ¢"></a>æ¨¡å¼åˆ‡æ¢</h3><ul><li><p>AntPathMatcher ä¸ PathPatternParser</p><ul><li>PathPatternParser åœ¨ jmh åŸºå‡†æµ‹è¯•ä¸‹ï¼Œæœ‰ 6 - 8 å€ååé‡æå‡ï¼Œé™ä½äº† 30% - 40% ç©ºé—´åˆ†é…ç‡</li><li> PathPatternParser å…¼å®¹ AntPathMatcher è¯­æ³•ï¼Œå¹¶æ”¯æŒæ›´å¤šç±»å‹çš„è·¯å¾„æ¨¡å¼</li><li> PathPatternParser å¤šæ®µåŒ¹é… <code>**</code> çš„æ”¯æŒä»…å…è®¸åœ¨æ¨¡å¼æœ«å°¾ä½¿ç”¨</li></ul></li><li><p> PathPatternParser è·¯å¾„åŒ¹é…ç­–ç•¥çš„ä½¿ç”¨</p></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping("/a*/b?/{p1:[a-f]+}/**")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(HttpServletRequest request, <span class="meta">@PathVariable("p1")</span> String path)</span> </span>{</span><br><span class="line">    log.info(<span class="string">"è·¯å¾„å˜é‡ï¼š {}"</span>, path);</span><br><span class="line">    <span class="keyword">return</span> request.getRequestURI();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>åˆ‡æ¢è·¯å¾„åŒ¹é…ç­–ç•¥ï¼Œ<code>ant_path_matcher</code> æ˜¯æ—§ç‰ˆç­–ç•¥ï¼Œ<code>path_pattern_parser</code> æ˜¯æ–°ç‰ˆç­–ç•¥ </li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢è·¯å¾„åŒ¹é…ç­–ç•¥</span></span><br><span class="line"><span class="meta">spring.mvc.pathmatch.matching-strategy</span>=<span class="string">ant_path_matcher</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">æ€»ç»“</p><ul><li>SpringBoot é»˜è®¤çš„è·¯å¾„åŒ¹é…ç­–ç•¥æ˜¯ç”± PathPatternParser æä¾›çš„</li><li>å¦‚æœè·¯å¾„ä¸­é—´éœ€è¦æœ‰ <code>**</code>ï¼Œåˆ™éœ€è¦åˆ‡æ¢ä¸º Ant é£æ ¼çš„è·¯å¾„åŒ¹é…ç­–ç•¥ AntPathMatcher</li></ul></div><h2 id="å†…å®¹åå•†"><a href="#å†…å®¹åå•†" class="headerlink" title="å†…å®¹åå•†"></a>å†…å®¹åå•†</h2><p>å†…å®¹åå•†æŒ‡çš„æ˜¯ä¸€å¥—ç³»ç»Ÿé€‚é…å¤šç«¯æ•°æ®çš„è¿”å›ã€‚</p><p><img data-src="../../../asset/2023/06/spring-boot3-study-8.png"></p><h3 id="å¤šç«¯å†…å®¹é€‚é…"><a href="#å¤šç«¯å†…å®¹é€‚é…" class="headerlink" title="å¤šç«¯å†…å®¹é€‚é…"></a>å¤šç«¯å†…å®¹é€‚é…</h3><h4 id="é»˜è®¤è§„åˆ™"><a href="#é»˜è®¤è§„åˆ™" class="headerlink" title="é»˜è®¤è§„åˆ™"></a>é»˜è®¤è§„åˆ™</h4><ul><li>åŸºäºè¯·æ±‚å¤´å†…å®¹åå•†ï¼ˆé»˜è®¤å¼€å¯ï¼‰<ul><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œæºå¸¦ HTTP æ ‡å‡†çš„ Accept è¯·æ±‚å¤´</li><li>å®¢æˆ·ç«¯çš„è¯·æ±‚å¤´ç±»å‹ï¼š<code>Accept: application/json</code>ã€<code>Accept: text/xml</code>ã€<code>Accept: text/yaml</code></li><li>æœåŠ¡ç«¯æ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚å¤´æœŸæœ›çš„æ•°æ®ç±»å‹è¿›è¡ŒåŠ¨æ€è¿”å›</li></ul></li><li>åŸºäºè¯·æ±‚å‚æ•°å†…å®¹åå•†ï¼ˆæ‰‹åŠ¨å¼€å¯ï¼‰<ul><li>å‘é€è¯·æ±‚ <code>GET /projects/spring-boot?format=json</code></li><li>åŒ¹é…åˆ° <code>@GetMapping("/projects/spring-boot")</code></li><li>æ ¹æ®è¯·æ±‚å‚æ•°åå•†ï¼Œå†³å®šè¿”å›å“ªç§æ•°æ®ç±»å‹ï¼Œä¼˜å…ˆè¿”å› JSON ç±»å‹æ•°æ®</li><li>å‘é€è¯·æ±‚ <code>GET /projects/spring-boot?format=xml</code>ï¼Œä¼˜å…ˆè¿”å› XML ç±»å‹æ•°æ®</li></ul></li></ul><h4 id="XML-å†…å®¹åå•†æ¡ˆä¾‹"><a href="#XML-å†…å®¹åå•†æ¡ˆä¾‹" class="headerlink" title="XML å†…å®¹åå•†æ¡ˆä¾‹"></a>XML å†…å®¹åå•†æ¡ˆä¾‹</h4><p>è¿™é‡Œæ¼”ç¤ºå¦‚ä½•åœ¨è¯·æ±‚åŒä¸€ä¸ªæ¥å£æ—¶ï¼Œæ”¯æŒæ ¹æ®è¯·æ±‚å‚æ•°è¿”å› JSON æˆ–è€… XML æ ¼å¼çš„æ•°æ®ã€‚</p><ul><li>å¼•å…¥æ”¯æŒè¾“å‡º XML å†…å®¹çš„ä¾èµ– </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>æ ‡æ³¨ XML æ³¨è§£ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JacksonXmlRootElement</span>  <span class="comment">// æ”¯æŒè¾“å‡º XML æ ¼å¼çš„æ•°æ®</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ç¼–å†™æ§åˆ¶å™¨ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.clay.boot.web.domain.Person;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping("/person")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ  <span class="doctag">@ResponseBody</span> æ³¨è§£</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping("/get")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">get</span><span class="params">()</span> </span>{</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(<span class="number">1L</span>);</span><br><span class="line">        person.setAge(<span class="number">18</span>);</span><br><span class="line">        person.setUserName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">        person.setEmail(<span class="string">"aaa@qq.com"</span>);</span><br><span class="line">        <span class="keyword">return</span> person;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•† </li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½ï¼Œæ­¤åŠŸèƒ½é»˜è®¤ä¸å¼€å¯ï¼Œé»˜è®¤çš„å‚æ•°åä¸º format</span></span><br><span class="line"><span class="meta">spring.mvc.contentnegotiation.favor-parameter</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># æŒ‡å®šå†…å®¹åå•†æ—¶ä½¿ç”¨çš„å‚æ•°åï¼Œé»˜è®¤çš„å‚æ•°åä¸º format</span></span><br><span class="line"><span class="meta">spring.mvc.contentnegotiation.parameter-name</span>=<span class="string">type</span></span><br></pre></td></tr></tbody></table></figure><ul><li>ä»£ç æµ‹è¯•ç»“æœ</li></ul><p><img data-src="../../../asset/2023/06/spring-boot3-study-14.png"></p><p><img data-src="../../../asset/2023/06/spring-boot3-study-9.png"></p><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li>SpringBoot é»˜è®¤æ”¯æŒæ¥å£è¿”å› JSON æ•°æ®ï¼Œå› ä¸º Web åœºæ™¯å¯åŠ¨å™¨é»˜è®¤å¼•å…¥äº† Jackson å¤„ç† JSON çš„åŒ…ã€‚</li></ul></div><h4 id="é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹"><a href="#é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹" class="headerlink" title="é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹"></a>é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹</h4><ul><li>æ›´æ”¹å†…å®¹åå•†æ–¹å¼ </li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½ï¼Œæ­¤åŠŸèƒ½é»˜è®¤ä¸å¼€å¯ï¼Œé»˜è®¤çš„å‚æ•°åä¸º format</span></span><br><span class="line"><span class="meta">spring.mvc.contentnegotiation.favor-parameter</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># æŒ‡å®šå†…å®¹åå•†æ—¶ä½¿ç”¨çš„å‚æ•°åï¼Œé»˜è®¤çš„å‚æ•°åä¸º format</span></span><br><span class="line"><span class="meta">spring.mvc.contentnegotiation.parameter-name</span>=<span class="string">type</span></span><br></pre></td></tr></tbody></table></figure><ul><li>å¤§å¤šæ•° MediaType éƒ½æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å†…å®¹ç±»å‹ï¼Œå¦‚ï¼š</li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.mvc.contentnegotiation.media-types.yaml</span>=<span class="string">text/yaml</span></span><br></pre></td></tr></tbody></table></figure><h3 id="è‡ªå®šä¹‰å†…å®¹è¿”å›"><a href="#è‡ªå®šä¹‰å†…å®¹è¿”å›" class="headerlink" title="è‡ªå®šä¹‰å†…å®¹è¿”å›"></a>è‡ªå®šä¹‰å†…å®¹è¿”å›</h3><h4 id="YAML-å†…å®¹åå•†æ¡ˆä¾‹"><a href="#YAML-å†…å®¹åå•†æ¡ˆä¾‹" class="headerlink" title="YAML å†…å®¹åå•†æ¡ˆä¾‹"></a>YAML å†…å®¹åå•†æ¡ˆä¾‹</h4><ul><li>å¼•å…¥æ”¯æŒè¾“å‡º YAML å†…å®¹çš„ä¾èµ– </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-yaml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>æ–°å¢ä¸€ç§åª’ä½“ç±»å‹ï¼ˆMediaTypeï¼‰ï¼Œå¹¶å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•† </li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–°å¢ä¸€ç§åª’ä½“ç±»å‹</span></span><br><span class="line"><span class="meta">spring.mvc.contentnegotiation.media-types.yaml</span>=<span class="string">text/yaml</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½ï¼Œæ­¤åŠŸèƒ½é»˜è®¤ä¸å¼€å¯ï¼Œé»˜è®¤çš„å‚æ•°åä¸º format</span></span><br><span class="line"><span class="meta">spring.mvc.contentnegotiation.favor-parameter</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># æŒ‡å®šå†…å®¹åå•†æ—¶ä½¿ç”¨çš„å‚æ•°åï¼Œé»˜è®¤çš„å‚æ•°åä¸º format</span></span><br><span class="line"><span class="meta">spring.mvc.contentnegotiation.parameter-name</span>=<span class="string">type</span></span><br></pre></td></tr></tbody></table></figure><ul><li>ç¼–å†™å¯ä»¥æ”¯æŒ YAML æ ¼å¼æ•°æ®çš„ <code>HttpMessageConverter</code></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.dataformat.yaml.YAMLFactory;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.dataformat.yaml.YAMLGenerator;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpInputMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpOutputMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.converter.AbstractHttpMessageConverter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.converter.HttpMessageNotReadableException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.converter.HttpMessageNotWritableException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YamlHttpMessageConverter</span> <span class="keyword">extends</span> <span class="title">AbstractHttpMessageConverter</span>&lt;<span class="title">Object</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ObjectMapper objectMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">YamlHttpMessageConverter</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">// æŒ‡å®šæ”¯æŒçš„åª’ä½“ç±»å‹</span></span><br><span class="line">        <span class="keyword">super</span>(<span class="keyword">new</span> MediaType(<span class="string">"text"</span>, <span class="string">"yaml"</span>, StandardCharsets.UTF_8));</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–YAMLå·¥å…·</span></span><br><span class="line">        YAMLFactory yamlFactory = <span class="keyword">new</span> YAMLFactory().disable(YAMLGenerator.Feature.WRITE_DOC_START_MARKER);</span><br><span class="line">        <span class="keyword">this</span>.objectMapper = <span class="keyword">new</span> ObjectMapper(yamlFactory);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¯æŒçš„ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">supports</span><span class="params">(Class&lt;?&gt; clazz)</span> </span>{</span><br><span class="line">        <span class="comment">// TODO åªå¤„ç†å¯¹è±¡ç±»å‹ï¼Œä¸å¤„ç†åŸºæœ¬ç±»å‹ï¼ˆå¦‚ intï¼‰</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†æ–¹æ³•å‚æ•°(<span class="doctag">@RequestBody</span>)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">readInternal</span><span class="params">(Class&lt;?&gt; clazz, HttpInputMessage inputMessage)</span> <span class="keyword">throws</span> IOException, HttpMessageNotReadableException </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†æ–¹æ³•è¿”å›å€¼(<span class="doctag">@ResponseBody</span>)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">writeInternal</span><span class="params">(Object returnValue, HttpOutputMessage outputMessage)</span> <span class="keyword">throws</span> IOException, HttpMessageNotWritableException </span>{</span><br><span class="line">        <span class="keyword">try</span> (OutputStream outputStream = outputMessage.getBody()) {</span><br><span class="line">            <span class="keyword">this</span>.objectMapper.writeValue(outputStream, returnValue);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>æ·»åŠ  <code>HttpMessageConverter</code> ç»„ä»¶ï¼Œä¸“é—¨è´Ÿè´£æŠŠè¿”å›å€¼å¯¹è±¡è¾“å‡ºä¸º YAML æ ¼å¼çš„æ•°æ® </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfiguration</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> </span>{</span><br><span class="line">        <span class="comment">// æ·»åŠ ä¸€ä¸ªæ”¯æŒå°†è¿”å›å€¼å¯¹è±¡è½¬ä¸º YAML æ ¼å¼çš„ MessageConverter</span></span><br><span class="line">        converters.add(<span class="keyword">new</span> YamlHttpMessageConverter());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ä»£ç æµ‹è¯•ç»“æœ</li></ul><p><img data-src="../../../asset/2023/06/spring-boot3-study-12.png"></p><p><img data-src="../../../asset/2023/06/spring-boot3-study-13.png"></p><h4 id="è‡ªå®šä¹‰å†…å®¹è¿”å›æ€»ç»“"><a href="#è‡ªå®šä¹‰å†…å®¹è¿”å›æ€»ç»“" class="headerlink" title="è‡ªå®šä¹‰å†…å®¹è¿”å›æ€»ç»“"></a>è‡ªå®šä¹‰å†…å®¹è¿”å›æ€»ç»“</h4><ul><li>å¦‚ä½•è‡ªå®šä¹‰å†…å®¹è¿”å›<ul><li> 1ã€é…ç½®åª’ä½“ç±»å‹æ”¯æŒ: <code>spring.mvc.contentnegotiation.media-types.yaml=text/yaml</code></li><li>2ã€ç¼–å†™å¯¹åº”çš„ <code>HttpMessageConverter</code>ï¼Œåœ¨å†…éƒ¨è¦å‘Šè¯‰ SpringBoot æ”¯æŒçš„åª’ä½“ç±»å‹</li><li> 3ã€å¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª <code>WebMvcConfigurer</code> ç»„ä»¶ï¼Œå¹¶æ·»åŠ è‡ªå®šä¹‰çš„ <code>HttpMessageConverter</code></li></ul></li></ul><h3 id="å†…å®¹åå•†åŸç†åˆ†æ"><a href="#å†…å®¹åå•†åŸç†åˆ†æ" class="headerlink" title="å†…å®¹åå•†åŸç†åˆ†æ"></a>å†…å®¹åå•†åŸç†åˆ†æ</h3><blockquote><p>1ã€<code>@ResponseBody</code> çš„åº•å±‚ç”± <code>HttpMessageConverter</code> å¤„ç†æ•°æ®ï¼Œå³æ ‡æ³¨äº† <code>@ResponseBody</code> çš„è¿”å›å€¼ï¼Œå°†ä¼šç”±æ”¯æŒå®ƒçš„ <code>HttpMessageConverter</code> å°†æ•°æ®è¿”å›ç»™æµè§ˆå™¨ã€‚</p></blockquote><ul><li><p>å¦‚æœ <code>Controller</code> æ–¹æ³•çš„è¿”å›å€¼æ ‡æ³¨äº† <code>@ResponseBody</code> æ³¨è§£</p><ul><li>è¯·æ±‚è¿›æ¥å…ˆæ¥åˆ° <code>DispatcherServlet</code> çš„ <code>doDispatch()</code> è¿›è¡Œå¤„ç†</li><li>æ‰¾åˆ°ä¸€ä¸ª <code>HandlerAdapter</code> é€‚é…å™¨ï¼Œåˆ©ç”¨é€‚é…å™¨æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li><code>RequestMappingHandlerAdapter</code> ä¼šæ‰§è¡Œï¼Œè°ƒç”¨ <code>invokeHandlerMethod()</code> æ¥æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦å‡†å¤‡å¥½ä¸¤æ ·ä¸œè¥¿<ul><li><code>HandlerMethodArgumentResolver</code>ï¼šå‚æ•°è§£æå™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•çš„æ¯ä¸ªå‚æ•°å€¼</li><li><code>HandlerMethodReturnValueHandler</code>ï¼šè¿”å›å€¼å¤„ç†å™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼è¯¥æ€ä¹ˆå¤„ç†</li></ul></li><li><code>RequestMappingHandlerAdapter</code> é‡Œé¢çš„ <code>invokeAndHandle()</code> çœŸæ­£æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œä¼šè¿”å›è¿”å›å€¼çš„å¯¹è±¡</li><li>å»æ‰¾ä¸€ä¸ªåˆé€‚çš„è¿”å›å€¼å¤„ç†å™¨ <code>HandlerMethodReturnValueHandler</code></li><li>æœ€ç»ˆæ‰¾åˆ° <code>RequestResponseBodyMethodProcessor</code>ï¼Œå®ƒèƒ½å¤„ç†æ ‡æ³¨äº† <code>@ResponseBody</code> æ³¨è§£çš„æ–¹æ³•</li><li><code>RequestResponseBodyMethodProcessor</code> è°ƒç”¨ <code>writeWithMessageConverters()</code>ï¼Œåˆ©ç”¨ <code>MessageConverter</code> æŠŠè¿”å›å€¼è¾“å‡ºç»™æµè§ˆå™¨</li></ul></li><li><p><code>HttpMessageConverter</code> ä¼šå…ˆè¿›è¡Œå†…å®¹åå•†</p><ul><li>éå†æ‰€æœ‰çš„ <code>MessageConverter</code>ï¼Œçœ‹å“ªä¸ªæ”¯æŒè¿™ç§å†…å®¹ç±»å‹çš„æ•°æ®</li><li>é»˜è®¤çš„ <code>MessageConverter</code> æœ‰<a href="../../../asset/2023/06/spring-boot3-study-10.png">è¿™äº›</a></li><li>æœ€ç»ˆå› ä¸ºéœ€è¦è¿”å› JSON æ•°æ®ï¼Œæ‰€ä»¥é€šè¿‡ <code>MappingJackson2HttpMessageConverter</code> è¾“å‡º JSON æ•°æ®</li><li> Jackson åˆ©ç”¨ <code>ObjectMapper</code> æŠŠè¿”å›å€¼å¯¹è±¡å†™å‡ºå»</li></ul></li></ul><blockquote><p>2ã€<code>WebMvcAutoConfiguration</code> æä¾›äº† <a href="../../../asset/2023/06/spring-boot3-study-11.png">6 ç§</a> é»˜è®¤çš„ <code>HttpMessageConverters</code></p></blockquote><ul><li><code>EnableWebMvcConfiguration</code> é€šè¿‡ <code>addDefaultHttpMessageConverters</code> æ·»åŠ äº†é»˜è®¤çš„ <code>MessageConverter</code>ï¼Œå¦‚ä¸‹ï¼š<ul><li><code>ByteArrayHttpMessageConverter</code>ï¼šæ”¯æŒå­—èŠ‚æ•°æ®è¯»å†™</li><li><code>StringHttpMessageConverter</code>ï¼šæ”¯æŒå­—ç¬¦ä¸²è¯»å†™</li><li><code>ResourceHttpMessageConverter</code>ï¼šæ”¯æŒèµ„æºè¯»å†™</li><li><code>ResourceRegionHttpMessageConverter</code>ï¼šæ”¯æŒåˆ†åŒºèµ„æºå†™å‡º</li><li><code>AllEncompassingFormHttpMessageConverter</code>ï¼šæ”¯æŒè¡¨å• XML/JSON è¯»å†™</li><li><code>MappingJackson2HttpMessageConverter</code>ï¼šæ”¯æŒè¯·æ±‚å“åº”ä½“ JSON è¯»å†™</li></ul></li></ul><div class="admonition note"><p class="admonition-title">æç¤º</p><p>SpringBoot æä¾›é»˜è®¤çš„ <code>MessageConverter</code> åŠŸèƒ½æœ‰é™ï¼Œä»…ç”¨äº JSON æˆ–è€…æ™®é€šçš„è¿”å›æ•°æ®ã€‚å¦‚æœéœ€è¦å¢åŠ æ–°çš„å†…å®¹åå•†åŠŸèƒ½ï¼Œå¿…é¡»æ·»åŠ æ–°çš„ <code>HttpMessageConverter</code>ã€‚</p></div><h2 id="æ¨¡æ¿å¼•æ“"><a href="#æ¨¡æ¿å¼•æ“" class="headerlink" title="æ¨¡æ¿å¼•æ“"></a>æ¨¡æ¿å¼•æ“</h2><h3 id="æ¨¡æ¿å¼•æ“ä»‹ç»"><a href="#æ¨¡æ¿å¼•æ“ä»‹ç»" class="headerlink" title="æ¨¡æ¿å¼•æ“ä»‹ç»"></a>æ¨¡æ¿å¼•æ“ä»‹ç»</h3><p>ç”±äº SpringBoot ä½¿ç”¨äº†åµŒå…¥å¼ Servlet å®¹å™¨ï¼Œæ‰€ä»¥ JSP é»˜è®¤æ˜¯ä¸èƒ½ä½¿ç”¨çš„ã€‚å¦‚æœéœ€è¦æœåŠ¡ç«¯é¡µé¢æ¸²æŸ“ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æ¨¡æ¿å¼•æ“æŠ€æœ¯ã€‚</p><p><img data-src="../../../asset/2023/06/spring-boot3-study-15.png"></p><p>SpringBoot é»˜è®¤åŒ…å«äº†ä»¥ä¸‹æ¨¡æ¿å¼•æ“çš„è‡ªåŠ¨é…ç½®ï¼Œæ¨¡æ¿å¼•æ“çš„é¡µé¢é»˜è®¤æ”¾åœ¨ <code>src/main/resources/templates</code> ç›®å½•ä¸‹ã€‚</p><ul><li>FreeMarker</li><li><a href="https://www.thymeleaf.org/">Thymeleaf</a></li><li>Mustache</li><li>Groovy</li></ul><h3 id="Thymeleaf-æ•´åˆ"><a href="#Thymeleaf-æ•´åˆ" class="headerlink" title="Thymeleaf æ•´åˆ"></a>Thymeleaf æ•´åˆ</h3><ul><li>å¼•å…¥ Maven ä¾èµ– </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>æ·»åŠ é…ç½®å†…å®¹ï¼ˆå¯é€‰ï¼‰</li></ul><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">cache:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">HTML</span></span><br><span class="line">    <span class="attr">suffix:</span> <span class="string">.html</span></span><br><span class="line">    <span class="attr">encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">    <span class="attr">prefix:</span> <span class="string">classpath:/templates/</span></span><br><span class="line">    <span class="attr">check-template-location:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><ul><li>ç¼–å†™ Controller ç±»ï¼Œå¾€æ¨¡æ¿æ–‡ä»¶ä¸­å­˜æ”¾å€¼ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WelcomeController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping("/")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">welcome</span><span class="params">(<span class="meta">@RequestParam(name = "name", required = false)</span> String name, Model model)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(name)) {</span><br><span class="line">            name = <span class="string">"Thymeleaf"</span>;</span><br><span class="line">        }</span><br><span class="line">        model.addAttribute(<span class="string">"name"</span>, name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"welcome"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ç¼–å†™ HTML æ¨¡æ¿é¡µé¢ï¼Œæ˜¾ç¤ºåœ¨ Controller ç±»ä¸­è®¾ç½®çš„å€¼ </li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Welcome<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"${name}"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>æµè§ˆå™¨è®¿é—® <code>http://127.0.0.1:8080/?name=Peter</code>ï¼Œæ˜¾ç¤ºçš„é¡µé¢å†…å®¹å¦‚ä¸‹ï¼š</li></ul><p><img data-src="../../../asset/2023/06/spring-boot3-study-16.png"></p><ul><li>è‡ªåŠ¨é…ç½®åŸç†<ul><li>è‡ªåŠ¨é…ç½®ç±»æ˜¯ <code>org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration</code></li><li>é…ç½®å±æ€§ç»‘å®šåœ¨ <code>ThymeleafProperties</code> ä¸­ï¼Œå¯¹åº”é…ç½®æ–‡ä»¶ä¸­ä»¥ <code>spring.thymeleaf</code> å¼€å§‹å‰ç¼€çš„å†…å®¹</li><li>æ‰€æœ‰çš„æ¨¡æ¿é¡µé¢é»˜è®¤éƒ½æ”¾åœ¨ <code>classpath:/templates</code> æ–‡ä»¶å¤¹ä¸‹</li><li>è‡ªåŠ¨é…ç½®å®ç°çš„é»˜è®¤æ•ˆæœ</li><li>æ‰€æœ‰çš„æ¨¡æ¿é¡µé¢éƒ½åœ¨ <code>classpath:/templates/</code> æ–‡ä»¶å¤¹ä¸‹é¢æ‰¾</li><li>æ‰¾åç¼€åä¸º <code>.html</code> çš„æ¨¡æ¿é¡µé¢è¿›è¡Œæ¸²æŸ“</li></ul></li></ul><h3 id="Thymeleaf-åŸºç¡€è¯­æ³•"><a href="#Thymeleaf-åŸºç¡€è¯­æ³•" class="headerlink" title="Thymeleaf åŸºç¡€è¯­æ³•"></a>Thymeleaf åŸºç¡€è¯­æ³•</h3><h4 id="æ ¸å¿ƒç”¨æ³•"><a href="#æ ¸å¿ƒç”¨æ³•" class="headerlink" title="æ ¸å¿ƒç”¨æ³•"></a>æ ¸å¿ƒç”¨æ³•</h4><ul><li><code>th:xxx</code>ï¼šåŠ¨æ€æ¸²æŸ“æŒ‡å®šçš„ HTML æ ‡ç­¾å±æ€§å€¼æˆ–è€… <code>th</code> æŒ‡ä»¤ï¼ˆéå†ã€åˆ¤æ–­ç­‰ï¼‰<ul><li><code>th:text</code>ï¼šæ¸²æŸ“ HTML æ ‡ç­¾ä½“å†…çš„å†…å®¹</li><li><code>th:utext</code>ï¼šæ¸²æŸ“ HTML æ ‡ç­¾ä½“å†…çš„å†…å®¹ï¼Œä½†ä¸ä¼šè½¬ä¹‰ï¼Œæ˜¾ç¤ºä¸º HTML åŸæœ¬çš„æ ·å­</li><li><code>th:ä»»æ„HTMLå±æ€§</code>ï¼šæ ‡ç­¾æŒ‡å®šå±æ€§æ¸²æŸ“</li><li><code>th:attr</code>ï¼šæ ‡ç­¾ä»»æ„å±æ€§æ¸²æŸ“</li><li><code>th:if</code>ã€<code>th:each</code>ï¼šå…¶ä»– <code>th</code> æŒ‡ä»¤ </li></ul></li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">"${content}"</span>&gt;</span>åŸå†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"${url}"</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">"${imgUrl}"</span> <span class="attr">style</span>=<span class="string">"width:300px; height: 200px"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">th:attr</span>=<span class="string">"src=${imgUrl},style=${imgStyle},title=#{logo},alt=#{logo}"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">th:attr</span>=<span class="string">"src=@{/images/gtvglogo.png},title=#{logo},alt=#{logo}"</span> <span class="attr">th:if</span>=<span class="string">"${imgShow}"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li><p>è¡¨è¾¾å¼ï¼šç”¨æ¥åŠ¨æ€å–å€¼</p><ul><li><code>${}</code>ï¼šå˜é‡å–å€¼ï¼Œä½¿ç”¨ <code>Model</code> å…±äº«ç»™é¡µé¢çš„å€¼éƒ½å¯ä»¥ç›´æ¥ç”¨ <code>${}</code> è·å–</li><li><code>@{}</code>ï¼šURL è·¯å¾„</li><li><code>#{}</code>ï¼šå›½é™…åŒ–æ¶ˆæ¯</li><li><code>~{}</code>ï¼šç‰‡æ®µå¼•ç”¨</li><li><code>*{}</code>ï¼šå˜é‡é€‰æ‹©ï¼šéœ€è¦é…åˆ <code>th:object</code> ç»‘å®šå¯¹è±¡</li></ul></li><li><p>ç³»ç»Ÿå·¥å…· &amp; å†…ç½®å¯¹è±¡ï¼š<a href="https://www.thymeleaf.org/doc/tutorials/3.1/usingthymeleaf.html#appendix-b-expression-utility-objects">å®˜æ–¹æ–‡æ¡£</a></p><ul><li><code>param</code>ï¼šè¯·æ±‚å‚æ•°å¯¹è±¡</li><li><code>session</code>ï¼šSession å¯¹è±¡</li><li><code>application</code>ï¼šApplication å¯¹è±¡</li><li><code>#execInfo</code>ï¼šæ¨¡æ¿æ‰§è¡Œä¿¡æ¯</li><li><code>#messages</code>ï¼šå›½é™…åŒ–æ¶ˆæ¯</li><li><code>#uris</code>ï¼šURI/URL å·¥å…·</li><li><code>#conversions</code>ï¼šç±»å‹è½¬æ¢å·¥å…·</li><li><code>#dates</code>ï¼šæ—¥æœŸå·¥å…·ï¼Œæ˜¯ <code>java.util.Date</code> å¯¹è±¡çš„å·¥å…·ç±»</li><li><code>#calendars</code>ï¼šç±»ä¼¼ <code>#dates</code>ï¼Œåªä¸è¿‡æ˜¯ <code>java.util.Calendar</code> å¯¹è±¡çš„å·¥å…·ç±»</li><li><code>#temporals</code>ï¼š JDK 8+ çš„ <code>java.time API</code> å·¥å…·ç±»</li><li><code>#numbers</code>ï¼šæ•°å­—æ“ä½œå·¥å…·</li><li><code>#strings</code>ï¼šå­—ç¬¦ä¸²æ“ä½œ</li><li><code>#objects</code>ï¼šå¯¹è±¡æ“ä½œ</li><li><code>#bools</code>ï¼šå¸ƒå°”æ“ä½œ</li><li><code>#arrays</code>ï¼šArray å·¥å…·</li><li><code>#lists</code>ï¼šList å·¥å…·</li><li><code>#sets</code>ï¼šSet å·¥å…·</li><li><code>#maps</code>ï¼šMap å·¥å…·</li><li><code>#aggregates</code>ï¼šé›†åˆèšåˆå·¥å…·ï¼ˆsumã€avgï¼‰</li><li><code>#ids</code>ï¼šID ç”Ÿæˆå·¥å…·</li></ul></li></ul><h4 id="è¯­æ³•ç¤ºä¾‹"><a href="#è¯­æ³•ç¤ºä¾‹" class="headerlink" title="è¯­æ³•ç¤ºä¾‹"></a>è¯­æ³•ç¤ºä¾‹</h4><ul><li><p>è¡¨è¾¾å¼ï¼š</p><ul><li>å˜é‡å–å€¼ï¼š<code>${...}</code></li><li>URL å–å€¼ï¼š<code>@{...}</code></li><li>å›½é™…åŒ–æ¶ˆæ¯ï¼š<code>#{...}</code></li><li>å˜é‡é€‰æ‹©ï¼š<code>*{...}</code></li><li>ç‰‡æ®µå¼•ç”¨: <code>~{...}</code></li></ul></li><li><p>å¸¸è§ï¼š</p><ul><li>æ–‡æœ¬ï¼š<code>one text</code>ï¼Œ<code>another one!</code>ï¼Œâ€¦</li><li> æ•°å­—ï¼š0ï¼Œ34ï¼Œ3.0ï¼Œ12.3ï¼Œâ€¦</li><li> å¸ƒå°”ï¼š<code>true</code>ã€<code>false</code></li><li>Nullï¼š<code>null</code></li><li>å˜é‡åï¼šoneï¼Œsometextï¼Œmainâ€¦</li></ul></li><li><p> æ–‡æœ¬æ“ä½œï¼š</p><ul><li>æ‹¼æ¥å­—ç¬¦ä¸²ï¼š <code>+</code></li><li>æ–‡æœ¬å†…å®¹æ›¿æ¢ï¼š<code>| The name is ${name} |</code></li></ul></li><li><p>å¸ƒå°”æ“ä½œï¼š</p><ul><li>äºŒè¿›åˆ¶è¿ç®—ï¼š <code>and</code>ï¼Œ<code>or</code></li><li>å–åï¼š<code>!</code>ï¼Œ<code>not</code></li></ul></li><li><p>æ¯”è¾ƒè¿ç®—ï¼š</p><ul><li>æ¯”è¾ƒï¼š<code>&gt;</code>ï¼Œ<code>&lt;</code>ï¼Œ<code>&lt;=</code>ï¼Œ<code>&gt;=</code>ï¼ˆ<code>gt</code>ï¼Œ<code>lt</code>ï¼Œ<code>ge</code>ï¼Œ<code>le</code>ï¼‰</li><li>ç­‰å€¼è¿ç®—ï¼š<code>==</code>ï¼Œ<code>!=</code>ï¼ˆ<code>eq</code>ï¼Œ<code>ne</code>ï¼‰</li></ul></li><li><p>æ¡ä»¶è¿ç®—ï¼š</p><ul><li>if-thenï¼š <code>(if)?(then)</code></li><li>if-then-elseï¼š<code>(if)?(then):(else)</code></li><li>defaultï¼š<code>(value)?:(defaultValue)</code></li></ul></li><li><p>ç‰¹æ®Šè¯­æ³•ï¼š</p><ul><li>æ— æ“ä½œï¼š<code>_</code></li></ul></li></ul><blockquote><p>ä»¥ä¸Šæ‰€æœ‰è¯­æ³•éƒ½å¯ä»¥åµŒå¥—ç»„åˆ</p></blockquote><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">'User is of type ' + (${user.isAdmin()} ? 'Administrator' : (${user.type} ?: 'Unknown'))</span><br></pre></td></tr></tbody></table></figure><h4 id="é›†åˆéå†"><a href="#é›†åˆéå†" class="headerlink" title="é›†åˆéå†"></a>é›†åˆéå†</h4><ul><li>è¯­æ³•ï¼š<code>th:each="å…ƒç´ å, è¿­ä»£çŠ¶æ€ : ${é›†åˆ}"</code></li><li>è¿­ä»£çŠ¶æ€æœ‰ä»¥ä¸‹å±æ€§ï¼š<ul><li><code>index</code>ï¼šå½“å‰éå†å…ƒç´ çš„ç´¢å¼•ï¼Œä» 0 å¼€å§‹</li><li><code>count</code>ï¼šå½“å‰éå†å…ƒç´ çš„ç´¢å¼•ï¼Œä» 1 å¼€å§‹</li><li><code>size</code>ï¼šéœ€è¦éå†å…ƒç´ çš„æ€»æ•°é‡</li><li><code>current</code>ï¼šå½“å‰æ­£åœ¨éå†çš„å…ƒç´ å¯¹è±¡</li><li><code>even/odd</code>ï¼šæ˜¯å¦å¶æ•° / å¥‡æ•°è¡Œ</li><li><code>first</code>ï¼šæ˜¯å¦ç¬¬ä¸€ä¸ªå…ƒç´ </li><li><code>last</code>ï¼šæ˜¯å¦æœ€åä¸€ä¸ªå…ƒç´  </li></ul></li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Welcome<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span> <span class="attr">cellspacing</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>é‚®ç®±<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"person : ${persons}"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${person.id}"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${person.userName}"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${person.age}"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${person.email}"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span> <span class="attr">cellspacing</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>é‚®ç®±<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"person, iterStat : ${persons}"</span> <span class="attr">th:class</span>=<span class="string">"${iterStat.odd} ? 'odd'"</span> <span class="attr">th:index</span>=<span class="string">"${iterStat.index}"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${person.id}"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${person.userName}"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${person.age}"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${person.email}"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h4><ul><li>è¡¨è¾¾å¼åˆ¤æ–­ </li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"person : ${persons}"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${person.age &gt;= 18 ? 'æˆå¹´äºº' : 'æœªæˆå¹´äºº'}"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li><code>th:if</code> åˆ¤æ–­ </li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"@{/comments.html}"</span> <span class="attr">th:if</span>=<span class="string">"${not #lists.isEmpty(prod.comments)}"</span>&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li><code>th:switch</code> åˆ¤æ–­ </li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:switch</span>=<span class="string">"${person.role}"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">"pm"</span>&gt;</span>é¡¹ç›®ç»ç†<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">"admin"</span>&gt;</span>ç®¡ç†å‘˜<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">"hr"</span>&gt;</span>HR<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">"*"</span>&gt;</span>å…¶ä»–<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="å±æ€§ä¼˜å…ˆçº§"><a href="#å±æ€§ä¼˜å…ˆçº§" class="headerlink" title="å±æ€§ä¼˜å…ˆçº§"></a>å±æ€§ä¼˜å…ˆçº§</h4><table><thead><tr><th>ä¼˜å…ˆçº§ï¼ˆå€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰</th><th>åŠŸèƒ½</th><th>å±æ€§</th></tr></thead><tbody><tr><td> 1</td><td> ç‰‡æ®µåŒ…å«</td><td><code>th:insert</code>ã€<code>th:replace</code></td></tr><tr><td>2</td><td> éå†</td><td><code>th:each</code></td></tr><tr><td>3</td><td> åˆ¤æ–­</td><td><code>th:if</code>ã€<code>th:unless</code>ã€<code>th:switch</code>ã€<code>th:case</code></td></tr><tr><td>4</td><td> å®šä¹‰æœ¬åœ°å˜é‡</td><td><code>th:object</code>ã€<code>th:with</code></td></tr><tr><td>5</td><td> é€šç”¨æ–¹å¼å±æ€§ä¿®æ”¹</td><td><code>th:attr</code>ã€<code>th:attrprepend</code>ã€<code>th:attrappend</code></td></tr><tr><td>6</td><td> æŒ‡å®šå±æ€§ä¿®æ”¹</td><td><code>th:value</code>ã€<code>th:href</code>ã€<code>th:src</code> â€¦</td></tr><tr><td>7</td><td> æ–‡æœ¬å€¼</td><td><code>th:text</code>ã€<code>th:utext</code></td></tr><tr><td>8</td><td> ç‰‡æ®µæŒ‡å®š</td><td><code>th:fragment</code></td></tr><tr><td>9</td><td> ç‰‡æ®µç§»é™¤</td><td><code>th:remove</code></td></tr></tbody></table><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:each</span>=<span class="string">"item : ${items}"</span> <span class="attr">th:text</span>=<span class="string">"${item.description}"</span>&gt;</span>Item description here...<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="è¡Œå†…å†™æ³•"><a href="#è¡Œå†…å†™æ³•" class="headerlink" title="è¡Œå†…å†™æ³•"></a>è¡Œå†…å†™æ³•</h4><p>è¯­æ³•ï¼š<code>[[...]] or [(...)]</code></p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>[[${session.user.name}]]<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç­‰åŒäº</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">"${session.user.name}"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="å˜é‡é€‰æ‹©"><a href="#å˜é‡é€‰æ‹©" class="headerlink" title="å˜é‡é€‰æ‹©"></a>å˜é‡é€‰æ‹©</h4><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"${session.user}"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*{firstName}"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*{lastName}"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*{nationality}"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç­‰åŒäº</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"${session.user.firstName}"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"${session.user.lastName}"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"${session.user.nationality}"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="æ¨¡æ¿å¸ƒå±€"><a href="#æ¨¡æ¿å¸ƒå±€" class="headerlink" title="æ¨¡æ¿å¸ƒå±€"></a>æ¨¡æ¿å¸ƒå±€</h4><ul><li>æ¨¡ç‰ˆå¸ƒå±€çš„è¯­æ³•<ul><li>å®šä¹‰æ¨¡æ¿ï¼š<code>th:fragment</code></li><li>å¼•ç”¨æ¨¡æ¿ï¼š<code>~{templateName::selector}</code></li><li>æ’å…¥æ¨¡æ¿ï¼š<code>th:insert</code>ã€<code>th:replace</code></li></ul></li></ul><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li>æ¨¡æ¿å¸ƒå±€ä¸€èˆ¬ç”¨äºå®ç°ä»£ç ç‰‡æ®µçš„é‡å¤ä½¿ç”¨ã€‚</li></ul></div><ul><li>å®šä¹‰æ¨¡æ¿å¸ƒå±€ï¼ˆå¦‚ <code>footer.html</code>ï¼‰</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:fragment</span>=<span class="string">"copy"</span>&gt;</span><span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>å¼•ç”¨æ¨¡æ¿å¸ƒå±€ï¼ˆå¦‚åœ¨ <code>index.html</code> ä¸­å¼•ç”¨ï¼‰</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"~{footer :: copy}"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"~{footer :: copy}"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>å®ç°çš„æ•ˆæœï¼ˆå¦‚ <code>index.html</code> æœ€ç»ˆçš„æ¸²æŸ“ç»“æœï¼‰</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="Devtools"><a href="#Devtools" class="headerlink" title="Devtools"></a>Devtools</h4><p>SpringBoot æä¾›äº† <code>Devtools</code> å·¥å…·ç”¨äºä»£ç çš„çƒ­åŠ è½½ï¼Œé¦–å…ˆå¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>æ›´æ”¹ Thymeleaf çš„æ¨¡æ¿é¡µé¢åï¼Œä½¿ç”¨å¿«æ·é”® <code>Ctrl + F9</code> å°±å¯ä»¥è®©é¡µé¢çš„æ›´æ”¹ç«‹å³ç”Ÿæ•ˆã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¯¹äº Java ä»£ç çš„ä¿®æ”¹ï¼Œå¦‚æœ <code>Devtools</code> çƒ­å¯åŠ¨äº†ï¼Œå¯èƒ½ä¼šå¼•èµ·ä¸€äº› Bugï¼Œä¸”éš¾ä»¥æ’æŸ¥ã€‚</p><h2 id="æœ€æ–°ç‰¹æ€§"><a href="#æœ€æ–°ç‰¹æ€§" class="headerlink" title="æœ€æ–°ç‰¹æ€§"></a>æœ€æ–°ç‰¹æ€§</h2><h3 id="Problemdetails"><a href="#Problemdetails" class="headerlink" title="Problemdetails"></a>Problemdetails</h3><p><code>Problemdetails</code> å®ç°äº† <a href="https://www.rfc-editor.org/rfc/rfc7807">RFC 7807</a> è§„èŒƒï¼Œç”¨äºè¿”å›æ–°æ ¼å¼çš„é”™è¯¯ä¿¡æ¯ã€‚</p><h4 id="æºç ä»‹ç»"><a href="#æºç ä»‹ç»" class="headerlink" title="æºç ä»‹ç»"></a>æºç ä»‹ç»</h4><ul><li><code>ProblemDetailsExceptionHandler</code> æ˜¯ä¸€ä¸ª <code>@ControllerAdvice</code>ï¼Œç”¨äºé›†ä¸­å¤„ç†ç³»ç»Ÿå¼‚å¸¸ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = "spring.mvc.problemdetails", name = "enabled", havingValue = "true")</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ProblemDetailsErrorHandlingConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(ResponseEntityExceptionHandler.class)</span></span><br><span class="line">    <span class="function">ProblemDetailsExceptionHandler <span class="title">problemDetailsExceptionHandler</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProblemDetailsExceptionHandler();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ProblemDetailsExceptionHandler</span> <span class="keyword">extends</span> <span class="title">ResponseEntityExceptionHandler</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li><code>ProblemDetailsExceptionHandler</code> é»˜è®¤å¯ä»¥å¤„ç†ä»¥ä¸‹å¼‚å¸¸ï¼Œå¦‚æœç³»ç»Ÿå‡ºç°ä»¥ä¸‹å¼‚å¸¸ï¼Œä¼šè¢« SpringBoot ä»¥ RFC 7807 è§„èŒƒçš„æ–¹å¼è¿”å›é”™è¯¯æ•°æ® </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler({</span></span><br><span class="line"><span class="meta">    HttpRequestMethodNotSupportedException.class,</span></span><br><span class="line"><span class="meta">    HttpMediaTypeNotSupportedException.class,</span></span><br><span class="line"><span class="meta">    HttpMediaTypeNotAcceptableException.class,</span></span><br><span class="line"><span class="meta">    MissingPathVariableException.class,</span></span><br><span class="line"><span class="meta">    MissingServletRequestParameterException.class,</span></span><br><span class="line"><span class="meta">    MissingServletRequestPartException.class,</span></span><br><span class="line"><span class="meta">    ServletRequestBindingException.class,</span></span><br><span class="line"><span class="meta">    MethodArgumentNotValidException.class,</span></span><br><span class="line"><span class="meta">    NoHandlerFoundException.class,</span></span><br><span class="line"><span class="meta">    AsyncRequestTimeoutException.class,</span></span><br><span class="line"><span class="meta">    ErrorResponseException.class,</span></span><br><span class="line"><span class="meta">    ConversionNotSupportedException.class,</span></span><br><span class="line"><span class="meta">    TypeMismatchException.class,</span></span><br><span class="line"><span class="meta">    HttpMessageNotReadableException.class,</span></span><br><span class="line"><span class="meta">    HttpMessageNotWritableException.class,</span></span><br><span class="line"><span class="meta">    BindException.class</span></span><br><span class="line"><span class="meta">})</span></span><br></pre></td></tr></tbody></table></figure><h4 id="ä½¿ç”¨è¯´æ˜"><a href="#ä½¿ç”¨è¯´æ˜" class="headerlink" title="ä½¿ç”¨è¯´æ˜"></a>ä½¿ç”¨è¯´æ˜</h4><ul><li>ProblemDetails åŠŸèƒ½é»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ </li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.mvc.problemdetails.enabled</span>=<span class="string">true</span></span><br></pre></td></tr></tbody></table></figure><ul><li>ProblemDetails å¯ç”¨åï¼Œå½“ SpringBoot æ•è·åˆ°å¼‚å¸¸åï¼Œé»˜è®¤ä¼šå“åº” JSON æ•°æ®å’Œè¿”å› HTTP çŠ¶æ€ç  <code>405</code>ï¼Œä¸”å“åº”çš„ Header æ˜¯ <code>Content-Type: application/problem+json</code></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"about:blank"</span>,</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"Method Not Allowed"</span>,</span><br><span class="line">    <span class="attr">"status"</span>: <span class="number">405</span>,</span><br><span class="line">    <span class="attr">"detail"</span>: <span class="string">"Method 'POST' is not supported."</span>,</span><br><span class="line">    <span class="attr">"instance"</span>: <span class="string">"/list"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="å‡½æ•°å¼-Web"><a href="#å‡½æ•°å¼-Web" class="headerlink" title="å‡½æ•°å¼ Web"></a>å‡½æ•°å¼ Web</h3><p>Spring MVC <code>5.2</code> ä»¥åï¼Œå…è®¸ä½¿ç”¨å‡½æ•°å¼çš„æ–¹å¼å®šä¹‰ Web çš„è¯·æ±‚å¤„ç†æµç¨‹ã€‚</p><div class="admonition note"><p class="admonition-title">Web è¯·æ±‚å¤„ç†çš„ä¸¤ç§æ–¹å¼</p><ul><li>1ã€<code>@Controller</code> + <code>@RequestMapping</code>ï¼šè€¦åˆå¼ï¼ˆè·¯ç”±å’Œä¸šåŠ¡è€¦åˆï¼‰</li><li>2ã€å‡½æ•°å¼ Webï¼šåˆ†ç¦»å¼ï¼ˆè·¯ç”±å’Œä¸šåŠ¡åˆ†ç¦»ï¼‰</li></ul></div><h4 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h4><ul><li>åœºæ™¯ï¼šUser RESTful - CRUD<ul><li><code>GET /user/1</code>ï¼šè·å– 1 å·ç”¨æˆ·</li><li><code>GET /users</code>ï¼šè·å–æ‰€æœ‰ç”¨æˆ·</li><li><code>POST /user</code>ï¼šè¯·æ±‚ä½“æºå¸¦ JSONï¼Œæ–°å¢ä¸€ä¸ªç”¨æˆ·</li><li><code>PUT /user/1</code>ï¼šè¯·æ±‚ä½“æºå¸¦ JSONï¼Œä¿®æ”¹ 1 å·ç”¨æˆ·</li><li><code>DELETE /user/1</code>ï¼šåˆ é™¤ 1 å·ç”¨æˆ·</li></ul></li></ul><h4 id="æ ¸å¿ƒç±»"><a href="#æ ¸å¿ƒç±»" class="headerlink" title="æ ¸å¿ƒç±»"></a>æ ¸å¿ƒç±»</h4><ul><li><code>RouterFunction</code>ï¼šå®šä¹‰è·¯ç”±ä¿¡æ¯ï¼Œå³å‘é€ä»€ä¹ˆè¯·æ±‚ï¼Œç”±è°æ¥å¤„ç†</li><li><code>RequestPredicate</code>ï¼šè¯·æ±‚æ–¹å¼ï¼ˆå¦‚ GETã€POSTï¼‰ã€è¯·æ±‚å‚æ•°</li><li><code>ServerRequest</code>ï¼šå°è£…è¯·æ±‚æ•°æ®</li><li><code>ServerResponse</code>ï¼šå°è£…å“åº”æ•°æ®</li></ul><h4 id="ä½¿ç”¨æ¡ˆä¾‹"><a href="#ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="ä½¿ç”¨æ¡ˆä¾‹"></a>ä½¿ç”¨æ¡ˆä¾‹</h4><ul><li>å®ä½“ç±» </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.ToString;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String role;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>å®šä¹‰è·¯ç”±ä¿¡æ¯ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.clay.boot.web.biz.UserBizHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.RequestPredicate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.RequestPredicates;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.RouterFunction;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.RouterFunctions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.ServerResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoutingConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> RequestPredicate ACCEPT_ALL = RequestPredicates.accept(MediaType.ALL);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> RequestPredicate ACCEPT_JSON = RequestPredicates.accept(MediaType.APPLICATION_JSON);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RouterFunction&lt;ServerResponse&gt; <span class="title">userRoute</span><span class="params">(UserBizHandler userBizHandler)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> RouterFunctions.route()</span><br><span class="line">            .GET(<span class="string">"/user/{id}"</span>, ACCEPT_ALL, userBizHandler::getUser)</span><br><span class="line">            .GET(<span class="string">"/users"</span>, ACCEPT_ALL, userBizHandler::listUser)</span><br><span class="line">            .POST(<span class="string">"/user"</span>, ACCEPT_JSON, userBizHandler::addUser)</span><br><span class="line">            .PUT(<span class="string">"/user/{id}"</span>, ACCEPT_JSON, userBizHandler::updateUser)</span><br><span class="line">            .DELETE(<span class="string">"/user/{id}"</span>, ACCEPT_ALL, userBizHandler::deleteUser)</span><br><span class="line">            .build();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ä¸šåŠ¡å¤„ç† </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.clay.boot.web.domain.User;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.ServerRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.ServerResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserBizHandler</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServerResponse <span class="title">getUser</span><span class="params">(ServerRequest serverRequest)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        Long id = Long.parseLong(serverRequest.pathVariable(<span class="string">"id"</span>));</span><br><span class="line">        User user = <span class="keyword">new</span> User(id, <span class="string">"Peter1"</span>, <span class="string">"peter@gmail.com"</span>, <span class="number">18</span>, <span class="string">"pm"</span>);</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.ok().body(user);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServerResponse <span class="title">listUser</span><span class="params">(ServerRequest serverRequest)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        List&lt;User&gt; users = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="number">1L</span>, <span class="string">"Peter1"</span>, <span class="string">"peter@gmail.com"</span>, <span class="number">18</span>, <span class="string">"pm"</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="number">2L</span>, <span class="string">"Peter2"</span>, <span class="string">"peter@gmail.com"</span>, <span class="number">16</span>, <span class="string">"admin"</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="number">3L</span>, <span class="string">"Peter3"</span>, <span class="string">"peter@gmail.com"</span>, <span class="number">18</span>, <span class="string">"pm"</span>));</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.ok().body(users);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServerResponse <span class="title">addUser</span><span class="params">(ServerRequest serverRequest)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        User user = serverRequest.body(User.class);</span><br><span class="line">        log.info(<span class="string">"user save success, {}"</span>, user.toString());</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.ok().build();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServerResponse <span class="title">deleteUser</span><span class="params">(ServerRequest serverRequest)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        Long id = Long.parseLong(serverRequest.pathVariable(<span class="string">"id"</span>));</span><br><span class="line">        log.info(<span class="string">"user {} delete success"</span>, id);</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.ok().build();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServerResponse <span class="title">updateUser</span><span class="params">(ServerRequest serverRequest)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        User user = serverRequest.body(User.class);</span><br><span class="line">        Long id = Long.parseLong(serverRequest.pathVariable(<span class="string">"id"</span>));</span><br><span class="line">        log.info(<span class="string">"user {} update success, {}"</span>, id, user.toString());</span><br><span class="line">        <span class="keyword">return</span> ServerResponse.ok().build();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦è®°å½• SpringBoot 3 çš„åŸºç¡€æ•™ç¨‹ï¼ŒåŒ…æ‹¬å›½é™…åŒ–ã€è·¯å¾„åŒ¹é…ã€å†…å®¹åå•†ã€Thymeleaf æ¨¡æ¿å¼•æ“ã€Web å¼€å‘æœ€æ–°ç‰¹æ€§ç­‰å†…å®¹ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å¾®æœåŠ¡" scheme="https://www.techgrow.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸‰ Web å¼€å‘</title>
    <link href="https://www.techgrow.cn/posts/12fb0f17.html"/>
    <id>https://www.techgrow.cn/posts/12fb0f17.html</id>
    <published>2023-06-16T15:12:42.000Z</published>
    <updated>2023-07-22T15:12:42.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å¤§çº²"><a href="#å¤§çº²" class="headerlink" title="å¤§çº²"></a>å¤§çº²</h2><ul><li><a href="/posts/79ae6590.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸€å¿«é€Ÿå…¥é—¨</a></li><li><a href="/posts/e7a270a6.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äºŒå¸¸è§„é…ç½®</a></li><li><a href="/posts/12fb0f17.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸‰ Web å¼€å‘</a></li><li><a href="/posts/223fd9f.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å›› Web å¼€å‘</a></li><li><a href="/posts/1dfe3056.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äº”æ ¸å¿ƒåŸç†</a></li><li><a href="/posts/b6463873.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å…­åœºæ™¯æ•´åˆ</a></li><li><a href="/posts/6bcf09.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸ƒåŸºç¡€ç‰¹æ€§</a></li></ul><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬ç« èŠ‚æ‰€éœ€çš„æ¡ˆä¾‹ä»£ç ï¼Œå¯ä»¥ç›´æ¥ä» <a href="https://github.com/rqh656418510/spring-cloud-share/tree/main/spring-boot-3/spring-boot-3-study">GitHub</a> ä¸‹è½½å¯¹åº”ç« èŠ‚ <code>spring-boot3-04</code>ã€‚</p><h2 id="è‡ªåŠ¨é…ç½®"><a href="#è‡ªåŠ¨é…ç½®" class="headerlink" title="è‡ªåŠ¨é…ç½®"></a>è‡ªåŠ¨é…ç½®</h2><h3 id="è‡ªåŠ¨é…ç½®çš„åŸç†"><a href="#è‡ªåŠ¨é…ç½®çš„åŸç†" class="headerlink" title="è‡ªåŠ¨é…ç½®çš„åŸç†"></a>è‡ªåŠ¨é…ç½®çš„åŸç†</h3><ul><li>Web åœºæ™¯çš„è‡ªåŠ¨é…ç½®åŸç†<ul><li> 1ã€å¯¼å…¥ <code>spring-boot-starter-web</code>ï¼Œä¼šå¯¼å…¥ <code>spring-boot-starter</code>ï¼Œä¹Ÿå°±ä¼šå¯¼å…¥ <code>spring-boot-autoconfigure</code> åŒ…ã€‚</li><li>2ã€<code>spring-boot-autoconfigure</code> åŒ…é‡Œé¢æœ‰ä¸€ä¸ªæ–‡ä»¶ <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>ï¼Œé‡Œé¢æŒ‡å®šäº†åº”ç”¨å¯åŠ¨æ—¶æ‰€æœ‰è¦åŠ è½½çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</li><li>3ã€<code>@EnableAutoConfiguration</code> ä¼šè‡ªåŠ¨åœ°å°†ä¸Šé¢æ–‡ä»¶é‡Œå†™çš„æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»éƒ½å¯¼å…¥è¿›æ¥ï¼ŒåŒæ—¶ <code>xxxAutoConfiguration</code> æ˜¯æœ‰å£°æ˜æ¡ä»¶æ³¨è§£çš„ï¼Œç›®çš„æ˜¯æŒ‰éœ€åŠ è½½ã€‚</li><li>4ã€<code>xxxAutoConfiguration</code> å¾€å®¹å™¨ä¸­å¯¼å…¥ä¸€å †ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶éƒ½æ˜¯ä» <code>xxxProperties</code> ä¸­è·å–å±æ€§å€¼ã€‚</li><li>5ã€<code>xxxProperties</code> åˆæ˜¯å’Œé…ç½®æ–‡ä»¶è¿›è¡Œäº†ç»‘å®šã€‚</li></ul></li></ul><span id="more"></span><ul><li>Web åœºæ™¯çš„æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±» </li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration</span></span><br><span class="line"></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration</span></span><br><span class="line"></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.reactive.ReactiveMultipartAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.reactive.WebSessionIdResolverAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.reactive.function.client.ClientHttpConnectorAutoConfiguration</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration</span></span><br></pre></td></tr></tbody></table></figure><ul><li>Web åœºæ™¯ä¸‹é…ç½®æ–‡ä»¶çš„å‰ç¼€é…ç½®é¡¹è¯´æ˜<ul><li> 1ã€æœåŠ¡å™¨çš„é…ç½® <code>server</code></li><li>2ã€Web åœºæ™¯é€šç”¨é…ç½® <code>spring.web</code></li><li>3ã€Spring MVC çš„æ‰€æœ‰é…ç½® <code>spring.mvc</code></li><li>4ã€æ–‡ä»¶ä¸Šä¼ é…ç½® <code>spring.servlet.multipart</code></li></ul></li></ul><h3 id="è‡ªåŠ¨é…ç½®çš„é»˜è®¤æ•ˆæœ"><a href="#è‡ªåŠ¨é…ç½®çš„é»˜è®¤æ•ˆæœ" class="headerlink" title="è‡ªåŠ¨é…ç½®çš„é»˜è®¤æ•ˆæœ"></a>è‡ªåŠ¨é…ç½®çš„é»˜è®¤æ•ˆæœ</h3><p>SpringBoot Web åœºæ™¯è‡ªåŠ¨é…ç½®çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><ul><li>æ”¯æŒé™æ€ <code>index.html</code></li><li>æ”¯æŒé»˜è®¤çš„é™æ€èµ„æºå¤„ç†æœºåˆ¶ï¼Œé™æ€èµ„æºæ”¾åœ¨ <code>static</code> æ–‡ä»¶å¤¹ä¸‹å³å¯ç›´æ¥è®¿é—®</li><li>åŒ…å«äº† <code>ContentNegotiatingViewResolver</code> å’Œ <code>BeanNameViewResolver</code> ç»„ä»¶ï¼Œç”¨äºè§†å›¾è§£æ</li><li>è‡ªåŠ¨æ³¨å†Œäº† <code>Converter</code>ï¼Œ<code>GenericConverter</code>ï¼Œ<code>Formatter</code> ç»„ä»¶ï¼Œé€‚é…äº†å¸¸è§çš„æ•°æ®ç±»å‹è½¬æ¢å’Œæ ¼å¼åŒ–éœ€æ±‚</li><li>æ”¯æŒ <code>HttpMessageConverters</code>ï¼Œå¯ä»¥æ–¹ä¾¿è¿”å› JSON ç­‰æ•°æ®ç±»å‹</li><li>æ³¨å†Œ <code>MessageCodesResolver</code>ï¼Œæ–¹ä¾¿å›½é™…åŒ–åŠé”™è¯¯æ¶ˆæ¯å¤„ç†</li><li>è‡ªåŠ¨ä½¿ç”¨ <code>ConfigurableWebBindingInitializer</code> å®ç°æ¶ˆæ¯å¤„ç†ã€æ•°æ®ç»‘å®šã€ç±»å‹è½¬åŒ–ã€æ•°æ®æ ¡éªŒç­‰åŠŸèƒ½</li></ul><div class="admonition note"><p class="admonition-title">é‡ç‚¹çŸ¥è¯†</p><ul><li>å¦‚æœæƒ³ä¿æŒ SpringBoot MVC çš„é»˜è®¤é…ç½®ï¼Œå¹¶ä¸”è‡ªå®šä¹‰æ›´å¤šçš„ MVC é…ç½®ï¼ˆå¦‚ interceptorsï¼Œformattersï¼Œview controllers ç­‰ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ <code>@Configuration</code> æ ‡æ³¨ä¸€ä¸ªé…ç½®ç±»ï¼Œè®©é…ç½®ç±»å®ç° <code>WebMvcConfigurer</code> æ¥å£ï¼Œå¹¶ä¸è¦ä½¿ç”¨ <code>@EnableWebMvc</code> æ³¨è§£ã€‚</li><li>å¦‚æœæƒ³ä¿æŒ SpringBoot MVC çš„é»˜è®¤é…ç½®ï¼Œä½†è¦è‡ªå®šä¹‰æ ¸å¿ƒç»„ä»¶çš„å®ä¾‹ï¼ˆå¦‚ <code>RequestMappingHandlerMapping</code>ï¼Œ<code>RequestMappingHandlerAdapter</code>ï¼Œ<code>ExceptionHandlerExceptionResolver</code>ï¼‰ï¼Œå¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª <code>WebMvcRegistrations</code> ç»„ä»¶ï¼Œå¹¶ä¸è¦ä½¿ç”¨ <code>@EnableWebMvc</code> æ³¨è§£ã€‚</li><li>å¦‚æœæƒ³å…¨é¢æ¥ç®¡ SpringBoot MVC çš„é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ <code>@Configuration</code> æ ‡æ³¨ä¸€ä¸ªé…ç½®ç±»ï¼Œè®©é…ç½®ç±»å®ç° <code>WebMvcConfigurer</code> æ¥å£ï¼Œå¹¶åŠ ä¸Š <code>@EnableWebMvc</code> æ³¨è§£å³å¯ã€‚</li></ul></div><h2 id="é™æ€èµ„æº"><a href="#é™æ€èµ„æº" class="headerlink" title="é™æ€èµ„æº"></a>é™æ€èµ„æº</h2><h3 id="é»˜è®¤é™æ€èµ„æºè§„åˆ™"><a href="#é»˜è®¤é™æ€èµ„æºè§„åˆ™" class="headerlink" title="é»˜è®¤é™æ€èµ„æºè§„åˆ™"></a>é»˜è®¤é™æ€èµ„æºè§„åˆ™</h3><h4 id="é™æ€èµ„æºæ˜ å°„"><a href="#é™æ€èµ„æºæ˜ å°„" class="headerlink" title="é™æ€èµ„æºæ˜ å°„"></a>é™æ€èµ„æºæ˜ å°„</h4><p>é™æ€èµ„æºæ˜ å°„è§„åˆ™éƒ½åœ¨ <code>WebMvcAutoConfiguration</code> è‡ªåŠ¨é…ç½®ç±»ä¸­è¿›è¡Œäº†å®šä¹‰ã€‚</p><ul><li>è®¿é—® <code>/webjars/**</code> è·¯å¾„å°±ä¼šå» <code>classpath:/META-INF/resources/webjars/</code> ä¸‹æ‰¾èµ„æºï¼Œä¸€èˆ¬ç”¨äºè®¿é—®é€šè¿‡ Maven å¼•å…¥çš„ç¬¬ä¸‰æ–¹å‰ç«¯ç»„ä»¶ï¼ˆå¦‚ Vueã€Bootstrapï¼‰</li><li>è®¿é—® <code>/**</code> è·¯å¾„å°±ä¼šå»é™æ€èµ„æºé»˜è®¤çš„å››ä¸ªä½ç½®æ‰¾èµ„æºï¼ŒåŒ…æ‹¬ <code>classpath:/META-INF/resources/</code>ã€<code>classpath:/resources/</code>ã€<code>classpath:/static/</code>ã€<code>classpath:/public/</code></li></ul><h4 id="é™æ€èµ„æºç¼“å­˜"><a href="#é™æ€èµ„æºç¼“å­˜" class="headerlink" title="é™æ€èµ„æºç¼“å­˜"></a>é™æ€èµ„æºç¼“å­˜</h4><p>æ‰€æœ‰é™æ€èµ„æºéƒ½å®šä¹‰äº†ç¼“å­˜è§„åˆ™ï¼Œæµè§ˆå™¨è®¿é—®è¿‡ä¸€æ¬¡ï¼Œå°±ä¼šç¼“å­˜ä¸€æ®µæ—¶é—´ï¼Œä½†æ­¤åŠŸèƒ½çš„å‚æ•°æ— é»˜è®¤å€¼ã€‚</p><ul><li><code>cachePeriod</code>ï¼šç¼“å­˜å‘¨æœŸï¼Œå¤šä¹…ä¸ç”¨æ‰¾æœåŠ¡å™¨è¦æ–°çš„ï¼Œé»˜è®¤å€¼ 0sï¼Œä»¥ç§’ä¸ºå•ä½</li><li><code>cacheControl</code>ï¼š HTTP ç¼“å­˜æ§åˆ¶ï¼Œå‚ç…§ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching">Mozilla æ–‡æ¡£</a></li><li><code>useLastModified</code>ï¼šæ˜¯å¦ä½¿ç”¨ <code>Last-Modified</code> å¤´ï¼Œé»˜è®¤å€¼ <code>false</code>ï¼Œé…åˆ HTTP Cache è§„åˆ™ä½¿ç”¨</li><li>æ‰€æœ‰ç¼“å­˜å‚æ•°çš„é…ç½®ï¼Œéƒ½å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶é‡Œçš„ <code>spring.web</code> å‰ç¼€é…ç½®é¡¹æŒ‡å®šï¼ˆå¦‚ä¸‹ï¼‰</li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼“å­˜å‘¨æœŸï¼ˆç§’ï¼‰</span></span><br><span class="line"><span class="meta">spring.web.resources.cache.period</span>=<span class="string">3600</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># HTTP ç¼“å­˜æ§åˆ¶ï¼ˆç§’ï¼‰ï¼Œæµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ï¼Œå³7200ç§’ä»¥å†…è®¿é—®æ­¤èµ„æºçš„æ‰€æœ‰è¯·æ±‚éƒ½ä¸ä¼šå‘é€ç»™æœåŠ¡å™¨</span></span><br><span class="line"><span class="meta">spring.web.resources.cache.cachecontrol.max-age</span>=<span class="string">7200</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># æ˜¯å¦ä½¿ç”¨ Last-Modified å¤´ï¼Œå¯¹æ¯”æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„èµ„æºæ˜¯å¦æœ‰å˜åŒ–ï¼Œå¦‚æœèµ„æºæ²¡æœ‰å˜åŒ–ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›304ç ï¼Œæ­¤æ—¶æµè§ˆå™¨ä¼šä½¿ç”¨æœ¬åœ°ç¼“å­˜ä¸­çš„èµ„æº</span></span><br><span class="line"><span class="meta">spring.web.resources.cache.use-last-modified</span>=<span class="string">true</span></span><br></pre></td></tr></tbody></table></figure><h4 id="Favicon-å›¾æ ‡"><a href="#Favicon-å›¾æ ‡" class="headerlink" title="Favicon å›¾æ ‡"></a>Favicon å›¾æ ‡</h4><ul><li>åœ¨é»˜è®¤çš„å››ä¸ªé™æ€èµ„æºè·¯å¾„ä¸‹æŸ¥æ‰¾ <code>favicon.ico</code></li></ul><h4 id="æ¬¢è¿é¡µé¢"><a href="#æ¬¢è¿é¡µé¢" class="headerlink" title="æ¬¢è¿é¡µé¢"></a>æ¬¢è¿é¡µé¢</h4><p>æ¬¢è¿é¡µé¢çš„æ˜ å°„è§„åˆ™åœ¨ <code>WebMvcAutoConfiguration</code> ä¸­è¿›è¡Œäº†å®šä¹‰ï¼š</p><ul><li>é¦–å…ˆä¼šåœ¨é»˜è®¤çš„å››ä¸ªé™æ€èµ„æºè·¯å¾„ä¸‹æŸ¥æ‰¾ <code>index.html</code></li><li>å¦‚æœé™æ€èµ„æºè·¯å¾„ä¸‹æ‰¾ä¸åˆ°ï¼Œå°±ä¼šåœ¨ <code>templates</code> ç›®å½•ä¸‹æ‰¾ <code>index</code> æ¨¡æ¿é¡µé¢</li></ul><h3 id="è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™"><a href="#è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™" class="headerlink" title="è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™"></a>è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™</h3><h4 id="é…ç½®æ–¹å¼"><a href="#é…ç½®æ–¹å¼" class="headerlink" title="é…ç½®æ–¹å¼"></a>é…ç½®æ–¹å¼</h4><ul><li><code>spring.mvc</code>ï¼šé…ç½®é™æ€èµ„æºè®¿é—®è·¯å¾„çš„å‰ç¼€</li><li><code>spring.web</code>ï¼šé…åˆé™æ€èµ„æºç›®å½•ã€é™æ€èµ„æºç­–ç•¥ (å¼€å¯æ˜ å°„ã€å¤„ç†é“¾ã€ç¼“å­˜è§„åˆ™)ã€å›½é™…åŒ–çš„åŒºåŸŸä¿¡æ¯ </li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªå®šä¹‰é™æ€èµ„æºè®¿é—®è·¯å¾„çš„å‰ç¼€</span></span><br><span class="line"><span class="meta">spring.mvc.static-path-pattern</span>=<span class="string">/static/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰webjarsè®¿é—®è·¯å¾„çš„å‰ç¼€</span></span><br><span class="line"><span class="meta">spring.mvc.webjars-path-pattern</span>=<span class="string">/webjars/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰é™æ€èµ„æºæ–‡ä»¶å¤¹çš„ä½ç½®</span></span><br><span class="line"><span class="meta">spring.web.resources.static-locations</span>=<span class="string">classpath:/static/,classpath:/public/,classpath:/asset/</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li>å½“ä¸ä½¿ç”¨ <code>spring.mvc.static-path-pattern</code> è‡ªå®šä¹‰é™æ€èµ„æºè®¿é—®è·¯å¾„çš„å‰ç¼€æ—¶ï¼Œé™æ€èµ„æºé»˜è®¤çš„è®¿é—®è·¯å¾„ç¤ºä¾‹æ˜¯ <code>http://127.0.0.1:8080/backgrond.png</code></li><li>å½“ä½¿ç”¨ <code>spring.mvc.static-path-pattern=/static/**</code> è‡ªå®šä¹‰é™æ€èµ„æºè®¿é—®è·¯å¾„çš„å‰ç¼€æ—¶ï¼Œé™æ€èµ„æºçš„è®¿é—®è·¯å¾„ç¤ºä¾‹æ˜¯ <code>http://127.0.0.1:8080/static/backgrond.png</code></li></ul></div><h4 id="ä»£ç æ–¹å¼"><a href="#ä»£ç æ–¹å¼" class="headerlink" title="ä»£ç æ–¹å¼"></a>ä»£ç æ–¹å¼</h4><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li>å¦‚æœå¸Œæœ›å®Œå…¨ç¦ç”¨ SpringBoot MVC çš„è‡ªåŠ¨é…ç½®ï¼Œå¯ä»¥åœ¨é…ç½®ç±»ä¸Šæ·»åŠ  <code>@EnableWebMvc</code> æ³¨è§£ï¼Œæ­¤æ—¶ç›¸å½“äºé‡‡ç”¨å…¨æ‰‹åŠ¨çš„æ–¹å¼é…ç½® MVCã€‚</li></ul></div><ul><li>ç¬¬ä¸€ç§å†™æ³•ï¼šå®ç° <code>WebMvcConfigurer</code> æ¥å£ï¼ŒåŒæ ·å¯ä»¥è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.CacheControl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfiguration</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>{</span><br><span class="line">        <span class="comment">// ä¿ç•™é»˜è®¤çš„é…ç½®è§„åˆ™ï¼Œå¹¶æ·»åŠ æ–°çš„é…ç½®è§„åˆ™</span></span><br><span class="line">        registry</span><br><span class="line">            <span class="comment">// è‡ªå®šä¹‰é™æ€èµ„æºè®¿é—®è·¯å¾„çš„å‰ç¼€</span></span><br><span class="line">            .addResourceHandler(<span class="string">"/static/**"</span>)</span><br><span class="line">            <span class="comment">// è‡ªå®šä¹‰é™æ€èµ„æºæ–‡ä»¶å¤¹çš„ä½ç½®</span></span><br><span class="line">            .addResourceLocations(<span class="string">"classpath:/static/"</span>, <span class="string">"classpath:/public/"</span>, <span class="string">"classpath:/asset/"</span>)</span><br><span class="line">            <span class="comment">// è‡ªå®šä¹‰HTTPç¼“å­˜æ§åˆ¶</span></span><br><span class="line">            .setCacheControl(CacheControl.maxAge(<span class="number">7200</span>, TimeUnit.SECONDS));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ç¬¬äºŒç§å†™æ³•ï¼šä½¿ç”¨ <code>@Bean</code> æ³¨è§£ï¼Œå®šä¹‰ <code>WebMvcConfigurer</code> ç»„ä»¶ï¼ŒåŒæ ·å¯ä»¥è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.CacheControl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebMvcConfigurer <span class="title">webMvcConfigurer</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurer() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>{</span><br><span class="line">                <span class="comment">// ä¿ç•™é»˜è®¤çš„é…ç½®è§„åˆ™ï¼Œå¹¶æ·»åŠ æ–°çš„é…ç½®è§„åˆ™</span></span><br><span class="line">                registry</span><br><span class="line">                    <span class="comment">// è‡ªå®šä¹‰é™æ€èµ„æºè®¿é—®è·¯å¾„çš„å‰ç¼€</span></span><br><span class="line">                    .addResourceHandler(<span class="string">"/static/**"</span>)</span><br><span class="line">                    <span class="comment">// è‡ªå®šä¹‰é™æ€èµ„æºæ–‡ä»¶å¤¹çš„ä½ç½®</span></span><br><span class="line">                    .addResourceLocations(<span class="string">"classpath:/static/"</span>, <span class="string">"classpath:/public/"</span>, <span class="string">"classpath:/asset/"</span>)</span><br><span class="line">                    <span class="comment">// è‡ªå®šä¹‰HTTPç¼“å­˜æ§åˆ¶</span></span><br><span class="line">                    .setCacheControl(CacheControl.maxAge(<span class="number">7200</span>, TimeUnit.SECONDS));</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><h3 id="é»˜è®¤æœºåˆ¶"><a href="#é»˜è®¤æœºåˆ¶" class="headerlink" title="é»˜è®¤æœºåˆ¶"></a>é»˜è®¤æœºåˆ¶</h3><p>SpringBoot é”™è¯¯å¤„ç†çš„è‡ªåŠ¨é…ç½®éƒ½åœ¨ <code>ErrorMvcAutoConfiguration</code> ä¸­ï¼Œä¸¤å¤§æ ¸å¿ƒæœºåˆ¶ï¼š</p><ul><li>1ã€SpringBoot ä¼šè‡ªé€‚åº”å¤„ç†é”™è¯¯ï¼Œå“åº”é¡µé¢æˆ– JSON æ•°æ®ç»™å®¢æˆ·ç«¯</li><li> 2ã€SpringMVC çš„é”™è¯¯å¤„ç†æœºåˆ¶ä¾ç„¶ä¿ç•™ï¼ŒSpringMVC å¤„ç†ä¸äº†çš„ï¼Œæ‰ä¼šäº¤ç»™ SpringBoot è¿›è¡Œå¤„ç†</li></ul><p><img data-src="../../../asset/2023/06/spring-boot3-study-17.png"></p><ul><li>å‘ç”Ÿé”™è¯¯ä»¥åï¼Œè¯·æ±‚è½¬å‘ç»™ <code>/error</code> è·¯å¾„ï¼ŒSpringBoot åœ¨åº•å±‚å†™å¥½ä¸€ä¸ª <code>BasicErrorController</code> ç»„ä»¶ï¼Œä¸“é—¨å¤„ç†è¿™ä¸ªè¯·æ±‚ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›HTML</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(produces = MediaType.TEXT_HTML_VALUE)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">errorHtml</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>{</span><br><span class="line">    HttpStatus status = getStatus(request);</span><br><span class="line">    Map&lt;String, Object&gt; model = Collections</span><br><span class="line">        .unmodifiableMap(getErrorAttributes(request, getErrorAttributeOptions(request, MediaType.TEXT_HTML)));</span><br><span class="line">    response.setStatus(status.value());</span><br><span class="line">    ModelAndView modelAndView = resolveErrorView(request, response, status, model);</span><br><span class="line">    <span class="keyword">return</span> (modelAndView != <span class="keyword">null</span>) ? modelAndView : <span class="keyword">new</span> ModelAndView(<span class="string">"error"</span>, model);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å› ResponseEntityï¼ŒJSON</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) {</span><br><span class="line">    HttpStatus status = getStatus(request);</span><br><span class="line">    <span class="keyword">if</span> (status == HttpStatus.NO_CONTENT) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(status);</span><br><span class="line">    }</span><br><span class="line">    Map&lt;String, Object&gt; body = getErrorAttributes(request, getErrorAttributeOptions(request, MediaType.ALL));</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(body, status);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>é”™è¯¯é¡µé¢æ˜¯è¿™ä¹ˆè§£æåˆ°çš„ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£æé”™è¯¯çš„è‡ªå®šä¹‰è§†å›¾åœ°å€</span></span><br><span class="line">ModelAndView modelAndView = resolveErrorView(request, response, status, model);</span><br><span class="line"><span class="comment">// å¦‚æœè§£æä¸åˆ°é”™è¯¯é¡µé¢çš„åœ°å€ï¼Œé»˜è®¤çš„é”™è¯¯é¡µå°±æ˜¯ error</span></span><br><span class="line"><span class="keyword">return</span> (modelAndView != <span class="keyword">null</span>) ? modelAndView : <span class="keyword">new</span> ModelAndView(<span class="string">"error"</span>, model);</span><br></pre></td></tr></tbody></table></figure><ul><li>å®¹å™¨ä¸­ä¸“é—¨æœ‰ä¸€ä¸ªé”™è¯¯è§†å›¾è§£æå™¨ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnBean(DispatcherServlet.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(ErrorViewResolver.class)</span></span><br><span class="line"><span class="function">DefaultErrorViewResolver <span class="title">conventionErrorViewResolver</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DefaultErrorViewResolver(<span class="keyword">this</span>.applicationContext, <span class="keyword">this</span>.resources);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>SpringBoot è§£æè‡ªå®šä¹‰é”™è¯¯é¡µçš„é»˜è®¤è§„åˆ™ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveErrorView</span><span class="params">(HttpServletRequest request, HttpStatus status, Map&lt;String, Object&gt; model)</span> </span>{</span><br><span class="line">    ModelAndView modelAndView = resolve(String.valueOf(status.value()), model);</span><br><span class="line">    <span class="keyword">if</span> (modelAndView == <span class="keyword">null</span> &amp;&amp; SERIES_VIEWS.containsKey(status.series())) {</span><br><span class="line">        modelAndView = resolve(SERIES_VIEWS.get(status.series()), model);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ModelAndView <span class="title">resolve</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> </span>{</span><br><span class="line">    String errorViewName = <span class="string">"error/"</span> + viewName;</span><br><span class="line">    TemplateAvailabilityProvider provider = <span class="keyword">this</span>.templateAvailabilityProviders.getProvider(errorViewName, <span class="keyword">this</span>.applicationContext);</span><br><span class="line">    <span class="keyword">if</span> (provider != <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(errorViewName, model);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> resolveResource(errorViewName, model);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ModelAndView <span class="title">resolveResource</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> </span>{</span><br><span class="line">    <span class="keyword">for</span> (String location : <span class="keyword">this</span>.resources.getStaticLocations()) {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            Resource resource = <span class="keyword">this</span>.applicationContext.getResource(location);</span><br><span class="line">            resource = resource.createRelative(viewName + <span class="string">".html"</span>);</span><br><span class="line">            <span class="keyword">if</span> (resource.exists()) {</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(<span class="keyword">new</span> HtmlResourceView(resource), model);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex) {</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>å®¹å™¨ä¸­æœ‰ä¸€ä¸ªé»˜è®¤çš„åä¸º <code>error</code> çš„ Viewï¼Œæä¾›äº†é»˜è®¤é”™è¯¯é¡µé¢çš„åŠŸèƒ½ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean(name = "error")</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = "error")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> View <span class="title">defaultErrorView</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.defaultErrorView;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>å°è£…äº† JSON æ ¼å¼çš„é”™è¯¯ä¿¡æ¯ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(value = ErrorAttributes.class, search = SearchStrategy.CURRENT)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> DefaultErrorAttributes <span class="title">errorAttributes</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DefaultErrorAttributes();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>é”™è¯¯é¡µé¢çš„è§£æè§„åˆ™<ul><li> 1ã€è§£æä¸€ä¸ªé”™è¯¯é¡µ<ul><li> a. å¦‚æœå‘ç”Ÿäº† 500ã€404ã€503ã€403 è¿™äº›é”™è¯¯<ul><li> â…°. å¦‚æœæœ‰æ¨¡æ¿å¼•æ“ï¼Œæ¨¡æ¿æ–‡ä»¶é»˜è®¤åœ¨ <code>classpath:/templates/error/ç²¾ç¡®ç .html</code></li><li>â…±. å¦‚æœæ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼Œåœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ <code>ç²¾ç¡®ç .html</code></li></ul></li><li>b. å¦‚æœåŒ¹é…ä¸åˆ° <code>ç²¾ç¡®ç .html</code> è¿™äº›ç²¾ç¡®çš„é”™è¯¯é¡µï¼Œå°±å»æ‰¾ <code>5xx.html</code>ï¼Œ<code>4xx.html</code> æ¨¡ç³ŠåŒ¹é…<ul><li> â…°. å¦‚æœæœ‰æ¨¡æ¿å¼•æ“ï¼Œæ¨¡æ¿æ–‡ä»¶é»˜è®¤åœ¨ <code>classpath:/templates/error/5xx.html</code></li><li>â…±. å¦‚æœæ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼Œåœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾  <code>5xx.html</code></li></ul></li></ul></li><li>2ã€å¦‚æœæ¨¡æ¿å¼•æ“è·¯å¾„ <code>templates</code> ä¸‹æœ‰ <code>error.html</code> é¡µé¢ï¼Œå°±ç›´æ¥æ¸²æŸ“å¹¶è¿”å›ç»™å®¢æˆ·ç«¯</li></ul></li></ul><h3 id="è‡ªå®šä¹‰é”™è¯¯å“åº”"><a href="#è‡ªå®šä¹‰é”™è¯¯å“åº”" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯å“åº”"></a>è‡ªå®šä¹‰é”™è¯¯å“åº”</h3><ul><li>è‡ªå®šä¹‰ JSON å“åº”ï¼Œä½¿ç”¨ <code>@ControllerAdvice</code> + <code>@ExceptionHandler</code> è¿›è¡Œç»Ÿä¸€å¼‚å¸¸å¤„ç† </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">handleException</span><span class="params">(Exception exception)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> R.error(exception.getMessage());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>è‡ªå®šä¹‰é¡µé¢å“åº”ï¼Œæ ¹æ® SpringBoot çš„é”™è¯¯é¡µé¢è§£æè§„åˆ™ï¼Œè‡ªå®šä¹‰é”™è¯¯é¡µé¢ã€‚</li></ul><h3 id="é”™è¯¯å¤„ç†çš„æœ€ä½³å®è·µ"><a href="#é”™è¯¯å¤„ç†çš„æœ€ä½³å®è·µ" class="headerlink" title="é”™è¯¯å¤„ç†çš„æœ€ä½³å®è·µ"></a>é”™è¯¯å¤„ç†çš„æœ€ä½³å®è·µ</h3><ul><li>å‰åç«¯åˆ†ç¦»å¼€å‘æ¨¡å¼<ul><li>åå°å‘ç”Ÿçš„æ‰€æœ‰é”™è¯¯ï¼Œé€šè¿‡ <code>@ControllerAdvice</code> + <code>@ExceptionHandler</code> è¿›è¡Œç»Ÿä¸€å¼‚å¸¸å¤„ç†</li></ul></li><li>å‰åç«¯ä¸åˆ†ç¦»æ¨¡å¼ï¼ˆæœåŠ¡ç«¯æ¨¡æ¿é¡µé¢æ¸²æŸ“ï¼‰<ul><li>ä¸€äº›ä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼Œå¦‚ä½¿ç”¨ HTTP ç è¡¨ç¤ºçš„æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯é”™è¯¯<ul><li>åœ¨ <code>classpath:/templates/error/</code> ä¸‹é¢ï¼Œå­˜æ”¾å¸¸ç”¨ç²¾ç¡®çš„é”™è¯¯ç é¡µé¢ï¼Œå¦‚ <code>500.html</code>ã€<code>404.html</code></li><li>åœ¨ <code>classpath:/templates/error/</code> ä¸‹é¢ï¼Œå­˜æ”¾é€šç”¨æ¨¡ç³ŠåŒ¹é…çš„é”™è¯¯ç é¡µé¢ï¼Œå¦‚ <code>5xx.html</code>ã€<code>4xx.html</code></li></ul></li><li>å‘ç”Ÿä¸šåŠ¡é”™è¯¯<ul><li>æ ¸å¿ƒä¸šåŠ¡çš„æ¯ä¸€ç§é”™è¯¯ï¼Œéƒ½åº”è¯¥é€šè¿‡ä»£ç æ§åˆ¶ï¼Œè·³è½¬åˆ°å®šåˆ¶çš„é”™è¯¯é¡µ</li><li>é€šç”¨ä¸šåŠ¡ï¼Œå¯ä»¥é€šè¿‡ <code>classpath:/templates/error.html</code> é”™è¯¯é¡µé¢ï¼Œæ˜¾ç¤ºé€šç”¨çš„é”™è¯¯ä¿¡æ¯</li></ul></li></ul></li><li>åœ¨æ¨¡æ¿é¡µé¢æˆ–è€…æœåŠ¡ç«¯è¿”å›çš„ JSON æ•°æ®ä¸­ï¼Œå¯ç”¨çš„ Model æ•°æ®å¦‚ä¸‹ï¼š</li></ul><p><img data-src="../../../asset/2023/06/spring-boot3-study-18.png"></p><h2 id="åµŒå…¥å¼å®¹å™¨"><a href="#åµŒå…¥å¼å®¹å™¨" class="headerlink" title="åµŒå…¥å¼å®¹å™¨"></a>åµŒå…¥å¼å®¹å™¨</h2><p>Servlet å®¹å™¨æŒ‡çš„æ˜¯ç®¡ç†ã€è¿è¡Œ Servlet ç»„ä»¶ï¼ˆ<code>Servlet</code>ã€<code>Filter</code>ã€<code>Listener</code>ï¼‰çš„ç¯å¢ƒï¼Œä¸€èˆ¬æŒ‡ Web æœåŠ¡å™¨ã€‚</p><h3 id="è‡ªåŠ¨é…ç½®åŸç†"><a href="#è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†"></a>è‡ªåŠ¨é…ç½®åŸç†</h3><ul><li>SpringBoot é»˜è®¤ä½¿ç”¨åµŒå…¥çš„ Tomcat ä½œä¸º Servlet å®¹å™¨</li><li>åµŒå…¥å¼å®¹å™¨çš„è‡ªåŠ¨é…ç½®ç±»æ˜¯ <code>ServletWebServerFactoryAutoConfiguration</code>ï¼Œ<code>EmbeddedWebServerFactoryCustomizerAutoConfiguration</code></li><li><code>ServletWebServerFactoryAutoConfiguration</code> è‡ªåŠ¨é…ç½®äº†åµŒå…¥å¼å®¹å™¨åœºæ™¯</li><li>ç»‘å®šäº† <code>ServerProperties</code> é…ç½®ç±»ï¼Œæ‰€æœ‰å’ŒæœåŠ¡å™¨ç›¸å…³çš„é…ç½®éƒ½ä½¿ç”¨ <code>server</code> ä½œä¸ºå¼€å§‹å‰ç¼€</li><li><code>ServletWebServerFactoryAutoConfiguration</code> é»˜è®¤å¯¼å…¥äº†åµŒå…¥å¼çš„ä¸‰å¤§æœåŠ¡å™¨ï¼ŒåŒ…æ‹¬ <code>Tomcat</code>ã€<code>Jetty</code>ã€<code>Undertow</code><ul><li>å¯¼å…¥ <code>Tomcat</code>ã€<code>Jetty</code>ã€<code>Undertow</code> æ—¶éƒ½æœ‰æ¡ä»¶æ³¨è§£ï¼Œç³»ç»Ÿä¸­æœ‰å¯¹åº”çš„ç±»æ‰ä¼šç”Ÿæ•ˆï¼ˆä¹Ÿå°±æ˜¯å¯¼äº†åŒ…ï¼‰</li><li>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒTomcat çš„é…ç½®ä¼šç”Ÿæ•ˆï¼ŒSpringBoot å¾€å®¹å™¨ä¸­æ”¾äº† <code>TomcatServletWebServerFactory</code> ç»„ä»¶</li><li>å¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª Web æœåŠ¡å™¨å·¥å‚ <code>ServletWebServerFactory</code> åï¼Œå¯ä»¥åˆ›å»º Web æœåŠ¡å™¨</li><li> Web æœåŠ¡å™¨å·¥å‚éƒ½æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥è°ƒç”¨ <code>getWebServer()</code> è·å– Web æœåŠ¡å™¨</li><li><code>TomcatServletWebServerFactory</code> åˆ›å»ºäº† Tomcat Web æœåŠ¡å™¨</li></ul></li><li><code>ServletWebServerApplicationContext</code> IOC å®¹å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ <code>ServletWebServerFactory</code> åˆ›å»º Web æœåŠ¡å™¨</li><li> Spring å®¹å™¨åˆ·æ–°ï¼ˆå¯åŠ¨ï¼‰çš„æ—¶å€™ï¼Œä¼šé¢„ç•™ä¸€ä¸ªæ—¶æœºï¼Œè°ƒç”¨ <code>onRefresh()</code> åˆ·æ–°å­å®¹å™¨</li><li><code>refresh()</code> å®¹å™¨åˆ·æ–°ï¼ŒåäºŒå¤§æ­¥çš„åˆ·æ–°å­å®¹å™¨ä¼šè°ƒç”¨ <code>onRefresh()</code></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(ServletRequest.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(ServerProperties.class)</span></span><br><span class="line"><span class="meta">@Import({ ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class,</span></span><br><span class="line"><span class="meta">ServletWebServerFactoryConfiguration.EmbeddedTomcat.class,</span></span><br><span class="line"><span class="meta">ServletWebServerFactoryConfiguration.EmbeddedJetty.class,</span></span><br><span class="line"><span class="meta">ServletWebServerFactoryConfiguration.EmbeddedUndertow.class })</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletWebServerFactoryAutoConfiguration</span> </span>{</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRefresh</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">super</span>.onRefresh();</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        createWebServer();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">catch</span> (Throwable ex) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ApplicationContextException(<span class="string">"Unable to start web server"</span>, ex);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">æ€»ç»“</p><ul><li>Web åœºæ™¯çš„ Spring å®¹å™¨å¯åŠ¨ï¼Œåœ¨è°ƒç”¨ <code>onRefresh()</code> çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨åˆ›å»º Web æœåŠ¡å™¨çš„æ–¹æ³•ã€‚</li><li>Web æœåŠ¡å™¨çš„åˆ›å»ºæ˜¯é€šè¿‡ <code>WebServerFactory</code> å®ç°çš„ï¼Œå®¹å™¨ä¸­åˆä¼šæ ¹æ®æ¡ä»¶æ³¨è§£ï¼Œå¯åŠ¨ç›¸å…³çš„æœåŠ¡å™¨é…ç½®ï¼Œé»˜è®¤ <code>EmbeddedTomcat</code> ä¼šå¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª <code>TomcatServletWebServerFactory</code> ç»„ä»¶ï¼Œå¯¼è‡´é¡¹ç›®å¯åŠ¨åï¼Œè‡ªåŠ¨åˆ›å»ºå‡º Tomcat æœåŠ¡å™¨ã€‚</li></ul></div><h3 id="è‡ªå®šä¹‰åµŒå…¥å¼å®¹å™¨"><a href="#è‡ªå®šä¹‰åµŒå…¥å¼å®¹å™¨" class="headerlink" title="è‡ªå®šä¹‰åµŒå…¥å¼å®¹å™¨"></a>è‡ªå®šä¹‰åµŒå…¥å¼å®¹å™¨</h3><ul><li>åµŒå…¥å¼ä¸‰å¤§å®¹å™¨æœ‰ <code>Tomcat</code>ã€<code>Jetty</code>ã€<code>Undertow</code>ï¼ŒSpringBoot é»˜è®¤ä½¿ç”¨ Tomcat ä½œä¸ºå®¹å™¨ã€‚è‹¥å¸Œæœ›åˆ‡æ¢åˆ°å…¶ä»–å®¹å™¨ï¼Œåªéœ€è¦æ›´æ”¹ Maven çš„é…ç½®å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰Servletç‰ˆæœ¬ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-api.version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">servlet-api.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ’é™¤Tomcatä¾èµ– --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨Undertowå®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-undertow<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>æœ€ä½³å®è·µ<ul><li>ä¿®æ”¹ä»¥ <code>server</code> ä¸ºå¼€å§‹å‰ç¼€çš„ç›¸å…³é…ç½®ï¼Œè¿™æ ·å°±å¯ä»¥ä¿®æ”¹æœåŠ¡å™¨å‚æ•°</li><li>é€šè¿‡å¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª <code>ServletWebServerFactory</code> ç»„ä»¶ï¼Œæ¥ç¦ç”¨æ‰ SpringBoot é»˜è®¤å¼•å…¥çš„ Web æœåŠ¡å™¨å·¥å‚ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°è‡ªå®šä¹‰ä»»æ„çš„åµŒå…¥æœåŠ¡å™¨ã€‚</li></ul></li></ul><h2 id="åº•å±‚æºç æµ…æ"><a href="#åº•å±‚æºç æµ…æ" class="headerlink" title="åº•å±‚æºç æµ…æ"></a>åº•å±‚æºç æµ…æ</h2><h3 id="Web-MVC-è‡ªåŠ¨é…ç½®åŸç†"><a href="#Web-MVC-è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="Web MVC è‡ªåŠ¨é…ç½®åŸç†"></a>Web MVC è‡ªåŠ¨é…ç½®åŸç†</h3><h4 id="è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆçš„æ¡ä»¶"><a href="#è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆçš„æ¡ä»¶" class="headerlink" title="è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆçš„æ¡ä»¶"></a>è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆçš„æ¡ä»¶</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * WebMvcAutoConfiguration çš„åº•å±‚æºç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@AutoConfiguration(after = { DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class, ValidationAutoConfiguration.class })</span> <span class="comment">// åœ¨è¿™äº›è‡ªåŠ¨é…ç½®ä¹‹å</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span> <span class="comment">// å¦‚æœæ˜¯ Web åº”ç”¨å°±ç”Ÿæ•ˆï¼Œç±»å‹ï¼š SERVLETã€REACTIVE</span></span><br><span class="line"><span class="meta">@ConditionalOnClass({ Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class })</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span> <span class="comment">// å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ª Bean æ‰ç”Ÿæ•ˆï¼Œé»˜è®¤å°±æ˜¯æ²¡æœ‰</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span> <span class="comment">// ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="meta">@ImportRuntimeHints(WebResourcesRuntimeHints.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="è‡ªåŠ¨é…ç½®å®ç°çš„æ•ˆæœ"><a href="#è‡ªåŠ¨é…ç½®å®ç°çš„æ•ˆæœ" class="headerlink" title="è‡ªåŠ¨é…ç½®å®ç°çš„æ•ˆæœ"></a>è‡ªåŠ¨é…ç½®å®ç°çš„æ•ˆæœ</h4><p>æ•ˆæœä¸€ï¼šå¾€å®¹å™¨ä¸­æ”¾äº†ä¸¤ä¸ª Filter</p><ul><li><code>HiddenHttpMethodFilter</code>ï¼šé¡µé¢è¡¨å•æäº¤ REST è¯·æ±‚ï¼ˆæ”¯æŒ GETã€POSTã€PUTã€DELETE æ–¹æ³•ï¼‰</li><li><code>FormContentFilter</code>ï¼š è¡¨å•å†…å®¹ Filterï¼ŒGETï¼ˆæ•°æ®æ”¾ URL åé¢ï¼‰ã€POSTï¼ˆæ•°æ®æ”¾è¯·æ±‚ä½“ï¼‰è¯·æ±‚å¯ä»¥æºå¸¦æ•°æ®ï¼ŒPUTã€DELETE çš„è¯·æ±‚ä½“æ•°æ®ä¼šè¢«å¿½ç•¥</li></ul><p>æ•ˆæœäºŒï¼šå¾€å®¹å™¨ä¸­æ”¾äº† <code>WebMvcConfigurer</code> ç»„ä»¶ï¼Œç»™ Spring MVC æ·»åŠ å„ç§å®šåˆ¶åŠŸèƒ½ï¼Œæ‰€æœ‰åŠŸèƒ½æœ€ç»ˆéƒ½ä¼šå’Œé…ç½®æ–‡ä»¶çš„å†…å®¹è¿›è¡Œç»‘å®š</p><ul><li><code>WebMvcProperties</code>ï¼š ç»‘å®šäº†ä»¥ <code>spring.mvc</code> ä¸ºå¼€å§‹å‰ç¼€çš„é…ç½®é¡¹</li><li><code>WebProperties</code>ï¼š ç»‘å®šäº†ä»¥ <code>spring.web</code> ä¸ºå¼€å§‹å‰ç¼€çš„é…ç½®é¡¹</li></ul><h4 id="WebMvcConfigurer-æ¥å£"><a href="#WebMvcConfigurer-æ¥å£" class="headerlink" title="WebMvcConfigurer æ¥å£"></a>WebMvcConfigurer æ¥å£</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@Import(EnableWebMvcConfiguration.class)</span> <span class="comment">// é¢å¤–å¯¼å…¥äº†å…¶ä»–é…ç½®</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties({ WebMvcProperties.class, WebProperties.class })</span></span><br><span class="line"><span class="meta">@Order(0)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfigurationAdapter</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span>, <span class="title">ServletContextAware</span></span>{</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><img data-src="../../../asset/2023/06/spring-boot3-study-7.png"></p><h4 id="é™æ€èµ„æºæ˜ å°„è§„åˆ™çš„æºç "><a href="#é™æ€èµ„æºæ˜ å°„è§„åˆ™çš„æºç " class="headerlink" title="é™æ€èµ„æºæ˜ å°„è§„åˆ™çš„æºç "></a>é™æ€èµ„æºæ˜ å°„è§„åˆ™çš„æºç </h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfigurationAdapter</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span>, <span class="title">ServletContextAware</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) {</span><br><span class="line">            logger.debug(<span class="string">"Default resource handling disabled"</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">this</span>.addResourceHandler(registry, <span class="keyword">this</span>.mvcProperties.getWebjarsPathPattern(), <span class="string">"classpath:/META-INF/resources/webjars/"</span>);</span><br><span class="line">            <span class="keyword">this</span>.addResourceHandler(registry, <span class="keyword">this</span>.mvcProperties.getStaticPathPattern(), (registration) -&gt; {</span><br><span class="line">                registration.addResourceLocations(<span class="keyword">this</span>.resourceProperties.getStaticLocations());</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.servletContext != <span class="keyword">null</span>) {</span><br><span class="line">                    ServletContextResource resource = <span class="keyword">new</span> ServletContextResource(<span class="keyword">this</span>.servletContext, <span class="string">"/"</span>);</span><br><span class="line">                    registration.addResourceLocations(<span class="keyword">new</span> Resource[]{resource});</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            });</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è§„åˆ™ä¸€ï¼šè®¿é—® <code>/webjars/**</code> è·¯å¾„å°±ä¼šå» <code>classpath:/META-INF/resources/webjars/</code> ä¸‹æ‰¾èµ„æºï¼Œä¸€èˆ¬ç”¨äºè®¿é—®é€šè¿‡ Maven å¼•å…¥çš„ç¬¬ä¸‰æ–¹å‰ç«¯ç»„ä»¶ï¼ˆå¦‚ Vueã€Bootstrapï¼‰<br>è§„åˆ™äºŒï¼šè®¿é—® <code>/**</code> è·¯å¾„å°±ä¼šå»é™æ€èµ„æºé»˜è®¤çš„å››ä¸ªä½ç½®æ‰¾èµ„æºï¼ŒåŒ…æ‹¬ <code>classpath:/META-INF/resources/</code>ã€<code>classpath:/resources/</code>ã€<code>classpath:/static/</code>ã€<code>classpath:/public/</code><br>è§„åˆ™ä¸‰ï¼šé™æ€èµ„æºé»˜è®¤éƒ½æœ‰ç¼“å­˜è§„åˆ™çš„è®¾ç½®</p><ul><li>æ‰€æœ‰ç¼“å­˜å‚æ•°çš„é…ç½®ï¼Œéƒ½å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶é‡Œçš„ <code>spring.web</code> å‰ç¼€é…ç½®é¡¹æŒ‡å®š</li><li><code>cachePeriod</code>ï¼šç¼“å­˜å‘¨æœŸï¼Œå¤šä¹…ä¸ç”¨æ‰¾æœåŠ¡å™¨è¦æ–°çš„ï¼Œé»˜è®¤å€¼ 0sï¼Œä»¥ç§’ä¸ºå•ä½</li><li><code>cacheControl</code>ï¼š HTTP ç¼“å­˜æ§åˆ¶ï¼Œå‚ç…§ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching">Mozilla æ–‡æ¡£</a></li><li><code>useLastModified</code>ï¼šæ˜¯å¦ä½¿ç”¨ <code>Last-Modified</code> å¤´ï¼Œé»˜è®¤å€¼ <code>false</code>ï¼Œé…åˆ HTTP Cache è§„åˆ™ä½¿ç”¨ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">registration.setCachePeriod(getSeconds(<span class="keyword">this</span>.resourceProperties.getCache().getPeriod()));</span><br><span class="line">registration.setUseLastModified(<span class="keyword">this</span>.resourceProperties.getCache().isUseLastModified());</span><br><span class="line">registration.setCacheControl(<span class="keyword">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl());</span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">æç¤º</p><p>å½“æµè§ˆå™¨è®¿é—®äº†ä¸€ä¸ªé™æ€èµ„æºæ–‡ä»¶ <code>index.js</code>ï¼Œå¦‚æœåœ¨æœåŠ¡å™¨ä¸­è¿™ä¸ªèµ„æºæ–‡ä»¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆåœ¨ç”¨æˆ·ä¸‹æ¬¡è®¿é—®çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥è®©æµè§ˆå™¨ç”¨æœ¬åœ°ç¼“å­˜ä¸­çš„èµ„æºæ–‡ä»¶ï¼Œè€Œä¸ç”¨ç»™æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</p></div><h4 id="EnableWebMvcConfiguration-çš„æºç "><a href="#EnableWebMvcConfiguration-çš„æºç " class="headerlink" title="EnableWebMvcConfiguration çš„æºç "></a>EnableWebMvcConfiguration çš„æºç </h4><p><code>EnableWebMvcConfiguration</code> ç»§æ‰¿äº† <code>DelegatingWebMvcConfiguration</code>ï¼Œè€Œ <code>DelegatingWebMvcConfiguration</code> åˆ™ç»§æ‰¿äº† <code>WebMvcConfigurationSupport</code>ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(WebProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EnableWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">implements</span> <span class="title">ResourceLoaderAware</span> </span>{</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>SpringBoot é»˜è®¤ä¼šå¾€å®¹å™¨ä¸­æ”¾å…¥ <code>WebMvcConfigurationSupport</code> ç»„ä»¶ï¼Œå¦‚æœå¼€å‘è€…æ³¨å†Œäº† <code>WebMvcConfigurationSupport</code> ç»„ä»¶ï¼Œé‚£ä¹ˆ SpringBoot çš„ <code>WebMvcAutoConfiguration</code> ç»„ä»¶å°±ä¼šå¤±æ•ˆã€‚è¿™ç›¸å½“äºç¦ç”¨ SpringBoot çš„è‡ªåŠ¨é…ç½®ï¼Œé‡‡ç”¨å…¨æ‰‹åŠ¨çš„æ–¹å¼é…ç½® MVCã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration(after = { DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class, ValidationAutoConfiguration.class })</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass({ Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class })</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span> <span class="comment">// å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ª Bean æ‰ç”Ÿæ•ˆï¼Œé»˜è®¤å°±æ˜¯æ²¡æœ‰</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span></span><br><span class="line"><span class="meta">@ImportRuntimeHints(WebResourcesRuntimeHints.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>æ¬¢è¿é¡µé¢çš„æŸ¥æ‰¾è§„åˆ™<ul><li><code>HandlerMapping</code>ï¼šæ ¹æ®è¯·æ±‚è·¯å¾„æ‰¾åˆ°èƒ½å¤„ç†è¯·æ±‚çš„ Handler</li><li><code>WelcomePageHandlerMapping</code>ï¼š <ul><li>è®¿é—® <code>/**</code> è·¯å¾„ä¸‹çš„æ‰€æœ‰è¯·æ±‚ï¼Œéƒ½ä¼šå»é»˜è®¤çš„å››ä¸ªé™æ€èµ„æºè·¯å¾„ä¸‹æŸ¥æ‰¾é¡µé¢ï¼Œè¿™ä¹Ÿé€‚ç”¨äºæ¬¢è¿é¡µé¢</li><li>åªè¦åœ¨ä»»æ„ä¸€ä¸ªé™æ€èµ„æºè·¯å¾„ä¸‹æœ‰ä¸€ä¸ª <code>index.html</code> é¡µé¢ï¼Œé¡¹ç›®å¯åŠ¨åå°±å¯ä»¥æ­£å¸¸è®¿é—®å®ƒ</li></ul></li></ul></li></ul><h4 id="ä¸ºä»€ä¹ˆå®šä¹‰-WebMvcConfigurer-å°±èƒ½é…ç½®åº•å±‚è¡Œä¸º"><a href="#ä¸ºä»€ä¹ˆå®šä¹‰-WebMvcConfigurer-å°±èƒ½é…ç½®åº•å±‚è¡Œä¸º" class="headerlink" title="ä¸ºä»€ä¹ˆå®šä¹‰ WebMvcConfigurer å°±èƒ½é…ç½®åº•å±‚è¡Œä¸º"></a>ä¸ºä»€ä¹ˆå®šä¹‰ WebMvcConfigurer å°±èƒ½é…ç½®åº•å±‚è¡Œä¸º</h4><ul><li><code>WebMvcAutoConfiguration</code> æ˜¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œå®ƒé‡Œé¢æœ‰ä¸€ä¸ª <code>EnableWebMvcConfiguration</code> é…ç½®ç±»</li><li><code>EnableWebMvcConfiguration</code> ç»§æ‰¿äº† <code>DelegatingWebMvcConfiguration</code>ï¼Œä¸”ä¸¤è€…éƒ½ä¼šç”Ÿæ•ˆ</li><li><code>DelegatingWebMvcConfiguration</code> åˆ©ç”¨ DI (è‡ªåŠ¨æ³¨å…¥) å°†å®¹å™¨ä¸­æ‰€æœ‰çš„ <code>WebMvcConfigurer</code> éƒ½æ³¨å…¥è¿›æ¥</li><li>åˆ«äººè°ƒç”¨ <code>DelegatingWebMvcConfiguration</code> çš„æ–¹æ³•é…ç½®åº•å±‚è§„åˆ™ï¼Œè€Œå®ƒè‡ªèº«åˆ™è°ƒç”¨æ‰€æœ‰ <code>WebMvcConfigurer</code> çš„åº•å±‚é…ç½®æ–¹æ³•ã€‚</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * DelegatingWebMvcConfiguration çš„åº•å±‚æºç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>{</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> WebMvcConfigurerComposite configurers = <span class="keyword">new</span> WebMvcConfigurerComposite();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired(required = false)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConfigurers</span><span class="params">(List&lt;WebMvcConfigurer&gt; configurers)</span> </span>{</span><br><span class="line"><span class="keyword">if</span> (!CollectionUtils.isEmpty(configurers)) {</span><br><span class="line"><span class="keyword">this</span>.configurers.addWebMvcConfigurers(configurers);</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configurePathMatch</span><span class="params">(PathMatchConfigurer configurer)</span> </span>{</span><br><span class="line"><span class="keyword">this</span>.configurers.configurePathMatch(configurer);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configureContentNegotiation</span><span class="params">(ContentNegotiationConfigurer configurer)</span> </span>{</span><br><span class="line"><span class="keyword">this</span>.configurers.configureContentNegotiation(configurer);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="å…¨é¢æ¥ç®¡-Spring-MVC"><a href="#å…¨é¢æ¥ç®¡-Spring-MVC" class="headerlink" title="å…¨é¢æ¥ç®¡ Spring MVC"></a>å…¨é¢æ¥ç®¡ Spring MVC</h2><p>SpringBoot é»˜è®¤é…ç½®å¥½äº† Spring MVC çš„æ‰€æœ‰å¸¸ç”¨ç‰¹æ€§ï¼Œå¦‚æœéœ€è¦å…¨é¢æ¥ç®¡ Spring MVC çš„æ‰€æœ‰é…ç½®å¹¶ç¦ç”¨é»˜è®¤é…ç½®ï¼Œä»…éœ€è¦ç¼–å†™ä¸€ä¸ª <code>WebMvcConfigurer</code> é…ç½®ç±»ï¼Œå¹¶æ ‡æ³¨ <code>@EnableWebMvc</code> å³å¯ã€‚</p><h3 id="WebMvcAutoConfiguration-è‡ªåŠ¨é…ç½®äº†å“ªäº›è§„åˆ™"><a href="#WebMvcAutoConfiguration-è‡ªåŠ¨é…ç½®äº†å“ªäº›è§„åˆ™" class="headerlink" title="WebMvcAutoConfiguration è‡ªåŠ¨é…ç½®äº†å“ªäº›è§„åˆ™"></a>WebMvcAutoConfiguration è‡ªåŠ¨é…ç½®äº†å“ªäº›è§„åˆ™</h3><p>Spring MVC è‡ªåŠ¨é…ç½®åœºæ™¯ç»™æˆ‘ä»¬é…ç½®äº†å¦‚ä¸‹æ‰€æœ‰é»˜è®¤è¡Œä¸ºï¼š</p><ul><li><p><code>WebMvcAutoConfiguration</code> Web åœºæ™¯çš„è‡ªåŠ¨é…ç½®ç±»</p><ul><li>æ”¯æŒ RESTful çš„ Filterï¼š<code>HiddenHttpMethodFilter</code></li><li>æ”¯æŒé POST è¯·æ±‚ä½“æºå¸¦æ•°æ®ï¼š<code>FormContentFilter</code></li><li>å¯¼å…¥ <code>EnableWebMvcConfiguration</code> é…ç½®ç±»åï¼š<ul><li><code>RequestMappingHandlerAdapter</code></li><li><code>WelcomePageHandlerMapping</code>ï¼š æ¬¢è¿é¡µåŠŸèƒ½æ”¯æŒï¼ˆæ¨¡æ¿å¼•æ“ç›®å½•ã€é™æ€èµ„æºç›®å½•æ”¾ <code>index.html</code> é¡µé¢ï¼‰ï¼Œé¡¹ç›®è®¿é—® <code>/</code> å°±é»˜è®¤å±•ç¤ºè¿™ä¸ªé¡µé¢</li><li><code>RequestMappingHandlerMapping</code>ï¼šæ‰¾æ¯ä¸ªè¯·æ±‚ç”±è°å¤„ç†çš„æ˜ å°„å…³ç³»</li><li><code>ExceptionHandlerExceptionResolver</code>ï¼šé»˜è®¤çš„å¼‚å¸¸è§£æå™¨ </li><li><code>LocaleResolver</code>ï¼šå›½é™…åŒ–è§£æå™¨</li><li><code>ThemeResolver</code>ï¼šä¸»é¢˜è§£æå™¨</li><li><code>FlashMapManager</code>ï¼šä¸´æ—¶æ•°æ®å…±äº«</li><li><code>FormattingConversionService</code>ï¼š æ•°æ®æ ¼å¼åŒ– ã€ç±»å‹è½¬åŒ–</li><li><code>Validator</code>ï¼šJSR303 æä¾›çš„æ•°æ®æ ¡éªŒåŠŸèƒ½</li><li><code>WebBindingInitializer</code>ï¼šè¯·æ±‚å‚æ•°çš„å°è£…ä¸ç»‘å®š</li><li><code>ContentNegotiationManager</code>ï¼šå†…å®¹åå•†ç®¡ç†å™¨</li></ul></li></ul></li><li><p><code>WebMvcAutoConfigurationAdapter</code> é…ç½®ç”Ÿæ•ˆï¼Œå®ƒæ˜¯ä¸€ä¸ª <code>WebMvcConfigurer</code>ï¼Œå®šä¹‰äº† MVC åº•å±‚ç»„ä»¶</p><ul><li>å®šä¹‰å¥½ <code>WebMvcConfigurer</code>ï¼šåº•å±‚ç»„ä»¶çš„é»˜è®¤åŠŸèƒ½</li><li>è§†å›¾è§£æå™¨ï¼š<code>InternalResourceViewResolver</code></li><li>è§†å›¾è§£æå™¨ï¼š<code>BeanNameViewResolver</code>ï¼Œè§†å›¾åï¼ˆController æ–¹æ³•çš„è¿”å›å€¼å­—ç¬¦ä¸²ï¼‰å°±æ˜¯ç»„ä»¶å</li><li>å†…å®¹åå•†è§£æå™¨ï¼š<code>ContentNegotiatingViewResolver</code></li><li>è¯·æ±‚ä¸Šä¸‹æ–‡è¿‡æ»¤å™¨ï¼š<code>RequestContextFilter</code>ï¼Œåœ¨ä»»æ„ä½ç½®ç›´æ¥è·å–å½“å‰è¯·æ±‚</li><li>é™æ€èµ„æºé“¾è§„åˆ™</li><li>é”™è¯¯è¯¦æƒ…ï¼š<code>ProblemDetailsExceptionHandler</code>ï¼ŒSpring MVC å†…éƒ¨åœºæ™¯çš„å¼‚å¸¸éƒ½ä¼šè¢«å®ƒæ•è·</li></ul></li></ul><h3 id="EnableWebMvc-ç¦ç”¨é»˜è®¤è¡Œä¸º"><a href="#EnableWebMvc-ç¦ç”¨é»˜è®¤è¡Œä¸º" class="headerlink" title="@EnableWebMvc ç¦ç”¨é»˜è®¤è¡Œä¸º"></a>@EnableWebMvc ç¦ç”¨é»˜è®¤è¡Œä¸º</h3><ul><li><code>@EnableWebMvc</code> å¾€å®¹å™¨ä¸­å¯¼å…¥äº† <code>DelegatingWebMvcConfiguration</code> ç»„ä»¶ï¼Œå®ƒç»§æ‰¿è‡ª <code>WebMvcConfigurationSupport</code></li><li><code>WebMvcAutoConfiguration</code> æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„æ¡ä»¶æ³¨è§£ï¼Œ<code>@ConditionalOnMissingBean (WebMvcConfigurationSupport.class)</code>ï¼Œå½“å®¹å™¨ä¸­æ²¡æœ‰ <code>WebMvcConfigurationSupport</code> ç»„ä»¶æ—¶ï¼Œ<code>WebMvcAutoConfiguration</code> æ‰ç”Ÿæ•ˆ</li><li><code>@EnableWebMvc</code> å¯¼å…¥äº† <code>WebMvcConfigurationSupport</code>ï¼Œä»è€Œä¼šå¯¼è‡´ <code>WebMvcAutoConfiguration</code> å¤±æ•ˆï¼Œå³ä¼šå¯¼è‡´ SpringBoot ç¦ç”¨ MVC è‡ªåŠ¨é…ç½®çš„æ‰€æœ‰åŠŸèƒ½</li></ul><h3 id="WebMvcConfigurer-çš„åŠŸèƒ½"><a href="#WebMvcConfigurer-çš„åŠŸèƒ½" class="headerlink" title="WebMvcConfigurer çš„åŠŸèƒ½"></a>WebMvcConfigurer çš„åŠŸèƒ½</h3><p><code>WebMvcConfigurer</code> å®šä¹‰å¹¶æ‰©å±•äº† Spring MVC çš„åº•å±‚åŠŸèƒ½ï¼Œå…¶ä¸­çš„åŠŸèƒ½åˆ—è¡¨å¦‚ä¸‹ï¼š</p><table><thead><tr><th>æä¾›æ–¹æ³•</th><th>æ ¸å¿ƒå‚æ•°</th><th>åŠŸèƒ½</th><th>é»˜è®¤</th></tr></thead><tbody><tr><td> addFormatters</td><td>FormatterRegistry</td><td> æ ¼å¼åŒ–å™¨ï¼šæ”¯æŒå±æ€§ä¸Š <code>@NumberFormat</code> å’Œ <code>@DatetimeFormat</code> çš„æ•°æ®ç±»å‹è½¬æ¢</td><td> GenericConversionService</td></tr><tr><td>getValidator</td><td> æ— </td><td>æ•°æ®æ ¡éªŒï¼šæ ¡éªŒ Controller ä¸Šä½¿ç”¨ <code>@Valid</code> æ ‡æ³¨çš„å‚æ•°åˆæ³•æ€§ã€‚éœ€è¦å¯¼å…¥ <code>spring-boot-starter-validator</code></td><td>æ— </td></tr><tr><td> addInterceptors</td><td>InterceptorRegistry</td><td> æ‹¦æˆªå™¨ï¼šæ‹¦æˆªæ”¶åˆ°çš„æ‰€æœ‰è¯·æ±‚</td><td>æ— </td></tr><tr><td> configureContentNegotiation</td><td>ContentNegotiationConfigurer</td><td> å†…å®¹åå•†ï¼šæ”¯æŒå¤šç§æ•°æ®æ ¼å¼è¿”å›ã€‚éœ€è¦é…åˆæ”¯æŒè¿™ç§ç±»å‹çš„ <code>HttpMessageConverter</code></td><td>æ”¯æŒ JSON</td></tr><tr><td>configureMessageConverters</td><td>List&lt;HttpMessageConverter&lt;?&gt;&gt;</td><td> æ¶ˆæ¯è½¬æ¢å™¨ï¼šæ ‡æ³¨ <code>@ResponseBody</code> çš„è¿”å›å€¼ä¼šåˆ©ç”¨ <code>MessageConverter</code> ç›´æ¥å†™å‡ºå»</td><td>æ”¯æŒ 8 ç§æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬ <code>byte</code>ï¼Œ<code>string</code>ï¼Œ<code>multipart</code>ï¼Œ<code>resource</code>ï¼Œ<code>json</code></td></tr><tr><td>addViewControllers</td><td>ViewControllerRegistry</td><td> è§†å›¾æ˜ å°„ï¼šç›´æ¥å°†è¯·æ±‚è·¯å¾„ä¸ç‰©ç†è§†å›¾æ˜ å°„ã€‚ç”¨äºæ—  Java ä¸šåŠ¡é€»è¾‘çš„ç›´æ¥è§†å›¾é¡µæ¸²æŸ“</td><td>æ— </td></tr><tr><td> configureViewResolvers</td><td>ViewResolverRegistry</td><td> è§†å›¾è§£æå™¨ï¼šé€»è¾‘è§†å›¾è½¬ä¸ºç‰©ç†è§†å›¾</td><td> ViewResolverComposite</td></tr><tr><td>addResourceHandlers</td><td>ResourceHandlerRegistry</td><td> é™æ€èµ„æºå¤„ç†ï¼šé™æ€èµ„æºè·¯å¾„æ˜ å°„ã€ç¼“å­˜æ§åˆ¶</td><td> ResourceHandlerRegistry</td></tr><tr><td>configureDefaultServletHandling</td><td>DefaultServletHandlerConfigurer</td><td> é»˜è®¤ <code>Servlet</code>ï¼šå¯ä»¥è¦†ç›– Tomcat çš„ <code>DefaultServlet</code>ã€‚è®© <code>DispatcherServlet</code> æ‹¦æˆª <code>/</code></td><td>æ— </td></tr><tr><td> configurePathMatch</td><td>PathMatchConfigurer</td><td> è·¯å¾„åŒ¹é…ï¼šè‡ªå®šä¹‰ URL è·¯å¾„åŒ¹é…ã€‚å¯ä»¥è‡ªåŠ¨ä¸ºæ‰€æœ‰è·¯å¾„åŠ ä¸ŠæŒ‡å®šå‰ç¼€ï¼Œæ¯”å¦‚ <code>/api</code></td><td>æ— </td></tr><tr><td> configureAsyncSupport</td><td>AsyncSupportConfigurer</td><td> å¼‚æ­¥æ”¯æŒ</td><td> TaskExecutionAutoConfiguration</td></tr><tr><td>addCorsMappings</td><td>CorsRegistry</td><td> è·¨åŸŸæ”¯æŒ</td><td>æ— </td></tr><tr><td> addArgumentResolvers</td><td>List<handlermethodargumentresolver></handlermethodargumentresolver></td><td> å‚æ•°è§£æå™¨</td><td> MVC é»˜è®¤æä¾›</td></tr><tr><td> addReturnValueHandlers</td><td>List<handlermethodreturnvaluehandler></handlermethodreturnvaluehandler></td><td> è¿”å›å€¼è§£æå™¨</td><td> MVC é»˜è®¤æä¾›</td></tr><tr><td> configureHandlerExceptionResolvers</td><td>List<handlerexceptionresolver></handlerexceptionresolver></td><td> å¼‚å¸¸å¤„ç†å™¨</td><td> 3 ä¸ªæ ¸å¿ƒç±»ï¼š<code>ExceptionHandlerExceptionResolver</code>ï¼Œ<code>ResponseStatusExceptionResolver</code>ï¼Œ<code>DefaultHandlerExceptionResolver</code></td></tr><tr><td>getMessageCodesResolver</td><td> æ— </td><td>æ¶ˆæ¯ç è§£æå™¨ï¼šå›½é™…åŒ–ä½¿ç”¨</td><td>æ— </td></tr></tbody></table><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><p>SpringBoot å·²ç»é»˜è®¤é…ç½®å¥½äº† Web å¼€å‘åœºæ™¯å¸¸ç”¨çš„åŠŸèƒ½ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç›´æ¥ä½¿ç”¨å³å¯ã€‚</p><h3 id="ä¸‰ç§é…ç½®æ–¹å¼"><a href="#ä¸‰ç§é…ç½®æ–¹å¼" class="headerlink" title="ä¸‰ç§é…ç½®æ–¹å¼"></a>ä¸‰ç§é…ç½®æ–¹å¼</h3><p>åœ¨ SpringBoot Web å¼€å‘åœºæ™¯ä¸‹ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼å¯ä»¥é…ç½® SpringBoot MVCã€‚</p><table><thead><tr><th>æ–¹å¼</th><th>ç”¨æ³•</th><th>é‡ç‚¹</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>å…¨è‡ªåŠ¨</td><td>ç›´æ¥ç¼–å†™æ§åˆ¶å™¨çš„ä¸šåŠ¡é€»è¾‘</td><td></td><td>å…¨éƒ¨ä½¿ç”¨ SpringBoot è‡ªåŠ¨é…ç½®çš„é»˜è®¤æ•ˆæœ</td></tr><tr><td>æ‰‹è‡ªä¸€ä½“</td><td><code>@Configuration</code> + é…ç½® <code>WebMvcConfigurer</code> æˆ–è€…é…ç½® <code>WebMvcRegistrations</code></td><td>ä¸è¦æ ‡æ³¨ <code>@EnableWebMvc</code> æ³¨è§£</td><td>ä¿ç•™ SpringBoot è‡ªåŠ¨é…ç½®æ•ˆæœï¼Œæ‰‹åŠ¨é…ç½®éƒ¨åˆ†åŠŸèƒ½ï¼Œè‡ªå®šä¹‰ MVC åº•å±‚ç»„ä»¶</td></tr><tr><td>å…¨æ‰‹åŠ¨</td><td><code>@Configuration</code> + é…ç½® <code>WebMvcConfigurer</code></td><td>æ ‡æ³¨ <code>@EnableWebMvc</code> æ³¨è§£</td><td>ç¦ç”¨ SpringBoot è‡ªåŠ¨é…ç½®æ•ˆæœï¼Œå…¨æ‰‹åŠ¨é…ç½®</td></tr></tbody></table><h3 id="ä¸¤ç§å¼€å‘æ¨¡å¼"><a href="#ä¸¤ç§å¼€å‘æ¨¡å¼" class="headerlink" title="ä¸¤ç§å¼€å‘æ¨¡å¼"></a>ä¸¤ç§å¼€å‘æ¨¡å¼</h3><ul><li>å‰åç«¯åˆ†ç¦»æ¨¡å¼ï¼š <code>@RestController</code> ç›´æ¥å“åº” JSON æ•°æ®</li><li>å‰åç«¯ä¸åˆ†ç¦»æ¨¡å¼ï¼š<code>@Controller</code> + <code>Thymeleaf</code> æ¨¡æ¿å¼•æ“</li></ul>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦è®°å½• SpringBoot 3 çš„åŸºç¡€æ•™ç¨‹ï¼ŒåŒ…æ‹¬ MVC è‡ªåŠ¨é…ç½®ã€é™æ€èµ„æºã€é”™è¯¯å¤„ç†ã€åµŒå…¥å¼å®¹å™¨ã€æºç åˆ†æç­‰å†…å®¹ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å¾®æœåŠ¡" scheme="https://www.techgrow.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>Linux å®‰è£… JDK-17</title>
    <link href="https://www.techgrow.cn/posts/ef3088be.html"/>
    <id>https://www.techgrow.cn/posts/ef3088be.html</id>
    <published>2023-06-12T13:48:23.000Z</published>
    <updated>2023-06-12T13:48:23.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡ä¸»è¦ä»‹ç» Linux å¦‚ä½•å®‰è£… JDK 17ï¼ŒåŒ…æ‹¬ OpenJDKã€OracleJDK çš„å®‰è£…ï¼Œé€‚ç”¨äº CentOSã€Ubuntuã€Debianã€SUSE ç­‰ Linux å‘è¡Œç‰ˆã€‚</p><h2 id="OpenJDK-å®‰è£…"><a href="#OpenJDK-å®‰è£…" class="headerlink" title="OpenJDK å®‰è£…"></a>OpenJDK å®‰è£…</h2><h3 id="ä¸‹è½½è½¯ä»¶"><a href="#ä¸‹è½½è½¯ä»¶" class="headerlink" title="ä¸‹è½½è½¯ä»¶"></a>ä¸‹è½½è½¯ä»¶</h3><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢å®‰è£…ç›®å½•</span></span><br><span class="line"><span class="comment"># cd /usr/local</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½è½¯ä»¶åŒ…</span></span><br><span class="line"><span class="comment"># wget https://download.java.net/java/GA/jdk17.0.2/dfd4a8d0985749f896bed50d7138ee7f/8/GPL/openjdk-17.0.2_linux-x64_bin.tar.gz</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹è½¯ä»¶åŒ…</span></span><br><span class="line"><span class="comment"># tar -zxvf openjdk-17.0.2_linux-x64_bin.tar.gz</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å‘½åç›®å½•</span></span><br><span class="line"><span class="comment"># mv jdk-17.0.2 jdk-17</span></span><br></pre></td></tr></tbody></table></figure><span id="more"></span><h3 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h3><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¾‘é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨é…ç½®æ–‡ä»¶çš„æœ€ä¸‹æ–¹æ·»åŠ ä»¥ä¸‹å†…å®¹</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/<span class="built_in">local</span>/jdk-17</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin;</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar;</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br></pre></td></tr></tbody></table></figure><h3 id="æŸ¥çœ‹ç‰ˆæœ¬å·"><a href="#æŸ¥çœ‹ç‰ˆæœ¬å·" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬å·"></a>æŸ¥çœ‹ç‰ˆæœ¬å·</h3><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="comment"># java -version</span></span><br></pre></td></tr></tbody></table></figure><h2 id="OracleJDK-å®‰è£…"><a href="#OracleJDK-å®‰è£…" class="headerlink" title="OracleJDK å®‰è£…"></a>OracleJDK å®‰è£…</h2><h3 id="ä¸‹è½½è½¯ä»¶-1"><a href="#ä¸‹è½½è½¯ä»¶-1" class="headerlink" title="ä¸‹è½½è½¯ä»¶"></a>ä¸‹è½½è½¯ä»¶</h3><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢å®‰è£…ç›®å½•</span></span><br><span class="line"><span class="comment"># cd /usr/local</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½è½¯ä»¶åŒ…</span></span><br><span class="line"><span class="comment"># wget https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.tar.gz</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹è½¯ä»¶åŒ…</span></span><br><span class="line"><span class="comment"># tar -zxvf jdk-17_linux-x64_bin.tar.gz</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å‘½åç›®å½•</span></span><br><span class="line"><span class="comment"># mv jdk-17.0.7 jdk-17</span></span><br></pre></td></tr></tbody></table></figure><h3 id="é…ç½®ç¯å¢ƒå˜é‡-1"><a href="#é…ç½®ç¯å¢ƒå˜é‡-1" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h3><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¾‘é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨é…ç½®æ–‡ä»¶çš„æœ€ä¸‹æ–¹æ·»åŠ ä»¥ä¸‹å†…å®¹</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/<span class="built_in">local</span>/jdk-17</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin;</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar;</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br></pre></td></tr></tbody></table></figure><h3 id="æŸ¥çœ‹ç‰ˆæœ¬å·-1"><a href="#æŸ¥çœ‹ç‰ˆæœ¬å·-1" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬å·"></a>æŸ¥çœ‹ç‰ˆæœ¬å·</h3><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="comment"># java -version</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç» Linux å¦‚ä½•å®‰è£… JDK 17ï¼ŒåŒ…æ‹¬ OpenJDKã€OracleJDk çš„å®‰è£…ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="Linux" scheme="https://www.techgrow.cn/tags/Linux/"/>
    
    <category term="å¼€å‘å·¥å…·" scheme="https://www.techgrow.cn/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äºŒå¸¸è§„é…ç½®</title>
    <link href="https://www.techgrow.cn/posts/e7a270a6.html"/>
    <id>https://www.techgrow.cn/posts/e7a270a6.html</id>
    <published>2023-06-11T15:12:42.000Z</published>
    <updated>2023-06-11T15:12:42.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å¤§çº²"><a href="#å¤§çº²" class="headerlink" title="å¤§çº²"></a>å¤§çº²</h2><ul><li><a href="/posts/79ae6590.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸€å¿«é€Ÿå…¥é—¨</a></li><li><a href="/posts/e7a270a6.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äºŒå¸¸è§„é…ç½®</a></li><li><a href="/posts/12fb0f17.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸‰ Web å¼€å‘</a></li><li><a href="/posts/223fd9f.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å›› Web å¼€å‘</a></li><li><a href="/posts/1dfe3056.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äº”æ ¸å¿ƒåŸç†</a></li><li><a href="/posts/b6463873.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å…­åœºæ™¯æ•´åˆ</a></li><li><a href="/posts/6bcf09.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸ƒåŸºç¡€ç‰¹æ€§</a></li></ul><h2 id="YAML-é…ç½®"><a href="#YAML-é…ç½®" class="headerlink" title="YAML é…ç½®"></a>YAML é…ç½®</h2><p>YAML æ˜¯ â€œYAML Ainâ€™t a Markup Languageâ€ï¼ˆYAML ä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚åœ¨å¼€å‘è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€Yet Another Markup Languageâ€ï¼ˆæ˜¯å¦ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚</p><div class="admonition note"><p class="admonition-title">YAML é…ç½®æ–¹å¼çš„ä¼˜åŠ¿</p><ul><li>è®¾è®¡ç›®æ ‡ï¼Œå°±æ˜¯æ–¹ä¾¿äººç±»è¯»å†™</li><li>å±‚æ¬¡åˆ†æ˜ï¼Œæ›´é€‚åˆåšé…ç½®æ–‡ä»¶</li><li>ä½¿ç”¨ <code>.yml</code> æˆ– <code>.yaml</code> ä½œä¸ºæ–‡ä»¶åç¼€ï¼Œå¦‚ <code>application.yml</code></li></ul></div><div class="admonition note"><p class="admonition-title">Properties é…ç½®æ–¹å¼çš„å¼Šç«¯</p><ul><li>ç—›ç‚¹ï¼šSpringBoot é›†ä¸­åŒ–ç®¡ç†é…ç½®ï¼ˆ<code>application.properties</code>ï¼‰</li><li>é—®é¢˜ï¼šé…ç½®å†…å®¹å¤šäº†ä»¥åï¼Œéš¾ä»¥é˜…è¯»å’Œä¿®æ”¹ï¼Œå±‚çº§ç»“æ„è¾¨è¯†åº¦ä¸é«˜</li></ul></div><span id="more"></span><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><ul><li><p>åŸºç¡€è¯­æ³•</p><ul><li>å¤§å°å†™æ•æ„Ÿ</li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å‰²é”®å€¼å¯¹ <code>k: v</code></li><li>ç¼©è¿›æ—¶ä¸å…è®¸ä½¿ç”¨ Tab é”®ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼</li><li>ç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦ä¾§å¯¹é½å³å¯</li><li><code>#</code> ç¬¦å·è¡¨ç¤ºæ³¨é‡Šï¼Œä»è¿™ä¸ªå­—ç¬¦ä¸€ç›´åˆ°è¡Œå°¾ï¼Œéƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥</li></ul></li><li><p>æ”¯æŒçš„å†™æ³•</p><ul><li>å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆï¼Œå¦‚æ˜ å°„ï¼ˆmapï¼‰/ å“ˆå¸Œï¼ˆhashï¼‰ / å­—å…¸ï¼ˆdictionaryï¼‰</li><li>æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ï¼Œå¦‚åºåˆ—ï¼ˆsequenceï¼‰ / åˆ—è¡¨ï¼ˆlistï¼‰</li><li>çº¯é‡ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ï¼Œå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”ã€æ—¥æœŸ</li></ul></li></ul><h3 id="ä½¿ç”¨æ¡ˆä¾‹"><a href="#ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="ä½¿ç”¨æ¡ˆä¾‹"></a>ä½¿ç”¨æ¡ˆä¾‹</h3><ul><li>Java é…ç½®å±æ€§ç±» </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "person")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthDay;</span><br><span class="line">    <span class="keyword">private</span> Boolean like;</span><br><span class="line">    <span class="keyword">private</span> Child child; <span class="comment">// åµŒå¥—å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Dog&gt; dogs; <span class="comment">// æ•°ç»„ï¼ˆé‡Œé¢æ˜¯å¯¹è±¡ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Cat&gt; cats; <span class="comment">// è¡¨ç¤º Map</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthDay;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; text; <span class="comment">// æ•°ç»„</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>Properties è¡¨ç¤ºæ³• </li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">person.name</span>=<span class="string">å¼ ä¸‰</span></span><br><span class="line"><span class="meta">person.age</span>=<span class="string">18</span></span><br><span class="line"><span class="meta">person.birthDay</span>=<span class="string">2010/10/12 12:12:12</span></span><br><span class="line"><span class="meta">person.like</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">person.child.name</span>=<span class="string">æå››</span></span><br><span class="line"><span class="meta">person.child.age</span>=<span class="string">12</span></span><br><span class="line"><span class="meta">person.child.birthDay</span>=<span class="string">2018/10/12</span></span><br><span class="line"><span class="meta">person.child.text[0]</span>=<span class="string">abc</span></span><br><span class="line"><span class="meta">person.child.text[1]</span>=<span class="string">def</span></span><br><span class="line"><span class="meta">person.dogs[0].name</span>=<span class="string">å°é»‘</span></span><br><span class="line"><span class="meta">person.dogs[0].age</span>=<span class="string">3</span></span><br><span class="line"><span class="meta">person.dogs[1].name</span>=<span class="string">å°ç™½</span></span><br><span class="line"><span class="meta">person.dogs[1].age</span>=<span class="string">2</span></span><br><span class="line"><span class="meta">person.cats.c1.name</span>=<span class="string">å°è“</span></span><br><span class="line"><span class="meta">person.cats.c1.age</span>=<span class="string">3</span></span><br><span class="line"><span class="meta">person.cats.c2.name</span>=<span class="string">å°ç°</span></span><br><span class="line"><span class="meta">person.cats.c2.age</span>=<span class="string">2</span></span><br></pre></td></tr></tbody></table></figure><ul><li>YAML è¡¨ç¤ºæ³• </li></ul><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">å¼ ä¸‰</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">birthDay:</span> <span class="number">2010</span><span class="string">/10/10</span> <span class="number">12</span><span class="string">:12:12</span></span><br><span class="line">  <span class="attr">like:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">child:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">æå››</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">birthDay:</span> <span class="number">2018</span><span class="string">/10/10</span></span><br><span class="line">    <span class="attr">text:</span> [<span class="string">"abc"</span>,<span class="string">"def"</span>]</span><br><span class="line">  <span class="attr">dogs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">å°é»‘</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">3</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">å°ç™½</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">cats:</span></span><br><span class="line">    <span class="attr">c1:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">å°è“</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">3</span></span><br><span class="line">    <span class="attr">c2:</span> {<span class="attr">name:</span> <span class="string">å°ç»¿</span>,<span class="attr">age:</span> <span class="number">2</span>} <span class="comment"># å¯¹è±¡ä¹Ÿå¯ä»¥ç”¨{}è¡¨ç¤º</span></span><br></pre></td></tr></tbody></table></figure><h3 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h3><ul><li><code>birthDay</code> æ¨èå†™ä¸º <code>birth-day</code></li><li>æ–‡æœ¬<ul><li>å•å¼•å·ä¸ä¼šè½¬ä¹‰ã€<code>\n</code> ä¼šæ˜¾ç¤ºä¸ºæ™®é€šå­—ç¬¦ã€‘</li><li>åŒå¼•å·ä¼šè½¬ä¹‰ã€<code>\n</code> ä¼šæ˜¾ç¤ºä¸ºæ¢è¡Œç¬¦ã€‘</li></ul></li><li>å¤§æ–‡æœ¬<ul><li><code>|</code> å¼€å¤´ï¼Œå¤§æ–‡æœ¬å†™åœ¨ä¸‹å±‚ï¼Œä¼šä¿ç•™æ–‡æœ¬æ ¼å¼ï¼Œæ¢è¡Œç¬¦æ­£ç¡®æ˜¾ç¤º</li><li><code>&gt;</code> å¼€å¤´ï¼Œå¤§æ–‡æœ¬å†™åœ¨ä¸‹å±‚ï¼Œä¼šæŠ˜å æ¢è¡Œç¬¦ï¼ˆæ›¿æ¢ä¸ºç©ºæ ¼ç¬¦ï¼‰</li></ul></li><li>å¤šæ–‡æ¡£åˆå¹¶<ul><li>ä½¿ç”¨ <code>---</code> å¯ä»¥æŠŠå¤šä¸ª YAML æ–‡æ¡£åˆå¹¶åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­ï¼Œæ¯ä¸ªæ–‡æ¡£åŒºä¾ç„¶è®¤ä¸ºæ˜¯å†…å®¹ç‹¬ç«‹</li></ul></li></ul><h2 id="æ—¥å¿—é…ç½®"><a href="#æ—¥å¿—é…ç½®" class="headerlink" title="æ—¥å¿—é…ç½®"></a>æ—¥å¿—é…ç½®</h2><p>æœ¬ç« èŠ‚æ‰€éœ€çš„æ¡ˆä¾‹ä»£ç ï¼Œå¯ä»¥ç›´æ¥ä» <a href="https://github.com/rqh656418510/spring-cloud-share/tree/main/spring-boot-3/spring-boot-3-study">GitHub</a> ä¸‹è½½å¯¹åº”ç« èŠ‚ <code>spring-boot3-03</code>ã€‚</p><h3 id="æ—¥å¿—ç®€ä»‹"><a href="#æ—¥å¿—ç®€ä»‹" class="headerlink" title="æ—¥å¿—ç®€ä»‹"></a>æ—¥å¿—ç®€ä»‹</h3><ul><li>1ã€Spring ä½¿ç”¨ <code>commons-logging</code> ä½œä¸ºå†…éƒ¨æ—¥å¿—ï¼Œä½†åº•å±‚æ—¥å¿—å®ç°æ˜¯å¼€æ”¾çš„ï¼Œå¯å¯¹æ¥å…¶ä»–æ—¥å¿—æ¡†æ¶ã€‚</li><li>2ã€Spring 5 åŠä»¥åçš„ç‰ˆæœ¬ï¼Œ<code>commons-logging</code> è¢« Spring è‡ªå·±ç›´æ¥é‡å†™äº†ï¼ŒåŒ…åæ˜¯ <code>spring-jcl</code>ã€‚</li><li>3ã€SpringBoot æ”¯æŒ <code>JUL</code>ï¼Œ<code>Log4j</code>ï¼Œ<code>Logback</code> ç­‰æ—¥å¿—æ¡†æ¶ï¼Œé»˜è®¤ä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶æ˜¯ <code>Logback</code>ã€‚</li><li>4ã€SpringBoot æä¾›äº†é»˜è®¤çš„æ§åˆ¶å°è¾“å‡ºé…ç½®ï¼Œä¹Ÿå¯ä»¥é…ç½®è¾“å‡ºä¸ºæ–‡ä»¶ã€‚</li><li>5ã€è™½ç„¶æ—¥å¿—æ¡†æ¶å¾ˆå¤šï¼Œä½†æ˜¯å¼€å‘äººå‘˜ä¸ç”¨æ‹…å¿ƒï¼Œå› ä¸ºä½¿ç”¨ SpringBoot é»˜è®¤çš„æ—¥å¿—é…ç½®å°±èƒ½å·¥ä½œçš„å¾ˆå¥½ã€‚</li></ul><div class="admonition note"><p class="admonition-title">SpringBoot æ˜¯æ€ä¹ˆæŠŠæ—¥å¿—é»˜è®¤é…ç½®å¥½çš„ï¼Ÿ</p><ul><li>1ã€æ¯ä¸ªåœºæ™¯å¯åŠ¨å™¨ <code>spring-boot-starter-xxx</code>ï¼Œéƒ½ä¼šå¯¼å…¥ <code>spring-boot-starter</code> æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨</li><li> 2ã€æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨å¯¼å…¥äº† <code>spring-boot-starter-logging</code>ï¼ŒåŒ…å«äº†æ—¥å¿—çš„æ‰€ç”¨åŠŸèƒ½</li><li> 3ã€SpringBoot é»˜è®¤ä½¿ç”¨äº† <code>SLF4J</code> + <code>Logback</code> ç»„åˆä½œä¸ºé»˜è®¤çš„åº•å±‚æ—¥å¿—å®ç°</li><li> 4ã€æ—¥å¿—æ˜¯ç³»ç»Ÿä¸€å¯åŠ¨å°±è¦ç”¨çš„ï¼Œè€Œ <code>xxxAutoConfiguration</code> è‡ªåŠ¨é…ç½®ç±»åªç”¨äºåœ¨ç³»ç»Ÿå¯åŠ¨å®Œæˆåå¯¼å…¥ç»„ä»¶ï¼Œå±äºåæ¥ç”¨çš„ï¼Œå› æ­¤ä¸é€‚ç”¨äºæ—¥å¿—é…ç½®</li><li> 5ã€SpringBoot çš„æ—¥å¿—é…ç½®æ˜¯åˆ©ç”¨ç›‘å¬å™¨æœºåˆ¶å®ç°ï¼Œåº•å±‚æ˜¯é€šè¿‡å®ç° <code>ApplicationContextInitializer</code> æ¥å£æ¥é…ç½®å¥½æ—¥å¿—çš„</li><li> 6ã€SpringBoot çš„æ‰€æœ‰æ—¥å¿—é…ç½®éƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶å®ç°å˜æ›´ï¼Œä»¥ <code>logging</code> ä¸ºå‰ç¼€å¼€å§‹é¡¹çš„æ‰€æœ‰é…ç½®å†…å®¹</li></ul></div><h3 id="æ—¥å¿—æ¡†æ¶"><a href="#æ—¥å¿—æ¡†æ¶" class="headerlink" title="æ—¥å¿—æ¡†æ¶"></a>æ—¥å¿—æ¡†æ¶</h3><ul><li>æ—¥å¿—é—¨é¢ï¼š<code>JCL (Jakarta Commons Logging)</code>ã€<code>SLF4J (Simple Logging Facade for Java)</code>ã€<code>jboss-logging</code></li><li>æ—¥å¿—å®ç°ï¼š<code>Log4j</code>ã€<code>Log4j2</code>ã€<code>Slf4j-Simple</code>ã€<code>Logback</code>ã€<code>JUL (java.util.logging)</code></li></ul><div class="admonition note"><p class="admonition-title">æ—¥å¿—æ¡†æ¶çš„å¯¹æ¯”ä»‹ç»</p><ul><li><a href="../../../asset/2023/06/spring-boot3-study-4.png">Java æ—¥å¿—æ¡†æ¶çš„åç§°æ¢³ç†</a></li><li><a href="../../../asset/2023/06/spring-boot3-study-5.png">SLF4J çš„å„ç§æ—¥å¿—ç»„ä»¶å®ç°</a></li></ul></div><h3 id="æ—¥å¿—æ ¼å¼"><a href="#æ—¥å¿—æ ¼å¼" class="headerlink" title="æ—¥å¿—æ ¼å¼"></a>æ—¥å¿—æ ¼å¼</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2023-06-11T22:34:17.511+08:00  INFO 4944 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br><span class="line">2023-06-11T22:34:17.511+08:00  INFO 4944 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.7]</span><br></pre></td></tr></tbody></table></figure><ul><li>é»˜è®¤çš„æ—¥å¿—è¾“å‡ºæ ¼å¼<ul><li>æ—¶é—´å’Œæ—¥æœŸï¼šæ¯«ç§’çº§ç²¾åº¦</li><li>æ—¥å¿—çº§åˆ«ï¼šERRORï¼ŒWARNï¼ŒINFOï¼ŒDEBUGï¼ŒTRACE</li><li> è¿›ç¨‹ ID</li><li> æ¶ˆæ¯åˆ†å‰²ç¬¦ï¼š<code>---</code></li><li>çº¿ç¨‹åç§°ï¼š ä½¿ç”¨ <code>[]</code> åŒ…å«</li><li> Logger åï¼š é€šå¸¸æ˜¯äº§ç”Ÿæ—¥å¿—çš„ç±»å</li><li>æ¶ˆæ¯ï¼š æ—¥å¿—è®°å½•çš„å†…å®¹</li></ul></li></ul><blockquote><p>ç‰¹åˆ«æ³¨æ„ï¼š Logback æ²¡æœ‰ FATAL çº§åˆ«ï¼Œå¯¹åº”çš„æ˜¯ ERROR çº§åˆ«ã€‚</p></blockquote><ul><li>æ›´æ”¹æ—¥å¿—è¾“å‡ºçš„æ ¼å¼<ul><li>é»˜è®¤å€¼ï¼šå‚ç…§ <code>spring-boot</code> åŒ…çš„ <code>additional-spring-configuration-metadata.json</code> æ–‡ä»¶ï¼Œ<a href="../../../asset/2023/06/spring-boot3-study-6.png">ç‚¹å‡»æŸ¥çœ‹æºç </a></li><li>é»˜è®¤çš„æ—¥å¿—è¾“å‡ºæ ¼å¼å€¼ï¼š<code>%clr(%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd'T'HH:mm:ss.SSSXXX}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}</code></li><li>æ—¥å¿—çš„è¾“å‡ºæ ¼å¼å€¼å¯ä¿®æ”¹ä¸ºï¼š<code>%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger{15} ===&gt; %msg%n</code>ï¼Œé…ç½®ç¤ºä¾‹å¦‚ä¸‹ </li></ul></li></ul><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ”¹æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">console:</span> <span class="string">'%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger{15} ===&gt; %msg%n'</span></span><br></pre></td></tr></tbody></table></figure><h3 id="æ—¥å¿—è®°å½•"><a href="#æ—¥å¿—è®°å½•" class="headerlink" title="æ—¥å¿—è®°å½•"></a>æ—¥å¿—è®°å½•</h3><ul><li>ç¬¬ä¸€ç§å†™æ³•ï¼Œä½¿ç”¨ SLF4J çš„ API</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(MainApplication.class);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        logger.info(<span class="string">"Hello World!"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ç¬¬äºŒç§å†™æ³•ï¼Œä½¿ç”¨ Lombok çš„ <code>@Slf4j</code> æ³¨è§£ </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥ Lombok --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        log.info(<span class="string">"Hello World!"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="æ—¥å¿—çº§åˆ«"><a href="#æ—¥å¿—çº§åˆ«" class="headerlink" title="æ—¥å¿—çº§åˆ«"></a>æ—¥å¿—çº§åˆ«</h3><ul><li>æ—¥å¿—çº§åˆ«ç”±ä½åˆ°é«˜ï¼šTRACEï¼ŒDEBUGï¼ŒINFOï¼ŒWARNï¼ŒERRORï¼ŒFATALï¼ŒOFF<ul><li>TRACEï¼šè¿½è¸ªæ¡†æ¶è¯¦ç»†æµç¨‹æ—¥å¿—ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨</li><li> DEBUGï¼šå¼€å‘è°ƒè¯•ç»†èŠ‚æ—¥å¿—</li><li> INFOï¼šå…³é”®ã€æ„Ÿå…´è¶£ä¿¡æ¯æ—¥å¿—</li><li> WARNï¼šè­¦å‘Šä½†ä¸æ˜¯é”™è¯¯çš„ä¿¡æ¯æ—¥å¿—ï¼Œæ¯”å¦‚ç‰ˆæœ¬è¿‡æ—¶</li><li> ERRORï¼šä¸šåŠ¡é”™è¯¯æ—¥å¿—ï¼Œæ¯”å¦‚å‡ºç°å„ç§å¼‚å¸¸</li><li> FATALï¼šè‡´å‘½é”™è¯¯æ—¥å¿—ï¼Œæ¯”å¦‚ JVM ç³»ç»Ÿå´©æºƒ</li><li> OFFï¼šå…³é—­æ‰€æœ‰æ—¥å¿—è®°å½•</li></ul></li></ul><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li>SpringBoot é»˜è®¤çš„æ—¥å¿—çº§åˆ«æ˜¯ <code>INFO</code>ã€‚</li><li>SpringBoot åªä¼šæ‰“å°æŒ‡å®šæ—¥å¿—çº§åˆ«åŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—ã€‚</li><li>ä¸æŒ‡å®šæ—¥å¿—çº§åˆ«çš„æ‰€æœ‰ç±»ï¼Œé»˜è®¤éƒ½ä½¿ç”¨ <code>root</code> æŒ‡å®šçš„æ—¥å¿—çº§åˆ«ã€‚</li></ul></div><ul><li>æ—¥å¿—çº§åˆ«çš„é…ç½®<ul><li> 1ã€åœ¨ <code>application.properties</code> é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>logging.level.&lt;logger-name&gt;=&lt;level&gt;</code> æŒ‡å®šæ—¥å¿—çº§åˆ«ã€‚</li><li>2ã€<code>level</code> çš„å¯å–å€¼èŒƒå›´ï¼šTRACEï¼ŒDEBUGï¼ŒINFOï¼ŒWARNï¼ŒERRORï¼ŒFATALï¼ŒOFFï¼Œå®ƒä»¬éƒ½å®šä¹‰åœ¨ <code>LogLevel</code> æšä¸¾ç±»ä¸­ã€‚</li><li>3ã€<code>root</code> çš„ <code>logger-name</code> å« <code>root</code>ï¼Œæ‰€ä»¥å¯ä»¥é…ç½® <code>logging.level.root=warn</code>ï¼Œä»£è¡¨æ‰€æœ‰æœªæŒ‡å®šæ—¥å¿—çº§åˆ«çš„ç±»éƒ½ä½¿ç”¨ <code>root</code> çš„ <code>warn</code> æ—¥å¿—çº§åˆ«ã€‚</li></ul></li></ul><h3 id="æ—¥å¿—åˆ†ç»„"><a href="#æ—¥å¿—åˆ†ç»„" class="headerlink" title="æ—¥å¿—åˆ†ç»„"></a>æ—¥å¿—åˆ†ç»„</h3><p>ç²¾ç¡®è°ƒæ•´æŸä¸ªåŒ…ä¸‹ç±»çš„æ—¥å¿—çº§åˆ«ï¼Œä¸€èˆ¬çš„å†™æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.clay.shop:</span> <span class="string">info</span></span><br></pre></td></tr></tbody></table></figure><p>å»ºè®®å°†ç›¸å…³çš„ <code>logger</code> åˆ†ç»„å†™åœ¨ä¸€èµ·ï¼ŒSpringBoot ä¹Ÿæ”¯æŒè¿™æ ·ç»Ÿä¸€é…ç½®ï¼Œæ¯”å¦‚ Tomcat ç›¸å…³çš„æ—¥å¿—ç»Ÿä¸€è®¾ç½®ï¼š</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">group:</span></span><br><span class="line">    <span class="attr">tomcat:</span> <span class="string">org.apache.catalina,org.apache.coyote,org.apache.tomcat</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">tomcat:</span> <span class="string">info</span></span><br></pre></td></tr></tbody></table></figure><p>SpringBoot é¢„å®šä¹‰äº†ä¸¤ä¸ªæ—¥å¿—åˆ†ç»„ï¼š</p><table><thead><tr><th>Name</th><th>Loggers</th></tr></thead><tbody><tr><td>web</td><td><code>org.springframework.core.codec</code>ï¼Œ <code>org.springframework.http</code>ï¼Œ <code>org.springframework.web</code>ï¼Œ <code>org.springframework.boot.actuate.endpoint.web</code>ï¼Œ <code>org.springframework.boot.web.servlet.ServletContextInitializerBeans</code></td></tr><tr><td>sql</td><td><code>org.springframework.jdbc.core</code>ï¼Œ <code>org.hibernate.SQL</code>ï¼Œ <code>org.jooq.tools.LoggerListener</code></td></tr></tbody></table><h3 id="æ–‡ä»¶è¾“å‡º"><a href="#æ–‡ä»¶è¾“å‡º" class="headerlink" title="æ–‡ä»¶è¾“å‡º"></a>æ–‡ä»¶è¾“å‡º</h3><p>SpringBoot é»˜è®¤åªä¼šå°†æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œå¦‚æœæƒ³é¢å¤–è®°å½•åˆ°æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ <code>application.properties</code> ä¸­æ·»åŠ  <code>logging.file.name</code> æˆ–è€… <code>logging.file.path</code> é…ç½®é¡¹ã€‚</p><table><thead><tr><th><code>logging.file.name</code></th><th><code>logging.file.path</code></th><th>é…ç½®ç¤ºä¾‹</th><th>é…ç½®æ•ˆæœ</th></tr></thead><tbody><tr><td>æœªæŒ‡å®š</td><td>æœªæŒ‡å®š</td><td></td><td>ä»…æ§åˆ¶å°è¾“å‡º</td></tr><tr><td>æŒ‡å®š</td><td>æœªæŒ‡å®š</td><td><code>my.log</code> æˆ–è€… <code>/var/log/my.log</code></td><td>å†™å…¥æŒ‡å®šæ–‡ä»¶ï¼Œå¯ä»¥åŠ æ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰</td></tr><tr><td>æœªæŒ‡å®š</td><td>æŒ‡å®š</td><td><code>/var/log</code></td><td>å†™å…¥æŒ‡å®šç›®å½•ï¼Œæ–‡ä»¶åé»˜è®¤ä¸º <code>spring.log</code></td></tr><tr><td>æŒ‡å®š</td><td>æŒ‡å®š</td><td></td><td>ä»¥ <code>logging.file.name</code> çš„é…ç½®ä¸ºå‡† </td></tr></tbody></table><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.clay.shop:</span> <span class="string">info</span></span><br><span class="line">  <span class="attr">file:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">/tmp/logs/shop/app.log</span></span><br></pre></td></tr></tbody></table></figure><h3 id="æ—¥å¿—å½’æ¡£"><a href="#æ—¥å¿—å½’æ¡£" class="headerlink" title="æ—¥å¿—å½’æ¡£"></a>æ—¥å¿—å½’æ¡£</h3><div class="admonition note"><p class="admonition-title">æ–‡ä»¶å½’æ¡£ä¸æ»šåŠ¨åˆ‡å‰²</p><ul><li>å½’æ¡£ï¼šæ¯å¤©çš„æ—¥å¿—å•ç‹¬å­˜åˆ°ä¸€ä¸ªæ–‡æ¡£ä¸­ã€‚</li><li>åˆ‡å‰²ï¼šæ¯ä¸ªæ–‡ä»¶ 10MBï¼Œè¶…è¿‡å¤§å°å°±åˆ‡å‰²æˆå¦å¤–ä¸€ä¸ªæ–‡ä»¶ã€‚</li></ul></div><ul><li>1ã€æ¯å¤©çš„æ—¥å¿—åº”è¯¥ç‹¬ç«‹åˆ†å‰²å‡ºæ¥å­˜æ¡£ã€‚å¦‚æœä½¿ç”¨ Logbackï¼ˆSpringBoot é»˜è®¤æ•´åˆï¼‰ï¼Œå¯ä»¥é€šè¿‡ <code>application.properties</code> æ–‡ä»¶æŒ‡å®šæ—¥å¿—æ»šåŠ¨è§„åˆ™ã€‚</li><li>2ã€å¦‚æœæ˜¯å…¶ä»–æ—¥å¿—ç³»ç»Ÿï¼Œéœ€è¦è‡ªè¡Œé…ç½®ï¼ˆä¾‹å¦‚ä½¿ç”¨ Log4j2ï¼Œåˆ™æ·»åŠ  <code>log4j2.xml</code> æˆ– <code>log4j2-spring.xml</code> é…ç½®æ–‡ä»¶ï¼‰</li><li>3ã€SpringBoot é»˜è®¤æ”¯æŒçš„æ»šåŠ¨è§„åˆ™é…ç½®å¦‚ä¸‹ï¼š</li></ul><table><thead><tr><th>é…ç½®é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td> logging.logback.rollingpolicy.file-name-pattern</td><td> æ—¥å¿—å­˜æ¡£çš„æ–‡ä»¶åæ ¼å¼ï¼ˆé»˜è®¤å€¼ï¼š<code>${LOG_FILE}.%d{yyyy-MM-dd}.%i.gz</code>ï¼‰</td></tr><tr><td>logging.logback.rollingpolicy.clean-history-on-start</td><td> åº”ç”¨å¯åŠ¨æ—¶æ˜¯å¦æ¸…é™¤ä»¥å‰çš„å­˜æ¡£æ–‡ä»¶ï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰</td></tr><tr><td>logging.logback.rollingpolicy.max-file-size</td><td> å­˜æ¡£å‰ï¼Œæ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ï¼š10MBï¼‰</td></tr><tr><td>logging.logback.rollingpolicy.total-size-cap</td><td> æ—¥å¿—æ–‡ä»¶è¢«åˆ é™¤ä¹‹å‰ï¼Œå¯ä»¥å®¹çº³çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ï¼š0Bï¼‰ã€‚è®¾ç½® 1GBï¼Œåˆ™ç£ç›˜å­˜å‚¨è¶…è¿‡ 1GB æ—¥å¿—åå°±ä¼šåˆ é™¤æ—§çš„æ—¥å¿—æ–‡ä»¶</td></tr><tr><td> logging.logback.rollingpolicy.max-history</td><td> æ—¥å¿—æ–‡ä»¶ä¿å­˜çš„æœ€å¤§å¤©æ•°ï¼ˆé»˜è®¤å€¼ï¼š7ï¼‰</td></tr></tbody></table><h3 id="è‡ªå®šä¹‰é…ç½®"><a href="#è‡ªå®šä¹‰é…ç½®" class="headerlink" title="è‡ªå®šä¹‰é…ç½®"></a>è‡ªå®šä¹‰é…ç½®</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSpringBoot é¡¹ç›®ä¿®æ”¹ <code>application.properties</code> é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥è°ƒæ•´æ—¥å¿—çš„æ‰€æœ‰è¡Œä¸ºã€‚å¦‚æœä¸å¤Ÿï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰æ—¥å¿—ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶ã€‚æ¯”å¦‚ï¼š</p><table><thead><tr><th>æ—¥å¿—ç³»ç»Ÿ</th><th>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶</th></tr></thead><tbody><tr><td> Logback</td><td><code>logback-spring.xml</code>ï¼Œ<code>logback-spring.groovy</code>ï¼Œ<code>logback.xml</code>ï¼Œ<code>logback.groovy</code></td></tr><tr><td>Log4j2</td><td><code>log4j2-spring.xml</code>ï¼Œ<code>log4j2.xml</code></td></tr><tr><td>JUL (java.util.logging)</td><td><code>logging.properties</code></td></tr></tbody></table><p>å¦‚æœå¯èƒ½ï¼Œå»ºè®®åœ¨æ—¥å¿—é…ç½®æ–‡ä»¶çš„åç§°ä¸­ä½¿ç”¨ <code>-spring</code> å˜é‡ï¼Œæ¯”å¦‚ <code>logback-spring.xml</code> è€Œä¸æ˜¯ <code>logback.xml</code>ã€‚è¿™æ˜¯å› ä¸ºå¦‚æœä½¿ç”¨æ ‡å‡†çš„æ–‡ä»¶åç§°ï¼ŒSpring æ— æ³•å®Œå…¨æ§åˆ¶æ—¥å¿—çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚</p><div class="admonition note"><p class="admonition-title">æœ€ä½³å®è·µ</p><p>å¦‚æœéœ€è¦è‡ªå·±å†™æ—¥å¿—é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆæ—¥å¿—é…ç½®æ–‡ä»¶çš„åç§°å»ºè®®åŠ ä¸Š <code>-spring.xml</code>ï¼Œä¾‹å¦‚ <code>logback-spring.xml</code>ï¼Œè€Œä¸æ˜¯ <code>logback.xml</code>ã€‚</p></div><h3 id="åˆ‡æ¢æ—¥å¿—æ¡†æ¶"><a href="#åˆ‡æ¢æ—¥å¿—æ¡†æ¶" class="headerlink" title="åˆ‡æ¢æ—¥å¿—æ¡†æ¶"></a>åˆ‡æ¢æ—¥å¿—æ¡†æ¶</h3><ul><li>åˆ‡æ¢ Log4j2 æ—¥å¿—æ¡†æ¶ </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>Log4j2 æ”¯æŒ <code>XML</code>ã€<code>YAML</code> ã€<code>JSON</code> æ ¼å¼çš„é…ç½®æ–‡ä»¶</li></ul><table><thead><tr><th>æ ¼å¼</th><th> Jar åŒ…ä¾èµ–</th><th>æ–‡ä»¶å</th></tr></thead><tbody><tr><td> YAML</td><td><code>com.fasterxml.jackson.core:jackson-databind</code> + <code>com.fasterxml.jackson.dataformat:jackson-dataformat-yaml</code></td><td><code>log4j2.yaml</code>ï¼Œ<code>log4j2.yml</code></td></tr><tr><td>JSON</td><td><code>com.fasterxml.jackson.core:jackson-databind</code></td><td><code>log4j2.json</code>ï¼Œ<code>log4j2.jsn</code></td></tr><tr><td>XML</td><td></td><td><code>log4j2-spring.xml</code>ï¼Œ<code>log4j2.xml</code></td></tr></tbody></table><h3 id="æœ€ä½³é¡¹ç›®å®è·µ"><a href="#æœ€ä½³é¡¹ç›®å®è·µ" class="headerlink" title="æœ€ä½³é¡¹ç›®å®è·µ"></a>æœ€ä½³é¡¹ç›®å®è·µ</h3><ul><li>1ã€å¯¼å…¥ä»»ä½•ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œé¦–å…ˆæ’é™¤å®ƒçš„æ—¥å¿—åŒ…ï¼Œå› ä¸º SpringBoot åº•å±‚é»˜è®¤é…ç½®å¥½äº†æ—¥å¿—ã€‚</li><li>2ã€SpringBoot é¡¹ç›®ä¿®æ”¹ <code>application.properties</code> é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥è°ƒæ•´æ—¥å¿—çš„æ‰€æœ‰è¡Œä¸ºã€‚å¦‚æœä¸å¤Ÿï¼Œå¯ä»¥ç¼–å†™æ—¥å¿—æ¡†æ¶çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶å°†å®ƒæ”¾åœ¨é¡¹ç›®çš„ç±»è·¯å¾„ä¸‹å°±è¡Œï¼Œæ¯”å¦‚ <code>logback-spring.xml</code>ï¼Œ<code>log4j2-spring.xml</code>ã€‚</li><li>3ã€å¦‚éœ€å¯¹æ¥ä¸“ä¸šæ—¥å¿—ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯éœ€è¦æŠŠ Logback è®°å½•çš„æ—¥å¿—çŒåˆ° Kafka ä¹‹ç±»çš„ä¸­é—´ä»¶ï¼Œè¿™å’Œ SpringBoot æ²¡å…³ç³»ï¼Œéƒ½æ˜¯æ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯å®ç°ã€‚</li><li>4ã€åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ <code>slf4j-api</code> è®°å½•æ—¥å¿—ï¼Œä¸è¦å†ä½¿ç”¨ <code>System.out.println()</code> äº†ã€‚</li></ul>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦è®°å½• SpringBoot 3 çš„åŸºç¡€æ•™ç¨‹ï¼ŒåŒ…æ‹¬ YAML é…ç½®æ–‡ä»¶ã€æ—¥å¿—é…ç½®ç­‰å†…å®¹ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å¾®æœåŠ¡" scheme="https://www.techgrow.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>JetBrains IDEA 2022.2 ç ´è§£æ¿€æ´»æ•™ç¨‹</title>
    <link href="https://www.techgrow.cn/posts/a74ccc85.html"/>
    <id>https://www.techgrow.cn/posts/a74ccc85.html</id>
    <published>2023-06-08T13:18:36.000Z</published>
    <updated>2023-06-08T13:18:36.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ•™ç¨‹é€‚ç”¨äº JetBrains IDEA <code>2022.2.x</code> ç‰ˆæœ¬çš„ç ´è§£ï¼Œäº²æµ‹æ¿€æ´»æˆåŠŸï¼ï¼ï¼</p><h2 id="èµ„æºä¸‹è½½"><a href="#èµ„æºä¸‹è½½" class="headerlink" title="èµ„æºä¸‹è½½"></a>èµ„æºä¸‹è½½</h2><ul><li>JetBrains IDEA ä¸‹è½½ï¼š<a href="https://www.jetbrains.com/idea/download/other.html">å®˜ç½‘</a></li><li> JetBrains IDEA&nbsp;ç ´è§£è¡¥ä¸ä¸‹è½½ï¼š<a href="/downloads/2023/06/ja-netfilter.v3.zip">æœ¬ç«™</a></li></ul><span id="more"></span><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><h3 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h3><p>æ›´æ”¹ hosts æ–‡ä»¶ï¼Œå°†æœ‰å…³ Jetbrains çš„é…ç½®è¡Œå…¨éƒ¨åˆ é™¤æ‰ï¼Œè‹¥æ²¡æœ‰åˆ™è¯·å¿½ç•¥æ­¤æ­¥éª¤ã€‚Windows ç³»ç»Ÿçš„ hosts æ–‡ä»¶è·¯å¾„ä¸ºï¼š<code>C:\Windows\System32\drivers\etc\hosts</code>ï¼ŒLinux å’Œ Mac ç³»ç»Ÿçš„ hosts æ–‡ä»¶è·¯å¾„ä¸ºï¼š<code>/etc/hosts</code>ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åªéœ€åˆ é™¤ä»¥ä¸‹ä¸¤è¡Œå†…å®¹å³å¯ï¼š</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0.0.0.0 www.jetbrains.com</span><br><span class="line">0.0.0.0 account.jetbrains.com</span><br></pre></td></tr></tbody></table></figure><h3 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h3><p>å¦‚æœ IDEA ä¹‹å‰å·²ç»åœ¨è¯•ç”¨æˆ–è€…è¯•ç”¨è¿‡è€Œä¸”è¿‡æœŸäº†ï¼Œåˆ™éœ€è¦å…ˆåˆ é™¤ IDEA çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ã€‚IDEA é…ç½®æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Windowsç³»ç»Ÿ</span><br><span class="line">C:\Documents and Settings\Administrator\.idea-2022.2\config</span><br><span class="line">C:\Documents and Settings\Administrator\.idea-2022.2\system</span><br><span class="line"></span><br><span class="line"># Linux/Macç³»ç»Ÿ</span><br><span class="line">~/.config/JetBrains/IntelliJIdea2022.2</span><br><span class="line">~/.local/share/JetBrains/IntelliJIdea2022.2</span><br></pre></td></tr></tbody></table></figure><h2 id="æ¿€æ´»æ­¥éª¤"><a href="#æ¿€æ´»æ­¥éª¤" class="headerlink" title="æ¿€æ´»æ­¥éª¤"></a>æ¿€æ´»æ­¥éª¤</h2><h3 id="ç¬¬ä¸€æ­¥-1"><a href="#ç¬¬ä¸€æ­¥-1" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h3><p>åœ¨ <a href="https://www.jetbrains.com/idea/download/other.html">JetBrains å®˜ç½‘</a> ä¸‹è½½æŒ‡å®šç‰ˆæœ¬ï¼ˆå¦‚ <code>2022.2.5</code>ï¼‰çš„ IDEA å®‰è£…åŒ…ï¼Œä¸‹è½½å®Œæˆåç›´æ¥åŒå‡»è¿è¡Œå®‰è£…ç¨‹åºï¼Œæ¥ç€ä¸€æ­¥æ­¥å®‰è£…å³å¯ã€‚</p><h3 id="ç¬¬äºŒæ­¥-1"><a href="#ç¬¬äºŒæ­¥-1" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h3><p>è§£å‹ç ´è§£è¡¥ä¸æ–‡ä»¶ï¼Œå¹¶å°† <code>ja-netfilter.v3</code> æ–‡ä»¶å¤¹æ‹·è´åˆ° IDEA å®‰è£…åçš„ <code>bin</code> ç›®å½•ä¸‹ã€‚</p><p><img data-src="../../../asset/2023/06/idea-2022-crack-1.png"></p><h3 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" class="headerlink" title="ç¬¬ä¸‰æ­¥"></a>ç¬¬ä¸‰æ­¥</h3><p>æ‰¾åˆ° IDEA å®‰è£…å <code>bin</code> ç›®å½•ä¸‹çš„ <code>idea.exe.vmoptions</code> å’Œ <code>idea64.exe.vmoptions</code> é…ç½®æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ <code>idea.exe.vmoptions</code>ï¼Œåªéœ€ä¿®æ”¹ <code>idea64.exe.vmoptions</code> å³å¯ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶çš„æœ«å°¾è¿½åŠ ä»¥ä¸‹å†…å®¹ï¼ˆè¯·è‡ªè¡Œæ›´æ”¹ <code>ja-netfilter.jar</code> æ–‡ä»¶çš„è·¯å¾„ï¼‰ï¼š</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">--add-opens=java.base/jdk.internal.org.objectweb.asm=ALL-UNNAMED</span><br><span class="line">--add-opens=java.base/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMED</span><br><span class="line">-javaagent:C:/Program Files/JetBrains/IntelliJ IDEA 2022.2/bin/ja-netfilter.v3/ja-netfilter.jar</span><br></pre></td></tr></tbody></table></figure><p><img data-src="../../../asset/2023/06/idea-2022-crack-5.png"></p><h3 id="ç¬¬å››æ­¥"><a href="#ç¬¬å››æ­¥" class="headerlink" title="ç¬¬å››æ­¥"></a>ç¬¬å››æ­¥</h3><p>å¯åŠ¨ IDEAï¼Œå¹¶é€‰æ‹©è¯•ç”¨æ¨¡å¼ï¼Œè¿›å…¥ IDEA çš„ä¸»ç•Œé¢ã€‚</p><p><img data-src="../../../asset/2023/06/idea-2022-crack-2.png"></p><h3 id="ç¬¬äº”æ­¥"><a href="#ç¬¬äº”æ­¥" class="headerlink" title="ç¬¬äº”æ­¥"></a>ç¬¬äº”æ­¥</h3><p>åœ¨ IDEA çš„ä¸»ç•Œé¢ï¼Œèœå•æ å¯¼èˆªåˆ° <code>Help</code> -&gt; <code>Register</code>ï¼Œç„¶åè¾“å…¥ä»¥ä¸‹æ¿€æ´»ç ç›´æ¥ç ´è§£ IDEAã€‚</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BKZ5XB6RJ8-eyJsaWNlbnNlSWQiOiJCS1o1WEI2Uko4IiwibGljZW5zZWVOYW1lIjoi5pyA5paw5r+A5rS756CB6I635Y+W77yM6K+35YWz5rOo5YWs5LyX5Y+344CM6Zuo6JC95peg5b2x44CNIiwiYXNzaWduZWVOYW1lIjoiIiwiYXNzaWduZWVFbWFpbCI6IiIsImxpY2Vuc2VSZXN0cmljdGlvbiI6IiIsImNoZWNrQ29uY3VycmVudFVzZSI6ZmFsc2UsInByb2R1Y3RzIjpbeyJjb2RlIjoiUERCIiwicGFpZFVwVG8iOiIyMDI3LTA4LTAxIiwiZmFsbGJhY2tEYXRlIjoiMjAyNy0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQU0kiLCJwYWlkVXBUbyI6IjIwMjctMDgtMDEiLCJmYWxsYmFja0RhdGUiOiIyMDI3LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBQQyIsInBhaWRVcFRvIjoiMjAyNy0wOC0wMSIsImZhbGxiYWNrRGF0ZSI6IjIwMjctMDgtMDEiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUENXTVAiLCJwYWlkVXBUbyI6IjIwMjctMDgtMDEiLCJmYWxsYmFja0RhdGUiOiIyMDI3LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBQUyIsInBhaWRVcFRvIjoiMjAyNy0wOC0wMSIsImZhbGxiYWNrRGF0ZSI6IjIwMjctMDgtMDEiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUFJCIiwicGFpZFVwVG8iOiIyMDI3LTA4LTAxIiwiZmFsbGJhY2tEYXRlIjoiMjAyNy0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJJSSIsInBhaWRVcFRvIjoiMjAyNy0wOC0wMSIsImZhbGxiYWNrRGF0ZSI6IjIwMjctMDgtMDEiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlBHTyIsInBhaWRVcFRvIjoiMjAyNy0wOC0wMSIsImZhbGxiYWNrRGF0ZSI6IjIwMjctMDgtMDEiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUFNXIiwicGFpZFVwVG8iOiIyMDI3LTA4LTAxIiwiZmFsbGJhY2tEYXRlIjoiMjAyNy0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQV1MiLCJwYWlkVXBUbyI6IjIwMjctMDgtMDEiLCJmYWxsYmFja0RhdGUiOiIyMDI3LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9XSwibWV0YWRhdGEiOiIwMTIwMjAwNzI4RVBBSkEwMDgwMDYiLCJoYXNoIjoiMTI3OTY4NzcvMCIsImdyYWNlUGVyaW9kRGF5cyI6NywiYXV0b1Byb2xvbmdhdGVkIjpmYWxzZSwiaXNBdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlfQ==-LTfxs43UcOTl+Vn0W80gmdm0gaiTBmnmOS+/aBqdxGyhgKR+t2CsUi7QVhRf2kShvWLt/mWGiS9HLfiUg1mhXCldI4HEEj8F+HMwqvZkMFXPDx8qltM7QZm88HCUCUfbg1p5X+8ENh709DK2bRQ484YMWYRAT8tFak981p0N/PwrzqGAgBh2FepOK7UqONOey4VoJpLnPD5TFpJV6wW0xjoKh0I608VHU1gorcyPR1DZfyK9NqoxW9ZKA0MbUV6byXhYQN118181LTl9VuMmtWX5mlEfTfpj1qJYmrz61YQEvcyffM3wpzK5gwVour8vBzqnrxRLXS4bc687bNvAyF/mBCqHAZB3a+AhxuDM+o/1uyWDiqqE1CO45hirOB/m+0qN6jyXEyhasCjCNVuxmtQLUTgKW+JML0Bm6K08d4q+vombWZQD10faCwMzgSm/lfEfqwbG67v4vqaZdfbE1zCkgQ9DfRYSOZV8gzCJZKs2e6A0hnjJ2Ojd+3m29XEKEatU0iCB5zwiJVcv0JK8o+TheGZkNLRSwCipz1LYdVDiAkOpZ1nucmR+fdaj9oSr0FYWpQJvhP7JdYeOZyKup3Bw5dtOkmX2KEEtzk8VKus2GjisbrhbaWzBQR9V/obQFXlfLBt86zFplHSUQvqx+IFyzpsAZJxXrhSGPbGq3w0=-MIIFTDCCAzSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTIwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEwMTkwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQCFBZI051+HDN7SzhuH6ybvfgGG5/n+x91KvFCPvQtDIfSzzsNplzEGKQz4EZ2Y5TW1se1jigP6fdl5tUqHOkT3OndSGBuu4P7NFDvvtMhB6b3cZQzxvBHZSysCxHLz3SWDGTDD2fO2GBwWWWM+yrPpSBx5Vp26HyILvyOb2Qx0YQUjnPk31XISMTA4cy4M2i+tTRw9D7lPTRHrtcyDKQ9OjbTqDhTmAa3q7uo/Tle1pJRuezuLZpRpEvtYT881t8zU7Wzy4qiLmVHiepOxvtzvl0nZelnHMwBqHirjjjU1kf6fGk0fmtlV3uerV6QrZhhymSOA7i8pK1KP3FPmE2PFVeyJiYOydGNtRK9yNzemKFpF6x6TLIqgWzKfqE70E+zRyFKFqHhnDLF6D9D02Y5kp/QbjVyzP+li21HUVfBjVTJGVBfPUlTUsar6YQCczgtYNmZEZEfjLAzE88VXxq/pbcnzgJtk7a8AodEhFCMmF3OeTmEhEqVnYdrOydmHkYIS+/3DvkUyyGYXS4GJ85jN9wZ9MT3AVJTYqnH9d4gCe8jKxkDcHeAsOFRaBhwwqMQkNnSnLeBQf6shWCWxFmJcSf4fWY3kW400wdgGqvslx/oycOhvVP8c0iNGO+2zAHAnp6fHzv2PLbL7NShLNvN0go/M4kpRsLtTT0suigwcXwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFCTaESKW9YVBwJNH6DEjTPTAhAL/MEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQBt0BHnlATtD6+wHtaT3W4iMXF0uve7DNRojwl2Y8pcXiBKQQiIDEc//Ar5RgzFPAKZuv1pUWRAc4JD4G7t+iIy4R3E/6TywhFOl9/fWxOaVEx81ZfxYKmFXLtKeuuFnXOIJ3/cDK8KqMMWq+rJVXQaDkMIRJ6cizgf3EhKB8wP6LgTGpFa2qW/F/FaIivbGL4JnRpj1H6t991jWQYzAf4xad/wy6V2K+Fl9eAPJRlwYiA2o0PjbVffqcWzxgGPlawOLRkRnzDOUqp4ZHw6YRp801wSz03KAYPtFS2+cUsykc4eKwwpKSA8rqwUNCaxpdUgBWqXCj0SetZm2OWuVpAZn2sO6iXDmNTkBVry8ee/AW87ZU4CuGMqLQeNDNQd/pHtk2Van89y7gfcRAP2waneRTudpjhTQo61fJoYNAGq1N1sE8Oew/eGxzV8ubnr+BAdi9gH23GVbG1e0/u/caOXIPL1ndiKBHVTqXWcjkuLRGGVtaOjN4Gfmjgu+z2CNhHe80V2IefsSuBd5wgA6BfYB8wy+LcfcXJ2zKJe7TKA44dys9atbdIB6HXfCcwV7U/N5M0LAIFbOPdk0yi8DPWTJCjQELytuy31g+vrbYePWANraRRcPStmw8zpP/ZcbDJ/419vGWG4RscVpt7Ewo/S7nPmGwpW5hf+/KVxmeBfxg==</span><br></pre></td></tr></tbody></table></figure><p><img data-src="../../../asset/2023/06/idea-2022-crack-3.png"></p><h3 id="ç¬¬å…­æ­¥"><a href="#ç¬¬å…­æ­¥" class="headerlink" title="ç¬¬å…­æ­¥"></a>ç¬¬å…­æ­¥</h3><p>æŸ¥çœ‹ IDEA æ˜¯å¦ç ´è§£æˆåŠŸï¼Œèœå•æ å¯¼èˆªåˆ° <code>Help</code> -&gt; <code>About</code>ï¼Œè‹¥å‡ºç°ä¸‹å›¾çš„ä¿¡æ¯åˆ™è¯´æ˜ç ´è§£æˆåŠŸã€‚</p><p><img data-src="../../../asset/2023/06/idea-2022-crack-4.png"></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://www.cnblogs.com/yj-blogs/p/16549970.html">IDEA 2022 æ°¸ä¹…æ¿€æ´»æ•™ç¨‹</a></li></ul>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ç ´è§£æ¿€æ´» IDEA 2022.2 ç‰ˆæœ¬ï¼ŒåŒ…æ‹¬ç ´è§£è¡¥ä¸å’Œæ¿€æ´»ç çš„ä½¿ç”¨ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="å¼€å‘å·¥å…·" scheme="https://www.techgrow.cn/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸€å¿«é€Ÿå…¥é—¨</title>
    <link href="https://www.techgrow.cn/posts/79ae6590.html"/>
    <id>https://www.techgrow.cn/posts/79ae6590.html</id>
    <published>2023-06-05T15:12:42.000Z</published>
    <updated>2023-06-05T15:12:42.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å¤§çº²"><a href="#å¤§çº²" class="headerlink" title="å¤§çº²"></a>å¤§çº²</h2><ul><li><a href="/posts/79ae6590.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸€å¿«é€Ÿå…¥é—¨</a></li><li><a href="/posts/e7a270a6.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äºŒå¸¸è§„é…ç½®</a></li><li><a href="/posts/12fb0f17.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸‰ Web å¼€å‘</a></li><li><a href="/posts/223fd9f.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å›› Web å¼€å‘</a></li><li><a href="/posts/1dfe3056.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹äº”æ ¸å¿ƒåŸç†</a></li><li><a href="/posts/b6463873.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹å…­åœºæ™¯æ•´åˆ</a></li><li><a href="/posts/6bcf09.html">SpringBoot3 åŸºç¡€æ•™ç¨‹ä¹‹ä¸ƒåŸºç¡€ç‰¹æ€§</a></li></ul><h2 id="å¼€å‘ç¯å¢ƒè¦æ±‚"><a href="#å¼€å‘ç¯å¢ƒè¦æ±‚" class="headerlink" title="å¼€å‘ç¯å¢ƒè¦æ±‚"></a>å¼€å‘ç¯å¢ƒè¦æ±‚</h2><table><thead><tr><th align="center">ç¯å¢ƒ &amp; å·¥å…·</th><th align="center">ç‰ˆæœ¬</th></tr></thead><tbody><tr><td align="center"> SpringBoot</td><td align="center">3.0.5+</td></tr><tr><td align="center">IDEA</td><td align="center">2021.2.1+</td></tr><tr><td align="center">JDK</td><td align="center">17+</td></tr><tr><td align="center">Maven</td><td align="center">3.5+</td></tr><tr><td align="center">Tomcat</td><td align="center">10.0+</td></tr><tr><td align="center">Servlet</td><td align="center">5.0+</td></tr><tr><td align="center">GraalVM Community</td><td align="center">22.3+</td></tr><tr><td align="center">Native Build Tools</td><td align="center">0.9.19+</td></tr></tbody></table><span id="more"></span><div class="admonition note"><p class="admonition-title">æç¤º</p><p>SpringBoot 3 ä¾èµ– JDK 17ï¼Œé‡‡ç”¨å…¨æ–°çš„ Spring 6ï¼ŒMaven çš„æ”¯æŒä¹Ÿæé«˜åˆ°äº† 3.5ï¼ŒGradle æé«˜åˆ°äº† 7.3ï¼Œç‰ˆæœ¬ç®¡ç†å™¨é»˜è®¤ä¹Ÿæ¢æˆäº† Gradleã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒIDEA <code>2022.x</code> ç‰ˆæœ¬ä»¥ä¸Šéƒ½å¯ä»¥æ”¯æŒ JDK 17ã€‚</p></div><h2 id="SpringBoot-ä»‹ç»"><a href="#SpringBoot-ä»‹ç»" class="headerlink" title="SpringBoot ä»‹ç»"></a>SpringBoot ä»‹ç»</h2><p>SpringBoot å¯ä»¥ç®€å•ã€å¿«é€Ÿåœ°åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ã€ç”Ÿäº§çº§åˆ«çš„ Spring åº”ç”¨ï¼ˆSpringBoot çš„åº•å±‚å®ç°æ˜¯ Springï¼‰ã€‚å¤§å¤šæ•° SpringBoot åº”ç”¨åªéœ€è¦ç¼–å†™å°‘é‡é…ç½®ï¼Œå³å¯å¿«é€Ÿæ•´åˆ Spring å¹³å°ä»¥åŠç¬¬ä¸‰æ–¹æŠ€æœ¯ã€‚SpringBoot çš„ç‰¹æ€§å¦‚ä¸‹ï¼š</p><ul><li>å¿«é€Ÿåˆ›å»ºç‹¬ç«‹ Spring åº”ç”¨</li><li>ç›´æ¥åµŒå…¥ Tomcatã€Jettyã€Undertowï¼Œæ— éœ€éƒ¨ç½² <code>war</code> åŒ…</li><li>æä¾›å¯é€‰çš„ <code>starter</code>ï¼Œç®€åŒ–åº”ç”¨çš„æ•´åˆ</li><li>æŒ‰éœ€è‡ªåŠ¨é…ç½® Spring ä»¥åŠç¬¬ä¸‰æ–¹åº“</li><li>æä¾›ç”Ÿäº§çº§ç‰¹æ€§ï¼šå¦‚ç›‘æ§æŒ‡æ ‡ã€å¥åº·æ£€æŸ¥ã€å¤–éƒ¨åŒ–é…ç½®ç­‰</li><li>æ— ä»£ç ç”Ÿæˆã€æ—  XML é…ç½®æ–‡ä»¶</li></ul><h2 id="SpringBoot-å¿«é€Ÿä½“éªŒ"><a href="#SpringBoot-å¿«é€Ÿä½“éªŒ" class="headerlink" title="SpringBoot å¿«é€Ÿä½“éªŒ"></a>SpringBoot å¿«é€Ÿä½“éªŒ</h2><div class="admonition note"><p class="admonition-title">å­¦ä¹ ç›®æ ‡</p><p>æµè§ˆå™¨å‘é€ <code>/hello</code> è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯è¿”å› <code>Hello,Spring Boot 3!</code>ã€‚</p></div><h3 id="åˆ›å»º-Maven-é¡¹ç›®"><a href="#åˆ›å»º-Maven-é¡¹ç›®" class="headerlink" title="åˆ›å»º Maven é¡¹ç›®"></a>åˆ›å»º Maven é¡¹ç›®</h3><p>åˆ›å»º Maven é¡¹ç›®ï¼ŒSpringBoot é¡¹ç›®ä¸€èˆ¬éƒ½éœ€è¦ç»§æ‰¿è‡ª <code>spring-boot-starter-parent</code></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>æˆ–è€…å¼•å…¥ <code>spring-boot-dependencies</code>ï¼Œè¿™é€‚ç”¨äºé¡¹ç›®å·²ç»æ‹¥æœ‰ Parent ä¾èµ–åŒ…çš„åœºæ™¯</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">ä¾èµ–ç»§æ‰¿å…³ç³»</p><p>ç»§æ‰¿ <code>spring-boot-starter-parent</code> çš„æ—¶å€™ï¼Œå…¶å®ä¹Ÿç®—æ˜¯ç»§æ‰¿è‡ª <code>spring-boot-dependencies</code>ï¼Œè¿™æ˜¯å› ä¸º <code>parent</code> å…¶å®ä¹Ÿæ˜¯ç»§æ‰¿ <code>dependencies</code>ï¼ŒåŒæ—¶ <code>parent</code> é‡Œé¢å¢åŠ äº†ä¸€äº›æ’ä»¶ï¼Œå¹¶æŒ‡å®šäº† Maven çš„ç¼–è¯‘ç‰ˆæœ¬ã€‚</p></div><h3 id="å¯¼å…¥å¯åŠ¨å™¨"><a href="#å¯¼å…¥å¯åŠ¨å™¨" class="headerlink" title="å¯¼å…¥å¯åŠ¨å™¨"></a>å¯¼å…¥å¯åŠ¨å™¨</h3><p>å¯¼å…¥ Web å¯åŠ¨å™¨ï¼Œç›®çš„æ˜¯å¼•å…¥ Spring MVCã€Tomcat ç­‰ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="ä¸»å¯åŠ¨ç¨‹åº"><a href="#ä¸»å¯åŠ¨ç¨‹åº" class="headerlink" title="ä¸»å¯åŠ¨ç¨‹åº"></a>ä¸»å¯åŠ¨ç¨‹åº</h3><p>æ·»åŠ  <code>@SpringBootApplication</code> æ³¨è§£ï¼Œå£°æ˜è¿™æ˜¯ä¸€ä¸ª SpringBoot åº”ç”¨ç¨‹åºã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(MainApplication.class,args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ä¸šåŠ¡æ§åˆ¶å™¨"><a href="#ä¸šåŠ¡æ§åˆ¶å™¨" class="headerlink" title="ä¸šåŠ¡æ§åˆ¶å™¨"></a>ä¸šåŠ¡æ§åˆ¶å™¨</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping("/hello")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello,Spring Boot 3!"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="é¡¹ç›®æ‰“åŒ…"><a href="#é¡¹ç›®æ‰“åŒ…" class="headerlink" title="é¡¹ç›®æ‰“åŒ…"></a>é¡¹ç›®æ‰“åŒ…</h3><p>åœ¨ Maven çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ‰“åŒ…æ’ä»¶åï¼Œæ‰§è¡Œ <code>mvn clean package</code> å‘½ä»¤å¯ä»¥å°†é¡¹ç›®æ‰“æˆå¯æ‰§è¡Œçš„ Jar åŒ…ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ <code>java -jar xxx.jar</code> å‘½ä»¤ç›´æ¥å¯åŠ¨ SpringBoot é¡¹ç›®ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SpringBootåº”ç”¨æ‰“åŒ…æ’ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="ä»£ç æµ‹è¯•"><a href="#ä»£ç æµ‹è¯•" class="headerlink" title="ä»£ç æµ‹è¯•"></a>ä»£ç æµ‹è¯•</h3><p>æµè§ˆå™¨è®¿é—® <code>http://127.0.0.1:8080/hello</code>ï¼Œè‹¥æ­£å¸¸è¿”å› <code>Hello,Spring Boot 3!</code>ï¼Œåˆ™è¯´æ˜ç¬¬ä¸€ä¸ª SpringBoot 3 åº”ç”¨å¯åŠ¨æˆåŠŸã€‚</p><h3 id="ä»£ç ä¸‹è½½"><a href="#ä»£ç ä¸‹è½½" class="headerlink" title="ä»£ç ä¸‹è½½"></a>ä»£ç ä¸‹è½½</h3><p>æœ¬ç« èŠ‚æ‰€éœ€çš„æ¡ˆä¾‹ä»£ç ï¼Œå¯ä»¥ç›´æ¥ä» <a href="https://github.com/rqh656418510/spring-cloud-share/tree/main/spring-boot-3/spring-boot-3-study">GitHub</a> ä¸‹è½½å¯¹åº”ç« èŠ‚ <code>spring-boot3-01</code>ã€‚</p><h2 id="SpringBoot-ç‰¹æ€§æ€»ç»“"><a href="#SpringBoot-ç‰¹æ€§æ€»ç»“" class="headerlink" title="SpringBoot ç‰¹æ€§æ€»ç»“"></a>SpringBoot ç‰¹æ€§æ€»ç»“</h2><h3 id="ç®€åŒ–æ•´åˆ"><a href="#ç®€åŒ–æ•´åˆ" class="headerlink" title="ç®€åŒ–æ•´åˆ"></a>ç®€åŒ–æ•´åˆ</h3><p>å¯¼å…¥ç›¸å…³çš„åœºæ™¯å¯åŠ¨å™¨ï¼Œå³å¯æ‹¥æœ‰ç›¸å…³çš„åŠŸèƒ½ï¼Œé»˜è®¤æ”¯æŒçš„æ‰€æœ‰åœºæ™¯å¯åŠ¨å™¨å¯å‚ç…§ <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><ul><li>å®˜æ–¹æä¾›çš„åœºæ™¯å¯åŠ¨å™¨ï¼šå‘½åä¸º <code>spring-boot-starter-*</code></li><li>ç¬¬ä¸‰æ–¹æä¾›çš„åœºæ™¯å¯åŠ¨å™¨ï¼šå‘½åä¸º <code>*-spring-boot-starter</code></li></ul><h3 id="ç®€åŒ–é…ç½®"><a href="#ç®€åŒ–é…ç½®" class="headerlink" title="ç®€åŒ–é…ç½®"></a>ç®€åŒ–é…ç½®</h3><ul><li>é…ç½®åŸºæœ¬éƒ½æœ‰é»˜è®¤å€¼</li><li>èƒ½å†™çš„æ‰€æœ‰é…ç½®ä¿¡æ¯éƒ½å¯ä»¥åœ¨ <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties">å®˜æ–¹æ–‡æ¡£</a> è·å–åˆ°</li><li>é›†ä¸­å¼ç®¡ç†é…ç½®ï¼Œåªéœ€è¦ä¿®æ”¹ <code>application.properties</code> è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥</li></ul><h3 id="ç®€åŒ–éƒ¨ç½²"><a href="#ç®€åŒ–éƒ¨ç½²" class="headerlink" title="ç®€åŒ–éƒ¨ç½²"></a>ç®€åŒ–éƒ¨ç½²</h3><p>å¯ä»¥å°†é¡¹ç›®æ‰“åŒ…ä¸ºå¯æ‰§è¡Œçš„ Jar åŒ…ï¼Œå¹¶é€šè¿‡ <code>java -jar xxx.jar</code> å‘½ä»¤ç›´æ¥è¿è¡Œé¡¹ç›®ã€‚</p><h3 id="ç®€åŒ–è¿ç»´"><a href="#ç®€åŒ–è¿ç»´" class="headerlink" title="ç®€åŒ–è¿ç»´"></a>ç®€åŒ–è¿ç»´</h3><p>æ”¯æŒå¤–éƒ¨åŒ–é…ç½®ï¼ˆå¾€ Jar åŒ…æ‰€åœ¨ç›®å½•ä¸‹æ”¾ä¸€ä¸ª <code>application.properties</code> æ–‡ä»¶ï¼‰ã€ç›‘æ§ã€å¥åº·æ£€æŸ¥ã€‚</p><h2 id="SpringBoot-å¸¸ç”¨æ³¨è§£"><a href="#SpringBoot-å¸¸ç”¨æ³¨è§£" class="headerlink" title="SpringBoot å¸¸ç”¨æ³¨è§£"></a>SpringBoot å¸¸ç”¨æ³¨è§£</h2><p>SpringBoot æ‘’å¼ƒ XML çš„é…ç½®æ–¹å¼ï¼Œæ”¹ä¸ºå…¨æ³¨è§£é©±åŠ¨å¼€å‘ã€‚</p><h3 id="ç»„ä»¶æ³¨å†Œ"><a href="#ç»„ä»¶æ³¨å†Œ" class="headerlink" title="ç»„ä»¶æ³¨å†Œ"></a>ç»„ä»¶æ³¨å†Œ</h3><h4 id="æ³¨è§£ä»‹ç»"><a href="#æ³¨è§£ä»‹ç»" class="headerlink" title="æ³¨è§£ä»‹ç»"></a>æ³¨è§£ä»‹ç»</h4><p>å¸¸ç”¨çš„ç»„ä»¶æ³¨å†Œæ³¨è§£ï¼š</p><ul><li>@Configurationã€@SpringBootConfiguration</li><li>@Beanã€@Scope</li><li>@Controllerã€ @Serviceã€@Repositoryã€@Component</li><li>@Import</li><li>@ComponentScan</li></ul><h4 id="ä½¿ç”¨æ¡ˆä¾‹"><a href="#ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="ä½¿ç”¨æ¡ˆä¾‹"></a>ä½¿ç”¨æ¡ˆä¾‹</h4><div class="admonition note"><p class="admonition-title">ç»„ä»¶æ³¨å†Œçš„æ­¥éª¤</p><ul><li>1ã€ä½¿ç”¨ <code>@Configuration</code> æ³¨è§£ç¼–å†™ä¸€ä¸ªé…ç½®ç±»</li><li> 2ã€åœ¨é…ç½®ç±»ä¸­ï¼Œè‡ªå®šä¹‰æ–¹æ³•å¾€å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ï¼Œå¹¶é…åˆä½¿ç”¨ <code>@Bean</code> æ³¨è§£</li><li> 3ã€æˆ–ä½¿ç”¨ <code>@Import</code> æ³¨è§£å¯¼å…¥ç¬¬ä¸‰æ–¹çš„ç»„ä»¶</li></ul></div><ul><li>ç¬¬ä¸€ç§ç»„ä»¶æ³¨å†Œæ–¹å¼ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†Œç»„ä»¶ï¼Œç»„ä»¶åœ¨å®¹å™¨ä¸­çš„åç§°é»˜è®¤æ˜¯æ–¹æ³•åï¼Œä¸”é»˜è®¤æ˜¯å•å®ä¾‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">()</span> </span>{</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(<span class="number">1L</span>);</span><br><span class="line">        user.setName(<span class="string">"Peter"</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ç¬¬äºŒç§ç»„ä»¶æ³¨å†Œæ–¹å¼ </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³¨å†Œç»„ä»¶ï¼Œç»„ä»¶åœ¨å®¹å™¨ä¸­çš„åç§°é»˜è®¤æ˜¯å…¨ç±»åï¼Œä¸”é»˜è®¤æ˜¯å•å®ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Import(User.class)</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h3><h4 id="æ³¨è§£ä»‹ç»-1"><a href="#æ³¨è§£ä»‹ç»-1" class="headerlink" title="æ³¨è§£ä»‹ç»"></a>æ³¨è§£ä»‹ç»</h4><p>å¦‚æœæ³¨è§£æŒ‡å®šçš„åˆ¤æ–­æ¡ä»¶æˆç«‹ï¼Œåˆ™è§¦å‘æŒ‡å®šçš„è¡Œä¸ºã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ¡ä»¶æ³¨è§£çš„å‘½åè§„åˆ™ä¸€èˆ¬ä¸º <code>@ConditionalOnXxx</code>ã€‚</p><table><thead><tr><th>æ¡ä»¶æ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td> @ConditionalOnClass</td><td> å¦‚æœç±»è·¯å¾„ä¸­å­˜åœ¨è¿™ä¸ªç±»ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</td></tr><tr><td> @ConditionalOnMissingClass</td><td> å¦‚æœç±»è·¯å¾„ä¸­ä¸å­˜åœ¨è¿™ä¸ªç±»ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</td></tr><tr><td> @ConditionalOnBean</td><td> å¦‚æœå®¹å™¨ä¸­å­˜åœ¨è¿™ä¸ª Beanï¼ˆç»„ä»¶ï¼‰ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</td></tr><tr><td> @ConditionalOnMissingBean</td><td> å¦‚æœå®¹å™¨ä¸­ä¸å­˜åœ¨è¿™ä¸ª Beanï¼ˆç»„ä»¶ï¼‰ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</td></tr></tbody></table><div class="admonition note"><p class="admonition-title">æ¡ä»¶æ³¨è§£åˆ—è¡¨</p><p>é™¤äº†ä¸Šè¿°ä»‹ç»çš„å››ç§æ¡ä»¶æ³¨è§£ï¼ŒSpringBoot è¿˜æä¾›äº†ä»¥ä¸‹çš„æ¡ä»¶æ³¨è§£ã€‚</p></div><ul><li>@ConditionalOnRepositoryType (org.springframework.boot.autoconfigure.data)</li><li>@ConditionalOnDefaultWebSecurity (org.springframework.boot.autoconfigure.security)</li><li>@ConditionalOnSingleCandidate (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnWebApplication (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnWarDeployment (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnJndi (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnResource (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnExpression (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnClass (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnEnabledResourceChain (org.springframework.boot.autoconfigure.web)</li><li>@ConditionalOnMissingClass (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnNotWebApplication (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnProperty (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnCloudPlatform (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnBean (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnMissingBean (org.springframework.boot.autoconfigure.condition)</li><li>@ConditionalOnMissingFilterBean (org.springframework.boot.autoconfigure.web.servlet)</li><li>@ConditionalOnInitializedRestarter (org.springframework.boot.devtools.restart)</li><li>@ConditionalOnGraphQlSchema (org.springframework.boot.autoconfigure.graphql)</li><li>@ConditionalOnJava (org.springframework.boot.autoconfigure.condition)</li><li>@Profile (org.springframework.context.annotation)</li></ul><h4 id="ä½¿ç”¨æ¡ˆä¾‹-1"><a href="#ä½¿ç”¨æ¡ˆä¾‹-1" class="headerlink" title="ä½¿ç”¨æ¡ˆä¾‹"></a>ä½¿ç”¨æ¡ˆä¾‹</h4><div class="admonition note"><p class="admonition-title">ä½¿ç”¨ä¾‹å­</p><ul><li><code>@ConditionalOnBean(value = ç»„ä»¶ç±»å‹ï¼Œname = ç»„ä»¶åå­—)</code>ï¼Œåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦æœ‰è¿™ä¸ªç±»å‹çš„ç»„ä»¶ï¼Œå¹¶ä¸”åç§°æ˜¯æŒ‡å®šçš„å€¼</li><li>å¦‚æœå­˜åœ¨ FastsqlException è¿™ä¸ªç±»ï¼Œå¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª Cat ç»„ä»¶ï¼Œåä¸º cat01ï¼Œå¦åˆ™å°±å¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª Dog ç»„ä»¶ï¼Œåä¸º dog01</li><li> å¦‚æœç³»ç»Ÿä¸­æœ‰ Dog è¿™ä¸ªç»„ä»¶ï¼Œå°±å¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª User ç»„ä»¶ï¼Œåä¸º jimï¼Œå¦åˆ™å°±æ”¾ä¸€ä¸ª Userï¼Œåå« tom</li></ul></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ConditionalOnClass(name = "com.alibaba.druid.FastsqlException")</span></span><br><span class="line">    <span class="meta">@Bean(name = "cat01")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Cat <span class="title">cat</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Cat();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ConditionalOnMissingClass(value = "com.alibaba.druid.FastsqlException")</span></span><br><span class="line">    <span class="meta">@Bean(name = "dog01")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dog <span class="title">dog</span><span class="params">()</span> </span>{<span class="meta">@Import(User.class)</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ConditionalOnBean(value = Dog.class)</span></span><br><span class="line">    <span class="meta">@Bean(name = "jim")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">userJim</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(value = Dog.class)</span></span><br><span class="line">    <span class="meta">@Bean(name = "tom")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">userTom</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="å±æ€§ç»‘å®š"><a href="#å±æ€§ç»‘å®š" class="headerlink" title="å±æ€§ç»‘å®š"></a>å±æ€§ç»‘å®š</h3><p>æœ¬ç« èŠ‚æ‰€éœ€çš„æ¡ˆä¾‹ä»£ç ï¼Œå¯ä»¥ç›´æ¥ä» <a href="https://github.com/rqh656418510/spring-cloud-share/tree/main/spring-boot-3/spring-boot-3-study">GitHub</a> ä¸‹è½½å¯¹åº”ç« èŠ‚ <code>spring-boot3-02</code>ã€‚</p><h4 id="æ³¨è§£ä»‹ç»-2"><a href="#æ³¨è§£ä»‹ç»-2" class="headerlink" title="æ³¨è§£ä»‹ç»"></a>æ³¨è§£ä»‹ç»</h4><table><thead><tr><th>å±æ€§ç»‘å®šæ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td> @ConfigurationProperties</td><td> å£°æ˜ç»„ä»¶çš„å±æ€§ä¸é…ç½®æ–‡ä»¶ä¸­çš„å“ªäº›å‰ç¼€å¼€å§‹é¡¹è¿›è¡Œç»‘å®š</td></tr><tr><td> @EnableConfigurationProperties</td><td> å¿«é€Ÿæ³¨å†Œæ³¨è§£</td></tr></tbody></table><div class="admonition note"><p class="admonition-title">@EnableConfigurationProperties æ³¨è§£çš„ä½¿ç”¨åœºæ™¯</p><p>SpringBoot åªä¼šæ‰«æä¸»ç¨‹åºç±»æ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹é¢çš„å­åŒ…ã€‚å¦‚æœå¯¼å…¥äº†ç¬¬ä¸‰æ–¹åŒ…ï¼Œå³ä½¿ç»„ä»¶ä¸Šæ ‡æ³¨äº† <code>@Component</code>ã€<code>@ConfigurationProperties</code> æ³¨è§£ï¼Œç»„ä»¶ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚å› ä¸ºè¿™äº›ç»„ä»¶éƒ½æ‰«æä¸è¿›æ¥ï¼Œæ­¤æ—¶ä½¿ç”¨ <code>@EnableConfigurationProperties</code> æ³¨è§£å°±å¯ä»¥å¿«é€Ÿè¿›è¡Œå±æ€§ç»‘å®šï¼Œå¹¶æŠŠç»„ä»¶æ³¨å†Œè¿›å®¹å™¨ã€‚</p></div><h4 id="ä½¿ç”¨æ¡ˆä¾‹-2"><a href="#ä½¿ç”¨æ¡ˆä¾‹-2" class="headerlink" title="ä½¿ç”¨æ¡ˆä¾‹"></a>ä½¿ç”¨æ¡ˆä¾‹</h4><div class="admonition note"><p class="admonition-title">å°†å®¹å™¨ä¸­ä»»æ„ç»„ä»¶ï¼ˆBeanï¼‰çš„å±æ€§å€¼å’Œé…ç½®æ–‡ä»¶çš„é…ç½®é¡¹çš„å€¼è¿›è¡Œç»‘å®šçš„æ­¥éª¤</p><ul><li>1ã€å¾€å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ï¼ˆ<code>@Configuration</code>ã€<code>@Component</code>ã€<code>@Bean</code>ï¼‰</li><li>2ã€ä½¿ç”¨ <code>@ConfigurationProperties</code> å£°æ˜ç»„ä»¶å’Œé…ç½®æ–‡ä»¶çš„å“ªäº›é…ç½®é¡¹è¿›è¡Œç»‘å®š</li></ul></div><h5 id="ç¬¬ä¸€ç§å†™æ³•"><a href="#ç¬¬ä¸€ç§å†™æ³•" class="headerlink" title="ç¬¬ä¸€ç§å†™æ³•"></a>ç¬¬ä¸€ç§å†™æ³•</h5><ul><li>æ·»åŠ é…ç½®å†…å®¹ï¼Œåœ¨é¡¹ç›®çš„ <code>application.properties</code> é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®å†…å®¹ </li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">pig.id</span>=<span class="string">1</span></span><br><span class="line"><span class="meta">pig.age</span>=<span class="string">3</span></span><br><span class="line"><span class="meta">pig.name</span>=<span class="string">peter</span></span><br></pre></td></tr></tbody></table></figure><ul><li>å£°æ˜ Bean ç±»ï¼Œé€šè¿‡ <code>@Configuration</code> æ³¨è§£å£°æ˜ Bean ç±»ï¼Œå¹¶ä½¿ç”¨ <code>@ConfigurationProperties</code> æ³¨è§£å°† Bean çš„å±æ€§å€¼å’Œé…ç½®æ–‡ä»¶çš„é…ç½®é¡¹çš„å€¼è¿›è¡Œç»‘å®š </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "pig")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PigProperties</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"PigProperties{"</span> +</span><br><span class="line">            <span class="string">"id="</span> + id +</span><br><span class="line">            <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">            <span class="string">", age="</span> + age +</span><br><span class="line">            <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>æµ‹è¯•ä»£ç  </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        ConfigurableApplicationContext context = SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        PigProperties properties = context.getBean(PigProperties.class);</span><br><span class="line">        System.out.println(properties);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>æµ‹è¯•ç»“æœ </li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PigProperties{id=1, name='peter', age=3}</span><br></pre></td></tr></tbody></table></figure><h5 id="ç¬¬äºŒç§å†™æ³•"><a href="#ç¬¬äºŒç§å†™æ³•" class="headerlink" title="ç¬¬äºŒç§å†™æ³•"></a>ç¬¬äºŒç§å†™æ³•</h5><p>ä½¿ç”¨ <code>@Bean</code> + <code>@ConfigurationProperties</code> æ³¨è§£ï¼Œå°† Bean çš„å±æ€§å€¼å’Œé…ç½®æ–‡ä»¶çš„é…ç½®é¡¹çš„å€¼è¿›è¡Œç»‘å®šã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = "pig")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PigProperties</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"PigProperties{"</span> +</span><br><span class="line">            <span class="string">"id="</span> + id +</span><br><span class="line">            <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">            <span class="string">", age="</span> + age +</span><br><span class="line">            <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PigProperties <span class="title">pigProperties</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PigProperties();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        ConfigurableApplicationContext context = SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        PigProperties properties = context.getBean(PigProperties.class);</span><br><span class="line">        System.out.println(properties);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="ç¬¬ä¸‰ç§å†™æ³•"><a href="#ç¬¬ä¸‰ç§å†™æ³•" class="headerlink" title="ç¬¬ä¸‰ç§å†™æ³•"></a>ç¬¬ä¸‰ç§å†™æ³•</h5><p>åŒæ ·ä½¿ç”¨ <code>@Bean</code> + <code>@ConfigurationProperties</code> æ³¨è§£ï¼Œå°† Bean çš„å±æ€§å€¼å’Œé…ç½®æ–‡ä»¶çš„é…ç½®é¡¹çš„å€¼è¿›è¡Œç»‘å®šï¼Œä½† <code>@ConfigurationProperties</code> æ³¨è§£ä¸å†å£°æ˜åœ¨ Bean ç±»ä¸Šã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PigProperties</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"PigProperties{"</span> +</span><br><span class="line">            <span class="string">"id="</span> + id +</span><br><span class="line">            <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">            <span class="string">", age="</span> + age +</span><br><span class="line">            <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemConfiguration</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = "pig")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PigProperties <span class="title">pigProperties</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PigProperties();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        ConfigurableApplicationContext context = SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        PigProperties properties = context.getBean(PigProperties.class);</span><br><span class="line">        System.out.println(properties);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="ç¬¬å››ç§å†™æ³•"><a href="#ç¬¬å››ç§å†™æ³•" class="headerlink" title="ç¬¬å››ç§å†™æ³•"></a>ç¬¬å››ç§å†™æ³•</h5><p>ä½¿ç”¨ <code>@ConfigurationProperties</code> + <code>@EnableConfigurationProperties</code> æ³¨è§£ï¼Œå°† Bean çš„å±æ€§å€¼å’Œé…ç½®æ–‡ä»¶çš„é…ç½®é¡¹çš„å€¼è¿›è¡Œç»‘å®šï¼Œä¸å†ä½¿ç”¨ <code>@Configuration</code>ã€<code>@Component</code>ã€<code>@Bean</code> ç­‰æ³¨è§£ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ<code>@EnableConfigurationProperties</code> æ³¨è§£å¯ä»¥å¿«é€Ÿè¿›è¡Œ Bean å±æ€§çš„ç»‘å®šï¼Œå¹¶æŠŠ Bean æ³¨å†Œè¿›å®¹å™¨ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = "pig")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PigProperties</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"PigProperties{"</span> +</span><br><span class="line">            <span class="string">"id="</span> + id +</span><br><span class="line">            <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">            <span class="string">", age="</span> + age +</span><br><span class="line">            <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(PigProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        ConfigurableApplicationContext context = SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        PigProperties pigProperties = context.getBean(PigProperties.class);</span><br><span class="line">        System.out.println(pigProperties);</span><br><span class="line"></span><br><span class="line">        SheepProperties sheepProperties = context.getBean(SheepProperties.class);</span><br><span class="line">        System.out.println(sheepProperties);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="SpringBoot-å¦‚ä½•å­¦ä¹ "><a href="#SpringBoot-å¦‚ä½•å­¦ä¹ " class="headerlink" title="SpringBoot å¦‚ä½•å­¦ä¹ "></a>SpringBoot å¦‚ä½•å­¦ä¹ </h2><p>SpringBoot æ˜¯æ¡†æ¶çš„æ¡†æ¶ï¼Œåº•å±‚åŸºäº Springã€‚åœ¨ä¼ä¸šå¼€å‘ä¸­ï¼Œå¿…é¡»èƒ½è°ƒæ•´æ¯ä¸€ä¸ªåœºæ™¯çš„åº•å±‚è¡Œä¸ºï¼Œ100% çš„é¡¹ç›®ä¸€å®šé‡åˆ°åº•å±‚è¡Œä¸ºè‡ªå®šä¹‰çš„éœ€æ±‚ã€‚</p><div class="admonition note"><p class="admonition-title">ç±»æ¯”æ‘„å½±æŠ€æœ¯</p><ul><li>å‚»ç“œï¼šè‡ªåŠ¨é…ç½®å¥½</li><li>å•åï¼šç„¦è·ã€å…‰åœˆã€å¿«é—¨ã€æ„Ÿå…‰åº¦....</li><li> å‚»ç“œ + å•å</li></ul></div><ul><li><p>å¦‚ä½•å­¦ä¹ </p><ul><li>1ã€ç†è§£è‡ªåŠ¨é…ç½®åŸç†<ul><li>å¯¼å…¥ <code>starter</code> â€“&gt; <code>xxxxAutoConfiguration</code> ç”Ÿæ•ˆ â€“&gt; å¯¼å…¥ç»„ä»¶ â€“&gt; <code>xxxProperties</code> â€“&gt; é…ç½®æ–‡ä»¶</li></ul></li><li> 2ã€ç†è§£å…¶ä»–æ¡†æ¶çš„åº•å±‚å®ç°<ul><li>æ‹¦æˆªå™¨</li></ul></li><li> 3ã€å¯ä»¥éšæ—¶å®šåˆ¶åŒ–ä»»ä½•ç»„ä»¶<ul><li>é…ç½®æ–‡ä»¶</li><li>è‡ªå®šä¹‰ç»„ä»¶</li></ul></li></ul></li><li><p>å¼€å‘çº§åˆ«</p><ul><li><code>æ™®é€šå¼€å‘</code>ï¼šå¯¼å…¥ starterï¼Œç¼–å†™ Controllerã€Serviceã€Mapperã€å¶å°”ä¿®æ”¹é…ç½®æ–‡ä»¶</li><li><code>é«˜çº§å¼€å‘</code>ï¼šè‡ªå®šä¹‰ç»„ä»¶ã€è‡ªå®šä¹‰é…ç½®ã€è‡ªå®šä¹‰ starter</li></ul></li><li><p> å¼€å‘æ ¸å¿ƒ</p><ul><li>è¿™ä¸ªåœºæ™¯è‡ªåŠ¨é…ç½®å¯¼å…¥äº†å“ªäº›ç»„ä»¶ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½ Autowired è¿›æ¥ä½¿ç”¨</li><li>èƒ½ä¸èƒ½é€šè¿‡ä¿®æ”¹é…ç½®æ”¹å˜ç»„ä»¶çš„ä¸€äº›é»˜è®¤å‚æ•°</li><li>éœ€ä¸éœ€è¦è‡ªå·±å®Œå…¨å®šä¹‰è¿™ä¸ªç»„ä»¶</li><li>åœºæ™¯å®šåˆ¶åŒ–</li></ul></li></ul><hr><ul><li><p>æœ€ä½³å®è·µ</p><ul><li>é€‰æ‹©åœºæ™¯ï¼Œå¯¼å…¥åˆ°é¡¹ç›®<ul><li>å®˜æ–¹ï¼šstarter</li><li> ç¬¬ä¸‰æ–¹ï¼šå» Maven ä»“åº“æœ</li></ul></li><li>å†™é…ç½®ï¼Œæ›´æ”¹é…ç½®æ–‡ä»¶çš„å…³é”®é¡¹<ul><li>å¦‚æ•°æ®åº“å‚æ•°ï¼ˆè¿æ¥åœ°å€ã€è´¦å·å¯†ç â€¦ï¼‰</li></ul></li><li>åˆ†æè¿™ä¸ªåœºæ™¯ç»™æˆ‘ä»¬å¯¼å…¥äº†å“ªäº›èƒ½ç”¨çš„ç»„ä»¶<ul><li>è‡ªåŠ¨è£…é…è¿™äº›ç»„ä»¶è¿›è¡Œåç»­ä½¿ç”¨</li><li>ä¸æ»¡æ„ starter æä¾›çš„è‡ªåŠ¨é…å¥½çš„é»˜è®¤ç»„ä»¶<ul><li>å®šåˆ¶åŒ–</li><li>æ”¹é…ç½®</li><li>è‡ªå®šä¹‰ç»„ä»¶</li></ul></li></ul></li></ul></li><li><p>å®è·µæ¡ˆä¾‹ï¼ˆæ•´åˆ Redisï¼‰</p><ul><li>é€‰åœºæ™¯<ul><li><code>spring-boot-starter-data-redis</code></li><li><code>RedisAutoConfiguration</code> å°±æ˜¯è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®ç±»</li></ul></li><li>å†™é…ç½®<ul><li>åˆ†æè¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®ç±»å¼€å¯äº†å“ªäº›å±æ€§ç»‘å®šå…³ç³»</li><li><code>@EnableConfigurationProperties(RedisProperties.class)</code></li><li>ä¿®æ”¹ Redis ç›¸å…³çš„æ ¸å¿ƒé…ç½®</li></ul></li><li>åˆ†æç»„ä»¶<ul><li>åˆ†æåˆ° <code>RedisAutoConfiguration</code> å¾€å®¹å™¨ä¸­æ³¨å†Œäº† <code>StringRedisTemplate</code></li><li>å¾€ä¸šåŠ¡ä»£ç ä¸­è‡ªåŠ¨è£…é… <code>StringRedisTemplate</code></li></ul></li><li>å®šåˆ¶åŒ–<ul><li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li><li>è‡ªå®šä¹‰ç»„ä»¶ï¼Œè‡ªå·±å¾€å®¹å™¨ä¸­æ”¾ä¸€ä¸ª <code>StringRedisTemplate</code></li></ul></li></ul></li></ul><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/">SpringBoot 3 å®˜æ–¹è‹±æ–‡æ–‡æ¡£</a></li><li><a href="https://doc.qzxdp.cn/spring/spring-boot.html">SpringBoot 3 æœ€æ–°ä¸­æ–‡æ–‡æ¡£</a></li></ul>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦è®°å½• SpringBoot 3 çš„åŸºç¡€æ•™ç¨‹ï¼ŒåŒ…æ‹¬å…¥é—¨æ¡ˆä¾‹ã€ç‰¹æ€§ä»‹ç»ã€å¸¸ç”¨æ³¨è§£ç­‰å†…å®¹ã€‚</summary>
    
    
    
    
    <category term="å¾®æœåŠ¡" scheme="https://www.techgrow.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>Hexo ä¸»é¢˜å…¼å®¹ Pjax</title>
    <link href="https://www.techgrow.cn/posts/637e7b8f.html"/>
    <id>https://www.techgrow.cn/posts/637e7b8f.html</id>
    <published>2023-06-01T14:13:21.000Z</published>
    <updated>2023-06-01T14:13:21.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="ä»€ä¹ˆæ˜¯-Pjax"><a href="#ä»€ä¹ˆæ˜¯-Pjax" class="headerlink" title="ä»€ä¹ˆæ˜¯ Pjax"></a>ä»€ä¹ˆæ˜¯ Pjax</h2><p><a href="https://github.com/MoOx/pjax">â€‹Pjaxâ€‹â€‹â€‹</a> é€šè¿‡ Ajax ä»æœåŠ¡å™¨è·å– HTML å†…å®¹ï¼Œç„¶åç”¨åŠ è½½åˆ°çš„ HTML æ›¿æ¢é¡µé¢ä¸Šå®¹å™¨å…ƒç´ çš„å†…å®¹ã€‚Pjax ä½¿ç”¨ <code>pushState</code> æ›´æ–°æµè§ˆå™¨ä¸­çš„å½“å‰ URLï¼Œå³ <code>â€‹â€‹pjax = pushState + ajaxâ€‹â€‹</code> ã€‚æœ€æ—©çš„æ—¶å€™ï¼Œâ€‹â€‹Pjaxâ€‹â€‹â€‹ æ˜¯ä¸€ä¸ªåŸºäº â€‹â€‹jQueryâ€‹â€‹ çš„æ’ä»¶ï¼Œåæ¥æ¨å‡ºäº†å®Œå…¨ç‹¬ç«‹çš„ç‰ˆæœ¬ï¼Œé€‚ç”¨æ›´å¹¿æ³›çš„åº”ç”¨åœºæ™¯ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒPjax æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºï¼Œå¯ä»¥åœ¨ç½‘ç«™æœ¬èº«æ— åˆ·æ–°çš„æƒ…å†µä¸‹ï¼Œå±€éƒ¨åˆ·æ–°é¡µé¢å†…å®¹ï¼ŒåŒæ—¶åœ¨ç°ä»£æµè§ˆå™¨ä¸­æ”¯æŒå‰è¿›å’Œåé€€ï¼Œç”±äºå±€éƒ¨åŠ è½½çš„æ•°æ®é‡æå°ï¼ŒåŠ è½½é€Ÿåº¦æå¿«ï¼Œå› æ­¤å¯ä»¥æœ€å¤§ç¨‹åº¦åœ°æå‡ç”¨æˆ·ä½“éªŒã€‚Pjax çš„å¤©ç”ŸåŠ£åŠ¿åœ¨äºï¼Œé»˜è®¤é…ç½®å¯¹ â€‹â€‹SEOâ€‹â€‹ å¹¶ä¸å‹å¥½ï¼ŒåŒæ—¶éå¸¸ä¾èµ–é¡µé¢å¸ƒå±€çš„ä¸€è‡´æ€§ï¼Œéœ€è¦å¤§é‡æ”¹é€ æ¥ä¼˜åŒ–ã€‚</p><h2 id="Hexo-å¼•å…¥-Pjax"><a href="#Hexo-å¼•å…¥-Pjax" class="headerlink" title="Hexo å¼•å…¥ Pjax"></a>Hexo å¼•å…¥ Pjax</h2><p>å¾ˆå¤šè¾ƒæ—©ä½¿ç”¨ â€‹â€‹Pjaxâ€‹â€‹ çš„ Hexo ä¸»é¢˜ï¼Œéƒ½ä½¿ç”¨äº†åŸºäº jQuery çš„ç‰ˆæœ¬ã€‚å› æ­¤å¦‚æœæ˜¯æ–°å¼•å…¥ï¼Œå¯ä»¥ä½¿ç”¨æœ€æ–°ç‹¬ç«‹ç‰ˆæœ¬çš„ <a href="https://github.com/MoOx/pjax">â€‹â€‹Pjaxâ€‹â€‹</a>ã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/pjax@VERSION/pjax.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><span id="more"></span><h2 id="ä¸ºä»€ä¹ˆå¼•å…¥-Pjax"><a href="#ä¸ºä»€ä¹ˆå¼•å…¥-Pjax" class="headerlink" title="ä¸ºä»€ä¹ˆå¼•å…¥ Pjax"></a>ä¸ºä»€ä¹ˆå¼•å…¥ Pjax</h2><p>ç”±äºæƒ³åœ¨ Hexo åšå®¢ä¸­æ•´åˆ Aplayer éŸ³ä¹æ’­æ”¾å™¨ï¼Œä½†æ˜¯å¦‚æœä¸è¿›è¡Œæ”¹é€ ï¼Œè·³è½¬é¡µé¢è‚¯å®šä¼šå¼•èµ·éŸ³ä¹æ’­æ”¾çš„ä¸­æ–­ï¼Œäºæ˜¯å°±æƒ³åˆ°åˆ©ç”¨ â€‹â€‹Pjaxâ€‹â€‹ çš„ç‰¹æ€§ï¼Œå±€éƒ¨åŠ è½½æ ¸å¿ƒå†…å®¹ï¼Œä»è€Œä¸å½±å“éŸ³ä¹æ’­æ”¾å™¨ï¼Œæ•´ä½“æ•ˆæœç±»ä¼¼ç½‘æ˜“äº‘éŸ³ä¹çš„ PC ç«¯ã€‚</p><h2 id="å…¼å®¹å¤„ç†"><a href="#å…¼å®¹å¤„ç†" class="headerlink" title="å…¼å®¹å¤„ç†"></a>å…¼å®¹å¤„ç†</h2><p>é¦–å…ˆç‹¬ç«‹ç‰ˆçš„ Pjax å·¥ä½œæ–¹å¼å…¶å®ç‰¹åˆ«å¥½ç†è§£ã€‚ä¾‹å¦‚åˆå§‹åŒ–ï¼š</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    pjax = <span class="keyword">new</span> Pjax({</span><br><span class="line">        <span class="attr">elements</span>: <span class="string">'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox]):not([notallow="return false;"]):not([notallow="return!1"]):not([target="_blank"]):not([target="view_window"]):not([href$=".xml"])'</span>,</span><br><span class="line">        <span class="attr">selectors</span>: [</span><br><span class="line">            <span class="string">"head title"</span>, <span class="comment">// æ ‡é¢˜</span></span><br><span class="line">            <span class="string">"head meta[name=keywords]"</span>, <span class="comment">// å…³é”®è¯</span></span><br><span class="line">            <span class="string">"head meta[name=description]"</span>, <span class="comment">// æè¿°</span></span><br><span class="line">            <span class="string">".pjax"</span>,</span><br><span class="line">            <span class="string">"pjax"</span>, <span class="comment">// &lt;pjax&gt;&lt;/pjax&gt; æ ‡ç­¾</span></span><br><span class="line">            <span class="string">"script[data-pjax], .pjax-reload script"</span> <span class="comment">// script æ ‡ç­¾æ·»åŠ  data-pjax æˆ– script æ ‡ç­¾å¤–å±‚æ·»åŠ  .pjax-reload çš„ script ä»£ç æ®µé‡è½½</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">cacheBust</span>: &lt;%= theme.plugins.pjax.cacheBust %&gt;,   <span class="comment">// url åœ°å€è¿½åŠ æ—¶é—´æˆ³ï¼Œç”¨ä»¥é¿å…æµè§ˆå™¨ç¼“å­˜</span></span><br><span class="line">        timeout: &lt;%= theme.plugins.pjax.timeout %&gt;,</span><br><span class="line">    });</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><p>ç„¶åæ˜¯æ ‡ç­¾éƒ¨åˆ†ï¼Œä¸»è¦æ˜¯ç”¨åœ¨ä»¥ä¸‹åœºæ™¯ï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pjax"</span>&gt;</span>æˆ‘æ˜¯å°†è¢« Pjax é‡è½½çš„å†…å®¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-pjax</span>&gt;</span>æˆ‘æ˜¯å°†è¢« Pjax é‡è½½çš„å†…å®¹<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pjax-reload"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘ä¸æ˜¯å°†è¢« Pjax é‡è½½çš„å†…å®¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span>æˆ‘æ˜¯å°†è¢« Pjax é‡è½½çš„å†…å®¹<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="Pjax-è§¦å‘é‡è½½"><a href="#Pjax-è§¦å‘é‡è½½" class="headerlink" title="Pjax è§¦å‘é‡è½½"></a>Pjax è§¦å‘é‡è½½</h3><p>è¿™ä¸ªæ˜¯æœ€ä¸¥é‡çš„é—®é¢˜ï¼Œç‹¬ç«‹ç‰ˆçš„ â€‹â€‹Pjaxâ€‹â€‹ ä¼šè‡ªåŠ¨æ£€æµ‹é¡µé¢å¸ƒå±€å˜åŒ–ï¼Œå¦‚æœå˜åŒ–è¿‡å¤§ï¼Œåˆ™ä¼šç›´æ¥é‡è½½æ•´ä¸ªé¡µé¢ã€‚å®é™…æµ‹è¯•å°±å‘ç° Hexo éå¸¸å®¹æ˜“è§¦å‘é‡è½½ï¼Œå°¤å…¶æ˜¯ â€‹<code>â€‹pageâ€‹â€‹â€‹</code> å’Œ <code>â€‹â€‹postâ€‹â€‹</code> ï¼Œå› ä¸ºè¿™ä¸¤ç§é¡µé¢åŸæœ¬çš„å¤„ç†å°±å®Œå…¨ä¸åŒã€‚æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå¦‚æœå®Œå…¨ç›¸åŒï¼Œåˆ™ä¸ä¼šè§¦å‘é‡è½½ã€‚</p><h3 id="è‡ªå®šä¹‰-JS-ä»£ç ä¸åŠ è½½"><a href="#è‡ªå®šä¹‰-JS-ä»£ç ä¸åŠ è½½" class="headerlink" title="è‡ªå®šä¹‰ JS ä»£ç ä¸åŠ è½½"></a>è‡ªå®šä¹‰ JS ä»£ç ä¸åŠ è½½</h3><p>å¯ç”¨ Pjax ä»¥åï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº› JavaScript ä»£ç åŠ è½½ä¸å‡ºæ¥çš„æƒ…å†µã€‚è§£å†³æ–¹æ¡ˆå¾ˆç®€å•ï¼Œåªè¦åœ¨åŸæœ‰çš„ <code>&lt;script&gt;&lt;/script&gt;</code> æ ‡ç­¾ä¸­æ·»åŠ  <code>data-pjax</code> å±æ€§å°±è¡Œã€‚</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script data-pjax type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    <span class="comment">// Some code here</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://cloud.tencent.com/developer/article/1834038">ç½‘ç«™è®¿é—®é€Ÿåº¦ä¼˜åŒ–ä¹‹ Pjax</a></li><li><a href="https://cloud.tencent.com/developer/article/1834038">Butterfly çš„ Pjax é€‚é…æ–¹æ¡ˆ</a></li></ul>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç» Hexo å¦‚ä½•å…¼å®¹ Pjaxã€‚</summary>
    
    
    
    
    <category term="é™æ€åšå®¢" scheme="https://www.techgrow.cn/tags/%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>Vue é¡¹ç›®ä¸­ç¦ç”¨æµè§ˆå™¨ç¼“å­˜é…ç½®</title>
    <link href="https://www.techgrow.cn/posts/b044ec3b.html"/>
    <id>https://www.techgrow.cn/posts/b044ec3b.html</id>
    <published>2023-05-19T13:19:25.000Z</published>
    <updated>2023-05-19T13:19:25.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‰ç«¯é¡¹ç›®å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œä¼šç»å¸¸é‡åˆ°éœ€è¦æ¸…ç†ç¼“å­˜çš„é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯ Vue é¡¹ç›®ç¦ç”¨ç¼“å­˜çš„æ–¹æ³•ã€‚</p><h2 id="HTML-å†…å®¹"><a href="#HTML-å†…å®¹" class="headerlink" title="HTML å†…å®¹"></a>HTML å†…å®¹</h2><p>åœ¨ HTML é¡µé¢ï¼ˆå¦‚ <code>index.html</code>ï¼‰çš„ <code>&lt;head&gt;</code> æ ‡ç­¾ä¸­æ·»åŠ  <code>meta</code> é…ç½®ã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"pragram"</span> <span class="attr">content</span>=<span class="string">"no-cache"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache, no-store, must-revalidate"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"expires"</span> <span class="attr">content</span>=<span class="string">"0"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure><span id="more"></span><p><img data-src="../../../asset/2023/05/vue-nocache-1.png"></p><h2 id="Vue-Cli-æ„å»º"><a href="#Vue-Cli-æ„å»º" class="headerlink" title="Vue Cli æ„å»º"></a>Vue Cli æ„å»º</h2><p>é’ˆå¯¹ Vue3 ä»¥ä¸‹ç‰ˆæœ¬ï¼Œåœ¨ <code>vue.config.js</code> æ–°å¢é…ç½®å†…å®¹ï¼Œå°†æ—¶é—´æˆ³ä½œä¸ºæ‰“åŒ…ç¼–è¯‘åçš„æ–‡ä»¶åç§°çš„ä¸€éƒ¨åˆ†ã€‚</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Timestamp = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">configureWebpack</span>: {</span><br><span class="line">    <span class="attr">output</span>: { <span class="comment">// è¾“å‡ºé‡æ„ï¼Œæ‰“åŒ…ç¼–è¯‘åçš„æ–‡ä»¶åç§° ã€æ¨¡å—åç§°.ç‰ˆæœ¬å·(å¯é€‰).æ—¶é—´æˆ³ã€‘</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">`[name].<span class="subst">${Timestamp}</span>.js`</span>,</span><br><span class="line">      <span class="attr">chunkFilename</span>: <span class="string">`[name].<span class="subst">${Timestamp}</span>.js`</span></span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">css</span>: {</span><br><span class="line">    <span class="attr">extract</span>: { <span class="comment">// æ‰“åŒ…åcssæ–‡ä»¶åç§°æ·»åŠ æ—¶é—´æˆ³</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">`css/[name].<span class="subst">${Timestamp}</span>.css`</span>,</span><br><span class="line">      <span class="attr">chunkFilename</span>: <span class="string">`css/[name].<span class="subst">${Timestamp}</span>.css`</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="Nginx-é…ç½®"><a href="#Nginx-é…ç½®" class="headerlink" title="Nginx é…ç½®"></a>Nginx é…ç½®</h2><p>ç¦ç”¨æ‰ Nginx ç¼“å­˜ï¼Œè®©æµè§ˆå™¨æ¯æ¬¡åˆ°æœåŠ¡å™¨å»è¯·æ±‚æ–‡ä»¶ï¼Œè€Œä¸æ˜¯åœ¨æµè§ˆå™¨ä¸­è¯»å–ç¼“å­˜æ–‡ä»¶ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä»¥ä¸‹é…ç½®åªå¯¹ HTML æ–‡ä»¶æœ‰æ•ˆã€‚</p><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~ .*\.(?:htm|html)$</span> {</span><br><span class="line">    <span class="attribute">add_header</span> Cache-Control <span class="string">"private, no-store, no-cache, must-revalidate, proxy-revalidate"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><img data-src="../../../asset/2023/05/vue-nocache-2.png"></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://codecat.blog.csdn.net/article/details/117604817">Nginx ç¼“å­˜è®¾ç½®</a></li></ul>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç»åœ¨ Vue é¡¹ç›®ä¸­ï¼Œå¦‚ä½•ç¦ç”¨æµè§ˆå™¨ç¼“å­˜çš„é…ç½®ã€‚</summary>
    
    
    
    
    <category term="å‰ç«¯" scheme="https://www.techgrow.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>VuePress v1 å›¾ç‰‡å±…ä¸­æ’ä»¶ä¸ç”Ÿæ•ˆ</title>
    <link href="https://www.techgrow.cn/posts/d23a0b2b.html"/>
    <id>https://www.techgrow.cn/posts/d23a0b2b.html</id>
    <published>2023-05-18T14:13:22.000Z</published>
    <updated>2023-05-18T14:13:22.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="é—®é¢˜è¯´æ˜"><a href="#é—®é¢˜è¯´æ˜" class="headerlink" title="é—®é¢˜è¯´æ˜"></a>é—®é¢˜è¯´æ˜</h2><p>æ— è®ºæ˜¯ VuePress å®˜æ–¹ä¸»é¢˜ï¼Œè¿˜æ˜¯ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œä½¿ç”¨å®˜æ–¹å†…ç½®çš„æ’ä»¶ <a href="https://v1.vuepress.vuejs.org/zh/plugin/official/plugin-medium-zoom.html">@vuepress/plugin-medium-zoom</a> éƒ½æ— æ³•å®ç°å›¾ç‰‡å±…ä¸­å¹¶ç‚¹å‡»æ”¾å¤§çš„æ•ˆæœï¼Œé…ç½®ç¤ºä¾‹å¦‚ä¸‹ã€‚</p><ul><li>é»˜è®¤ä¸»é¢˜ </li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="string">'@vuepress/medium-zoom'</span>: {</span><br><span class="line">      <span class="attr">selector</span>: <span class="string">'.theme-default-content img'</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><ul><li>ç¬¬ä¸‰æ–¹ä¸»é¢˜ </li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="string">'@vuepress/medium-zoom'</span>: {</span><br><span class="line">      <span class="attr">selector</span>: <span class="string">'.theme-reco-content img'</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h2><p>å®‰è£…å®˜æ–¹çš„å¦ä¸€æ¬¾æ’ä»¶ <a href="https://vuepress-community.netlify.app/en/plugins/medium-zoom">vuepress-plugin-medium-zoom</a> æ¥æ›¿ä»£ã€‚</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D vuepress-plugin-medium-zoom</span><br></pre></td></tr></tbody></table></figure><ul><li>é»˜è®¤ä¸»é¢˜ </li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="string">'vuepress-plugin-medium-zoom'</span>: {</span><br><span class="line">      <span class="attr">selector</span>: <span class="string">'.theme-default-content img'</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ç¬¬ä¸‰æ–¹ä¸»é¢˜ </li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="string">'vuepress-plugin-medium-zoom'</span>: {</span><br><span class="line">      <span class="attr">selector</span>: <span class="string">'.theme-reco-content img'</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç» VuePress v1 å¦‚ä½•è§£å†³å›¾ç‰‡å±…ä¸­æ’ä»¶ä¸ç”Ÿæ•ˆçš„é—®é¢˜ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="é™æ€åšå®¢" scheme="https://www.techgrow.cn/tags/%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>æ¨é€é•œåƒåˆ° DockerHub</title>
    <link href="https://www.techgrow.cn/posts/2ba32056.html"/>
    <id>https://www.techgrow.cn/posts/2ba32056.html</id>
    <published>2023-05-13T12:12:41.000Z</published>
    <updated>2023-05-13T12:12:41.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="æ³¨å†Œè´¦å·"><a href="#æ³¨å†Œè´¦å·" class="headerlink" title="æ³¨å†Œè´¦å·"></a>æ³¨å†Œè´¦å·</h2><p>åœ¨ <a href="https://hub.docker.com/">DockerHub</a> å®˜ç½‘æ³¨å†Œè´¦å·ï¼Œè¯¥è´¦å·æ˜¯å…è´¹æ³¨å†Œçš„ã€‚</p><h2 id="åˆ›å»ºä¸ªäººä»“åº“"><a href="#åˆ›å»ºä¸ªäººä»“åº“" class="headerlink" title="åˆ›å»ºä¸ªäººä»“åº“"></a>åˆ›å»ºä¸ªäººä»“åº“</h2><p>ç™»å½• DockerHub çš„å®˜ç½‘ï¼Œåˆ›å»ºæ–°çš„é•œåƒä»“åº“ã€‚</p><span id="more"></span><p><img data-src="../../../asset/2023/05/docker-hub-1.png"></p><h2 id="æ‰‹åŠ¨æ¨é€é•œåƒ"><a href="#æ‰‹åŠ¨æ¨é€é•œåƒ" class="headerlink" title="æ‰‹åŠ¨æ¨é€é•œåƒ"></a>æ‰‹åŠ¨æ¨é€é•œåƒ</h2><h3 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h3><p>åœ¨æœ¬åœ°ä½¿ç”¨ Dockerfile çš„æ–¹å¼æ„å»ºé•œåƒã€‚é€šè¿‡ <code>docker build</code> å‘½ä»¤æ„å»ºæ–°çš„é•œåƒï¼Œ<code>-t</code> å‚æ•°å¯ä»¥æŒ‡å®šæ–°é•œåƒçš„åç§°ï¼Œ<code>.</code> è¡¨ç¤ºåœ¨å½“å‰ç›®å½•ä¸‹ã€‚</p><ul><li>æ„å»ºæœ¬åœ°é•œåƒ </li></ul><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t clay/dingtalk-webhook .</span><br></pre></td></tr></tbody></table></figure><ul><li>æŸ¥çœ‹æœ¬åœ°é•œåƒ </li></ul><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></tbody></table></figure><ul><li>ç»™é•œåƒæ‰“æ ‡ç­¾ï¼Œæ›´æ”¹æ ‡ç­¾çš„è¯­æ³•ï¼š <code>docker tag IMAGEID REPOSITORY:TAG</code></li></ul><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®šç‰ˆæœ¬å·</span></span><br><span class="line">docker tag 2657f9dbbd15 clay/dingtalk-webhook:1.0.3</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸æŒ‡å®šç‰ˆæœ¬å·ï¼ˆé»˜è®¤ä¸º latestï¼‰</span></span><br><span class="line">docker tag 2657f9dbbd15 clay/dingtalk-webhook</span><br></pre></td></tr></tbody></table></figure><div class="admonition warning"><p class="admonition-title">ç‰¹åˆ«æ³¨æ„</p><p>æ¯æ¬¡éƒ½è¦ Push ä¸å¸¦ç‰ˆæœ¬å·çš„é•œåƒï¼Œå¦åˆ™é•œåƒå°†æ²¡æœ‰ <code>latest</code> ç‰ˆæœ¬ï¼Œå¯¼è‡´å…¶ä»–äººæ‹‰å–é•œåƒçš„æ—¶å€™å¿…é¡»è¦æŒ‡å®š <code>tag</code>ï¼Œè¿™æ ·ä¼šéå¸¸ä¸æ–¹ä¾¿ã€‚</p></div><h3 id="æ¨é€é•œåƒ"><a href="#æ¨é€é•œåƒ" class="headerlink" title="æ¨é€é•œåƒ"></a>æ¨é€é•œåƒ</h3><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç™»å½• DockerHub</span></span><br><span class="line">docker login</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€æŒ‡å®šç‰ˆæœ¬å·çš„é•œåƒ</span></span><br><span class="line">docker push clay/dingtalk-webhook:1.0.3</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€ä¸å¸¦ç‰ˆæœ¬å·çš„é•œåƒï¼ˆé»˜è®¤ä¸º latestï¼‰</span></span><br><span class="line">docker push clay/dingtalk-webhook</span><br></pre></td></tr></tbody></table></figure><h3 id="æœç´¢é•œåƒ"><a href="#æœç´¢é•œåƒ" class="headerlink" title="æœç´¢é•œåƒ"></a>æœç´¢é•œåƒ</h3><p>é•œåƒæ¨é€æˆåŠŸåï¼Œå¯ä»¥åœ¨ DockerHub ä»“åº“ä¸­è§‚å¯Ÿæ˜¯å¦å¯ä»¥æœç´¢åˆ°ï¼Œè‹¥èƒ½æœç´¢åˆ°åˆ™è¯´æ˜é•œåƒæ¨é€æˆåŠŸã€‚</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search dingtalk-webhook</span><br></pre></td></tr></tbody></table></figure><h3 id="æ¨é€åŠ é€Ÿ"><a href="#æ¨é€åŠ é€Ÿ" class="headerlink" title="æ¨é€åŠ é€Ÿ"></a>æ¨é€åŠ é€Ÿ</h3><p>æ¨é€é•œåƒåˆ° DockerHub æ—¶ï¼Œå¾€å¾€ä¼šå› ç½‘ç»œå»¶è¿Ÿè€Œè¶…æ—¶ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥é…ç½® Docker Push ä½¿ç”¨ä»£ç†ï¼ŒåŠ å¿«é•œåƒæ¨é€çš„é€Ÿåº¦ã€‚</p><div class="admonition note"><p class="admonition-title">æç¤º</p><p>ç”±äºä¸å¯æè¿°çš„åŸå› ï¼ŒDocker çš„ Pull æˆ– Push éƒ½å¾ˆæ…¢ã€‚Docker Pull é•œåƒæ—¶ï¼Œå¯ä»¥æ›´æ”¹ <code>/etc/docker/daemon.json</code> é…ç½®æ–‡ä»¶ï¼ŒåŠ å…¥å›½å†…é•œåƒæºçš„æ–¹å¼æ¥åŠ é€Ÿã€‚ä½† Docker Push ä¸æ”¯æŒè¿™ç§æ–¹å¼ï¼Œä¼ ç»Ÿçš„ <code>export http_proxy=xxxx</code> è®¾ç½® HTTP ä»£ç†å˜é‡çš„æ–¹å¼å¯¹ Docker ä¹Ÿæ— æ•ˆï¼Œå› æ­¤éœ€è¦é‡‡ç”¨ä¸‹é¢çš„æ–¹å¼è®¾ç½® HTTP ä»£ç†æ¥è§£å†³ã€‚</p></div><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºé…ç½®ç›®å½•</span></span><br><span class="line">mkdir -p /etc/systemd/system/docker.service.d</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºé…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/systemd/system/docker.service.d/http-proxy.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†™å…¥é…ç½®æ–‡ä»¶(æŒ‡å®šä»£ç†æœåŠ¡çš„åœ°å€)</span></span><br><span class="line">[Service]</span><br><span class="line">Environment=<span class="string">"HTTP_PROXY=http://127.0.0.1:1080/"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ·æ–°æ›´æ”¹</span></span><br><span class="line">systemctl daemon-reload &amp;&amp; systemctl restart docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ</span></span><br><span class="line">systemctl show --property=Environment docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°Pushé•œåƒ</span></span><br><span class="line">docker push clay/dingtalk-webhook</span><br></pre></td></tr></tbody></table></figure><h2 id="è‡ªåŠ¨æ¨é€é•œåƒ"><a href="#è‡ªåŠ¨æ¨é€é•œåƒ" class="headerlink" title="è‡ªåŠ¨æ¨é€é•œåƒ"></a>è‡ªåŠ¨æ¨é€é•œåƒ</h2><p>è¿™é‡Œå°†ä»‹ç»å¦‚ä½•åˆ©ç”¨ GitHub Actions è‡ªåŠ¨æ„å»ºå¹¶æ¨é€ Docker é•œåƒåˆ° DockerHubã€‚</p><h3 id="åˆ›å»º-GitHub-ä»“åº“"><a href="#åˆ›å»º-GitHub-ä»“åº“" class="headerlink" title="åˆ›å»º GitHub ä»“åº“"></a>åˆ›å»º GitHub ä»“åº“</h3><p>ç™»å½• <a href="https://github.com/">GitHub å®˜ç½‘</a>ï¼Œé¦–å…ˆæ‰‹åŠ¨åˆ›å»ºä»£ç ä»“åº“ï¼Œç„¶åå°†æœ¬åœ°çš„ä»£ç  Push åˆ°ä»£ç ä»“åº“ã€‚</p><h3 id="é…ç½®-DockerHub-è´¦å·"><a href="#é…ç½®-DockerHub-è´¦å·" class="headerlink" title="é…ç½® DockerHub è´¦å·"></a>é…ç½® DockerHub è´¦å·</h3><p>ç”±äºå¸Œæœ›é€šè¿‡ GitHub Actions è‡ªåŠ¨æ¨é€é•œåƒåˆ° DockerHubï¼Œå› æ­¤å¿…é¡»è¦æœ‰ DockerHub çš„è®¤è¯é…ç½®ï¼Œå³éœ€è¦åœ¨ GitHub ä»“åº“ä¸­æ·»åŠ  DockerHub ç™»å½•çš„ç”¨æˆ·åå’Œå¯†ç ï¼ˆAcessTokenï¼‰ã€‚</p><p><img data-src="../../../asset/2023/05/docker-hub-github-1.png"></p><p><img data-src="../../../asset/2023/05/docker-hub-github-2.png"></p><h3 id="é€‰æ‹©-Action-å·¥ä½œæµæ¨¡æ¿"><a href="#é€‰æ‹©-Action-å·¥ä½œæµæ¨¡æ¿" class="headerlink" title="é€‰æ‹© Action å·¥ä½œæµæ¨¡æ¿"></a>é€‰æ‹© Action å·¥ä½œæµæ¨¡æ¿</h3><p>é€‰æ‹© GitHub Actions çš„å·¥ä½œæµæ¨¡æ¿ï¼Œè¿™é‡Œå¯ä»¥ä»»æ„é€‰æ‹©ä¸€ä¸ªï¼Œåç»­å¯ä»¥æ‰‹åŠ¨æ›´æ”¹æ¨¡æ¿æ–‡ä»¶çš„å†…å®¹ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ¨¡æ¿æ–‡ä»¶åˆ›å»ºæˆåŠŸåï¼Œé»˜è®¤ä¼šä¿å­˜åœ¨ GitHub ä»“åº“çš„ <code>.github/workflows/</code> ç›®å½•ä¸‹ã€‚</p><p><img data-src="../../../asset/2023/05/docker-hub-github-3.png"></p><h3 id="æ›´æ”¹-Workflow-é…ç½®æ–‡ä»¶"><a href="#æ›´æ”¹-Workflow-é…ç½®æ–‡ä»¶" class="headerlink" title="æ›´æ”¹ Workflow é…ç½®æ–‡ä»¶"></a>æ›´æ”¹ Workflow é…ç½®æ–‡ä»¶</h3><p>ç¼–è¾‘ GitHub ä»“åº“ <code>.github/workflows/</code> ç›®å½•ä¸‹çš„ Workflow é…ç½®æ–‡ä»¶ï¼Œè¦†ç›–å¹¶æ·»åŠ ä¸‹è¿°å†…å®¹ã€‚</p><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li><ol><li><a href="https://docs.github.com/zh/actions">GitHub Actions çš„ä¸­æ–‡æ–‡æ¡£</a></li></ol></li><li><ol start="2"><li> GitHub ä» Git å¼•ç”¨å’Œ GitHub äº‹ä»¶ä¸­æå–å…ƒæ•°æ®ï¼ˆtagsã€labelsï¼‰çš„é…ç½®æ–¹æ³•ï¼Œè¯¦ç»†æ•™ç¨‹å¯ä»¥å‚è€ƒ <a href="https://github.com/docker/metadata-action">è¿™é‡Œ</a>ã€‚</li></ol></li><li><ol start="3"><li>Action æœ¬è´¨å°±æ˜¯ç”±ä¸€ç³»åˆ—çš„ <code>step</code> ç»„æˆï¼ŒGitHub Actions å®˜æ–¹æ‰€æœ‰å¯ç”¨çš„ Action å¯ä»¥ä» <a href="https://github.com/marketplace?type=actions">è¿™é‡Œ</a> æŸ¥æ‰¾åˆ°ã€‚</li></ol></li></ul></div><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This workflow will build a package using Maven and then publish it to GitHub packages when a release is created</span></span><br><span class="line"><span class="comment"># For more information see: https://github.com/actions/setup-java/blob/main/docs/advanced-usage.md#apache-maven-with-a-settings-path</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name:</span> <span class="string">DockerHub</span> <span class="string">Image</span> <span class="string">Publish</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'main'</span></span><br><span class="line">    <span class="attr">tags:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'*'</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'main'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">IMAGE_NAME:</span> <span class="string">clay/dingtalk-webhook</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">the</span> <span class="string">repo</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">    </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">JDK</span> <span class="number">11</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/setup-java@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">java-version:</span> <span class="string">'11'</span></span><br><span class="line">        <span class="attr">distribution:</span> <span class="string">'temurin'</span></span><br><span class="line">        <span class="attr">cache:</span> <span class="string">maven</span></span><br><span class="line">    </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">with</span> <span class="string">Maven</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">mvn</span> <span class="string">-B</span> <span class="string">package</span> <span class="string">--file</span> <span class="string">pom.xml</span></span><br><span class="line">    </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">the</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">docker</span> <span class="string">build</span> <span class="string">.</span> <span class="string">--file</span> <span class="string">Dockerfile</span> <span class="string">--tag</span> <span class="string">${{</span> <span class="string">env.IMAGE_NAME</span> <span class="string">}}</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Login</span> <span class="string">to</span> <span class="string">DockerHub</span></span><br><span class="line">      <span class="attr">if:</span> <span class="string">github.event_name</span> <span class="type">!=</span> <span class="string">'pull_request'</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">docker/login-action@v2</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">${{</span> <span class="string">secrets.DOCKERHUB_USERNAME</span> <span class="string">}}</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">${{</span> <span class="string">secrets.DOCKERHUB_TOKEN</span> <span class="string">}}</span></span><br><span class="line">    </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Extract</span> <span class="string">Docker</span> <span class="string">metadata</span></span><br><span class="line">      <span class="attr">id:</span> <span class="string">meta</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">docker/metadata-action@v4</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">          <span class="attr">images:</span> <span class="string">${{</span> <span class="string">env.IMAGE_NAME</span> <span class="string">}}</span></span><br><span class="line">    </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">push</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">docker/build-push-action@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">        <span class="attr">push:</span> <span class="string">${{</span> <span class="string">github.event_name</span> <span class="type">!=</span> <span class="string">'pull_request'</span> <span class="string">}}</span></span><br><span class="line">        <span class="attr">tags:</span> <span class="string">${{</span> <span class="string">steps.meta.outputs.tags</span> <span class="string">}}</span></span><br><span class="line">        <span class="attr">labels:</span> <span class="string">${{</span> <span class="string">steps.meta.outputs.labels</span> <span class="string">}}</span></span><br></pre></td></tr></tbody></table></figure><table><thead><tr><th>æ­¥éª¤çš„åç§°</th><th>æ­¥éª¤çš„æè¿°</th></tr></thead><tbody><tr><td> Checkout the repo</td><td> æ£€å‡ºä»“åº“ä»£ç </td></tr><tr><td> Set up JDK 11</td><td> å®‰è£… JDK 11</td></tr><tr><td>Build with Maven</td><td>Maven ç¼–è¯‘ä»£ç </td></tr><tr><td> Build the Docker image</td><td> æ„å»º Docker é•œåƒ</td></tr><tr><td> Login to DockerHub</td><td> ç™»å½• DockerHub</td></tr><tr><td>Extract Docker metadata</td><td> æå– Docker çš„å…ƒæ•°æ®</td></tr><tr><td> Build and push Docker image</td><td> æ¨é€ Docker é•œåƒ</td></tr></tbody></table><h3 id="è‡ªåŠ¨æ¨é€é•œåƒåˆ°-DockerHub"><a href="#è‡ªåŠ¨æ¨é€é•œåƒåˆ°-DockerHub" class="headerlink" title="è‡ªåŠ¨æ¨é€é•œåƒåˆ° DockerHub"></a>è‡ªåŠ¨æ¨é€é•œåƒåˆ° DockerHub</h3><p>Workflow æ–‡ä»¶é…ç½®å®Œæˆä¹‹åï¼Œå°†æ‰€æœ‰å†…å®¹æ›´æ”¹æ¨é€è‡³ Github ä»“åº“ã€‚æŒ‰ç…§æœ¬ä¾‹ä¸­çš„é…ç½®ï¼Œåªè¦ <code>main</code> åˆ†æ”¯æœ‰æ–°çš„ Push äº‹ä»¶æˆ–è€… <code>tag</code> æœ‰æ›´æ–°ï¼Œå°±ä¼šè§¦å‘ Github Actions è‡ªåŠ¨æ„å»ºé•œåƒå¹¶æ¨é€è‡³ DockerHubã€‚ä¸Šè¿°é…ç½®çš„ <code>Extract Docker metadata</code> æ­¥éª¤ï¼Œç›®çš„æ˜¯æ›´æ”¹é•œåƒçš„åç§°ï¼Œé•œåƒçš„ <code>tag</code> ä¼šè‡ªåŠ¨æŠ½å–ï¼ˆè§„åˆ™å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ˜¯åˆ†æ”¯çš„ Push äº‹ä»¶ï¼Œé‚£ä¹ˆé•œåƒçš„ <code>tag</code> åˆ™ä¸ºåˆ†æ”¯çš„åç§°ï¼Œå¦‚æœæ˜¯ <code>tag</code> çš„ Push äº‹ä»¶ï¼Œåˆ™ä¼šæ¨é€ <code>tag</code> å’Œ <code>latest</code> è¿™ä¸¤ä¸ªç‰ˆæœ¬çš„é•œåƒåˆ° DockerHubï¼Œå…·ä½“é…ç½®è§„åˆ™å‚è§ <a href="https://github.com/docker/metadata-action">è¿™é‡Œ</a> ã€‚</p><table><thead><tr><th>Eent</th><th>Ref</th><th>Docker Tags</th></tr></thead><tbody><tr><td><code>pull_request</code></td><td><code>refs/pull/2/merge</code></td><td><code>pr-2</code></td></tr><tr><td><code>push</code></td><td><code>refs/heads/main</code></td><td><code>main</code></td></tr><tr><td><code>push</code></td><td><code>refs/heads/releases/1</code></td><td><code>releases-1</code></td></tr><tr><td><code>push tag</code></td><td><code>refs/tags/1.2.3</code></td><td><code>1.2.3</code>, <code>latest</code></td></tr><tr><td><code>push tag</code></td><td><code>refs/tags/2.0.8-beta.67</code></td><td><code>2.0.8-beta.67</code>, <code>latest</code></td></tr><tr><td><code>workflow_dispatch</code></td><td><code>refs/heads/main</code></td><td><code>main</code></td></tr></tbody></table><ul><li>Git åˆ›å»ºå¹¶æ¨é€ <code>tag</code> çš„å‘½ä»¤ </li></ul><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ ‡ç­¾</span></span><br><span class="line">git tag 1.0.2</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€æ ‡ç­¾</span></span><br><span class="line">git push origin 1.0.2</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨</span></span><br><span class="line">git tag --list</span><br></pre></td></tr></tbody></table></figure><ul><li>å½“ Push æ–°çš„ <code>tag</code> åˆ° GitHub ä»“åº“åï¼Œç­‰å¾… GitHub Actions çš„è‡ªåŠ¨æ„å»ºæ“ä½œå®Œæˆï¼Œæœ€åç™»å½• DockerHub çš„å®˜ç½‘ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»æœ‰ç›¸åº”çš„ Docker é•œåƒè¢«åˆ›å»ºã€‚</li></ul><p><img data-src="../../../asset/2023/05/docker-hub-github-6.png"></p><h3 id="æŸ¥çœ‹è‡ªåŠ¨æ„å»ºçš„ç»“æœ"><a href="#æŸ¥çœ‹è‡ªåŠ¨æ„å»ºçš„ç»“æœ" class="headerlink" title="æŸ¥çœ‹è‡ªåŠ¨æ„å»ºçš„ç»“æœ"></a>æŸ¥çœ‹è‡ªåŠ¨æ„å»ºçš„ç»“æœ</h3><p><img data-src="../../../asset/2023/05/docker-hub-github-4.png"></p><p><img data-src="../../../asset/2023/05/docker-hub-github-5.png"></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://blog.csdn.net/wangzhongshun/article/details/127435524">Git ä¹‹ Tag æ ‡ç­¾çš„ä½¿ç”¨</a></li><li><a href="https://www.cnblogs.com/jhao/p/15753390.html">ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ„å»º DockerHub é•œåƒ</a></li><li><a href="https://blog.csdn.net/agonie201218/article/details/128287804">å·§ç”¨ Github Actions è‡ªåŠ¨æ¨é€ DockerHub é•œåƒ</a></li></ul>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•æ¨é€é•œåƒåˆ° DockerHubï¼ŒåŒ…æ‹¬æ‰‹åŠ¨æ¨é€é•œåƒã€æ¨é€é•œåƒåŠ é€Ÿã€GitHub Actions è‡ªåŠ¨æ¨é€é•œåƒç­‰ã€‚</summary>
    
    
    
    
    <category term="å®¹å™¨åŒ–" scheme="https://www.techgrow.cn/tags/%E5%AE%B9%E5%99%A8%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot æ•´åˆ MyBatis-Plus ä¸ H2 æ•™ç¨‹</title>
    <link href="https://www.techgrow.cn/posts/afd4ab85.html"/>
    <id>https://www.techgrow.cn/posts/afd4ab85.html</id>
    <published>2023-05-05T15:12:41.000Z</published>
    <updated>2023-05-05T15:12:41.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å¤§çº²"><a href="#å¤§çº²" class="headerlink" title="å¤§çº²"></a>å¤§çº²</h2><ul><li><a href="/posts/dfc4cb86.html">H2 æ•°æ®åº“åŸºç¡€ä½¿ç”¨æ•™ç¨‹</a></li><li><a href="/posts/afd4ab85.html">SpringBoot æ•´åˆ MyBatis-Plus ä¸ H2 æ•™ç¨‹</a></li></ul><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><ul><li><a href="https://h2database.com/">H2 å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://github.com/h2database/h2database">H2 GitHub é¡¹ç›®</a></li></ul><span id="more"></span><h2 id="é¡¹ç›®ä»‹ç»"><a href="#é¡¹ç›®ä»‹ç»" class="headerlink" title="é¡¹ç›®ä»‹ç»"></a>é¡¹ç›®ä»‹ç»</h2><h3 id="ç‰ˆæœ¬è¯´æ˜"><a href="#ç‰ˆæœ¬è¯´æ˜" class="headerlink" title="ç‰ˆæœ¬è¯´æ˜"></a>ç‰ˆæœ¬è¯´æ˜</h3><table><thead><tr><th>æ¡†æ¶</th><th>ç‰ˆæœ¬</th><th>æè¿°</th></tr></thead><tbody><tr><td> Spring Boot</td><td>2.7.11</td><td></td></tr><tr><td>MyBatis-Plus</td><td>3.5.3.1</td><td></td></tr><tr><td>H2</td><td>2.1.214</td><td></td></tr></tbody></table><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p><img data-src="../../../asset/2023/05/h2database-3.png"></p><h3 id="ä»£ç ä¸‹è½½"><a href="#ä»£ç ä¸‹è½½" class="headerlink" title="ä»£ç ä¸‹è½½"></a>ä»£ç ä¸‹è½½</h3><p>æœ¬æ–‡æ‰€éœ€çš„æ¡ˆä¾‹ä»£ç ï¼Œå¯ä»¥ç›´æ¥ä» <a href="https://github.com/rqh656418510/spring-cloud-share/tree/main/h2/h2-study">GitHub</a> ä¸‹è½½å¯¹åº”ç« èŠ‚ <code>h2-springboot-mybatis-plus</code>ã€‚</p><h2 id="é¡¹ç›®æ–‡ä»¶"><a href="#é¡¹ç›®æ–‡ä»¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶"></a>é¡¹ç›®æ–‡ä»¶</h2><h3 id="Maven-é…ç½®æ–‡ä»¶"><a href="#Maven-é…ç½®æ–‡ä»¶" class="headerlink" title="Maven é…ç½®æ–‡ä»¶"></a>Maven é…ç½®æ–‡ä»¶</h3><ul><li><code>pom.xml</code> çš„æ ¸å¿ƒé…ç½®å†…å®¹å¦‚ä¸‹ </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring-boot.version</span>&gt;</span>2.7.11<span class="tag">&lt;/<span class="name">spring-boot.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mybatis-plus.version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">mybatis-plus.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2.version</span>&gt;</span>2.1.214<span class="tag">&lt;/<span class="name">h2.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- web --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- mybatis-plus --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>${mybatis-plus.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- h2 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>${h2.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- spring-boot --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>${spring-boot.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="SQL-æ˜ å°„æ–‡ä»¶"><a href="#SQL-æ˜ å°„æ–‡ä»¶" class="headerlink" title="SQL æ˜ å°„æ–‡ä»¶"></a>SQL æ˜ å°„æ–‡ä»¶</h3><ul><li><code>UserMapper.xml</code>ï¼ŒMyBatis çš„ SQL æ˜ å°„æ–‡ä»¶ </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.clay.h2.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"clear"</span>&gt;</span></span><br><span class="line">        truncate table `t_user`</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="SQL-åˆå§‹åŒ–è„šæœ¬æ–‡ä»¶"><a href="#SQL-åˆå§‹åŒ–è„šæœ¬æ–‡ä»¶" class="headerlink" title="SQL åˆå§‹åŒ–è„šæœ¬æ–‡ä»¶"></a>SQL åˆå§‹åŒ–è„šæœ¬æ–‡ä»¶</h3><ul><li><code>schema.sql</code>ï¼Œç”¨äºåˆå§‹åŒ–æ•°æ®åº“çš„è¡¨ç»“æ„ </li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> `t_user` (</span><br><span class="line">`id`       <span class="type">int</span> <span class="keyword">primary</span> key auto_increment <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">`username` <span class="type">char</span> (<span class="number">50</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">`pwd`      <span class="type">char</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">`create_time` datetime <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">`update_time` datetime</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure><ul><li><code>data.sql</code>ï¼Œç”¨äºåˆå§‹åŒ–æ•°æ®åº“çš„è¡¨æ•°æ® </li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(id, username, pwd, create_time, update_time) <span class="keyword">values</span> (<span class="number">0</span>, <span class="string">'zhhangsan'</span>, <span class="string">'1222'</span>, {ts <span class="string">'2022-07-27 18:47:52.69'</span>}, {ts <span class="string">'2022-07-27 18:47:52.69'</span>});</span><br></pre></td></tr></tbody></table></figure><h3 id="SpringBoot-é…ç½®æ–‡ä»¶"><a href="#SpringBoot-é…ç½®æ–‡ä»¶" class="headerlink" title="SpringBoot é…ç½®æ–‡ä»¶"></a>SpringBoot é…ç½®æ–‡ä»¶</h3><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li>H2 æ•°æ®åº“æ”¯æŒå¤šç§è¿æ¥æ–¹å¼å’Œè¿æ¥è®¾ç½®ï¼Œè¿æ¥æ•°æ®åº“çš„ JDBC URL å¯¹å¤§å°å†™ä¸æ•æ„Ÿã€‚</li><li>å…³äº H2 çš„æ›´å¤š JDBC URL æ ¼å¼å’Œä½¿ç”¨ç¤ºä¾‹ï¼Œè¯·çœ‹ <a href="/posts/dfc4cb86.html#%E9%99%84%E5%BD%95">è¿™é‡Œ</a> çš„è¯¦ç»†ä»‹ç»ã€‚</li></ul></div><h4 id="é…ç½®å®Œæ•´æ¡ˆä¾‹"><a href="#é…ç½®å®Œæ•´æ¡ˆä¾‹" class="headerlink" title="é…ç½®å®Œæ•´æ¡ˆä¾‹"></a>é…ç½®å®Œæ•´æ¡ˆä¾‹</h4><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">h2-springboot-mybatis-plus</span></span><br><span class="line">  <span class="comment"># æ•°æ®æºé…ç½®</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.h2.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="comment"># mem è¡¨ç¤º H2 ä½¿ç”¨å†…å­˜æ•°æ®åº“ï¼ˆåº”ç”¨é‡å¯ä¼šä¸¢å¤±æ•°æ®ï¼‰</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:h2:mem:shopDb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">  <span class="comment"># æ•°æ®åº“åˆå§‹åŒ–</span></span><br><span class="line">  <span class="attr">sql:</span></span><br><span class="line">    <span class="attr">init:</span></span><br><span class="line">      <span class="attr">separator:</span> <span class="string">;</span></span><br><span class="line">      <span class="attr">encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">      <span class="attr">platform:</span> <span class="string">h2</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">always</span></span><br><span class="line">      <span class="attr">continue-on-error:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">schema-locations:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">classpath:db/schema.sql</span></span><br><span class="line">      <span class="attr">data-locations:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">classpath:db/data.sql</span></span><br><span class="line">  <span class="comment"># H2 çš„ Web æ§åˆ¶å°</span></span><br><span class="line">  <span class="attr">h2:</span></span><br><span class="line">    <span class="attr">console:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">settings:</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">/h2-console</span></span><br><span class="line">        <span class="attr">trace:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">web-allow-others:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mybatis-Plus</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:/mapper/**/*.xml</span></span><br><span class="line">  <span class="attr">typeAliasesPackage:</span> <span class="string">com.clay.*.entity</span></span><br><span class="line">  <span class="comment"># MyBatis-Plus é…ç½®</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">AUTO</span></span><br><span class="line">    <span class="attr">banner:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># MyBatis åŸç”Ÿé…ç½®</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">call-setters-on-nulls:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">jdbc-type-for-null:</span> <span class="string">'null'</span></span><br><span class="line">    <span class="comment"># æ‰“å° SQL è¯­å¥</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">H2 å†…å­˜æ•°æ®åº“</p><ul><li>è‹¥å¸Œæœ› H2 å°†æ•°æ®åº“è¡¨çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆåº”ç”¨é‡å¯åä¼šä¸¢å¤±æ•°æ®ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ•°æ®æºé…ç½®ä¿¡æ¯ã€‚</li></ul></div><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.h2.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:h2:mem:shopDb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">H2 æŒä¹…åŒ–æ•°æ®</p><ul><li>è‹¥å¸Œæœ› H2 æŒä¹…åŒ–æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ•°æ®æºé…ç½®ä¿¡æ¯ï¼ˆå¿…é¡»æŒ‡å®šæ•°æ®åº“çš„æ–‡ä»¶è·¯å¾„ï¼‰ã€‚</li></ul></div><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.h2.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:h2:file:/var/database/h2/shopDb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">H2 å…¼å®¹ MySQL</p><ul><li>è‹¥å¸Œæœ› H2 å…¼å®¹ MySQLï¼Œå¯ä»¥ä½¿ç”¨è¿æ¥å‚æ•° <code>MODE</code> æ¥å®ç°ã€‚</li><li>H2 å…¼å®¹å¤šç§æ•°æ®åº“ï¼Œ<code>MODE</code> å‚æ•°çš„å€¼å¯ä»¥ä¸ºï¼šDB2ã€Derbyã€HSQLDBã€MSSQLServerã€MySQLã€Oracleã€PostgreSQLã€‚</li></ul></div><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.h2.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:h2:file:/var/database/h2/shopDb;MODE=MYSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">H2 ä½¿ç”¨æ··åˆæ¨¡å¼</p><ul><li>è‹¥å¸Œæœ› H2 ä½¿ç”¨æ··åˆæ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ•°æ®æºé…ç½®ä¿¡æ¯ï¼ˆå¿…é¡»æŒ‡å®šæ•°æ®åº“çš„æ–‡ä»¶è·¯å¾„ï¼‰ã€‚</li><li>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒH2 æ•°æ®åº“åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªå®¢æˆ·ç«¯è®¿é—®ï¼›è®¾ç½® <code>AUTO_SERVER=TRUE</code> è¡¨ç¤ºå¯ç”¨æ··åˆæ¨¡å¼ï¼Œå…è®¸å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥åŒä¸€ä¸ª H2 æ•°æ®åº“ï¼Œè¯¥å‚æ•°ä¸æ”¯æŒåœ¨å†…å­˜ä¸­è¿è¡Œçš„ H2 æ•°æ®åº“ã€‚</li></ul></div><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.h2.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:h2:/var/database/h2/shopDb;AUTO_SERVER=TRUE;DB_CLOSE_DELAY=-1;AUTO_RECONNECT=TRUE</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition warning"><p class="admonition-title">SpringBoot ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„é…ç½®å·®å¼‚</p><ul><li>ä½¿ç”¨ SpringBoot ä½ç‰ˆæœ¬æ—¶ï¼ˆå¦‚ <code>2.3.5</code> ç‰ˆæœ¬ï¼‰ï¼Œè‹¥å¸Œæœ›åº”ç”¨åœ¨å¯åŠ¨çš„æ—¶å€™åˆå§‹åŒ–æ•°æ®åº“ï¼Œåˆ™éœ€è¦ä½¿ç”¨ä»¥ä¸‹çš„é…ç½®ä¿¡æ¯ã€‚</li></ul></div><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">continue-on-error:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–æ¨¡å¼</span></span><br><span class="line">    <span class="attr">initialization-mode:</span> <span class="string">always</span></span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–è¡¨</span></span><br><span class="line">    <span class="attr">schema:</span> <span class="string">classpath:db/schema.sql</span></span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–æ•°æ®</span></span><br><span class="line">    <span class="attr">data:</span> <span class="string">classpath:db/data.sql</span></span><br></pre></td></tr></tbody></table></figure><table><thead><tr><th>æ•°æ®åº“åˆå§‹åŒ–å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>spring.datasource.schema</code></td><td>DDL è¡¨åˆå§‹åŒ–è¯­å¥ï¼Œç”¨äºåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ï¼Œé»˜è®¤åŠ è½½ <code>schema.sql</code> æ–‡ä»¶</td></tr><tr><td><code>spring.datasource.data</code></td><td>DML æ•°æ®æ’å…¥è¯­å¥ï¼Œå®ƒç”¨äºåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶å‘æ•°æ®åº“è¡¨ä¸­æ’å…¥ä¸€äº›åˆå§‹åŒ–æ•°æ®ï¼Œé»˜è®¤åŠ è½½ <code>data.sql</code> æ–‡ä»¶</td></tr><tr><td><code>spring.datasource.continue-on-error</code></td><td>æŒ‡å®šåœ¨åˆå§‹åŒ–æ•°æ®åº“æ—¶ï¼Œæ˜¯å¦é‡åˆ°é”™è¯¯åç»§ç»­æ‰§è¡Œåˆå§‹åŒ–æ“ä½œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å±æ€§å€¼ä¸º <code>false</code>ï¼Œå³é‡åˆ°é”™è¯¯æ—¶ä¼šåœæ­¢åˆå§‹åŒ–æ“ä½œã€‚ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœé‡åˆ°é”™è¯¯åç»§ç»­æ‰§è¡Œï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“ç»“æ„ä¸å®Œæ•´æˆ–æ•°æ®ä¸ä¸€è‡´ï¼Œå› æ­¤è¯·è°¨æ…ä½¿ç”¨æ­¤å±æ€§ã€‚</td></tr><tr><td><code>spring.datasource.initialization-mode</code></td><td>æ•°æ®åº“çš„åˆå§‹åŒ–æ¨¡å¼ï¼Œ<code>never</code> è¡¨ç¤ºä»ä¸åˆå§‹åŒ–ï¼Œ<code>embedded</code> è¡¨ç¤ºä»…åˆå§‹åŒ–åµŒå…¥å¼çš„æ•°æ®åº“ï¼Œ<code>always</code> è¡¨ç¤ºå§‹ç»ˆåˆå§‹åŒ–æ•°æ®åº“ï¼Œé»˜è®¤å€¼æ˜¯ <code>embedded</code>ã€‚ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœæ•°æ®åº“å·²ç»å­˜åœ¨ç›¸åº”çš„è¡¨ï¼Œ<code>always</code> æ¨¡å¼ä¸‹ä¹Ÿä¼šé‡æ–°æ‰§è¡Œ SQL åˆå§‹åŒ–è„šæœ¬ï¼Œè¯·è°¨æ…ä½¿ç”¨æ­¤æ¨¡å¼ï¼Œå¦åˆ™å¯èƒ½ä¼šä¸¢å¤±æ•°æ®ã€‚</td></tr></tbody></table><h4 id="é…ç½®å‚æ•°è¯´æ˜"><a href="#é…ç½®å‚æ•°è¯´æ˜" class="headerlink" title="é…ç½®å‚æ•°è¯´æ˜"></a>é…ç½®å‚æ•°è¯´æ˜</h4><table><thead><tr><th>æ•°æ®æºé…ç½®å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>spring.datasource.url</code></td><td>è¿æ¥æ•°æ®åº“çš„ URL</td></tr><tr><td><code>spring.datasource.username</code></td><td>æ•°æ®åº“çš„ç”¨æˆ·å</td></tr><tr><td><code>spring.datasource.password</code></td><td>æ•°æ®åº“çš„å¯†ç </td></tr><tr><td><code>spring.datasource.driver-class-name</code></td><td>é©±åŠ¨ç±»çš„å…¨é™å®šå</td></tr><tr><td><code>spring.datasource.type</code></td><td>æ•°æ®æºç±»å‹ï¼ˆè¿æ¥æ± ï¼‰çš„å…¨é™å®šå</td></tr></tbody></table><hr><table><thead><tr><th>æ•°æ®åº“åˆå§‹åŒ–å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>spring.sql.init.separator</code></td><td>æŒ‡å®š SQL è¯­å¥çš„æ–­å¥åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºåˆ†å· <code>;</code>ã€‚å¦‚æœ SQL è¯­å¥ä¸­åŒ…å«å­˜å‚¨è¿‡ç¨‹æˆ–æ¸¸æ ‡ç­‰è¯­å¥ï¼Œåˆ™éœ€è¦å°†è¯¥å±æ€§æ›´æ”¹ä¸ºé€‚å½“çš„åˆ†éš”ç¬¦ï¼Œä¾‹å¦‚ <code>$$</code></td></tr><tr><td><code>spring.sql.init.encoding</code></td><td>æŒ‡å®š SQL æ–‡ä»¶çš„ç¼–ç æ–¹å¼ï¼Œé»˜è®¤ä¸º <code>UTF-8</code></td></tr><tr><td><code>spring.sql.init.platform</code></td><td>æŒ‡å®š SQL æ–¹è¨€ï¼Œé»˜è®¤ä¸ºæ‰€æœ‰æ–¹è¨€é€šç”¨</td></tr><tr><td><code>spring.sql.init.mode</code></td><td>æ•°æ®åº“çš„åˆå§‹åŒ–æ¨¡å¼ï¼Œ<code>never</code> è¡¨ç¤ºä»ä¸åˆå§‹åŒ–ï¼Œ<code>embedded</code> è¡¨ç¤ºä»…åˆå§‹åŒ–åµŒå…¥å¼çš„æ•°æ®åº“ï¼Œ<code>always</code> è¡¨ç¤ºå§‹ç»ˆåˆå§‹åŒ–æ•°æ®åº“ï¼Œé»˜è®¤å€¼æ˜¯ <code>embedded</code>ã€‚ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœæ•°æ®åº“å·²ç»å­˜åœ¨ç›¸åº”çš„è¡¨ï¼Œ<code>always</code> æ¨¡å¼ä¸‹ä¹Ÿä¼šé‡æ–°æ‰§è¡Œ SQL åˆå§‹åŒ–è„šæœ¬ï¼Œè¯·è°¨æ…ä½¿ç”¨æ­¤æ¨¡å¼ï¼Œå¦åˆ™å¯èƒ½ä¼šä¸¢å¤±æ•°æ®ã€‚</td></tr><tr><td><code>spring.sql.init.schema-locations</code></td><td>DDL è¡¨åˆå§‹åŒ–è¯­å¥ï¼Œç”¨äºåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ï¼Œé»˜è®¤åŠ è½½ <code>schema.sql</code> æ–‡ä»¶</td></tr><tr><td><code>spring.sql.init.data-locations</code></td><td>DML æ•°æ®æ’å…¥è¯­å¥ï¼Œå®ƒç”¨äºåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶å‘æ•°æ®åº“è¡¨ä¸­æ’å…¥ä¸€äº›åˆå§‹åŒ–æ•°æ®ï¼Œé»˜è®¤åŠ è½½ <code>data.sql</code> æ–‡ä»¶</td></tr><tr><td><code>spring.sql.init.continue-on-error</code></td><td>æŒ‡å®šåœ¨åˆå§‹åŒ–æ•°æ®åº“æ—¶ï¼Œæ˜¯å¦é‡åˆ°é”™è¯¯åç»§ç»­æ‰§è¡Œåˆå§‹åŒ–æ“ä½œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å±æ€§å€¼ä¸º <code>false</code>ï¼Œå³é‡åˆ°é”™è¯¯æ—¶ä¼šåœæ­¢åˆå§‹åŒ–æ“ä½œã€‚ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœé‡åˆ°é”™è¯¯åç»§ç»­æ‰§è¡Œï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“ç»“æ„ä¸å®Œæ•´æˆ–æ•°æ®ä¸ä¸€è‡´ï¼Œå› æ­¤è¯·è°¨æ…ä½¿ç”¨æ­¤å±æ€§ã€‚</td></tr></tbody></table><hr><table><thead><tr><th>H2 æ•°æ®åº“è¿æ¥å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>AUTO_SERVER=TRUE</code></td><td>å¯ç”¨æ··åˆæ¨¡å¼ï¼Œå…è®¸å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥åŒä¸€ä¸ª H2 æ•°æ®åº“ï¼Œè¯¥å‚æ•°ä¸æ”¯æŒåœ¨å†…å­˜ä¸­è¿è¡Œçš„ H2 æ•°æ®åº“</td></tr><tr><td><code>MODE=MYSQL</code></td><td>å…¼å®¹ MySQL æ•°æ®åº“ï¼Œè¯¥å‚æ•°å€¼å¯ä»¥ä¸ºï¼šDB2ã€Derbyã€HSQLDBã€MSSQLServerã€MySQLã€Oracleã€PostgreSQL</td></tr><tr><td><code>DB_CLOSE_ON_EXIT=FALSE</code></td><td>å½“è™šæ‹Ÿæœºé€€å‡ºæ—¶ï¼Œå¹¶ä¸å…³é—­æ•°æ®åº“</td></tr><tr><td><code>DB_CLOSE_DELAY=-1</code></td><td>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æœ€åä¸€ä¸ªè¿æ¥å…³é—­åï¼ŒH2 æ•°æ®åº“ä¼šè‡ªåŠ¨å…³é—­ã€‚ä¸ºäº†æé«˜æ•°æ®åº“çš„æ€§èƒ½ï¼Œå¯ä»¥æ§åˆ¶å»¶è¿Ÿä¸€å®šçš„ç§’æ•°åå†å…³é—­æ•°æ®åº“ã€‚å½“å€¼è®¾ç½®ä¸º 10ï¼Œè¡¨ç¤ºå»¶è¿Ÿ 10 ç§’ å†å…³é—­æ•°æ®åº“ï¼Œå½“è®¾ç½®ä¸º -1ï¼Œè¡¨ç¤ºç¦ç”¨æ•°æ®åº“è‡ªåŠ¨å…³é—­çš„åŠŸèƒ½ã€‚</td></tr><tr><td><code>AUTO_RECONNECT=TRUE</code></td><td>è¿æ¥ä¸¢å¤±åè‡ªåŠ¨é‡æ–°è¿æ¥</td></tr><tr><td><code>TRACE_LEVEL_SYSTEM_OUT=1</code></td><td>è¾“å‡ºè·Ÿè¸ªæ—¥å¿—åˆ°æ§åˆ¶å°çš„æ—¥å¿—çº§åˆ«ï¼Œå–å€¼ 0 ä¸º OFFï¼Œ1 ä¸º ERRORï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œ2 ä¸º INFOï¼Œ3 ä¸º DEBUG</td></tr><tr><td><code>TRACE_LEVEL_FILE=1</code></td><td>è¾“å‡ºè·Ÿè¸ªæ—¥å¿—åˆ°æ–‡ä»¶çš„æ—¥å¿—çº§åˆ«ï¼Œå–å€¼ 0 ä¸º OFFï¼Œ1 ä¸º ERRORï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œ2 ä¸º INFOï¼Œ3 ä¸º DEBUG</td></tr></tbody></table><hr><table><thead><tr><th>H2 çš„ Web æ§åˆ¶å°å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>spring.h2.console.enabled</code></td><td>å¯ç”¨ H2 çš„ Web æ§åˆ¶å°</td></tr><tr><td><code>spring.h2.console.settings.path</code></td><td>æŒ‡å®š H2 çš„ Web æ§åˆ¶å°çš„è®¿é—®è·¯å¾„</td></tr><tr><td><code>spring.h2.console.settings.trace</code></td><td>å¼€å¯ H2 çš„ Web æ§åˆ¶å°çš„æ—¥å¿—è·Ÿè¸ªï¼Œæ–¹ä¾¿å¼€å‘è°ƒè¯•</td></tr><tr><td><code>spring.h2.console.settings.web-allow-others</code></td><td>å…è®¸ H2 çš„ Web æ§åˆ¶å°çš„è¿œç¨‹è®¿é—®</td></tr></tbody></table><h2 id="é¡¹ç›®ä»£ç "><a href="#é¡¹ç›®ä»£ç " class="headerlink" title="é¡¹ç›®ä»£ç "></a>é¡¹ç›®ä»£ç </h2><h3 id="Util-ç±»ä»£ç "><a href="#Util-ç±»ä»£ç " class="headerlink" title="Util ç±»ä»£ç "></a>Util ç±»ä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Result</span>&lt;<span class="title">T</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer code = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Result</span><span class="params">(T data)</span> </span>{</span><br><span class="line"><span class="keyword">this</span>.data = data;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Entity-ç±»ä»£ç "><a href="#Entity-ç±»ä»£ç " class="headerlink" title="Entity ç±»ä»£ç "></a>Entity ç±»ä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@TableName("t_user")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>{</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·ä¸»é”®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@TableId(value = "id", type = IdType.AUTO)</span></span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·åç§°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@TableField("username")</span></span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯†ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºæ—¶é—´</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@JsonFormat(timezone = "GMT+8", pattern = "yyyy-MM-dd HH:mm:ss")</span></span><br><span class="line"><span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹æ—¶é—´</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@JsonFormat(timezone = "GMT+8", pattern = "yyyy-MM-dd HH:mm:ss")</span></span><br><span class="line"><span class="keyword">private</span> Date updateTime;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Mapper-ç±»ä»£ç "><a href="#Mapper-ç±»ä»£ç " class="headerlink" title="Mapper ç±»ä»£ç "></a>Mapper ç±»ä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¸…ç©ºè¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Service-ç±»ä»£ç "><a href="#Service-ç±»ä»£ç " class="headerlink" title="Service ç±»ä»£ç "></a>Service ç±»ä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">User</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Result <span class="title">getByPage</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–°å¢è®°å½•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Result <span class="title">add</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¸…ç©ºæ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Result <span class="title">clear</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">UserMapper</span>, <span class="title">User</span>&gt; <span class="keyword">implements</span> <span class="title">UserService</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">getByPage</span><span class="params">()</span> </span>{</span><br><span class="line">        Page&lt;User&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">"username"</span>, <span class="string">"zhhangsan"</span>);</span><br><span class="line">        <span class="keyword">this</span>.page(page, wrapper);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(page.getRecords());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">add</span><span class="params">(User user)</span> </span>{</span><br><span class="line">        user.setCreateTime(<span class="keyword">new</span> Date());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">this</span>.save(user));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">clear</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.baseMapper.clear();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Controller-ç±»ä»£ç "><a href="#Controller-ç±»ä»£ç " class="headerlink" title="Controller ç±»ä»£ç "></a>Controller ç±»ä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/user")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>{</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping("/page")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">getByPage</span><span class="params">()</span> </span>{</span><br><span class="line"><span class="keyword">return</span> userService.getByPage();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping("/add")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">add</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> </span>{</span><br><span class="line"><span class="keyword">return</span> userService.add(user);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@DeleteMapping("/clear")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">clear</span><span class="params">()</span> </span>{</span><br><span class="line"><span class="keyword">return</span> userService.clear();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="MyBatis-Plus-é…ç½®ç±»ä»£ç "><a href="#MyBatis-Plus-é…ç½®ç±»ä»£ç " class="headerlink" title="MyBatis-Plus é…ç½®ç±»ä»£ç "></a>MyBatis-Plus é…ç½®ç±»ä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan("com.clay.h2.mapper")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisPlusConfig</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæ’ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>{</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.H2));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="é¡¹ç›®æµ‹è¯•"><a href="#é¡¹ç›®æµ‹è¯•" class="headerlink" title="é¡¹ç›®æµ‹è¯•"></a>é¡¹ç›®æµ‹è¯•</h2><h3 id="è®¿é—®-H2-çš„-Web-æ§åˆ¶å°"><a href="#è®¿é—®-H2-çš„-Web-æ§åˆ¶å°" class="headerlink" title="è®¿é—® H2 çš„ Web æ§åˆ¶å°"></a>è®¿é—® H2 çš„ Web æ§åˆ¶å°</h3><p>å¯åŠ¨ SpringBoot é¡¹ç›®åï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—® <code>http://127.0.0.1:8080/h2-console</code>ï¼Œè‹¥ H2 çš„ Web æ§åˆ¶å°èƒ½æ­£å¸¸è®¿é—®ï¼Œä¸”è¿æ¥ H2 æ•°æ®åº“åèƒ½çœ‹åˆ°å·²åˆ›å»ºçš„æ•°æ®åº“è¡¨ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œåˆ™è¯´æ˜å†…åµŒçš„ H2 æ•°æ®åº“å¯åŠ¨æˆåŠŸã€‚</p><div class="admonition note"><p class="admonition-title">H2 æ•°æ®åº“è¿æ¥</p><ul><li>åœ¨æµè§ˆå™¨é¡µé¢è¿æ¥ H2 æ•°æ®åº“æ—¶ï¼Œä½¿ç”¨çš„è´¦å·ã€å¯†ç ä¸ <code>JDBC URL</code> éƒ½æ˜¯åœ¨ SpringBoot çš„é…ç½®æ–‡ä»¶ <code>application.yml</code> ä¸­æŒ‡å®šçš„ã€‚</li></ul></div><p><img data-src="../../../asset/2023/05/h2database-4.png"></p><p><img data-src="../../../asset/2023/05/h2database-1.png"></p><p><img data-src="../../../asset/2023/05/h2database-2.png"></p><h3 id="API-æ¥å£è°ƒç”¨"><a href="#API-æ¥å£è°ƒç”¨" class="headerlink" title="API æ¥å£è°ƒç”¨"></a>API æ¥å£è°ƒç”¨</h3><p>å¯åŠ¨ SpringBoot é¡¹ç›®åï¼Œä½¿ç”¨ PostMan ç­‰å·¥å…·æµ‹è¯•ä»¥ä¸‹æ¥å£ï¼Œè‹¥èƒ½å¾—åˆ°æ­£å¸¸çš„å“åº”ç»“æœï¼Œåˆ™è¯´æ˜ MyBatis-Plus æˆåŠŸè¿æ¥å¹¶æ“ä½œ H2 æ•°æ®åº“ã€‚</p><table><thead><tr><th>API åç§°</th><th> API åœ°å€</th><th>è¯·æ±‚æ–¹æ³•</th></tr></thead><tbody><tr><td>æ–°å¢ç”¨æˆ· </td><td><a href="http://127.0.0.1:8080/user/add/">http://127.0.0.1:8080/user/add/</a></td><td>POST</td></tr><tr><td> åˆ†é¡µæŸ¥è¯¢ç”¨æˆ· </td><td><a href="http://127.0.0.1:8080/user/page/">http://127.0.0.1:8080/user/page/</a></td><td>GET</td></tr><tr><td> åˆ é™¤æ‰€æœ‰ç”¨æˆ· </td><td><a href="http://127.0.0.1:8080/user/clear/">http://127.0.0.1:8080/user/clear/</a></td><td>DELETE</td></tr></tbody></table><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="ç‰ˆæœ¬å…¼å®¹é—®é¢˜"><a href="#ç‰ˆæœ¬å…¼å®¹é—®é¢˜" class="headerlink" title="ç‰ˆæœ¬å…¼å®¹é—®é¢˜"></a>ç‰ˆæœ¬å…¼å®¹é—®é¢˜</h3><p>å½“è®¿é—®ä¸€ä¸ªåˆ«äººåˆ›å»ºå¥½çš„æœ¬åœ° H2 æ•°æ®åº“æ–‡ä»¶ï¼Œæ­¤æ—¶å¾ˆæœ‰å¯èƒ½é»˜è®¤çš„ H2 ç‰ˆæœ¬ä¸å…¼å®¹å¯¼è‡´ SpringBoot åº”ç”¨å¯åŠ¨æŠ¥é”™ï¼ˆå¦‚ä¸‹ï¼‰</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.h2.jdbc.JdbcSQLNonTransientException: General error: "java.lang.IllegalStateException: Unable to read the page at position 70368748811782 [1.4.200/6]" [50000-200]</span><br></pre></td></tr></tbody></table></figure><p>è§£å†³æ–¹æ³•æ˜¯å¼„æ¸…æ¥šå¯¹æ–¹æœ¬åœ°çš„æ•°æ®åº“æ–‡ä»¶æ˜¯ H2 å“ªä¸ªç‰ˆæœ¬åˆ›å»ºçš„ï¼Œç„¶åæ‰‹åŠ¨æŒ‡å®š Maven é…ç½®æ–‡ä»¶ä¸­çš„ H2 ç‰ˆæœ¬å·å³å¯ï¼ˆå¦‚ä¸‹ï¼‰</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.214<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://blog.csdn.net/kanpiaoxue/article/details/84925846">H2 å…¼å®¹ MySQL</a></li><li><a href="https://www.cnblogs.com/GarfieldEr007/p/10198030.html">å†…å­˜æ•°æ®åº“ï¼H2 ç®€ä»‹ä¸å®è·µ</a></li><li><a href="https://blog.csdn.net/qq_35760825/article/details/130421129">SpringBoot å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨</a></li><li><a href="https://blog.csdn.net/u011047968/article/details/125999917">SpringBoot é›†æˆ MybatisPlusã€H2 çº¯å†…å­˜æ•°æ®åº“å®æˆ˜</a></li></ul>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç» SpringBoot å¦‚ä½•æ•´åˆ MyBatis-Plus ä¸ H2 æ•°æ®åº“ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="Java" scheme="https://www.techgrow.cn/tags/Java/"/>
    
    <category term="æ•°æ®åº“" scheme="https://www.techgrow.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>H2 æ•°æ®åº“åŸºç¡€ä½¿ç”¨æ•™ç¨‹</title>
    <link href="https://www.techgrow.cn/posts/dfc4cb86.html"/>
    <id>https://www.techgrow.cn/posts/dfc4cb86.html</id>
    <published>2023-05-02T15:12:41.000Z</published>
    <updated>2023-05-02T15:12:41.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h2 id="å¤§çº²"><a href="#å¤§çº²" class="headerlink" title="å¤§çº²"></a>å¤§çº²</h2><ul><li><a href="/posts/dfc4cb86.html">H2 æ•°æ®åº“åŸºç¡€ä½¿ç”¨æ•™ç¨‹</a></li><li><a href="/posts/afd4ab85.html">SpringBoot æ•´åˆ MyBatis-Plus ä¸ H2 æ•™ç¨‹</a></li></ul><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å¼€å‘æˆ–å­¦ä¹ æ—¶ï¼Œæœ‰æ—¶å€™æƒ³ç¼–å†™ä¸€ä¸ªæ•°æ®åº“æ“ä½œçš„å° Demoï¼Œä½†åˆä¸æƒ³åˆ©ç”¨ MySQLã€Oracle ç­‰æ•°æ®åº“è¿›è¡Œå»ºåº“å»ºè¡¨æ“ä½œï¼Œå› ä¸ºåªæƒ³å†™ä¸ªå°æ¡ˆä¾‹ï¼Œæ„Ÿè§‰æ²¡å¿…è¦å¼„ä¸ªå¾ˆå¤§å¾ˆéº»çƒ¦çš„æ•°æ®åº“ã€‚è€Œä¸”è¿™ä¸ªæ¡ˆä¾‹ä¸­çš„æ•°æ®ç”¨å®Œä¹‹åå°±ä¸å†éœ€è¦äº†ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦è¿›è¡Œæ•°æ®çš„æŒä¹…åŒ–æ“ä½œã€‚é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ¡ˆå¯ä»¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼ŒH2 æ˜¯ä¸€æ¬¾å†…å­˜æ•°æ®åº“ï¼Œé€‚åˆåœ¨å­¦ä¹ é˜¶æ®µã€å¼€å‘é˜¶æ®µè°ƒè¯•ä»£ç ä½¿ç”¨ï¼Œå¹¶ä¸é€‚ç”¨äºç”Ÿäº§é˜¶æ®µï¼Œå¯ä»¥æ»¡è¶³å­¦ä¹ ä¸è°ƒè¯•ä»£ç çš„éœ€æ±‚ã€‚</p><span id="more"></span><h2 id="H2-åŸºç¡€ä½¿ç”¨"><a href="#H2-åŸºç¡€ä½¿ç”¨" class="headerlink" title="H2 åŸºç¡€ä½¿ç”¨"></a>H2 åŸºç¡€ä½¿ç”¨</h2><h3 id="H2-çš„ä»‹ç»"><a href="#H2-çš„ä»‹ç»" class="headerlink" title="H2 çš„ä»‹ç»"></a>H2 çš„ä»‹ç»</h3><h4 id="H2-ç®€ä»‹"><a href="#H2-ç®€ä»‹" class="headerlink" title="H2 ç®€ä»‹"></a>H2 ç®€ä»‹</h4><p><a href="https://h2database.com/">H2</a> æ•°æ®åº“æ˜¯ä¸€ä¸ªç”¨ Java å¼€å‘çš„å†…åµŒå¼ (å†…å­˜çº§åˆ«) å…³ç³»å‹æ•°æ®åº“ï¼Œå®ƒæœ¬èº«åªæ˜¯ä¸€ä¸ªç±»åº“ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ä¸€ä¸ª Jar æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥åµŒå…¥åˆ° Java é¡¹ç›®ä¸­ã€‚H2 æ•°æ®åº“åˆè¢«ç§°ä¸ºå†…å­˜æ•°æ®åº“ï¼Œå› ä¸ºå®ƒæ”¯æŒåœ¨å†…å­˜ä¸­åˆ›å»ºæ•°æ®åº“å’Œè¡¨ã€‚æ‰€ä»¥å¦‚æœä½¿ç”¨ H2 æ•°æ®åº“çš„å†…å­˜æ¨¡å¼ï¼Œé‚£ä¹ˆåˆ›å»ºçš„æ•°æ®åº“å’Œè¡¨éƒ½åªæ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸€æ—¦æœåŠ¡å™¨é‡å¯ï¼Œé‚£ä¹ˆå†…å­˜ä¸­çš„æ•°æ®åº“å’Œè¡¨å°†ä¸å­˜åœ¨äº†ã€‚</p><h4 id="H2-ä¼˜ç‚¹"><a href="#H2-ä¼˜ç‚¹" class="headerlink" title="H2 ä¼˜ç‚¹"></a>H2 ä¼˜ç‚¹</h4><ul><li>çº¯ Java ç¼–å†™ï¼Œä¸å—å¹³å°çš„é™åˆ¶ï¼›</li><li>åªæœ‰ä¸€ä¸ª Jar æ–‡ä»¶ï¼Œé€‚åˆä½œä¸ºåµŒå…¥å¼æ•°æ®åº“ä½¿ç”¨ï¼›</li><li>H2 æä¾›äº†ä¸€ä¸ªååˆ†æ–¹ä¾¿çš„ Web æ§åˆ¶å°ç”¨äºæ“ä½œå’Œç®¡ç†æ•°æ®åº“ï¼›</li><li>åŠŸèƒ½å®Œæ•´ï¼Œæ”¯æŒæ ‡å‡† SQL å’Œ JDBCï¼Œéº»é›€è™½å°äº”è„ä¿±å…¨ï¼›</li><li>æ”¯æŒå†…åµŒæ¨¡å¼ã€æœåŠ¡å™¨æ¨¡å¼å’Œé›†ç¾¤ï¼›</li></ul><h4 id="H2-ç”¨é€”"><a href="#H2-ç”¨é€”" class="headerlink" title="H2 ç”¨é€”"></a>H2 ç”¨é€”</h4><p>H2 ä¸»è¦æœ‰å¦‚ä¸‹ä¸‰ä¸ªç”¨é€”ï¼š</p><ul><li>æœ€å¸¸ä½¿ç”¨çš„ç”¨é€”å°±åœ¨äºå¯ä»¥åŒåº”ç”¨ç¨‹åºä¸€èµ·æ‰“åŒ…å‘å¸ƒï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å­˜å‚¨å°‘é‡çš„ç»“æ„åŒ–æ•°æ®ï¼›</li><li>å¯ä»¥ç”¨äºå•å…ƒæµ‹è¯•ï¼ŒH2 å¯åŠ¨é€Ÿåº¦å¿«ï¼Œè€Œä¸”å¯ä»¥å…³é—­æŒä¹…åŒ–åŠŸèƒ½ï¼Œæ¯ä¸€ä¸ªç”¨ä¾‹æ‰§è¡Œå®Œéšå³è¿˜åŸåˆ°åˆå§‹çŠ¶æ€ï¼›</li><li>å¯ä»¥ä½œä¸ºç¼“å­˜ï¼Œå³å½“å†…å­˜æ•°æ®åº“ä½¿ç”¨ï¼Œä½œä¸º NoSQL çš„ä¸€ä¸ªè¡¥å……ã€‚å½“æŸäº›åœºæ™¯ä¸‹æ•°æ®æ¨¡å‹å¿…é¡»ä¸ºå…³ç³»å‹ï¼Œå¯ä»¥æ‹¿å®ƒå……å½“ Memcached ä½¿ç”¨ï¼Œä½œä¸ºåç«¯ MySQL/Oracle çš„ä¸€ä¸ªç¼“å†²å±‚ï¼Œç¼“å­˜ä¸€äº›ä¸ç»å¸¸å˜åŒ–ä½†éœ€è¦é¢‘ç¹è®¿é—®çš„æ•°æ®ï¼Œæ¯”å¦‚å­—å…¸è¡¨ã€æƒé™è¡¨ç­‰ã€‚</li></ul><h4 id="H2-ä¸å…¶ä»–æ•°æ®åº“å¯¹æ¯”"><a href="#H2-ä¸å…¶ä»–æ•°æ®åº“å¯¹æ¯”" class="headerlink" title="H2 ä¸å…¶ä»–æ•°æ®åº“å¯¹æ¯”"></a>H2 ä¸å…¶ä»–æ•°æ®åº“å¯¹æ¯”</h4><div class="admonition note"><p class="admonition-title">æç¤º</p><p>å®Œæ•´çš„æ•°æ®åº“å¯¹æ¯”å›¾è¡¨è¯·ç‚¹å‡» <a href="../../../asset/2023/05/h2-study-5.jpg">è¿™é‡Œ</a> æŸ¥çœ‹ã€‚</p></div><p><img data-src="../../../asset/2023/05/h2-study-4.png"></p><h3 id="H2-çš„-3-ç§è¿è¡Œæ¨¡å¼"><a href="#H2-çš„-3-ç§è¿è¡Œæ¨¡å¼" class="headerlink" title="H2 çš„ 3 ç§è¿è¡Œæ¨¡å¼"></a>H2 çš„ 3 ç§è¿è¡Œæ¨¡å¼</h3><h4 id="å†…åµŒæ¨¡å¼-Embedded-Mode"><a href="#å†…åµŒæ¨¡å¼-Embedded-Mode" class="headerlink" title="å†…åµŒæ¨¡å¼ (Embedded Mode)"></a>å†…åµŒæ¨¡å¼ (Embedded Mode)</h4><p>ä½¿ç”¨ JDBC çš„æœ¬åœ°è¿æ¥ã€‚åœ¨å†…åµŒæ¨¡å¼ä¸‹ï¼Œåº”ç”¨ç¨‹åºå’Œ H2 æ•°æ®åº“å¤„åœ¨åŒä¸€ä¸ª JVM ä¸­ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡ JDBC è¿æ¥æ•°æ®åº“ã€‚å†…åµŒæ¨¡å¼å¯ä»¥å®ç°æŒä¹…åŒ–ï¼Œä½†åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“ã€‚å†…åµŒæ¨¡å¼æ˜¯æœ€å¿«ä¹Ÿæ˜¯æœ€å®¹æ˜“çš„è¿æ¥æ–¹å¼ï¼Œæ€§èƒ½ä¹Ÿæ¯”è¾ƒå¥½ã€‚ç¼ºç‚¹æ˜¯æ•°æ®åº“æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œéƒ½åªèƒ½åœ¨ä¸€ä¸ªè™šæ‹Ÿæœºï¼ˆå’Œç±»åŠ è½½å™¨ï¼‰ä¸­æ‰“å¼€ã€‚å†…åµŒæ¨¡å¼ä¸æ‰€æœ‰æ¨¡å¼ä¸€æ ·ï¼Œæ”¯æŒæŒä¹…åŒ–å’Œå†…å­˜æ•°æ®åº“ã€‚å¯¹å¹¶å‘æ‰“å¼€æ•°æ®åº“çš„æ•°é‡æˆ–è€…æ‰“å¼€è¿æ¥çš„æ•°é‡æ²¡æœ‰é™åˆ¶ã€‚</p><p><img data-src="../../../asset/2023/05/h2-study-1.png"></p><h4 id="æœåŠ¡å™¨æ¨¡å¼-Server-Mode"><a href="#æœåŠ¡å™¨æ¨¡å¼-Server-Mode" class="headerlink" title="æœåŠ¡å™¨æ¨¡å¼ (Server Mode)"></a>æœåŠ¡å™¨æ¨¡å¼ (Server Mode)</h4><p>ä½¿ç”¨ JDBC æˆ– ODBC åœ¨ TCP/IP åŸºç¡€ä¸Šçš„è¿œç¨‹è¿æ¥ã€‚ä½¿ç”¨æœåŠ¡å™¨æ¨¡å¼å’Œå†…åµŒæ¨¡å¼ä¸€æ ·ï¼Œåªä¸è¿‡å®ƒå¯ä»¥è·‘åœ¨å¦ä¸€ä¸ªè¿›ç¨‹é‡Œã€‚æœåŠ¡å™¨æ¨¡å¼æ¯”å†…åµŒæ¨¡å¼æ…¢ï¼Œå› ä¸ºæ‰€æœ‰æ•°æ®éƒ½é€šè¿‡ TCP/IP åè®®ä¼ è¾“ã€‚ä¸æ‰€æœ‰æ¨¡å¼ä¸€æ ·ï¼Œæ”¯æŒæŒä¹…åŒ–å’Œå†…å­˜æ•°æ®åº“ã€‚å¯¹æ¯ä¸ªæ•°æ®åº“æœåŠ¡å™¨å¹¶å‘æ‰“å¼€çš„æ•°æ®åº“æ•°é‡æˆ–è€…æ‰“å¼€è¿æ¥çš„æ•°é‡æ²¡æœ‰é™åˆ¶ã€‚</p><p><img data-src="../../../asset/2023/05/h2-study-2.png"></p><h4 id="æ··åˆæ¨¡å¼-Mixed-Mode"><a href="#æ··åˆæ¨¡å¼-Mixed-Mode" class="headerlink" title="æ··åˆæ¨¡å¼ (Mixed Mode)"></a>æ··åˆæ¨¡å¼ (Mixed Mode)</h4><p>æ··åˆæ¨¡å¼æ˜¯å†…åµŒæ¨¡å¼å’ŒæœåŠ¡å™¨æ¨¡å¼çš„ç»„åˆã€‚æ··åˆæ¨¡å¼é›†åˆäº†å†…åµŒæ¨¡å¼å’ŒæœåŠ¡æ¨¡å¼çš„ä¼˜ç‚¹ï¼Œä½¿å¾—æ•°æ®åº“çš„æ€§èƒ½å’Œå†…åµŒæ¨¡å¼ä¸€æ ·é«˜ï¼ŒåŒæ—¶åˆæ”¯æŒå¤šä¸ªåº”ç”¨åŒæ—¶è¿æ¥åŒä¸€ä¸ªæ•°æ®åº“ã€‚ç¬¬ä¸€ä¸ªåº”ç”¨é€šè¿‡å†…åµŒæ¨¡å¼ä¸æ•°æ®åº“å»ºç«‹è¿æ¥ï¼ŒåŒæ—¶ä¹Ÿä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡å™¨å¯åŠ¨ï¼Œè€Œå…¶ä»–çš„åº”ç”¨ (è¿è¡Œåœ¨ä¸åŒçš„è¿›ç¨‹æˆ–æ˜¯è™šæ‹Ÿæœºä¸Š) å¯ä»¥åŒæ—¶è®¿é—®åŒæ ·çš„æ•°æ®åº“ã€‚ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æœ¬åœ°è¿æ¥ä¸å†…åµŒæ¨¡å¼çš„è¿æ¥æ€§èƒ½ä¸€æ ·å¿«ï¼Œè€Œå…¶å®ƒåº”ç”¨çš„è¿æ¥æ€§èƒ½ç†è®ºä¸Šä¼šå·®ä¸€ç‚¹ã€‚H2 æœåŠ¡å™¨å¯ä»¥ä»åº”ç”¨ç¨‹åºå†…ï¼ˆä½¿ç”¨ H2 æœåŠ¡å™¨çš„ APIï¼‰å¯åŠ¨æˆ–åœæ­¢ï¼Œæˆ–è‡ªåŠ¨ï¼ˆè‡ªåŠ¨æ··åˆæ¨¡å¼ï¼‰ã€‚å½“ä½¿ç”¨è‡ªåŠ¨æ··åˆæ¨¡å¼æ—¶ï¼Œæ‰€æœ‰æƒ³è¦è¿æ¥åˆ°æ•°æ®åº“çš„å®¢æˆ·ç«¯ï¼ˆæ— è®ºæ˜¯æœ¬åœ°è¿æ¥è¿˜æ˜¯è¿œç¨‹è¿æ¥ï¼‰éƒ½å¯ä»¥ä½¿ç”¨å®Œå…¨ç›¸åŒçš„æ•°æ®åº“ URL æ¥å®ç°è¿æ¥ã€‚<strong>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒH2 åœ¨æ··åˆæ¨¡å¼ä¸‹ä¸æ”¯æŒå†…å­˜æ•°æ®åº“ï¼Œå³æ•°æ®åº“å¿…é¡»æŒä¹…åŒ–ã€‚</strong></p><p><img data-src="../../../asset/2023/05/h2-study-3.png"></p><h3 id="H2-çš„-3-ç§è¿æ¥æ–¹å¼"><a href="#H2-çš„-3-ç§è¿æ¥æ–¹å¼" class="headerlink" title="H2 çš„ 3 ç§è¿æ¥æ–¹å¼"></a>H2 çš„ 3 ç§è¿æ¥æ–¹å¼</h3><ul><li>ç¬¬ä¸€ç§è¿æ¥æ–¹å¼ï¼Œä»¥å†…åµŒæ¨¡å¼ (å†…å­˜) è¿æ¥ H2 æ•°æ®åº“ã€‚H2 æ”¯æŒåœ¨å†…å­˜ä¸­åˆ›å»ºæ•°æ®åº“å’Œè¡¨ã€‚ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ H2 æ•°æ®åº“çš„å†…å­˜æ¨¡å¼ï¼Œé‚£ä¹ˆåˆ›å»ºçš„æ•°æ®åº“å’Œè¡¨éƒ½åªæ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸€æ—¦æœåŠ¡å™¨é‡å¯ï¼Œé‚£ä¹ˆå†…å­˜ä¸­çš„æ•°æ®åº“å’Œè¡¨å°±ä¸å­˜åœ¨äº†ã€‚</li></ul><table><thead><tr><th>è¿æ¥è¯­æ³•</th><th>è¿æ¥ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>jdbc:h2:mem:&lt;databaseName&gt;</code></td><td><code>jdbc:h2:mem:testDb </code></td><td>æ•°æ®åº“çš„æ•°æ®åªå­˜åœ¨å†…å­˜ä¸­</td></tr></tbody></table><ul><li>ç¬¬äºŒç§è¿æ¥æ–¹å¼ï¼Œä»¥å†…åµŒæ¨¡å¼ (æœ¬åœ°æ–‡ä»¶) è¿æ¥ H2 æ•°æ®åº“ã€‚è¿™ç§è¿æ¥æ–¹å¼åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒä¸€æ—¶åˆ»åªå…è®¸æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ° H2 æ•°æ®åº“ã€‚å½“æœ‰å®¢æˆ·ç«¯è¿æ¥åˆ° H2 æ•°æ®åº“ä¹‹åï¼Œæ­¤æ—¶æ•°æ®åº“æ–‡ä»¶å°±ä¼šè¢«é”å®šï¼Œé‚£ä¹ˆå…¶ä»–å®¢æˆ·ç«¯å°±æ— æ³•å†å»ºç«‹è¿æ¥ã€‚</li></ul><table><thead><tr><th>è¿æ¥è¯­æ³•</th><th>è¿æ¥ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>jdbc:h2:[file:][&lt;path&gt;]&lt;databaseName&gt;</code></td><td><code>jdbc:h2:~/testDb</code>ï¼Œè¿æ¥ä½äºå½“å‰ç”¨æˆ·ç›®å½•ä¸‹çš„ <code>testDb</code> æ•°æ®åº“ <br> <code>jdbc:h2:file:./testDb</code>ï¼Œè¿æ¥ä½äºå½“å‰ç¨‹åºæ‰€åœ¨ç›®å½•ä¸‹çš„ <code>testDb</code> æ•°æ®åº“ <br> <code>jdbc:h2:file:/h2/data/testDb</code>ï¼Œé€‚ç”¨äº Linux ç³»ç»Ÿ <br> <code>jdbc:h2:file:E:/h2/data/testDb</code>ï¼Œé€‚ç”¨äº Windows ç³»ç»Ÿ</td><td>ä¼šå°†æ•°æ®åº“çš„æ•°æ®æŒä¹…åŒ–åˆ°æ–‡ä»¶ä¸­</td></tr><tr><td><code>jdbc:h2:[file:][&lt;path&gt;]&lt;databaseName&gt;;AUTO_SERVER=TRUE</code></td><td><code>jdbc:h2:~/testDb;AUTO_SERVER=TRUE</code> <br> <code>jdbc:h2:file:./testDb;AUTO_SERVER=TRUE</code> <br> <code>jdbc:h2:file:/h2/data/testDb;AUTO_SERVER=TRUE</code> <br> <code>jdbc:h2:file:E:/h2/data/testDb;AUTO_SERVER=TRUE</code></td><td>å¯ç”¨æ··åˆæ¨¡å¼ï¼Œå…è®¸å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥åŒä¸€ä¸ª H2 æ•°æ®åº“ï¼Œè¯¥å‚æ•°ä¸æ”¯æŒåœ¨å†…å­˜ä¸­è¿è¡Œçš„ H2 æ•°æ®åº“</td></tr></tbody></table><ul><li>ç¬¬ä¸‰ç§è¿æ¥æ–¹å¼ï¼Œä½¿ç”¨æ”¯æŒ TCP/IP çš„æœåŠ¡å™¨æ¨¡å¼ (è¿œç¨‹è¿æ¥) è¿æ¥ H2 æ•°æ®åº“ã€‚è¿™ç§è¿æ¥æ–¹å¼å’Œå…¶ä»–æ•°æ®åº“çš„è¿æ¥æ–¹å¼ç±»ä¼¼ï¼Œæ˜¯åŸºäº Service çš„å½¢å¼è¿›è¡Œè¿æ¥çš„ï¼Œå› æ­¤å…è®¸å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥åˆ° H2 æ•°æ®åº“ã€‚</li></ul><table><thead><tr><th>è¿æ¥è¯­æ³•</th><th>è¿æ¥ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>jdbc:h2:tcp://&lt;server&gt;[:&lt;port&gt;]/[&lt;path&gt;]&lt;databaseName&gt;</code></td><td><code>jdbc:h2:tcp://localhost/~/testDb</code></td><td></td></tr><tr><td><code>jdbc:h2:ssl://&lt;server&gt;[:&lt;port&gt;]/[&lt;path&gt;]&lt;databaseName&gt;</code></td><td><code>jdbc:h2:ssl://localhost/~/testDb</code></td><td>æ”¯æŒ SSL è¿æ¥</td></tr></tbody></table><h2 id="å®‰è£…-H2-çš„-Web-æ§åˆ¶å°"><a href="#å®‰è£…-H2-çš„-Web-æ§åˆ¶å°" class="headerlink" title="å®‰è£… H2 çš„ Web æ§åˆ¶å°"></a>å®‰è£… H2 çš„ Web æ§åˆ¶å°</h2><p>H2 çš„ Web æ§åˆ¶å°æ˜¯ä¸€ä¸ªåŸºäºæµè§ˆå™¨çš„ GUI æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç®¡ç† H2 æ•°æ®åº“ã€‚å®ƒçš„ä½œç”¨å°±ç›¸å½“äº PhpMyAdminï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥åœ¨å¼€å‘ç¯å¢ƒå¯åŠ¨ H2 çš„ Web æ§åˆ¶å°ã€‚</p><h3 id="H2-æ•°æ®åº“ä¸‹è½½åœ°å€"><a href="#H2-æ•°æ®åº“ä¸‹è½½åœ°å€" class="headerlink" title="H2 æ•°æ®åº“ä¸‹è½½åœ°å€"></a>H2 æ•°æ®åº“ä¸‹è½½åœ°å€</h3><p>å¯ä»¥åœ¨å®˜ç½‘ä¸Šé€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬è¿›è¡Œä¸‹è½½ï¼Œå¯ä»¥ä¸‹è½½å®‰è£…å™¨æˆ–è€…ç›´æ¥ä¸‹è½½è½¯ä»¶åŒ…ã€‚è¿™é‡Œå»ºè®®é€‰æ‹© <code>All Platforms</code> ç‰ˆæœ¬ï¼Œå› ä¸ºè§£å‹æ–‡ä»¶åï¼Œæ—¢å¯ç”¨äº Windows å¹³å°ï¼Œä¹Ÿå¯ç”¨äº Linux å¹³å° (å¦‚ä¸‹å›¾æ‰€ç¤º)ã€‚</p><div class="admonition note"><p class="admonition-title">ä¸‹è½½åœ°å€</p><ul><li><a href="http://www.h2database.com/html/main.html">http://www.h2database.com/html/main.html</a></li><li><a href="http://www.h2database.com/html/download.html">http://www.h2database.com/html/download.html</a></li><li><a href="http://www.h2database.com/html/download-archive.html">http://www.h2database.com/html/download-archive.html</a></li></ul></div><p><img data-src="../../../asset/2023/05/h2-study-6.png"></p><h3 id="H2-è½¯ä»¶åŒ…ç›®å½•ç»“æ„"><a href="#H2-è½¯ä»¶åŒ…ç›®å½•ç»“æ„" class="headerlink" title="H2 è½¯ä»¶åŒ…ç›®å½•ç»“æ„"></a>H2 è½¯ä»¶åŒ…ç›®å½•ç»“æ„</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">h2</span><br><span class="line">ã€€|---bin</span><br><span class="line">ã€€| |---h2-2.1.214.jarã€€ //H2æ•°æ®åº“çš„JaråŒ…ï¼ˆé©±åŠ¨ä¹Ÿåœ¨é‡Œé¢ï¼‰</span><br><span class="line">ã€€| |---h2.batã€€ã€€ //Windowsæ§åˆ¶å°å¯åŠ¨è„šæœ¬</span><br><span class="line">ã€€| |---h2.shã€€ã€€ //Linuxæ§åˆ¶å°å¯åŠ¨è„šæœ¬</span><br><span class="line">ã€€| |---h2w.batã€€ã€€//Windowsæ§åˆ¶å°å¯åŠ¨è„šæœ¬ï¼ˆä¸å¸¦é»‘å±çª—å£ï¼‰</span><br><span class="line">ã€€|---docsã€€ã€€ //H2æ•°æ®åº“çš„å¸®åŠ©æ–‡æ¡£ï¼ˆå†…æœ‰H2æ•°æ®åº“çš„ä½¿ç”¨æ‰‹å†Œï¼‰</span><br><span class="line">ã€€|---serviceã€€ã€€ //é€šè¿‡WrapperåŒ…è£…æˆæœåŠ¡</span><br><span class="line">ã€€|---srcã€€ã€€ //H2æ•°æ®åº“çš„æºä»£ç </span><br><span class="line">ã€€|---build.batã€€ //Windowsæ„å»ºè„šæœ¬</span><br><span class="line">ã€€|---build.shã€€ã€€//Linuxæ„å»ºè„šæœ¬</span><br></pre></td></tr></tbody></table></figure><h3 id="å¯åŠ¨-H2-çš„-Web-æ§åˆ¶å°"><a href="#å¯åŠ¨-H2-çš„-Web-æ§åˆ¶å°" class="headerlink" title="å¯åŠ¨ H2 çš„ Web æ§åˆ¶å°"></a>å¯åŠ¨ H2 çš„ Web æ§åˆ¶å°</h3><h4 id="Linux-å¹³å°å¯åŠ¨"><a href="#Linux-å¹³å°å¯åŠ¨" class="headerlink" title="Linux å¹³å°å¯åŠ¨"></a>Linux å¹³å°å¯åŠ¨</h4><p>åœ¨ Linux ç¯å¢ƒä¸‹ï¼Œé¦–å…ˆç”¨ <code>unzip</code> å‘½ä»¤è§£å‹ä¸‹è½½åˆ°çš„æ–‡ä»¶ï¼Œç„¶ååœ¨ <code>bin</code> ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ <code>h2.sh</code> æ¥å¯åŠ¨ H2 çš„ Web æ§åˆ¶å°ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸€èˆ¬ä¸å»ºè®®è¿™æ ·ç›´æ¥å¯åŠ¨ï¼Œå› ä¸ºæœ€å¥½æ˜¯å¸¦ä¸€äº›å‘½ä»¤å‚æ•°æ¥å¯åŠ¨ Web æ§åˆ¶å°ã€‚</p><table><thead><tr><th>å‘½ä»¤å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td> org.h2.tools.Shell</td><td> ä»¥ç»ˆç«¯æ–¹å¼å¯åŠ¨ H2 çš„ Web æ§åˆ¶å°ï¼Œéœ€è¦æ ¹æ®æç¤ºè¾“å…¥ DRIVER CLASSã€URLã€USER NAMEã€PASSWORD ç­‰è¿æ¥ä¿¡æ¯ã€‚ä»¥ç»ˆç«¯æ–¹å¼å¯åŠ¨åï¼Œå¯ä»¥æ‰§è¡Œæ•°æ®åº“çš„å¤‡ä»½ã€è¿˜åŸã€SQL å¯¼å‡ºï¼ŒSQL å¯¼å…¥ç­‰æ“ä½œï¼Œè¯¦ç»†æ•™ç¨‹è¯·çœ‹ <a href="https://segmentfault.com/a/1190000007001959">è¿™é‡Œ</a></td></tr><tr><td> org.h2.tools.Console</td><td> å¯åŠ¨ H2 çš„ Web æ§åˆ¶å°</td></tr><tr><td> org.h2.tools.Server</td><td> ä»¥æœåŠ¡å™¨æ¨¡å¼å¯åŠ¨ H2 çš„ Web æ§åˆ¶å°</td></tr><tr><td><code>-tcpAllowOthers</code></td><td>å…è®¸è¿œç¨‹æœºå™¨é€šè¿‡ TCP æ–¹å¼è®¿é—®æ•°æ®åº“</td></tr><tr><td><code>-webAllowOthers</code></td><td>å…è®¸è¿œç¨‹æœºå™¨è®¿é—® H2 çš„ Web æ§åˆ¶å°</td></tr><tr><td><code>-webPort 8082</code></td><td>æŒ‡å®š Web æ§åˆ¶å°çš„è®¿é—®ç«¯å£ï¼Œé»˜è®¤æ˜¯ <code>8082</code></td></tr><tr><td><code>-webSSL</code></td><td>å¯ç”¨ SSL åŠ å¯†è¿æ¥</td></tr></tbody></table><p>åœ¨ <code>bin</code> ç›®å½•ä¸‹åˆ›å»ºæ–°çš„å¯åŠ¨è„šæœ¬ï¼ˆå¦‚ <code>h2_server.sh</code>ï¼‰ï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆä¸‰ç§å¯åŠ¨æ–¹å¼å¯ä»¥ä»»æ„é€‰æ‹©ä¸€ç§ï¼‰</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">dir=$(dirname <span class="string">"<span class="variable">$0</span>"</span>)</span><br><span class="line">java -cp <span class="string">"<span class="variable">$dir</span>/h2-2.1.214.jar:<span class="variable">$H2DRIVERS</span>:<span class="variable">$CLASSPATH</span>"</span> org.h2.tools.Shell <span class="string">"<span class="variable">$@</span>"</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">dir=$(dirname <span class="string">"<span class="variable">$0</span>"</span>)</span><br><span class="line">java -cp <span class="string">"<span class="variable">$dir</span>/h2-2.1.214.jar:<span class="variable">$H2DRIVERS</span>:<span class="variable">$CLASSPATH</span>"</span> org.h2.tools.Console -webAllowOthers -webPort 8082 <span class="string">"<span class="variable">$@</span>"</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">dir=$(dirname <span class="string">"<span class="variable">$0</span>"</span>)</span><br><span class="line">java -cp <span class="string">"<span class="variable">$dir</span>/h2-2.1.214.jar:<span class="variable">$H2DRIVERS</span>:<span class="variable">$CLASSPATH</span>"</span> org.h2.tools.Server -tcpAllowOthers -webAllowOthers -webPort 8082 <span class="string">"<span class="variable">$@</span>"</span></span><br></pre></td></tr></tbody></table></figure><p>å¯åŠ¨æ•°æ®åº“æœåŠ¡</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–°çš„å¯åŠ¨è„šæœ¬æˆæƒ</span></span><br><span class="line">$ chmod +x h2_server.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‰å°è¿è¡Œæ–°çš„å¯åŠ¨è„šæœ¬</span></span><br><span class="line">$ bash h2_server.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…åå°è¿è¡Œæ–°çš„å¯åŠ¨è„šæœ¬</span></span><br><span class="line">$ nohup h2_server.sh &amp;</span><br></pre></td></tr></tbody></table></figure><p>æ­£å¸¸å¯åŠ¨ Web æ§åˆ¶å°ï¼ˆæœåŠ¡å™¨æ¨¡å¼ï¼‰åï¼Œç»ˆç«¯è¾“å‡ºçš„æ—¥å¿—ä¿¡æ¯å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Web Console server running at http://192.168.1.106:8082 (others can connect)</span><br><span class="line">TCP server running at tcp://192.168.1.106:9092 (others can connect)</span><br><span class="line">PG server running at pg://192.168.1.106:5435 (only local connections)</span><br></pre></td></tr></tbody></table></figure><h4 id="Windows-å¹³å°å¯åŠ¨"><a href="#Windows-å¹³å°å¯åŠ¨" class="headerlink" title="Windows å¹³å°å¯åŠ¨"></a>Windows å¹³å°å¯åŠ¨</h4><p>è¿›å…¥åˆ° H2 è§£å‹åçš„ <code>bin</code> ç›®å½•ä¸‹ï¼Œç‚¹å‡» <code>h2.bat</code> æˆ–è€… <code>h2w.bat</code>ï¼Œç›´æ¥è¿è¡Œè½¯ä»¶ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œç‚¹å‡» <code>h2w.bat</code> åï¼Œæ­¤æ–¹å¼ä¼šåœ¨åå°é™é»˜è¿è¡Œ H2 çš„ Web æ§åˆ¶å°ã€‚</p><h3 id="è®¿é—®-H2-çš„-Web-æ§åˆ¶å°"><a href="#è®¿é—®-H2-çš„-Web-æ§åˆ¶å°" class="headerlink" title="è®¿é—® H2 çš„ Web æ§åˆ¶å°"></a>è®¿é—® H2 çš„ Web æ§åˆ¶å°</h3><p>ä½¿ç”¨æµè§ˆå™¨è®¿é—® H2 çš„ Web æ§åˆ¶å°ï¼ŒURL æ˜¯ <code>http://127.0.0.1:8082</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æœ¬æœºçš„ IP åœ°å€ï¼ˆä¾‹å¦‚ <code>http://192.168.1.106:8082</code>ï¼‰</p><p><img data-src="../../../asset/2023/05/h2-study-7.png"></p><h2 id="ä½¿ç”¨-H2-çš„æ•°æ®åº“"><a href="#ä½¿ç”¨-H2-çš„æ•°æ®åº“" class="headerlink" title="ä½¿ç”¨ H2 çš„æ•°æ®åº“"></a>ä½¿ç”¨ H2 çš„æ•°æ®åº“</h2><h3 id="åˆ›å»º-H2-æ•°æ®åº“"><a href="#åˆ›å»º-H2-æ•°æ®åº“" class="headerlink" title="åˆ›å»º H2 æ•°æ®åº“"></a>åˆ›å»º H2 æ•°æ®åº“</h3><p>H2 æˆåŠŸå¯åŠ¨åï¼Œåœ¨ç³»ç»Ÿæ¡Œé¢åº•éƒ¨çš„çŠ¶æ€æ å³ä¸‹è§’ä¼šæœ‰ä¸€ä¸ªé»„è‰²å°å›¾æ ‡ï¼ˆå¦‚ä¸‹å›¾çº¢è‰²ç®­å¤´æ‰€æŒ‡çš„ä½ç½®ï¼‰</p><p><img data-src="../../../asset/2023/05/h2-study-8.png"></p><p>å¯ä»¥åœ¨æ¡Œé¢çŠ¶æ€æ å³ä¸‹è§’çš„é»„è‰²å°å›¾æ ‡å¤„ï¼Œå³é”®ç‚¹å‡» H2 æ§åˆ¶å°çš„å›¾æ ‡ï¼Œé€‰æ‹© <code>Create a new database...</code>ï¼Œå³å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“</p><p><img data-src="../../../asset/2023/05/h2-study-9.png"></p><p>å‡ºç°å¦‚ä¸‹çª—å£åï¼Œå¡«å†™æ•°æ®åº“æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼ˆä¾‹å¦‚ <code>~/demo</code>ï¼Œæ”¯æŒä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„ï¼‰ã€è®¿é—®æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡» <code>Create</code> æŒ‰é’®ï¼Œåˆ™ä¼šåœ¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„æ•°æ®åº“æ–‡ä»¶ï¼ˆä¾‹å¦‚ <code>demo.mv.db</code>ï¼‰</p><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li><ol><li>H2 æ•°æ®åº“åˆ›å»ºåï¼Œå¯èƒ½è¿˜ä¼šçœ‹åˆ°ä¸€ä¸ª <code>demo.trace.db</code> æ–‡ä»¶ï¼Œå®ƒæ˜¯ H2 æ•°æ®åº“çš„é”™è¯¯æ—¥å¿—æ–‡ä»¶ã€‚</li></ol></li><li><ol start="2"><li>H2 æ•°æ®åº“çš„æ–‡ä»¶åç§° <code>demo.mv.db</code>ï¼Œä¹‹æ‰€ä»¥é‡Œé¢æœ‰ <code>mv</code>ï¼Œè¿™æ˜¯å› ä¸ºé«˜ç‰ˆæœ¬çš„ H2 å­˜å‚¨å¼•æ“é»˜è®¤ä¸º <code>mvStore</code>ã€‚</li></ol></li></ul></div><p><img data-src="../../../asset/2023/05/h2-study-10.png"></p><h3 id="è¿æ¥-H2-æ•°æ®åº“"><a href="#è¿æ¥-H2-æ•°æ®åº“" class="headerlink" title="è¿æ¥ H2 æ•°æ®åº“"></a>è¿æ¥ H2 æ•°æ®åº“</h3><div class="admonition note"><p class="admonition-title">æç¤º</p><ul><li>H2 æ•°æ®åº“è¿æ¥æˆåŠŸåï¼Œä¼šè‡ªåŠ¨åœ¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»º <code>.h2.server.properties</code> é…ç½®æ–‡ä»¶ï¼Œç”¨äºä¿å­˜æ•°æ®åº“çš„å†å²è¿æ¥ä¿¡æ¯ã€‚</li></ul></div><p>ç”¨é¼ æ ‡å·¦é”®ç‚¹å‡»åœ¨æ¡Œé¢çŠ¶æ€æ å³ä¸‹è§’çš„é»„è‰²å°å›¾æ ‡ï¼Œæ­¤æ—¶ä¼šåœ¨æµè§ˆå™¨æ‰“å¼€ H2 çš„ Web æ§åˆ¶å°ç•Œé¢ï¼ˆé»˜è®¤åœ°å€æ˜¯ <code>http://127.0.0.1:8082</code>ï¼‰ï¼Œå¡«å†™ <code>JDBC URL</code>ã€ç”¨æˆ·åå’Œå¯†ç åï¼Œç‚¹å‡» <code>Connect</code> æŒ‰é’®å°±å¯ä»¥è¿æ¥ H2 æ•°æ®åº“</p><p><img data-src="../../../asset/2023/05/h2-study-11.png"></p><p>H2 æ•°æ®åº“æˆåŠŸè¿æ¥åï¼Œå°±ä¼šè‡ªåŠ¨è¿›å…¥æ•°æ®åº“çš„ç®¡ç†ç•Œé¢</p><p><img data-src="../../../asset/2023/05/h2-study-12.png"></p><p>è¾“å…¥ <code>show databases;</code> å’Œ <code>show tables;</code> SQL è¯­å¥ï¼Œå¯ä»¥æ˜¾ç¤º H2 é»˜è®¤çš„æ•°æ®åº“å’Œè¡¨å</p><p><img data-src="../../../asset/2023/05/h2-study-13.png"></p><h2 id="ä½¿ç”¨-H2-çš„-Web-æ§åˆ¶å°"><a href="#ä½¿ç”¨-H2-çš„-Web-æ§åˆ¶å°" class="headerlink" title="ä½¿ç”¨ H2 çš„ Web æ§åˆ¶å°"></a>ä½¿ç”¨ H2 çš„ Web æ§åˆ¶å°</h2><h3 id="è®¾ç½®è¶…çº§ç®¡ç†å‘˜å¯†ç "><a href="#è®¾ç½®è¶…çº§ç®¡ç†å‘˜å¯†ç " class="headerlink" title="è®¾ç½®è¶…çº§ç®¡ç†å‘˜å¯†ç "></a>è®¾ç½®è¶…çº§ç®¡ç†å‘˜å¯†ç </h3><p>H2 æ•°æ®åº“è¿æ¥æˆåŠŸåï¼Œä¼šè‡ªåŠ¨åœ¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»º <code>.h2.server.properties</code> é…ç½®æ–‡ä»¶ï¼ˆå¦‚ä¸‹ï¼‰ï¼Œç”¨äºä¿å­˜æ•°æ®åº“çš„å†å²è¿æ¥ä¿¡æ¯ã€‚å› æ­¤ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘ <code>.h2.server.properties</code> é…ç½®æ–‡ä»¶ï¼Œç„¶åæ·»åŠ  <code>webAdminPassword</code> å‚æ•°æ¥æŒ‡å®š H2 çš„è¶…çº§ç®¡ç†å‘˜å¯†ç ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>webAllowOthers</code></td><td>å…è®¸è¿œç¨‹æœºå™¨è®¿é—® H2 çš„ Web æ§åˆ¶å°</td></tr><tr><td><code>webPort</code></td><td>æŒ‡å®š Web æ§åˆ¶å°çš„è®¿é—®ç«¯å£ï¼Œé»˜è®¤æ˜¯ <code>8082</code></td></tr><tr><td><code>webSSL</code></td><td>å¯ç”¨ SSL åŠ å¯†è¿æ¥</td></tr><tr><td><code>webAdminPassword</code></td><td>æŒ‡å®šè¶…çº§ç®¡ç†å‘˜å¯†ç  </td></tr></tbody></table><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">webSSL=false</span><br><span class="line">webAdminPassword=admin</span><br><span class="line">webAllowOthers=true</span><br><span class="line">webPort=8082</span><br><span class="line">10=Generic DB2|com.ibm.db2.jcc.DB2Driver|jdbc\:db2\://localhost/test|</span><br><span class="line">11=Generic Oracle|oracle.jdbc.driver.OracleDriver|jdbc\:oracle\:thin\:@localhost\:1521\:XE|sa</span><br><span class="line">12=Generic MS SQL Server 2000|com.microsoft.jdbc.sqlserver.SQLServerDriver|jdbc\:microsoft\:sqlserver\://localhost\:1433;DatabaseName\=sqlexpress|sa</span><br><span class="line">13=Generic MS SQL Server 2005|com.microsoft.sqlserver.jdbc.SQLServerDriver|jdbc\:sqlserver\://localhost;DatabaseName\=test|sa</span><br><span class="line">14=Generic PostgreSQL|org.postgresql.Driver|jdbc\:postgresql\:test|</span><br><span class="line">15=Generic MySQL|com.mysql.cj.jdbc.Driver|jdbc\:mysql\://localhost\:3306/test|</span><br><span class="line">16=Generic MariaDB|org.mariadb.jdbc.Driver|jdbc\:mariadb\://localhost\:3306/test|</span><br><span class="line">17=Generic HSQLDB|org.hsqldb.jdbcDriver|jdbc\:hsqldb\:test;hsqldb.default_table_type\=cached|sa</span><br><span class="line">18=Generic Derby (Server)|org.apache.derby.client.ClientAutoloadedDriver|jdbc\:derby\://localhost\:1527/test;create\=true|sa</span><br><span class="line">19=Generic Derby (Embedded)|org.apache.derby.iapi.jdbc.AutoloadedDriver|jdbc\:derby\:test;create\=true|sa</span><br><span class="line">0=Generic JNDI Data Source|javax.naming.InitialContext|java\:comp/env/jdbc/Test|sa</span><br><span class="line">1=Generic Teradata|com.teradata.jdbc.TeraDriver|jdbc\:teradata\://whomooz/|</span><br><span class="line">2=Generic Snowflake|com.snowflake.client.jdbc.SnowflakeDriver|jdbc\:snowflake\://accountName.snowflakecomputing.com|</span><br><span class="line">3=Generic Redshift|com.amazon.redshift.jdbc42.Driver|jdbc\:redshift\://endpoint\:5439/database|</span><br><span class="line">4=Generic Impala|org.cloudera.impala.jdbc41.Driver|jdbc\:impala\://clustername\:21050/default|</span><br><span class="line">5=Generic Hive 2|org.apache.hive.jdbc.HiveDriver|jdbc\:hive2\://clustername\:10000/default|</span><br><span class="line">6=Generic Hive|org.apache.hadoop.hive.jdbc.HiveDriver|jdbc\:hive\://clustername\:10000/default|</span><br><span class="line">7=Generic Azure SQL|com.microsoft.sqlserver.jdbc.SQLServerDriver|jdbc\:sqlserver\://name.database.windows.net\:1433|</span><br><span class="line">8=Generic Firebird Server|org.firebirdsql.jdbc.FBDriver|jdbc\:firebirdsql\:localhost\:c\:/temp/firebird/test|sysdba</span><br><span class="line">9=Generic SQLite|org.sqlite.JDBC|jdbc\:sqlite\:test|sa</span><br><span class="line">20=Generic H2 (Server)|org.h2.Driver|jdbc\:h2\:tcp\://localhost/~/test|sa</span><br><span class="line">21=Generic H2 (Embedded)|org.h2.Driver|jdbc\:h2\:~/demo|root</span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">æç¤º</p><p>è‹¥æ²¡æœ‰æ‰¾åˆ° <code>.h2.server.properties</code> æ–‡ä»¶ï¼Œä»¥ Web-Server æ–¹å¼é¦–æ¬¡å¯åŠ¨ H2 åï¼Œæµè§ˆå™¨æ‰“å¼€ Web æ§åˆ¶å°ï¼Œç‚¹å‡» <code>Save</code> æŒ‰é’®åå°±ä¼šè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚</p></div><h3 id="ä½¿ç”¨-H2-çš„é…ç½®ç•Œé¢"><a href="#ä½¿ç”¨-H2-çš„é…ç½®ç•Œé¢" class="headerlink" title="ä½¿ç”¨ H2 çš„é…ç½®ç•Œé¢"></a>ä½¿ç”¨ H2 çš„é…ç½®ç•Œé¢</h3><p>ä½¿ç”¨æµè§ˆå™¨è®¿é—® H2 çš„ Web æ§åˆ¶å°ï¼Œç„¶åç‚¹å‡» <code>Preferences</code>ï¼Œå¡«å†™è¶…çº§ç®¡ç†å‘˜å¯†ç åï¼Œå°±å¯ä»¥è¿›å…¥ H2 çš„é…ç½®ç•Œé¢</p><p><img data-src="../../../asset/2023/05/h2-study-14.png"></p><p>è¿›å…¥åˆ° H2 çš„é…ç½®ç•Œé¢åï¼Œå¯ä»¥è®¾ç½®è¿œç¨‹è®¿é—®ã€ç«¯å£å·ç­‰ä¿¡æ¯</p><p><img data-src="../../../asset/2023/05/h2-study-15.png"></p><h3 id="ä½¿ç”¨-H2-çš„å·¥å…·ç•Œé¢"><a href="#ä½¿ç”¨-H2-çš„å·¥å…·ç•Œé¢" class="headerlink" title="ä½¿ç”¨ H2 çš„å·¥å…·ç•Œé¢"></a>ä½¿ç”¨ H2 çš„å·¥å…·ç•Œé¢</h3><p>ä½¿ç”¨æµè§ˆå™¨è®¿é—® H2 çš„ Web æ§åˆ¶å°ï¼Œç„¶åç‚¹å‡» <code>Tools</code>ï¼Œå¡«å†™è¶…çº§ç®¡ç†å‘˜å¯†ç åï¼Œå°±å¯ä»¥è¿›å…¥ H2 çš„å·¥å…·ç•Œé¢</p><p><img data-src="../../../asset/2023/05/h2-study-17.png"></p><p>è¿›å…¥ H2 çš„å·¥å…·ç•Œé¢åï¼Œå¯ä»¥å¯¹ H2 æ•°æ®åº“è¿›è¡Œå¤‡ä»½ã€è¿˜åŸã€æ¢å¤ã€é›†ç¾¤ã€è¿è¡Œè„šæœ¬ã€åˆ é™¤æ–‡ä»¶ç­‰æ“ä½œ</p><p><img data-src="../../../asset/2023/05/h2-study-16.png"></p><h2 id="H2-è¿›é˜¶ä½¿ç”¨"><a href="#H2-è¿›é˜¶ä½¿ç”¨" class="headerlink" title="H2 è¿›é˜¶ä½¿ç”¨"></a>H2 è¿›é˜¶ä½¿ç”¨</h2><h3 id="ç¬¬ä¸‰æ–¹è½¯ä»¶è¿æ¥-H2-æ•°æ®åº“"><a href="#ç¬¬ä¸‰æ–¹è½¯ä»¶è¿æ¥-H2-æ•°æ®åº“" class="headerlink" title="ç¬¬ä¸‰æ–¹è½¯ä»¶è¿æ¥ H2 æ•°æ®åº“"></a>ç¬¬ä¸‰æ–¹è½¯ä»¶è¿æ¥ H2 æ•°æ®åº“</h3><p>H2 é™¤äº†å¯ä»¥ä½¿ç”¨è‡ªèº«çš„ Web æ§åˆ¶å°ç®¡ç†æ•°æ®åº“ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ Navicatã€DBeaver è¿™æ ·çš„æ•°æ®åº“è½¯ä»¶æ¥ç®¡ç†ã€‚è¿™é‡Œä»¥å¼€æºçš„ DBeaver æ•°æ®åº“ç®¡ç†è½¯ä»¶ä¸¾ä¾‹ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶è¿æ¥ H2 æ•°æ®åº“ã€‚</p><ul><li>åœ¨ DBeaver çš„ä¸»ç•Œé¢æ–°å»ºæ•°æ®åº“è¿æ¥ï¼Œæ•°æ®åº“ç±»å‹é€‰æ‹© <code>H2 Embedded V.2</code>ï¼Œå³ä½¿ç”¨å†…åµŒæ¨¡å¼è¿æ¥ H2 æ•°æ®åº“</li></ul><div class="admonition warning"><p class="admonition-title">ç‰¹åˆ«æ³¨æ„</p><ul><li>å†…åµŒæ¨¡å¼åªå…è®¸æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥ H2 æ•°æ®åº“ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºåªå…è®¸æœ‰ä¸€ä¸ªåº”ç”¨è®¿é—®æ•°æ®åº“æ–‡ä»¶ã€‚</li><li>å¦‚æœ H2 æ•°æ®åº“å·²ç»ä»¥æœåŠ¡å™¨æ¨¡å¼å¯åŠ¨äº†ï¼Œé‚£ä¹ˆ DBeaver çš„æ•°æ®åº“ç±»å‹å¯ä»¥é€‰æ‹© <code>H2 Server</code>ï¼ŒæœåŠ¡å™¨æ¨¡å¼æ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥ H2 æ•°æ®åº“ã€‚</li></ul></div><p><img data-src="../../../asset/2023/05/h2-study-19.png"></p><ul><li>å¡«å†™ <code>JDBC URL</code>ã€ç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶åç‚¹å‡» <code>æµ‹è¯•è¿æ¥</code> æŒ‰é’®æˆ–è€… <code>å®Œæˆ</code> æŒ‰é’®å³å¯</li></ul><p><img data-src="../../../asset/2023/05/h2-study-20.png"></p><ul><li>æˆåŠŸè¿æ¥ H2 æ•°æ®åº“åï¼Œå°±å¯ä»¥çœ‹åˆ°ä¹‹å‰åˆ›å»ºçš„æ•°æ®åº“è¡¨</li></ul><p><img data-src="../../../asset/2023/05/h2-study-21.png"></p><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>ä»¥ä¸‹è¡¨æ ¼æ˜¯ H2 æ•°æ®åº“åœ¨ä¸åŒæ¨¡å¼ä¸‹çš„ URL è¿æ¥å­—ä¸²ï¼Œå‚è€ƒè‡ªï¼š<a href="https://www.cnblogs.com/cnjavahome/p/8995650.html">H2 æ•°æ®åº“ä½¿ç”¨ç®€ä»‹</a></p><p><img data-src="../../../asset/2023/05/h2-study-18.png"></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://segmentfault.com/a/1190000007001959">H2 ä½¿ç”¨æŒ‡å—</a></li><li><a href="https://www.cnblogs.com/cnjavahome/p/8995650.html">H2 æ•°æ®åº“ä½¿ç”¨ç®€ä»‹</a></li><li><a href="https://zhuanlan.zhihu.com/p/509877891">H2 å†…å­˜æ•°æ®åº“ä½¿ç”¨æ•™ç¨‹è¯¦è§£</a></li></ul>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç» H2 æ•°æ®åº“çš„åŸºç¡€ä½¿ç”¨æ•™ç¨‹ï¼ŒåŒ…æ‹¬å®‰è£…ä½¿ç”¨ Web æ§åˆ¶å°ã€è¿æ¥æ•°æ®åº“ç­‰ã€‚</summary>
    
    
    
    
    <category term="Java" scheme="https://www.techgrow.cn/tags/Java/"/>
    
    <category term="æ•°æ®åº“" scheme="https://www.techgrow.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>Spring æ³¨è§£é©±åŠ¨å¼€å‘éšç¬”</title>
    <link href="https://www.techgrow.cn/posts/542a9813.html"/>
    <id>https://www.techgrow.cn/posts/542a9813.html</id>
    <published>2023-04-22T15:12:41.000Z</published>
    <updated>2023-04-22T15:12:41.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc -->]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦è®°å½• Spring æ³¨è§£é©±åŠ¨å¼€å‘çš„ç¬”è®°ã€‚</summary>
    
    
    
    <category term="hide" scheme="https://www.techgrow.cn/categories/hide/"/>
    
    
    <category term="Java" scheme="https://www.techgrow.cn/tags/Java/"/>
    
    <category term="å¼€å‘éšç¬”" scheme="https://www.techgrow.cn/tags/%E5%BC%80%E5%8F%91%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
</feed>
