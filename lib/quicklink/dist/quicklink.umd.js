"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,n){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.quicklink={})}(void 0,function(e){function o(o){return new Promise(function(e,n,t){(t=new XMLHttpRequest).open("GET",o,t.withCredentials=!0),t.onload=function(){(200===t.status?e:n)()},t.send()})}var n,r=(n=document.createElement("link")).relList&&n.relList.supports&&n.relList.supports("prefetch")?function(o){return new Promise(function(e,n,t){(t=document.createElement("link")).rel="prefetch",t.href=o,t.onload=e,t.onerror=n,document.head.appendChild(t)})}:o,l=window.requestIdleCallback||function(e){var n=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-n))}})},1)},d=new Set;function h(e,n,t){if(t=navigator.connection){if(t.saveData)return Promise.reject(new Error("Cannot prefetch, Save-Data is enabled"));if(/2g/.test(t.effectiveType))return Promise.reject(new Error("Cannot prefetch, network conditions are poor"))}return Promise.all([].concat(e).map(function(e){if(!d.has(e))return d.add(e),(n?function(e){return window.fetch?fetch(e,{credentials:"include"}):o(e)}:r)(new URL(e,location.href).toString())}))}e.listen=function(r){if(r=r||{},window.IntersectionObserver){var e=function(e){e=(e=r.throttle||1/0)||1;var n=[],t=0;function o(){t<e&&0<n.length&&(n.shift()(),t++)}return[function(e){1<n.push(e)||o()},function(){t--,o()}]}(0),t=e[0],o=e[1],i=r.limit||1/0,n=r.origins||[location.hostname],c=r.ignores||[],f=r.delay||0,u=[],e=r.timeoutFn||l,s="function"==typeof r.hrefFn&&r.hrefFn,a=new IntersectionObserver(function(e){e.forEach(function(e){var n;e.isIntersecting?(u.push((e=e.target).href),n=function(){-1!==u.indexOf(e.href)&&(a.unobserve(e),d.size<i&&t(function(){h(s?s(e):e.href,r.priority).then(o).catch(function(e){o(),r.onError&&r.onError(e)})}))},f?setTimeout(n,f):n()):-1<(n=u.indexOf((e=e.target).href))&&u.splice(n)})},{threshold:r.threshold||0});return e(function(){(r.el||document).querySelectorAll("a").forEach(function(e){n.length&&!n.includes(e.hostname)||function n(t,e){return Array.isArray(e)?e.some(function(e){return n(t,e)}):(e.test||e).call(e,t.href,t)}(e,c)||a.observe(e)})},{timeout:r.timeout||2e3}),function(){d.clear(),a.disconnect()}}},e.prefetch=h});