"use strict";var _get=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0!==o){if("value"in o)return o.value;o=o.get;return void 0!==o?o.call(n):void 0}t=Object.getPrototypeOf(t);if(null!==t)return e(t,i,n)},_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).window=e.window||{})}(void 0,function(e){function L(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e4;return e=parseFloat(e+"")||0,Math.round((e+Number.EPSILON)*t)/t}function a(e){if(e&&e instanceof Element&&e.offsetParent){var t=e.scrollHeight>e.clientHeight,e=-1!==(i=window.getComputedStyle(e).overflowY).indexOf("hidden"),i=-1!==i.indexOf("visible");return t&&!e&&!i}}function c(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return!(!e||e===document.body||t&&e===t)&&(a(e)?e:c(e.parentElement,t))}function S(e){var t=(new DOMParser).parseFromString(e,"text/html").body;if(1<t.childElementCount){for(var i=document.createElement("div");t.firstChild;)i.appendChild(t.firstChild);return i}return t.firstChild}function n(e){return(""+(e||"")).split(" ").filter(function(e){return!!e})}function C(t,e,i){t&&n(e).forEach(function(e){t.classList.toggle(e,i||!1)})}function u(e){_classCallCheck(this,u),Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}var s={passive:!1},t=(_createClass(l,[{key:"onPointerStart",value:function(e){var t;e.buttons&&0===e.button&&(t=new u(e),this.currentPointers.some(function(e){return e.id===t.id})||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur)))}},{key:"onTouchStart",value:function(e){var t=!0,i=!1,n=void 0;try{for(var o,a=Array.from(e.changedTouches||[])[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var r=o.value;this.triggerPointerStart(new u(r),e)}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}window.addEventListener("blur",this.onWindowBlur)}},{key:"onMove",value:function(e){var i=this,t=this.currentPointers.slice(),n="changedTouches"in e?Array.from(e.changedTouches||[]).map(function(e){return new u(e)}):[new u(e)],o=[],a=!0,r=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0)!function(){var t=l.value,e=i.currentPointers.findIndex(function(e){return e.id===t.id});e<0||(o.push(t),i.currentPointers[e]=t)}()}catch(e){r=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw s}}o.length&&this.moveCallback(e,this.currentPointers.slice(),t)}},{key:"onPointerEnd",value:function(e){0<e.buttons&&0!==e.button||(this.triggerPointerEnd(e,new u(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}},{key:"onTouchEnd",value:function(e){var t=!0,i=!1,n=void 0;try{for(var o,a=Array.from(e.changedTouches||[])[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var r=o.value;this.triggerPointerEnd(e,new u(r))}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}}},{key:"triggerPointerStart",value:function(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}},{key:"triggerPointerEnd",value:function(e,t){var i=this.currentPointers.findIndex(function(e){return e.id===t.id});i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,t,this.currentPointers.slice()))}},{key:"onWindowBlur",value:function(){this.clear()}},{key:"clear",value:function(){for(;this.currentPointers.length;){var e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}},{key:"stop",value:function(){this.element.removeEventListener("mousedown",this.onPointerStart,s),this.element.removeEventListener("touchstart",this.onTouchStart,s),this.element.removeEventListener("touchmove",this.onMove,s),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}]),l);function l(e,t){var i=t.start,n=void 0===i?function(){return!0}:i,i=t.move,i=void 0===i?function(){}:i,t=t.end,t=void 0===t?function(){}:t;_classCallCheck(this,l),Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=n,this.moveCallback=i,this.endCallback=t;for(var o=["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"],a=0;a<o.length;a++){var r=o[a];this[r]=this[r].bind(this)}this.element.addEventListener("mousedown",this.onPointerStart,s),this.element.addEventListener("touchstart",this.onTouchStart,s),this.element.addEventListener("touchmove",this.onMove,s),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}function h(e,t){return t?Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2)):0}function d(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}function f(e){return"object"==(void 0===e?"undefined":_typeof(e))&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)}function m(n){for(var e=arguments.length,t=Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];for(var o=t.length,a=0;a<o;a++){var r=t[a]||{};Object.entries(r).forEach(function(e){var t=_slicedToArray(e,2),i=t[0],e=t[1],t=Array.isArray(e)?[]:{};n[i]||Object.assign(n,_defineProperty({},i,t)),f(e)?Object.assign(n[i],m(t,e)):Array.isArray(e)?Object.assign(n,_defineProperty({},i,[].concat(_toConsumableArray(e)))):Object.assign(n,_defineProperty({},i,e))})}return n}function v(e,t){return e.split(".").reduce(function(e,t){return"object"==(void 0===e?"undefined":_typeof(e))?e[t]:void 0},t)}var i=(_createClass(r,[{key:"setOptions",value:function(t){this.options=t?m({},this.constructor.defaults,t):{};var e=!0,i=!1,t=void 0;try{for(var n,o=Object.entries(this.option("on")||{})[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=_slicedToArray(n.value,2),r=a[0],s=a[1];this.on(r,s)}}catch(e){i=!0,t=e}finally{try{!e&&o.return&&o.return()}finally{if(i)throw t}}}},{key:"option",value:function(e){for(var e=v(e,this.options),t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e=e&&"function"==typeof e?e.call.apply(e,[this,this].concat(i)):e}},{key:"optionFor",value:function(e,t,i){for(var n,o=v(t,e),a=arguments.length,r=Array(3<a?a-3:0),s=3;s<a;s++)r[s-3]=arguments[s];(o="false"===(o="true"===(o="string"==typeof(n=o)&&!isNaN(n)&&!isNaN(parseFloat(n))?parseFloat(o):o)?!0:o)?!1:o)&&"function"==typeof o&&(o=o.call.apply(o,[this,this,e].concat(r)));t=v(t,this.options);return t&&"function"==typeof t?o=t.call.apply(t,[this,this,e].concat(r,[o])):void 0===o&&(o=t),void 0===o?i:o}},{key:"cn",value:function(e){var t=this.options.classes;return t&&t[e]||""}},{key:"localize",value:function(e){var o=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,function(e,t,i){var n="";return i?n=o.option(t[0]+t.toLowerCase().substring(1)+".l10n."+i):t&&(n=o.option("l10n."+t)),n=n||e});for(var i=0;i<t.length;i++)e=e.split(t[i][0]).join(t[i][1]);return e.replace(/\{\{(.*?)\}\}/g,function(e,t){return t})}},{key:"on",value:function(e,i){var n=this,t=[];"string"==typeof e?t=e.split(" "):Array.isArray(e)&&(t=e),this.events||(this.events=new Map),t.forEach(function(e){var t=n.events.get(e);t||(n.events.set(e,[]),t=[]),t.includes(i)||t.push(i),n.events.set(e,t)})}},{key:"off",value:function(e,i){var n=this,t=[];"string"==typeof e?t=e.split(" "):Array.isArray(e)&&(t=e),t.forEach(function(e){var t=n.events.get(e);!Array.isArray(t)||-1<(e=t.indexOf(i))&&t.splice(e,1)})}},{key:"emit",value:function(e){for(var t=this,i=arguments.length,n=Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];[].concat(_toConsumableArray(this.events.get(e)||[])).forEach(function(e){return e.apply(void 0,[t].concat(n))}),"*"!==e&&this.emit.apply(this,["*",e].concat(n))}}]),r);function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,r),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);var e=!0,i=!1,t=void 0;try{for(var n,o=Object.getOwnPropertyNames(Object.getPrototypeOf(this))[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.startsWith("on")&&"function"==typeof this[a]&&(this[a]=this[a].bind(this))}}catch(e){i=!0,t=e}finally{try{!e&&o.return&&o.return()}finally{if(i)throw t}}}Object.defineProperty(i,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.31"}),Object.defineProperty(i,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});var E,o=(_inherits(p,i),_createClass(p,[{key:"attachPlugins",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=new Map,i=!0,n=!1,o=void 0;try{for(var a,r=Object.entries(e)[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var s=_slicedToArray(a.value,2),l=s[0],c=s[1],u=this.option(l),h=this.plugins[l];h||!1===u?h&&!1===u&&(h.detach(),delete this.plugins[l]):t.set(l,new c(this,u||{}))}}catch(e){n=!0,o=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}var d=!0,n=!1,o=void 0;try{for(var f,v=t[Symbol.iterator]();!(d=(f=v.next()).done);d=!0){var p=_slicedToArray(f.value,2),g=p[0],m=p[1];(this.plugins[g]=m).attach()}}catch(e){n=!0,o=e}finally{try{!d&&v.return&&v.return()}finally{if(n)throw o}}}},{key:"detachPlugins",value:function(e){e=e||Object.keys(this.plugins);var t=!0,i=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var r=o.value,s=this.plugins[r];s&&s.detach(),delete this.plugins[r]}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}return this.emit("detachPlugins"),this}}]),p);function p(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,p),e=_possibleConstructorReturn(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,e)),Object.defineProperty(e,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),e}(B=E=E||{})[B.Init=0]="Init",B[B.Error=1]="Error",B[B.Ready=2]="Ready",B[B.Panning=3]="Panning",B[B.Mousemove=4]="Mousemove",B[B.Destroy=5]="Destroy";function g(e){return e&&null!==e&&e instanceof Element&&"nodeType"in e}function y(t,e){t&&n(e).forEach(function(e){t.classList.remove(e)})}function F(t,e){t&&n(e).forEach(function(e){t.classList.add(e)})}var w=["a","b","c","d","e","f"],b={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},x={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:b},k='<circle cx="25" cy="25" r="20"></circle>',P='<div class="f-spinner"><svg viewBox="0 0 50 50">'+k+k+"</svg></div>",T={a:1,b:0,c:0,d:1,e:0,f:0},O="mousemove",M="content",A=null,_=null,R=(_inherits(z,o),_createClass(z,[{key:"fits",get:function(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}},{key:"isTouchDevice",get:function(){return _=null===_?window.matchMedia("(hover: none)").matches:_}},{key:"isMobile",get:function(){return A=null===A?/iPhone|iPad|iPod|Android/i.test(navigator.userAgent):A}},{key:"panMode",get:function(){return this.options.panMode!==O||this.isTouchDevice?"drag":O}},{key:"panOnlyZoomed",get:function(){var e=this.options.panOnlyZoomed;return"auto"===e?this.isTouchDevice:e}},{key:"isInfinite",get:function(){return this.option("infinite")}},{key:"angle",get:function(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}},{key:"targetAngle",get:function(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}},{key:"scale",get:function(){var e=this.current,t=e.a,e=e.b;return Math.sqrt(t*t+e*e)||1}},{key:"targetScale",get:function(){var e=this.target,t=e.a,e=e.b;return Math.sqrt(t*t+e*e)||1}},{key:"minScale",get:function(){return this.option("minScale")||1}},{key:"fullScale",get:function(){var e=this.contentRect;return e.fullWidth/e.fitWidth||1}},{key:"maxScale",get:function(){return this.fullScale*(this.option("maxScale")||1)||1}},{key:"coverScale",get:function(){var e=this.containerRect,t=this.contentRect,t=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,t)}},{key:"isScaling",get:function(){return 1e-5<Math.abs(this.targetScale-this.scale)&&!this.isResting}},{key:"isContentLoading",get:function(){var e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}},{key:"isResting",get:function(){if(this.isBouncingX||this.isBouncingY)return!1;var e=!0,t=!1,i=void 0;try{for(var n,o=w[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value,r="e"==a||"f"===a?1e-4:1e-5;if(Math.abs(this.target[a]-this.current[a])>r)return!1}}catch(e){t=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw i}}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}}]),_createClass(z,[{key:"initContent",value:function(){var e=this.container,t=this.cn(M),i=this.option(M)||e.querySelector("."+t);if(i||(i=e.querySelector("img,picture")||e.firstElementChild)&&F(i,t),!(i=i instanceof HTMLPictureElement?i.querySelector("img"):i))throw new Error("No content found");this.content=i}},{key:"onLoad",value:function(){var e=this.spinner,t=this.container,i=this.state;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===E.Init?this.enable():this.updateMetrics()}},{key:"onError",value:function(){this.state!==E.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=E.Error,this.emit("error"))}},{key:"attachObserver",value:function(){function e(){var e=i.container,t=i.containerRect;return.1<Math.abs(t.width-e.getBoundingClientRect().width)||.1<Math.abs(t.height-e.getBoundingClientRect().height)}var t,i=this;this.resizeObserver||void 0===window.ResizeObserver||(this.resizeObserver=new ResizeObserver(function(){i.updateTimer||(e()?(i.onResize(),i.isMobile&&(i.updateTimer=setTimeout(function(){e()&&i.onResize(),i.updateTimer=null},500))):i.updateTimer&&(clearTimeout(i.updateTimer),i.updateTimer=null))})),null===(t=this.resizeObserver)||void 0===t||t.observe(this.container)}},{key:"detachObserver",value:function(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()}},{key:"attachEvents",value:function(){var e=this.container;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new t(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(O,this.onMouseMove)}},{key:"detachEvents",value:function(){var e=this.container;e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1}),null===(e=this.pointerTracker)||void 0===e||e.stop(),this.pointerTracker=null,document.removeEventListener(O,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}},{key:"animate",value:function(){var e=this;this.setTargetForce();var t=this.friction,i=this.option("maxVelocity"),n=!0,o=!1,a=void 0;try{for(var r,s=w[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;t?(this.velocity[l]*=1-t,i&&!this.isScaling&&(this.velocity[l]=Math.max(Math.min(this.velocity[l],i),-1*i)),this.current[l]+=this.velocity[l]):this.current[l]=this.target[l]}}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(function(){return e.animate()}):this.stop("current")}},{key:"setTargetForce",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,o=w[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;"e"===a&&this.isBouncingX||"f"===a&&this.isBouncingY||(this.velocity[a]=(1/(1-this.friction)-1)*(this.target[a]-this.current[a]))}}catch(e){t=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw i}}}},{key:"checkBounds",value:function(){var e=this.current,t=e.e+(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0),i=e.f+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0),n=this.getBounds(),o=n.x,a=n.y,r=o.min,s=o.max,l=a.min,e=a.max,o=0,a=0;return r!==1/0&&t<r?o=r-t:s!==1/0&&s<t&&(o=s-t),l!==1/0&&i<l?a=l-i:e!==1/0&&e<i&&(a=e-i),Math.abs(o)<1e-4&&(o=0),Math.abs(a)<1e-4&&(a=0),Object.assign(Object.assign({},n),{xDiff:o,yDiff:a,inBounds:!o&&!a})}},{key:"clampTargetBounds",value:function(){var e=this.target,t=this.getBounds(),i=t.x,t=t.y;i.min!==1/0&&(e.e=Math.max(e.e,i.min)),i.max!==1/0&&(e.e=Math.min(e.e,i.max)),t.min!==1/0&&(e.f=Math.max(e.f,t.min)),t.max!==1/0&&(e.f=Math.min(e.f,t.max))}},{key:"calculateContentDim",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.current,t=this.content,i=this.contentRect,n=i.fitWidth,o=i.fitHeight,a=i.fullWidth,r=i.fullHeight,s=a,i=r;return!this.option("zoom")&&0===this.angle||(n=(t=!(t instanceof HTMLImageElement||"none"!==window.getComputedStyle(t).maxWidth&&"none"!==window.getComputedStyle(t).maxHeight))?a:n,t=t?r:o,r=this.getMatrix(e),o=new DOMPoint(0,0).matrixTransform(r),e=new DOMPoint(0+n,0).matrixTransform(r),n=new DOMPoint(0+n,0+t).matrixTransform(r),t=new DOMPoint(0,0+t).matrixTransform(r),r=Math.abs(n.x-o.x),n=Math.abs(n.y-o.y),o=Math.abs(t.x-e.x),e=Math.abs(t.y-e.y),s=Math.max(r,o),i=Math.max(n,e)),{contentWidth:s,contentHeight:i}}},{key:"setEdgeForce",value:function(){if(this.ignoreBounds||this.isDragging||this.panMode===O||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);var e=this.target,t=this.checkBounds(),i=t.x,n=t.y,o=t.xDiff,a=t.yDiff,r=this.option("maxVelocity"),s=this.velocity.e,t=this.velocity.f;0!==o?(this.isBouncingX=!0,o*s<=0?s+=.14*o:(s=.14*o,i.min!==1/0&&(this.target.e=Math.max(e.e,i.min)),i.max!==1/0&&(this.target.e=Math.min(e.e,i.max))),r&&(s=Math.max(Math.min(s,r),-1*r))):this.isBouncingX=!1,0!==a?(this.isBouncingY=!0,a*t<=0?t+=.14*a:(t=.14*a,n.min!==1/0&&(this.target.f=Math.max(e.f,n.min)),n.max!==1/0&&(this.target.f=Math.min(e.f,n.max))),r&&(t=Math.max(Math.min(t,r),-1*r))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=s),this.isBouncingY&&(this.velocity.f=t)}},{key:"enable",value:function(){var t=this.content,e=new DOMMatrixReadOnly(window.getComputedStyle(t).transform),i=!0,n=!1,t=void 0;try{for(var o,a=w[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var r=o.value;this.current[r]=this.target[r]=e[r]}}catch(e){n=!0,t=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw t}}this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=E.Ready,this.emit("ready")}},{key:"onClick",value:function(t){var i=this;"click"===t.type&&0===t.detail&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&(null===(r=this.pointerTracker)||void 0===r||r.clear(),this.trackingPoints=[],this.startDecelAnim());var e=t.target;if(e&&!t.defaultPrevented){if(e.hasAttribute("disabled"))return t.preventDefault(),void t.stopPropagation();if(!(s=window.getSelection())||"Range"!==s.type||e.closest("button")){var n,o,a,r=e.closest("[data-panzoom-action]"),s=e.closest("[data-panzoom-change]"),r=r||s,s=r&&g(r)?r.dataset:null;if(s){var r=s.panzoomChange,l=s.panzoomAction;if((r||l)&&t.preventDefault(),r){s={};try{s=JSON.parse(r)}catch(t){console&&console.warn("The given data was not valid JSON")}return void this.applyChange(s)}if(l)return void(this[l]&&this[l]())}if(3<Math.abs(this.dragOffset.x)||3<Math.abs(this.dragOffset.y))return t.preventDefault(),void t.stopPropagation();e.closest("[data-fancybox]")||(l=this.content.getBoundingClientRect(),(e=this.dragStart).time&&!this.canZoomOut()&&(2<Math.abs(l.x-e.x)||2<Math.abs(l.y-e.y))||(this.dragStart.time=0,n=function(e){i.option("zoom",t)&&e&&"string"==typeof e&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(e)&&"function"==typeof i[e]&&(t.preventDefault(),i[e]({event:t}))},o=this.option("click",t),(a=this.option("dblClick",t))?(this.clicks++,1==this.clicks&&(this.clickTimer=setTimeout(function(){1===i.clicks?(i.emit("click",t),!t.defaultPrevented&&o&&n(o)):(i.emit("dblClick",t),t.defaultPrevented||n(a)),i.clicks=0,i.clickTimer=null},350))):(this.emit("click",t),!t.defaultPrevented&&o&&n(o))))}}}},{key:"addTrackingPoint",value:function(e){var t=this.trackingPoints.filter(function(e){return e.time>Date.now()-100});t.push(e),this.trackingPoints=t}},{key:"onPointerDown",value:function(e,t,i){if(!1===this.option("touch",e))return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];var n=this.content.getBoundingClientRect();if(this.dragStart={x:n.x,y:n.y,top:n.top,left:n.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===O&&1<this.targetScale)return e.preventDefault(),e.stopPropagation(),!1;n=e.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(n.nodeName)||n.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;null===(i=window.getSelection())||void 0===i||i.removeAllRanges()}if("mousedown"===e.type)["A","BUTTON"].includes(n.nodeName)||e.preventDefault();else if(.3<Math.abs(this.velocity.a))return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}},{key:"onPointerMove",value:function(e,t,i){if(!1!==this.option("touch",e)&&this.isDragging&&!(t.length<2&&this.panOnlyZoomed&&L(this.targetScale)<=L(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))){this.addTrackingPoint(t[0]);var n=this.content,o=d(i[0],i[1]),a=d(t[0],t[1]),r=0,s=0;1<t.length&&(n=n.getBoundingClientRect(),r=o.clientX-n.left-.5*n.width,s=o.clientY-n.top-.5*n.height);i=h(i[0],i[1]),t=h(t[0],t[1]),t=i?t/i:1,i=a.clientX-o.clientX,a=a.clientY-o.clientY;this.dragOffset.x+=i,this.dragOffset.y+=a,this.dragOffset.time=Date.now()-this.dragStart.time;var o=L(this.targetScale)===L(this.minScale)&&this.option("lockAxis");if(o&&!this.lockedAxis)if("xy"===o||"y"===o||"touchmove"===e.type){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();var l=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=45<l&&l<135?"y":"x",this.dragOffset.x=0,a=i=this.dragOffset.y=0}else this.lockedAxis=o;c(e.target,this.content)&&(o="x",this.dragOffset.y=0),o&&"xy"!==o&&this.lockedAxis!==o&&L(this.targetScale)===L(this.minScale)||(e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging")),l=this.checkBounds(i,a),this.option("rubberband")?("x"!==this.isInfinite&&(0<l.xDiff&&i<0||l.xDiff<0&&0<i)&&(i*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*l.xDiff))),"y"!==this.isInfinite&&(0<l.yDiff&&a<0||l.yDiff<0&&0<a)&&(a*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*l.yDiff)))):(l.xDiff&&(i=0),l.yDiff&&(a=0)),o=this.targetScale,e=this.minScale,l=this.maxScale,o<.5*e&&(t=Math.max(t,e)),1.5*l<o&&(t=Math.min(t,l)),"y"===this.lockedAxis&&L(o)===L(e)&&(i=0),"x"===this.lockedAxis&&L(o)===L(e)&&(a=0),this.applyChange({originX:r,originY:s,panX:i,panY:a,scale:t,friction:this.option("dragFriction"),ignoreBounds:!0}))}}},{key:"onPointerUp",value:function(e,t,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),c(e.target,this.content)&&"y"===this.lockedAxis&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==E.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}},{key:"startDecelAnim",value:function(){var e=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1;var t=!(this.isBouncingY=!1),i=!1,n=void 0;try{for(var o,a=w[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var r=o.value;this.velocity[r]=0}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}this.target.e=this.current.e,this.target.f=this.current.f,y(this.container,"is-scaling"),y(this.container,"is-animating"),this.isTicking=!1;var s=this.trackingPoints,l=s[0],c=s[s.length-1],u=0,h=0,d=0;c&&l&&(u=c.clientX-l.clientX,h=c.clientY-l.clientY,d=c.time-l.time);i=(null===(f=window.visualViewport)||void 0===f?void 0:f.scale)||1;1!==i&&(u*=i,h*=i);var n=0,s=0,c=0,l=0,f=this.option("decelFriction"),i=this.targetScale;0<d&&(c=3<Math.abs(u)?u/(d/30):0,l=3<Math.abs(h)?h/(d/30):0,(v=this.option("maxVelocity"))&&(c=Math.max(Math.min(c,v),-1*v),l=Math.max(Math.min(l,v),-1*v))),c&&(n=c/(1/(1-f)-1)),l&&(s=l/(1/(1-f)-1)),("y"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"y"===this.lockedAxis&&L(i)===this.minScale)&&(n=c=0),("x"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"x"===this.lockedAxis&&L(i)===this.minScale)&&(s=l=0);var h=this.dragOffset.x,d=this.dragOffset.y,v=this.option("dragMinThreshold")||0;Math.abs(h)<v&&Math.abs(d)<v&&(c=l=n=s=0),(this.option("zoom")&&(i<this.minScale-1e-5||i>this.maxScale+1e-5)||e&&!n&&!s)&&(f=.35),this.applyChange({panX:n,panY:s,friction:f}),this.emit("decel",c,l,h,d)}},{key:"onWheel",value:function(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),t=Math.max(-1,Math.min(1,t));this.emit("wheel",e,t),this.panMode!==O&&(e.defaultPrevented||("pan"===(t=this.option("wheel"))?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):"zoom"===t&&!1!==this.option("zoom")&&this.zoomWithWheel(e)))}},{key:"onMouseMove",value:function(e){this.panWithMouse(e)}},{key:"onKeydown",value:function(e){"Escape"===e.key&&this.toggleFS()}},{key:"onResize",value:function(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}},{key:"setTransform",value:function(){this.emit("beforeTransform");var e=this.current,t=this.target,i=this.content,n=this.contentRect,o=Object.assign({},T),a=!0,r=!1,s=void 0;try{for(var l,c=w[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value,h="e"==u||"f"===u?1e4:1e5;o[u]=L(e[u],h),Math.abs(t[u]-e[u])<("e"==u||"f"===u?.51:.001)&&(e[u]=t[u])}}catch(e){r=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw s}}var s="matrix("+o.a+", "+o.b+", "+o.c+", "+o.d+", "+o.e+", "+o.f+")",i=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;(i=this.option("transformParent")?i.parentElement||i:i).style.transform!==s&&(i.style.transform=s,s=(i=this.calculateContentDim()).contentWidth,i=i.contentHeight,n.width=s,n.height=i,this.emit("afterTransform"))}},{key:"updateMetrics",value:function(){var e,t,i,n,o,a,r,s,l,c,u,h,d,f,v,p=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this&&this.state!==E.Destroy&&(this.isContentLoading||(v=Math.max(1,(null===(r=window.visualViewport)||void 0===r?void 0:r.scale)||1),s=this.container,e=(f=this.content)instanceof HTMLImageElement,t=s.getBoundingClientRect(),l=getComputedStyle(this.container),c=t.width*v,h=t.height*v,d=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),u=c-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),this.containerRect={width:c,height:h,innerWidth:u,innerHeight:h-d},i=this.option("width")||"auto",n=this.option("height")||"auto","auto"===i&&(i=parseFloat(f.dataset.width||"")||(f instanceof HTMLImageElement?f.naturalWidth:f instanceof SVGElement?f.width.baseVal.value:Math.max(f.offsetWidth,f.scrollWidth))||0),"auto"===n&&(n=parseFloat(f.dataset.height||"")||(f instanceof HTMLImageElement?f.naturalHeight:f instanceof SVGElement?f.height.baseVal.value:Math.max(f.offsetHeight,f.scrollHeight))||0),o=f.parentElement instanceof HTMLPictureElement?f.parentElement:f,a=(o=this.option("transformParent")?o.parentElement||o:o).getAttribute("style")||"",o.style.setProperty("transform","none","important"),e&&(o.style.width="",o.style.height=""),o.offsetHeight,s=(r=f.getBoundingClientRect()).width*v,l=r.height*v,u=c=0,e&&(1<Math.abs(i-s)||1<Math.abs(n-l))&&(f=(h=s)/l<(v=(d=i)/(f=n))?(d=h)/v:(d=l*v,l),s=(d={width:d,height:f,top:.5*(l-f),left:.5*(h-d)}).width,l=d.height,c=d.top,u=d.left),this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:r.top-t.top+c,bottom:t.bottom-r.bottom+c,left:r.left-t.left+u,right:t.right-r.right+u,fitWidth:s,fitHeight:l,width:s,height:l,fullWidth:i,fullHeight:n}),o.style.cssText=a,e&&(o.style.width=s+"px",o.style.height=l+"px"),this.setTransform(),!0!==p&&this.emit("refresh"),this.ignoreBounds||(L(this.targetScale)<L(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===E.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()))}},{key:"calculateBounds",value:function(){var e,t=this.calculateContentDim(this.target),i=t.contentWidth,n=t.contentHeight,o=this.targetScale,a=this.lockedAxis,r=this.contentRect,s=r.fitWidth,l=r.fitHeight,c=0,u=0,h=0,d=0,f=this.option("infinite");return!0===f||a&&f===a?(u=c=-1/0,d=h=1/0):(e=this.containerRect,t=this.contentRect,r=L(s*o,1e4),f=L(l*o,1e4),a=e.innerWidth,o=e.innerHeight,e.width===r&&(a=e.width),e.width===f&&(o=e.height),a<i&&(c=-1*(h=.5*(i-a)),c+=e=.5*(t.right-t.left),h+=e),a<s&&i<a&&(c-=.5*(s-a),h-=.5*(s-a)),o<n&&(u=-1*(d=.5*(n-o)),u+=t=.5*(t.bottom-t.top),d+=t),o<l&&n<o&&(c-=.5*(l-o),h-=.5*(l-o))),{x:{min:c,max:h},y:{min:u,max:d}}}},{key:"getBounds",value:function(){var e=this.option("bounds");return"auto"!==e?e:this.calculateBounds()}},{key:"updateControls",value:function(){var e=this,t=e.container,i=e.panMode,n=e.contentRect,o=e.fullScale,a=e.targetScale,r=e.coverScale,s=e.maxScale,l=e.minScale,r={toggleMax:a-l<.5*(s-l)?s:l,toggleCover:a-l<.5*(r-l)?r:l,toggleZoom:a-l<.5*(o-l)?o:l}[e.option("click")||""]||l,c=e.canZoomIn(),u=e.canZoomOut(),o="drag"===i&&!!this.option("touch"),e=u&&o;if(o&&(L(a)<L(l)&&!this.panOnlyZoomed&&(e=!0),(L(n.width,1)>L(n.fitWidth,1)||L(n.height,1)>L(n.fitHeight,1))&&(e=!0)),L(n.width*a,1)<L(n.fitWidth,1)&&(e=!1),i===O&&(e=!1),C(t,this.cn("isDraggable"),e),this.option("zoom")){i=c&&L(r)>L(a),a=!i&&!e&&u&&L(r)<L(a);C(t,this.cn("canZoomIn"),i),C(t,this.cn("canZoomOut"),a);var h=!0,i=!1,a=void 0;try{for(var d,f=t.querySelectorAll('[data-panzoom-action="zoomIn"]')[Symbol.iterator]();!(h=(d=f.next()).done);h=!0){var v=d.value;c?(v.removeAttribute("disabled"),v.removeAttribute("tabindex")):(v.setAttribute("disabled",""),v.setAttribute("tabindex","-1"))}}catch(e){i=!0,a=e}finally{try{!h&&f.return&&f.return()}finally{if(i)throw a}}var p=!0,i=!1,a=void 0;try{for(var g,m=t.querySelectorAll('[data-panzoom-action="zoomOut"]')[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var y=g.value;u?(y.removeAttribute("disabled"),y.removeAttribute("tabindex")):(y.setAttribute("disabled",""),y.setAttribute("tabindex","-1"))}}catch(e){i=!0,a=e}finally{try{!p&&m.return&&m.return()}finally{if(i)throw a}}var b=!0,i=!1,a=void 0;try{for(var w,x=t.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')[Symbol.iterator]();!(b=(w=x.next()).done);b=!0){var k=w.value;c||u?(k.removeAttribute("disabled"),k.removeAttribute("tabindex")):(k.setAttribute("disabled",""),k.setAttribute("tabindex","-1"));var S=k.querySelector("g");S&&(S.style.display=c?"":"none")}}catch(e){i=!0,a=e}finally{try{!b&&x.return&&x.return()}finally{if(i)throw a}}}}},{key:"panTo",value:function(e){var t=e.x,i=void 0===t?this.target.e:t,n=e.y,o=void 0===n?this.target.f:n,a=e.scale,r=void 0===a?this.targetScale:a,s=e.friction,l=void 0===s?this.option("friction"):s,c=e.angle,t=e.originX,n=e.originY,a=e.flipX,s=e.flipY,e=e.ignoreBounds;this.state!==E.Destroy&&this.applyChange({panX:i-this.target.e,panY:o-this.target.f,scale:r/this.targetScale,angle:void 0===c?0:c,originX:void 0===t?0:t,originY:void 0===n?0:n,friction:l,flipX:void 0!==a&&a,flipY:void 0!==s&&s,ignoreBounds:void 0!==e&&e})}},{key:"applyChange",value:function(e){var t=e.panX,i=void 0===t?0:t,n=e.panY,o=void 0===n?0:n,a=e.scale,r=void 0===a?1:a,s=e.angle,l=void 0===s?0:s,c=e.originX,u=void 0===c?-this.current.e:c,h=e.originY,d=void 0===h?-this.current.f:h,f=e.friction,v=void 0===f?this.option("friction"):f,t=e.flipX,n=void 0!==t&&t,a=e.flipY,s=void 0!==a&&a,c=e.ignoreBounds,h=void 0!==c&&c,f=e.bounce,t=void 0===f?this.option("bounce"):f,a=this.state;if(a!==E.Destroy){this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=v||0,this.ignoreBounds=h;var c=this.current,e=c.e,f=c.f,v=this.getMatrix(this.target),p=(new DOMMatrix).translate(e,f).translate(u,d).translate(i,o);this.option("zoom")&&(h||(c=this.targetScale,i=this.minScale,(o=this.maxScale)<c*(r=c*r<i?i/c:r)&&(r=o/c)),p=p.scale(r)),p=p.translate(-u,-d).translate(-e,-f).multiply(v),l&&(p=p.rotate(l)),n&&(p=p.scale(-1,1)),s&&(p=p.scale(1,-1));var g=!0,n=!1,s=void 0;try{for(var m,y=w[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var b=m.value;"e"!==b&&"f"!==b&&(p[b]>this.minScale+1e-5||p[b]<this.minScale-1e-5)?this.target[b]=p[b]:this.target[b]=L(p[b],1e4)}}catch(e){n=!0,s=e}finally{try{!g&&y.return&&y.return()}finally{if(n)throw s}}(this.targetScale<this.scale||.1<Math.abs(r-1)||this.panMode===O||!1===t)&&!h&&this.clampTargetBounds(),a===E.Init?this.animate():this.isResting||(this.state=E.Panning,this.requestTick())}}},{key:"stop",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(this.state!==E.Init&&this.state!==E.Destroy){var t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1;var i=!(this.isBouncingY=!1),n=!1,o=void 0;try{for(var a,r=w[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var s=a.value;this.velocity[s]=0,"current"===e?this.current[s]=this.target[s]:"target"===e&&(this.target[s]=this.current[s])}}catch(e){n=!0,o=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}this.setTransform(),y(this.container,"is-scaling"),y(this.container,"is-animating"),this.isTicking=!1,this.state=E.Ready,t&&(this.emit("endAnimation"),this.updateControls())}}},{key:"requestTick",value:function(){var e=this;this.isTicking||(this.emit("startAnimation"),this.updateControls(),F(this.container,"is-animating"),this.isScaling&&F(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(function(){return e.animate()}))}},{key:"panWithMouse",value:function(e){var t,i,n,o,a,r,s,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.option("mouseMoveFriction");this.pmme=e,this.panMode===O&&e&&(L(this.targetScale)<=L(this.minScale)||(this.emit("mouseMove",e),a=this.container,n=this.containerRect,t=this.contentRect,r=n.width,s=n.height,o=a.getBoundingClientRect(),i=(e.clientX||0)-o.left,n=(e.clientY||0)-o.top,e=(a=this.calculateContentDim(this.target)).contentWidth,o=a.contentHeight,1<(a=this.option("mouseMoveFactor"))&&(e!==r&&(e*=a),o!==s&&(o*=a)),r=.5*(e-r)-i/r*100/100*(e-r),r+=.5*(t.right-t.left),s=.5*(o-s)-n/s*100/100*(o-s),s+=.5*(t.bottom-t.top),this.applyChange({panX:r-this.target.e,panY:s-this.target.f,friction:l})))}},{key:"zoomWithWheel",value:function(e){var t,i,n,o,a;this.state!==E.Destroy&&this.state!==E.Init&&((o=Date.now())-this.pwt<45?e.preventDefault():(this.pwt=o,a=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),t=Math.max(-1,Math.min(1,a)),i=this.targetScale,n=this.maxScale,o=this.minScale,a=L(a=i*(100+45*t)/100)<L(o)&&L(i)<=L(o)?(this.cwd+=Math.abs(t),o):L(a)>L(n)&&L(i)>=L(n)?(this.cwd+=Math.abs(t),n):(this.cwd=0,Math.max(Math.min(a,n),o)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),L(a)!==L(i)&&this.zoomTo(a,{event:e}))))}},{key:"canZoomIn",value:function(){return this.option("zoom")&&(L(this.contentRect.width,1)<L(this.contentRect.fitWidth,1)||L(this.targetScale)<L(this.maxScale))}},{key:"canZoomOut",value:function(){return this.option("zoom")&&L(this.targetScale)>L(this.minScale)}},{key:"zoomIn",value:function(){this.zoomTo(this.targetScale*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1.25),arguments[1])}},{key:"zoomOut",value:function(){this.zoomTo(this.targetScale*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:.8),arguments[1])}},{key:"zoomToFit",value:function(e){this.zoomTo("fit",e)}},{key:"zoomToCover",value:function(e){this.zoomTo("cover",e)}},{key:"zoomToFull",value:function(e){this.zoomTo("full",e)}},{key:"zoomToMax",value:function(e){this.zoomTo("max",e)}},{key:"toggleZoom",value:function(e){this.zoomTo(this.targetScale-this.minScale<.5*(this.fullScale-this.minScale)?"full":"fit",e)}},{key:"toggleMax",value:function(e){this.zoomTo(this.targetScale-this.minScale<.5*(this.maxScale-this.minScale)?"max":"fit",e)}},{key:"toggleCover",value:function(e){this.zoomTo(this.targetScale-this.minScale<.5*(this.coverScale-this.minScale)?"cover":"fit",e)}},{key:"iterateZoom",value:function(e){this.zoomTo("next",e)}},{key:"zoomTo",value:function(){var t,e,i,n,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=a.friction,s=void 0===r?"auto":r,l=a.originX,c=void 0===l?"auto":l,r=a.originY,l=void 0===r?"auto":r,r=a.event;this.isContentLoading||this.state===E.Destroy||(t=this.targetScale,this.stop(),a=1,!(r=this.panMode===O&&this.pmme||r)&&"auto"!==c&&"auto"!==l||(e=this.content.getBoundingClientRect(),n=this.container.getBoundingClientRect(),i=r?r.clientX:n.left+.5*n.width,n=r?r.clientY:n.top+.5*n.height,c=i-e.left-.5*e.width,l=n-e.top-.5*e.height),i=this.fullScale,n=this.maxScale,e=this.coverScale,"number"==typeof o?a=o/t||1:"full"===o?a=i/t||1:"cover"===o?a=e/t||1:"max"===o?a=n/t||1:"fit"===o?a=1/t||1:"next"===o&&(n=(i=[1,i,n].sort(function(e,t){return e-t})).findIndex(function(e){return t+1e-5<e}),a=i[n]/t||1/t),this.applyChange({scale:a,originX:c,originY:l,friction:s="auto"===s?1<a?.15:.25:s}),r&&this.panMode===O&&this.panWithMouse(r,s))}},{key:"rotateCCW",value:function(){this.applyChange({angle:-90})}},{key:"rotateCW",value:function(){this.applyChange({angle:90})}},{key:"flipX",value:function(){this.applyChange({flipX:!0})}},{key:"flipY",value:function(){this.applyChange({flipY:!0})}},{key:"fitX",value:function(){this.stop("target");var e=this.containerRect,t=this.contentRect,i=this.target;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-i.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}},{key:"fitY",value:function(){this.stop("target");var e=this.containerRect,t=this.contentRect,i=this.target;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-i.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}},{key:"toggleFS",value:function(){var e=this.container,t=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(t);t=e.classList.contains(t);t?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(t?"enterFS":"exitFS")}},{key:"getMatrix",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.current,t=e.a,i=e.b,n=e.c,o=e.d,a=e.e,e=e.f;return new DOMMatrix([t,i,n,o,a,e])}},{key:"reset",value:function(e){if(this.state!==E.Init&&this.state!==E.Destroy){this.stop("current");var t=!0,i=!1,n=void 0;try{for(var o,a=w[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var r=o.value;this.target[r]=T[r]}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=void 0===e?this.option("friction"):e,this.state=E.Panning,this.requestTick())}}},{key:"destroy",value:function(){this.stop(),this.state=E.Destroy,this.detachEvents(),this.detachObserver();var e=this.container,t=this.content,i=this.option("classes")||{},n=!0,o=!1,a=void 0;try{for(var r,s=Object.values(i)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;e.classList.remove(l+"")}}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}}]),z);function z(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(_classCallCheck(this,z),t=_possibleConstructorReturn(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,i)),Object.defineProperty(t,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"state",{enumerable:!0,configurable:!0,writable:!0,value:E.Init}),Object.defineProperty(t,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(t,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(t,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(t,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(t,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},T)}),Object.defineProperty(t,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},T)}),Object.defineProperty(t,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(t,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");t.container=e,t.initContent(),t.attachPlugins(Object.assign(Object.assign({},z.Plugins),n)),t.emit("attachPlugins"),t.emit("init");i=t.content;return i.addEventListener("load",t.onLoad),i.addEventListener("error",t.onError),t.isContentLoading?(t.option("spinner")&&(e.classList.add(t.cn("isLoading")),n=S(P),!e.contains(i)||i.parentElement instanceof HTMLPictureElement?t.spinner=e.appendChild(n):t.spinner=(null===(e=i.parentElement)||void 0===e?void 0:e.insertBefore(n,i))||null),t.emit("beforeLoad")):queueMicrotask(function(){t.enable()}),_possibleConstructorReturn(t)}Object.defineProperty(R,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:x}),Object.defineProperty(R,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});function I(e,t){var i=!0;return function(){i&&(i=!1,e.apply(void 0,arguments),setTimeout(function(){i=!0},t))}}function j(e,t){var i=[];return e.childNodes.forEach(function(e){e.nodeType!==Node.ELEMENT_NODE||t&&!e.matches(t)||i.push(e)}),i}var D;(V=D=D||{})[V.Init=0]="Init",V[V.Ready=1]="Ready",V[V.Destroy=2]="Destroy";function H(e){var t;return"string"==typeof e||e instanceof HTMLElement?e={html:e}:void 0!==(t=e.thumb)&&("string"==typeof t&&(e.thumbSrc=t),t instanceof HTMLImageElement&&(e.thumbEl=t,e.thumbElSrc=t.src,e.thumbSrc=t.src),delete e.thumb),Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},e)}var B=(_inherits(N,i),_createClass(N,[{key:"attach",value:function(){}},{key:"detach",value:function(){}}]),N);function N(e,t){return _classCallCheck(this,N),t=_possibleConstructorReturn(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,t)),Object.defineProperty(t,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e}),t}_inherits(W,B),_createClass(W,[{key:"onRefresh",value:function(){this.refresh()}},{key:"build",value:function(){var e,t=this.list;return t||(t=document.createElement("ul"),F(t,this.cn("list")),t.setAttribute("role","tablist"),(e=this.instance.container).appendChild(t),F(e,this.cn("hasDots")),this.list=t),t}},{key:"refresh",value:function(){var e,t=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),o=this.option("dynamicFrom");if(t<i||n<t)this.cleanup();else{i="number"==typeof o&&5<t&&o<=t,n=!this.list||this.isDynamic!==i||this.list.children.length!==t;n&&this.cleanup();var a=this.build();if(C(a,this.cn("isDynamic"),!!i),n)for(var r=0;r<t;r++)a.append(this.createItem(r));for(var s=void 0,l=0,c=[].concat(_toConsumableArray(a.children)),u=0;u<c.length;u++){var h=c[u],d=l===this.instance.page;d&&(s=h),C(h,this.cn("isCurrent"),d),null===(e=h.children[0])||void 0===e||e.setAttribute("aria-selected",d?"true":"false");for(var f=["isBeforePrev","isPrev","isNext","isAfterNext"],v=0;v<f.length;v++)y(h,this.cn(f[v]));l++}s=s||a.firstChild;i&&s&&(n=(o=s.previousElementSibling)&&o.previousElementSibling,F(o,this.cn("isPrev")),F(n,this.cn("isBeforePrev")),n=(o=s.nextElementSibling)&&o.nextElementSibling,F(o,this.cn("isNext")),F(n,this.cn("isAfterNext"))),this.isDynamic=i}}},{key:"createItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=document.createElement("li");t.setAttribute("role","presentation");var e=S(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return t.appendChild(e),null===(e=t.children[0])||void 0===e||e.setAttribute("role","tab"),t}},{key:"cleanup",value:function(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,y(this.instance.container,this.cn("hasDots"))}},{key:"attach",value:function(){this.instance.on(["refresh","change"],this.onRefresh)}},{key:"detach",value:function(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}]),k=W;function W(){var e;return _classCallCheck(this,W),e=_possibleConstructorReturn(this,(W.__proto__||Object.getPrototypeOf(W)).apply(this,arguments)),Object.defineProperty(e,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"list",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}Object.defineProperty(k,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2}});var X="disabled",q="next",x=(_inherits(Y,B),_createClass(Y,[{key:"onRefresh",value:function(){var e,t,i=this.instance,n=i.pages.length,o=i.page;n<2?this.cleanup():(this.build(),e=this.prev,t=this.next,e&&t&&(e.removeAttribute(X),t.removeAttribute(X),i.isInfinite||(o<=0&&e.setAttribute(X,""),n-1<=o&&t.setAttribute(X,""))))}},{key:"addBtn",value:function(e){var t=this.instance,i=document.createElement("button");i.setAttribute("tabindex","0"),i.setAttribute("title",t.localize("{{"+e.toUpperCase()+"}}")),F(i,this.cn("button")+" "+this.cn(e===q?"isNext":"isPrev"));var n=t.isRTL?e===q?"prev":q:e;return i.innerHTML=t.localize(this.option(n+"Tpl")),i.dataset["carousel"+((e=e)?e.match("^[a-z]")?e.charAt(0).toUpperCase()+e.substring(1):e:"")]="true",null===(e=this.container)||void 0===e||e.appendChild(i),i}},{key:"build",value:function(){var e=this.instance.container,t=this.cn("container"),i=this.container,n=this.prev,o=this.next;i||(i=e.querySelector("."+t),this.isDom=!!i),i||(i=document.createElement("div"),F(i,t),e.appendChild(i)),this.container=i,o=(o=o||i.querySelector("[data-carousel-next]"))||this.addBtn(q),this.next=o,n=(n=n||i.querySelector("[data-carousel-prev]"))||this.addBtn("prev"),this.prev=n}},{key:"cleanup",value:function(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}},{key:"attach",value:function(){this.instance.on(["refresh","change"],this.onRefresh)}},{key:"detach",value:function(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}]),Y);function Y(){var e;return _classCallCheck(this,Y),e=_possibleConstructorReturn(this,(Y.__proto__||Object.getPrototypeOf(Y)).apply(this,arguments)),Object.defineProperty(e,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}Object.defineProperty(x,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});var V=(_inherits(Z,B),_createClass(Z,[{key:"addAsTargetFor",value:function(e){this.target=this.instance,this.nav=e,this.attachEvents()}},{key:"addAsNavFor",value:function(e){this.nav=this.instance,this.target=e,this.attachEvents()}},{key:"attachEvents",value:function(){var e=this.nav,t=this.target;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===D.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===D.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}},{key:"onNavReady",value:function(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}},{key:"onTargetReady",value:function(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}},{key:"onNavClick",value:function(e,t,i){this.onNavTouch(e,e.panzoom,i)}},{key:"onNavTouch",value:function(e,t,i){var n,o,a;3<Math.abs(t.dragOffset.x)||3<Math.abs(t.dragOffset.y)||(a=i.target,n=this.nav,o=this.target,n&&o&&a&&(t=a.closest("[data-index]"),i.stopPropagation(),i.preventDefault(),t&&(a=parseInt(t.dataset.index||"",10)||0,i=o.getPageForSlide(a),t=n.getPageForSlide(a),n.slideTo(t),o.slideTo(i,{friction:(null===(i=null===(i=this.nav)||void 0===i?void 0:i.plugins)||void 0===i?void 0:i.Sync.option("friction"))||0}),this.markSelectedSlide(a))))}},{key:"onNavCreateSlide",value:function(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}},{key:"onTargetChange",value:function(){var e,t,i=this.target,n=this.nav;i&&n&&n.state===D.Ready&&i.state===D.Ready&&(e=null===(t=null===(e=i.pages[i.page])||void 0===e?void 0:e.slides[0])||void 0===t?void 0:t.index,t=n.getPageForSlide(e),this.markSelectedSlide(e),n.slideTo(t,null===n.prevPage&&null===i.prevPage?{friction:0}:void 0))}},{key:"markSelectedSlide",value:function(t){var e=this.nav;e&&e.state===D.Ready&&(this.selectedIndex=t,[].concat(_toConsumableArray(e.slides)).map(function(e){e.el&&e.el.classList[e.index===t?"add":"remove"]("is-nav-selected")}))}},{key:"attach",value:function(){var e=this.options.target,t=this.options.nav;e?this.addAsNavFor(e):t&&this.addAsTargetFor(t)}},{key:"detach",value:function(){var e=this,t=e.nav,i=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}}]),Z);function Z(){var e;return _classCallCheck(this,Z),e=_possibleConstructorReturn(this,(Z.__proto__||Object.getPrototypeOf(Z)).apply(this,arguments)),Object.defineProperty(e,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}Object.defineProperty(V,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});var i={Navigation:x,Dots:k,Sync:V},U="animationend",G="isSelected",K="slide",J=(_inherits($,o),_createClass($,[{key:"axis",get:function(){return this.isHorizontal?"e":"f"}},{key:"isEnabled",get:function(){return this.state===D.Ready}},{key:"isInfinite",get:function(){var e=!1,t=this.contentDim,i=this.viewportDim,n=this.pages,o=this.slides[0];return e=2<=n.length&&o&&t+o.dim>=i?this.option("infinite"):e}},{key:"isRTL",get:function(){return"rtl"===this.option("direction")}},{key:"isHorizontal",get:function(){return"x"===this.option("axis")}}]),_createClass($,[{key:"processOptions",value:function(){var e=this,t=m({},$.defaults,this.userOptions),i="",n=t.breakpoints;if(n&&f(n)){var o=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(n)[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=_slicedToArray(s.value,2),u=c[0],h=c[1];window.matchMedia(u).matches&&f(h)&&(i+=u,m(t,h))}}catch(e){a=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw r}}}i===this.bp&&this.state!==D.Init||(this.bp=i,this.state===D.Ready&&(t.initialSlide=(null===(r=null===(r=this.pages[this.page])||void 0===r?void 0:r.slides[0])||void 0===r?void 0:r.index)||0),this.state!==D.Init&&this.destroy(),_get($.prototype.__proto__||Object.getPrototypeOf($.prototype),"setOptions",this).call(this,t),!1===this.option("enabled")?this.attachEvents():setTimeout(function(){e.init()},0))}},{key:"init",value:function(){this.state=D.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},$.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=D.Ready,this.emit("ready")}},{key:"initLayout",value:function(){var e=this.container,t=this.option("classes");F(e,this.cn("container")),C(e,t.isLTR,!this.isRTL),C(e,t.isRTL,this.isRTL),C(e,t.isVertical,!this.isHorizontal),C(e,t.isHorizontal,this.isHorizontal);var i=this.option("viewport")||e.querySelector("."+t.viewport);i||(i=document.createElement("div"),F(i,t.viewport),i.append.apply(i,_toConsumableArray(j(e,"."+t.slide))),e.prepend(i)),i.addEventListener("scroll",this.onScroll);e=this.option("track")||e.querySelector("."+t.track);e||(e=document.createElement("div"),F(e,t.track),e.append.apply(e,_toConsumableArray(Array.from(i.childNodes)))),e.setAttribute("aria-live","polite"),i.contains(e)||i.prepend(e),this.viewport=i,this.track=e,this.emit("initLayout")}},{key:"initSlides",value:function(){var t=this,i=this.track;if(i){var n=[].concat(_toConsumableArray(this.slides)),o=[];[].concat(_toConsumableArray(j(i,"."+this.cn(K)))).forEach(function(e){g(e)&&(e=H({el:e,isDom:!0,index:t.slides.length}),o.push(e))});for(var e=[].concat(_toConsumableArray(this.option("slides",[])||[]),_toConsumableArray(n)),a=0;a<e.length;a++){var r=e[a];o.push(H(r))}this.slides=o;for(var s=0;s<this.slides.length;s++)this.slides[s].index=s;var l=!0,i=!1,n=void 0;try{for(var c,u=o[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var h=c.value;this.emit("beforeInitSlide",h,h.index),this.emit("initSlide",h,h.index)}}catch(e){i=!0,n=e}finally{try{!l&&u.return&&u.return()}finally{if(i)throw n}}this.emit("initSlides")}}},{key:"setInitialPage",value:function(){var e=this.option("initialSlide");this.page="number"==typeof e?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}},{key:"setInitialPosition",value:function(){var e,t=this.track,i=this.pages,n=this.isHorizontal;t&&i.length&&(i[e=this.page]||(this.page=e=0),e=(i[e].pos||0)*(this.isRTL&&n?1:-1),t.style.transform="translate3d("+(n?e+"px":"0")+", "+(n?"0":e+"px")+", 0) scale(1)",this.option("adaptiveHeight")&&this.setViewportHeight())}},{key:"initPanzoom",value:function(){var a=this;this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);var e=this.option("Panzoom")||{};this.panzoom=new R(this.viewport,m({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:function(e){return!(a.pages.length<2&&!e.options.infinite)},bounds:function(){return a.getBounds()},maxVelocity:function(e){return Math.abs(e.target[a.axis]-e.current[a.axis])<2*a.viewportDim?100:0}},e)),this.panzoom.on("*",function(e,t){for(var i=arguments.length,n=Array(2<i?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];a.emit.apply(a,["Panzoom."+t,e].concat(n))}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}},{key:"attachEvents",value:function(){var e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}},{key:"createPages",value:function(){var e=[],t=this.contentDim,i=this.viewportDim,n=("auto"===(n=this.option("slidesPerPage"))||t<=i)&&!1!==this.option("fill")?1/0:parseFloat(n+""),o=0,a=0,r=0,s=!0,l=!1,t=void 0;try{for(var c,u=this.slides[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value;(!e.length||.05<a+h.dim-i||n<=r)&&(e.push(function(){return Object.assign({index:-1,slides:[],dim:0,pos:-1},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}()),o=e.length-1,r=a=0),e[o].slides.push(h),a+=h.dim+h.gap,r++}}catch(e){l=!0,t=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw t}}return e}},{key:"processPages",value:function(){var e=this.pages,c=this.contentDim,u=this.viewportDim,t=this.isInfinite,h=this.option("center"),i=this.option("fill"),d=i&&h&&u<c&&!t;if(e.forEach(function(e,t){e.index=t,e.pos=(null===(n=e.slides[0])||void 0===n?void 0:n.pos)||0;var i=!(e.dim=0),t=!1,n=void 0;try{for(var o,a=e.slides.entries()[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var r=_slicedToArray(o.value,2),s=r[0],l=r[1];e.dim+=l.dim,s<e.slides.length-1&&(e.dim+=l.gap)}}catch(e){t=!0,n=e}finally{try{!i&&a.return&&a.return()}finally{if(t)throw n}}d&&e.pos+.5*e.dim<.5*u?e.pos=0:d&&e.pos+.5*e.dim>=c-.5*u?e.pos=c-u:h&&(e.pos+=-.5*(u-e.dim))}),e.forEach(function(e){i&&!t&&u<c&&(e.pos=Math.max(e.pos,0),e.pos=Math.min(e.pos,c-u)),e.pos=L(e.pos,1e3),e.dim=L(e.dim,1e3),Math.abs(e.pos)<=.1&&(e.pos=0)}),t)return e;var n=[],o=void 0;return e.forEach(function(e){e=Object.assign({},e);o&&e.pos===o.pos?(o.dim+=e.dim,o.slides=[].concat(_toConsumableArray(o.slides),_toConsumableArray(e.slides))):(e.index=n.length,o=e,n.push(e))}),n}},{key:"getPageFromIndex",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.pages.length,e=parseInt((e||0).toString())||0;return this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0)}},{key:"getSlideMetrics",value:function(e){var t=this.isHorizontal?"width":"height",i=0,n=e.el,o=!(!n||n.parentNode);n?i=parseFloat(n.dataset[t]||"")||0:((n=document.createElement("div")).style.visibility="hidden",(this.track||document.body).prepend(n)),F(n,this.cn(K)+" "+e.class+" "+e.customClass),i?(n.style[t]=i+"px",n.style["width"==t?"height":"width"]=""):(o&&(this.track||document.body).prepend(n),(i=n.getBoundingClientRect()[t]*Math.max(1,(null===(a=window.visualViewport)||void 0===a?void 0:a.scale)||1))<(a=n[this.isHorizontal?"offsetWidth":"offsetHeight"])-1&&(i=a));var a=getComputedStyle(n);return"content-box"===a.boxSizing&&(this.isHorizontal?(i+=parseFloat(a.paddingLeft)||0,i+=parseFloat(a.paddingRight)||0):(i+=parseFloat(a.paddingTop)||0,i+=parseFloat(a.paddingBottom)||0)),a=parseFloat(a[this.isHorizontal?"marginRight":"marginBottom"])||0,o?null===(o=n.parentElement)||void 0===o||o.removeChild(n):e.el||n.remove(),{dim:L(i,1e3),gap:L(a,1e3)}}},{key:"getBounds",value:function(){var e=this.isInfinite,t=this.isRTL,i=this.isHorizontal,n=this.pages,o={min:0,max:0};return e?o={min:-1/0,max:1/0}:n.length&&(e=n[0].pos,n=n[n.length-1].pos,o=t&&i?{min:e,max:n}:{min:-1*n,max:-1*e}),{x:i?o:{min:0,max:0},y:i?{min:0,max:0}:o}}},{key:"repositionSlides",value:function(){var e,t=this.isHorizontal,i=this.isRTL,n=this.isInfinite,o=this.viewport,a=this.viewportDim,r=this.contentDim,s=this.page,l=this.pages,c=this.slides,u=this.panzoom,h=0,d=0,f=0,v=0;u?v=-1*u.current[this.axis]:l[s]&&(v=l[s].pos||0),e=t?i?"right":"left":"top",i&&t&&(v*=-1);var p=!0,s=!1,i=void 0;try{for(var g,m=c[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var y=g.value,b=y.el;b?("top"==e?(b.style.right="",b.style.left=""):b.style.top="",y.index!==h?b.style[e]=0===d?"":L(d,1e3)+"px":b.style[e]="",f+=y.dim+y.gap,h++):d+=y.dim+y.gap}}catch(e){s=!0,i=e}finally{try{!p&&m.return&&m.return()}finally{if(s)throw i}}if(n&&f&&o){var n=getComputedStyle(o),o="padding",w=t?"Right":"Bottom",t=parseFloat(n[o+(t?"Left":"Top")]);v-=t,a+=t,a+=parseFloat(n[o+w]);var x=!0,o=!1,w=void 0;try{for(var k,S=c[Symbol.iterator]();!(x=(k=S.next()).done);x=!0){var C=k.value;C.el&&(L(C.pos)<L(a)&&L(C.pos+C.dim+C.gap)<L(v)&&L(v)>L(r-a)&&(C.el.style[e]=L(d+f,1e3)+"px"),L(C.pos+C.gap)>=L(r-a)&&L(C.pos)>L(v+a)&&L(v)<L(a)&&(C.el.style[e]="-"+L(f,1e3)+"px"))}}catch(e){o=!0,w=e}finally{try{!x&&S.return&&S.return()}finally{if(o)throw w}}}var E=void 0,P=void 0,w=[].concat(_toConsumableArray(this.inTransition));if(1<w.length&&(E=l[w[0]],P=l[w[1]]),E&&P){var T=0,O=!0,l=!1,w=void 0;try{for(var M,A=c[Symbol.iterator]();!(O=(M=A.next()).done);O=!0){var _=M.value;_.el?this.inTransition.has(_.index)&&E.slides.indexOf(_)<0&&(_.el.style[e]=L(T+(E.pos-P.pos),1e3)+"px"):T+=_.dim+_.gap}}catch(e){l=!0,w=e}finally{try{!O&&A.return&&A.return()}finally{if(l)throw w}}}}},{key:"createSlideEl",value:function(e){var t,i,n,o,a=this.track,r=this.slides;a&&e&&(e.el&&e.el.parentNode||(t=e.el||document.createElement("div"),F(t,this.cn(K)),F(t,e.class),F(t,e.customClass),(o=e.html)&&(o instanceof HTMLElement?t.appendChild(o):t.innerHTML=e.html+""),i=[],r.forEach(function(e,t){e.el&&i.push(t)}),n=e.index,o=null,o=(o=i.length?r[i.reduce(function(e,t){return Math.abs(t-n)<Math.abs(e-n)?t:e})]:o)&&o.el&&o.el.parentNode?o.index<e.index?o.el.nextSibling:o.el:null,a.insertBefore(t,a.contains(o)?o:null),e.el=t,this.emit("createSlide",e)))}},{key:"removeSlideEl",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=null==e?void 0:e.el;if(i&&i.parentNode){var n=this.cn(G);if(i.classList.contains(n)&&(y(i,n),this.emit("unselectSlide",e)),e.isDom&&!t)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",e);t=new CustomEvent(U);i.dispatchEvent(t),e.el&&(e.el.remove(),e.el=null)}}},{key:"transitionTo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.option("transition");if(!t)return!1;var i=this.page,n=this.pages,o=this.panzoom,e=parseInt((e||0).toString())||0,a=this.getPageFromIndex(e);if(!o||!n[a]||n.length<2||1<Math.abs(((null===(c=null===(u=n[i])||void 0===u?void 0:u.slides[0])||void 0===c?void 0:c.dim)||0)-this.viewportDim))return!1;var r=i<e?1:-1,s=n[a].pos*(this.isRTL?1:-1);if(i===a&&Math.abs(s-o.target[this.axis])<1)return!1;this.clearTransitions();var l=o.isResting;F(this.container,this.cn("inTransition"));var c=(null===(u=n[i])||void 0===u?void 0:u.slides[0])||null,i=(null===(e=n[a])||void 0===e?void 0:e.slides[0])||null;this.inTransition.add(i.index),this.createSlideEl(i);var u=c.el,n=i.el;l||t===K||(t="fadeFast",u=null);e=this.isRTL?"next":"prev",l=this.isRTL?"prev":"next";return u&&(this.inTransition.add(c.index),c.transition=t,u.addEventListener(U,this.onAnimationEnd),u.classList.add("f-"+t+"Out","to-"+(0<r?l:e))),n&&(i.transition=t,n.addEventListener(U,this.onAnimationEnd),n.classList.add("f-"+t+"In","from-"+(0<r?e:l))),o.current[this.axis]=s,o.target[this.axis]=s,o.requestTick(),this.onChange(a),!0}},{key:"manageSlideVisiblity",value:function(){var e=new Set,t=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0),n=!0,o=!1,a=void 0;try{for(var r,s=this.slides[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;(i.has(l)?e:t).add(l)}}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}var c=!0,o=!1,a=void 0;try{for(var u,h=this.inTransition[Symbol.iterator]();!(c=(u=h.next()).done);c=!0){var d=u.value;e.add(this.slides[d])}}catch(e){o=!0,a=e}finally{try{!c&&h.return&&h.return()}finally{if(o)throw a}}var f=!0,o=!1,a=void 0;try{for(var v,p=e[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var g=v.value;this.createSlideEl(g),this.lazyLoadSlide(g)}}catch(e){o=!0,a=e}finally{try{!f&&p.return&&p.return()}finally{if(o)throw a}}var m=!0,o=!1,a=void 0;try{for(var y,b=t[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=y.value;e.has(w)||this.removeSlideEl(w)}}catch(e){o=!0,a=e}finally{try{!m&&b.return&&b.return()}finally{if(o)throw a}}this.markSelectedSlides(),this.repositionSlides()}},{key:"markSelectedSlides",value:function(){if(this.pages[this.page]&&this.pages[this.page].slides){var e="aria-hidden",t=this.cn(G);if(t){var i=!0,n=!1,o=void 0;try{for(var a,r=this.slides[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var s=a.value,l=s.el;l&&(l.dataset.index=""+s.index,l.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(s)?l.removeAttribute(e):l.setAttribute(e,"true"):this.pages[this.page].slides.includes(s)?(l.classList.contains(t)||(F(l,t),this.emit("selectSlide",s)),l.removeAttribute(e)):(l.classList.contains(t)&&(y(l,t),this.emit("unselectSlide",s)),l.setAttribute(e,"true")))}}catch(e){n=!0,o=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}}}}},{key:"flipInfiniteTrack",value:function(){var e,t,i=this.axis,n=this.isHorizontal,o=this.isInfinite,a=this.isRTL,r=this.viewportDim,s=this.contentDim,l=this.panzoom;l&&o&&(e=l.current[i],t=l.target[i]-e,o=0,r=.5*r,a&&n?(e<-r&&(o=-1,e+=s),s-r<e&&(o=1,e-=s)):(r<e&&(o=1,e-=s),e<r-s&&(o=-1,e+=s)),o&&(l.current[i]=e,l.target[i]=e+t))}},{key:"lazyLoadImg",value:function(t,i){function n(){s||(s=!0,l&&(l.remove(),l=null),y(i,r),i.complete&&(F(i,a),setTimeout(function(){y(i,a)},350)),e.option("adaptiveHeight")&&t.el&&-1<e.pages[e.page].slides.indexOf(t)&&(o.updateMetrics(),o.setViewportHeight()),e.emit("load",t))}var e=this,o=this,a="f-fadeIn",r="is-preloading",s=!1,l=null;F(i,r),i.src=i.dataset.lazySrcset||i.dataset.lazySrc||"",delete i.dataset.lazySrc,delete i.dataset.lazySrcset,i.addEventListener("error",function(){n()}),i.addEventListener("load",function(){n()}),setTimeout(function(){var e=i.parentNode;e&&t.el&&(i.complete?n():s||(l=S(P),e.insertBefore(l,i)))},300)}},{key:"lazyLoadSlide",value:function(e){var t=e&&e.el;if(t){var i=new Set,n=Array.from(t.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));t.dataset.lazySrc&&n.push(t),n.map(function(e){e instanceof HTMLImageElement?i.add(e):e instanceof HTMLElement&&e.dataset.lazySrc&&(e.style.backgroundImage="url('"+e.dataset.lazySrc+"')",delete e.dataset.lazySrc)});var o=!0,t=!1,n=void 0;try{for(var a,r=i[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;this.lazyLoadImg(e,s)}}catch(e){t=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(t)throw n}}}}},{key:"onAnimationEnd",value:function(e){var t,i=e.target,n=i?parseInt(i.dataset.index||"",10)||0:-1,o=this.slides[n],e=e.animationName;i&&o&&e&&((o=!!this.inTransition.has(n)&&o.transition)&&e.substring(0,o.length+2)==="f-"+o&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&null!==(t=this.panzoom)&&void 0!==t&&t.isResting&&this.emit("settle"))}},{key:"onDecel",value:function(e){var t,i,n,o,a,r,s,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;this.option("dragFree")?this.setPageFromPosition():(t=this.isRTL,i=this.isHorizontal,a=this.axis,r=(n=this.pages).length,s=0,s=45<(o=Math.abs(Math.atan2(c,l)/(Math.PI/180)))&&o<135?i?0:c:i?l:0,r&&(r=this.page,a=e.current[a]*(t&&i?1:-1),a=this.getPageFromPosition(a).pageIndex,r=5<Math.abs(s)?(n[r].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(r=a),t&&i?s<0?r-1:r+1:s<0?r+1:r-1):0===u&&0===h?r:a,this.slideTo(r,{transition:!1,friction:e.option("decelFriction")})))}},{key:"onClick",value:function(e){var t=e.target,i=t&&g(t)?t.dataset:null,n=void 0,o=void 0;i&&(void 0!==i.carouselPage?(o="slideTo",n=i.carouselPage):void 0!==i.carouselNext?o="slideNext":void 0!==i.carouselPrev&&(o="slidePrev")),o?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[o](n)):this.emit("click",e)}},{key:"onSlideTo",value:function(e){e=e.detail||0;this.slideTo(this.getPageForSlide(e),{friction:0})}},{key:"onChange",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,t))}},{key:"onRefresh",value:function(){var e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}},{key:"onScroll",value:function(){var e;null===(e=this.viewport)||void 0===e||e.scroll(0,0)}},{key:"onResize",value:function(){this.option("breakpoints")&&this.processOptions()}},{key:"onBeforeTransform",value:function(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}},{key:"onEndAnimation",value:function(){this.inTransition.size||this.emit("settle")}},{key:"reInit",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.destroy(),this.state=D.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}},{key:"slideTo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.friction,n=void 0===i?this.option("friction"):i,o=t.transition,a=void 0===o?this.option("transition"):o;if(this.state!==D.Destroy){var r,e=parseInt((e||0).toString())||0,s=this.getPageFromIndex(e),l=this.axis,c=this.isHorizontal,u=this.isRTL,h=this.pages,i=this.panzoom,t=h.length,o=u&&c?1:-1;if(i&&t){if(this.page!==s){u=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",u,e),u.defaultPrevented)return}this.transitionTo(e,a)||(a=h[s].pos,this.isInfinite&&(h=this.contentDim,r=i.target[l]*o,2===t?a+=h*Math.floor(parseFloat(e+"")/2):a=[a,a-h,a+h].reduce(function(e,t){return Math.abs(t-r)<Math.abs(e-r)?t:e})),a*=o,Math.abs(i.target[l]-a)<1||(i.panTo({x:c?a:0,y:c?0:a,friction:n}),this.onChange(s)))}}}},{key:"slideToClosest",value:function(e){var t;this.panzoom&&(t=this.getPageFromPosition().pageIndex,this.slideTo(t,e))}},{key:"slideNext",value:function(){this.slideTo(this.page+1)}},{key:"slidePrev",value:function(){this.slideTo(this.page-1)}},{key:"clearTransitions",value:function(){this.inTransition.clear(),y(this.container,this.cn("inTransition"));var e=["to-prev","to-next","from-prev","from-next"],t=!0,i=!1,n=void 0;try{for(var o,a=this.slides[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var r,s,l=o.value,c=l.el;c&&(c.removeEventListener(U,this.onAnimationEnd),(r=c.classList).remove.apply(r,e),(s=l.transition)&&c.classList.remove("f-"+s+"Out","f-"+s+"In"))}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}this.manageSlideVisiblity()}},{key:"addSlide",value:function(e,t){var i=this.panzoom,n=(null===(r=this.pages[this.page])||void 0===r?void 0:r.pos)||0,o=(null===(c=this.pages[this.page])||void 0===c?void 0:c.dim)||0,a=this.contentDim<this.viewportDim,r=Array.isArray(t)?t:[t],s=[],l=!0,c=!1,t=void 0;try{for(var u,h=r[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var d=u.value;s.push(H(d))}}catch(e){c=!0,t=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw t}}(c=this.slides).splice.apply(c,[e,0].concat(s));for(var f=0;f<this.slides.length;f++)this.slides[f].index=f;var v=!0,t=!1,c=void 0;try{for(var p,g=s[Symbol.iterator]();!(v=(p=g.next()).done);v=!0){var m=p.value;this.emit("beforeInitSlide",m,m.index)}}catch(e){t=!0,c=e}finally{try{!v&&g.return&&g.return()}finally{if(t)throw c}}this.page>=e&&(this.page+=s.length),this.updateMetrics(),i&&(t=(null===(b=this.pages[this.page])||void 0===b?void 0:b.pos)||0,b=(null===(c=this.pages[this.page])||void 0===c?void 0:c.dim)||0,c=this.pages.length||1,o=this.isRTL?o-b:b-o,b=this.isRTL?n-t:t-n,a&&1===c?(e<=this.page&&(i.current[this.axis]-=o,i.target[this.axis]-=o),i.panTo(_defineProperty({},this.isHorizontal?"x":"y",-1*t))):b&&e<=this.page&&(i.target[this.axis]-=b,i.current[this.axis]-=b,i.requestTick()));var y=!0,b=!1,i=void 0;try{for(var w,x=s[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;this.emit("initSlide",k,k.index)}}catch(e){b=!0,i=e}finally{try{!y&&x.return&&x.return()}finally{if(b)throw i}}}},{key:"prependSlide",value:function(e){this.addSlide(0,e)}},{key:"appendSlide",value:function(e){this.addSlide(this.slides.length,e)}},{key:"removeSlide",value:function(e){var t=this.slides.length,t=this.slides[e=(e%t+t)%t];if(t){this.removeSlideEl(t,!0),this.slides.splice(e,1);for(var i=0;i<this.slides.length;i++)this.slides[i].index=i;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",t)}}},{key:"updateMetrics",value:function(){var e=this.panzoom,t=this.viewport,i=this.track,n=this.slides,o=this.isHorizontal,a=this.isInfinite;if(i){var r=o?"width":"height";t&&(h=Math.max(t[o?"offsetWidth":"offsetHeight"],L(t.getBoundingClientRect()[r],1e3)),i=getComputedStyle(t),t="padding",u=o?"Right":"Bottom",h-=parseFloat(i[t+(o?"Left":"Top")])+parseFloat(i[t+u]),this.viewportDim=h);var s=void 0,l=0,c=!0,u=!1,h=void 0;try{for(var d,f=n.entries()[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var v,p=_slicedToArray(d.value,2),g=p[0],m=p[1],y=0,b=0;!m.el&&s?(y=s.dim,b=s.gap):(y=(v=this.getSlideMetrics(m)).dim,b=v.gap,s=m),y=L(y,1e3),b=L(b,1e3),m.dim=y,m.gap=b,m.pos=l,l+=y,(a||g<n.length-1)&&(l+=b)}}catch(e){u=!0,h=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}l=L(l,1e3),this.contentDim=l,e&&(e.contentRect[r]=l,e.contentRect[o?"fullWidth":"fullHeight"]=l),this.pages=this.createPages(),this.pages=this.processPages(),this.state===D.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}}},{key:"getProgress",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];void 0===e&&(e=this.page);var n=this.panzoom,o=this.contentDim,a=this.pages[e]||0;if(!a||!n)return e>this.page?-1:1;var r=-1*n.current.e,s=L((r-a.pos)/+a.dim,1e3),e=s,n=s;this.isInfinite&&!0!==i&&(e=L((r-a.pos+o)/+a.dim,1e3),n=L((r-a.pos-o)/+a.dim,1e3));n=[s,e,n].reduce(function(e,t){return Math.abs(t)<Math.abs(e)?t:e});return t?n:1<n?1:n<-1?-1:n}},{key:"setViewportHeight",value:function(){var t,e=this.page,i=this.pages,n=this.viewport,o=this.isHorizontal;n&&i[e]&&(t=0,o&&this.track&&(this.track.style.height="auto",i[e].slides.forEach(function(e){e.el&&(t=Math.max(t,e.el.offsetHeight))})),n.style.height=t?t+"px":"")}},{key:"getPageForSlide",value:function(e){var t=!0,i=!1,n=void 0;try{for(var o,a=this.pages[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var r=o.value,s=!0,l=!1,c=void 0;try{for(var u,h=r.slides[Symbol.iterator]();!(s=(u=h.next()).done);s=!0)if(u.value.index===e)return r.index}catch(e){l=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(l)throw c}}}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}return-1}},{key:"getVisibleSlides",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=new Set,i=this.panzoom,n=this.contentDim,o=this.viewportDim,a=this.pages,r=this.page;if(o){var n=n+(null===(s=this.slides[this.slides.length-1])||void 0===s?void 0:s.gap)||0,s=0,s=i&&i.state!==E.Init&&i.state!==E.Destroy?-1*i.current[this.axis]:a[r]&&a[r].pos||0;this.isInfinite&&(s-=Math.floor(s/n)*n),this.isRTL&&this.isHorizontal&&(s*=-1);var l=s-o*t,c=s+o*(t+1),u=this.isInfinite?[-1,0,1]:[0],h=!0,o=!1,t=void 0;try{for(var d,f=this.slides[Symbol.iterator]();!(h=(d=f.next()).done);h=!0){var v=d.value,p=!0,g=!1,m=void 0;try{for(var y,b=u[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var w=y.value,x=v.pos+w*n,k=x+v.dim+v.gap;x<c&&l<k&&e.add(v)}}catch(e){g=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(g)throw m}}}}catch(e){o=!0,t=e}finally{try{!h&&f.return&&f.return()}finally{if(o)throw t}}}return e}},{key:"getPageFromPosition",value:function(e){var t=this.viewportDim,i=this.contentDim,n=this.slides,o=this.pages,a=this.panzoom,r=o.length,s=n.length,l=n[0],c=n[s-1],u=this.option("center"),o=0,s=0,h=void 0===e?-1*((null==a?void 0:a.target[this.axis])||0):e;u&&(h+=.5*t),this.isInfinite?(h<l.pos-.5*c.gap&&(h-=i,s=-1),h>c.pos+c.dim+.5*c.gap&&(h-=i,s=1)):h=Math.max(l.pos||0,Math.min(h,c.pos));var d=c,n=(n=n.find(function(e){var t=e.pos-.5*d.gap,i=e.pos+e.dim+.5*e.gap;return d=e,t<=h&&h<i}))||c;return{page:(o=this.getPageForSlide(n.index))+s*r,pageIndex:o}}},{key:"setPageFromPosition",value:function(){var e=this.getPageFromPosition().pageIndex;this.onChange(e)}},{key:"destroy",value:function(){var t=this;if(![D.Destroy].includes(this.state)){this.state=D.Destroy;var e=this.container,i=this.viewport,n=this.track,o=this.slides,a=this.panzoom,r=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),a&&(a.destroy(),this.panzoom=null),o&&o.forEach(function(e){t.removeSlideEl(e)}),this.detachPlugins(),i&&(i.removeEventListener("scroll",this.onScroll),i.offsetParent&&n&&n.offsetParent&&i.replaceWith.apply(i,_toConsumableArray(n.childNodes)));var s=!0,i=!1,n=void 0;try{for(var l,c=Object.entries(r)[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=_slicedToArray(l.value,2),h=u[0],d=u[1];"container"!==h&&d&&e.classList.remove(d)}}catch(e){i=!0,n=e}finally{try{!s&&c.return&&c.return()}finally{if(i)throw n}}this.track=null,this.viewport=null,this.page=0,this.slides=[];n=this.events.get("ready");this.events=new Map,n&&this.events.set("ready",n)}}}]),$);function $(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(_classCallCheck(this,$),t=_possibleConstructorReturn(this,($.__proto__||Object.getPrototypeOf($)).call(this)),Object.defineProperty(t,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(t,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"state",{enumerable:!0,configurable:!0,writable:!0,value:D.Init}),Object.defineProperty(t,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(t,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),!(e="string"==typeof e?document.querySelector(e):e)||!g(e))throw new Error("No Element found");return t.container=e,t.slideNext=I(t.slideNext.bind(t),150),t.slidePrev=I(t.slidePrev.bind(t),150),t.userOptions=i,t.userPlugins=n,queueMicrotask(function(){t.processOptions()}),_possibleConstructorReturn(t)}Object.defineProperty(J,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:R}),Object.defineProperty(J,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}}}),Object.defineProperty(J,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:i});function Q(e){if(!g(e))return 0;var t=window.scrollY,i=window.innerHeight,n=t+i,o=e.getBoundingClientRect(),a=o.y+t,e=o.height;return(o=a+e)<t||n<a?0:t<a&&o<n||a<t&&n<o?100:(a<t&&(e-=t-a),n<o&&(e-=o-n),Math.round(e/i*100))}function ee(e){if(e&&oe){void 0===ae&&document.createElement("div").focus({get preventScroll(){return!(ae=!0)}});try{var t,i;ae?e.focus({preventScroll:!0}):(t=window.scrollY||document.body.scrollTop,i=window.scrollX||document.body.scrollLeft,e.focus(),document.body.scrollTo({top:t,left:i,behavior:"auto"}))}catch(e){}}}function te(){var t=document,e=void 0,i="",n="",o="";return t.fullscreenEnabled?(i="requestFullscreen",n="exitFullscreen",o="fullscreenElement"):t.webkitFullscreenEnabled&&(i="webkitRequestFullscreen",n="webkitExitFullscreen",o="webkitFullscreenElement"),e=i?{request:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:t.documentElement;return"webkitRequestFullscreen"===i?e[i](Element.ALLOW_KEYBOARD_INPUT):e[i]()},exit:function(){return t[o]&&t[n]()},isFullscreen:function(){return t[o]}}:e}var ie,ne,oe=!("undefined"==typeof window||!window.document||!window.document.createElement),ae=void 0,re=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),se={dragToClose:!0,hideScrollbar:!0,Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},contentClick:"toggleZoom",contentDblClick:!1,backdropClick:"close",animated:!0,idle:3500,showClass:"f-zoomInUp",hideClass:"f-fadeOut",commonCaption:!1,parentEl:null,startIndex:0,l10n:Object.assign(Object.assign({},b),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:'<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">\n    <div class="fancybox__backdrop"></div>\n    <div class="fancybox__carousel"></div>\n    <div class="fancybox__footer"></div>\n  </div>'},groupAll:!1,groupAttr:"data-fancybox",defaultType:"image",defaultDisplay:"block",autoFocus:!0,trapFocus:!0,placeFocusBack:!0,closeButton:"auto",keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},Fullscreen:{autoStart:!1},compact:function(){return window.matchMedia("(max-width: 578px), (max-height: 578px)").matches},wheel:"zoom"};(x=ie=ie||{})[x.Init=0]="Init",x[x.Ready=1]="Ready",x[x.Closing=2]="Closing",x[x.CustomClosing=3]="CustomClosing",x[x.Destroy=4]="Destroy",(k=ne=ne||{})[k.Loading=0]="Loading",k[k.Opening=1]="Opening",k[k.Ready=2]="Ready",k[k.Closing=3]="Closing";function le(){queueMicrotask(function(){!function(){var t=ce.parseURL(),e=t.slug,i=t.index,n=vt.getInstance();if(n&&!1!==n.option("Hash")){var o=n.carousel;if(e&&o){var a=!0,r=!1,t=void 0;try{for(var s,l=o.slides[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;if(c.slug&&c.slug===e)return o.slideTo(c.index)}}catch(e){r=!0,t=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw t}}if(e===n.option("slug"))return o.slideTo(i-1);t=n.getSlide(),t=t&&t.triggerEl&&t.triggerEl.dataset;if(t&&t.fancybox===e)return o.slideTo(i-1)}ce.hasSilentClose=!0,n.close()}ce.startFromUrl()}()})}var ce=(_inherits(ue,B),_createClass(ue,[{key:"onChange",value:function(){var e=this.instance,t=e.carousel;this.timer&&clearTimeout(this.timer);var i,n,o,a,r,s,l=e.getSlide();t&&l&&(i=e.isOpeningSlide(l),n=new URL(document.URL).hash,r=void 0,o=l.slug||void 0,a=l.triggerEl||void 0,!(r=o||this.instance.option("slug"))&&a&&a.dataset&&(r=a.dataset.fancybox),s="",r&&"true"!==r&&(s="#"+r+(!o&&1<t.slides.length?"-"+(l.index+1):"")),i&&(this.origHash=n!==s?n:""),s&&n!==s&&(this.timer=setTimeout(function(){try{e.state===ie.Ready&&window.history[i?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+s)}catch(e){}},300)))}},{key:"onClose",value:function(){if(this.timer&&clearTimeout(this.timer),!0!==ue.hasSilentClose)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash||""))}catch(e){}}},{key:"attach",value:function(){var e=this.instance;e.on(["Carousel.ready","Carousel.change"],this.onChange),e.on("close",this.onClose)}},{key:"detach",value:function(){var e=this.instance;e.off(["Carousel.ready","Carousel.change"],this.onChange),e.off("close",this.onClose)}}],[{key:"parseURL",value:function(){var e=window.location.hash.slice(1),t=e.split("-"),i=t[t.length-1],i=i&&/^\+?\d+$/.test(i)&&parseInt(t.pop()||"1",10)||1;return{hash:e,slug:t.join("-"),index:i}}},{key:"startFromUrl",value:function(){var e,t,i,n;ue.hasSilentClose=!1,vt.getInstance()||!1===vt.defaults.Hash||(i=(t=ue.parseURL()).hash,e=t.slug,t=t.index,e&&((i=document.querySelector('[data-slug="'+i+'"]'))&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),vt.getInstance()||!(n=document.querySelectorAll('[data-fancybox="'+e+'"]')).length||(i=n[t-1])&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0}))))}},{key:"destroy",value:function(){window.removeEventListener("hashchange",le,!1)}}]),ue);function ue(){var e;return _classCallCheck(this,ue),e=_possibleConstructorReturn(this,(ue.__proto__||Object.getPrototypeOf(ue)).apply(this,arguments)),Object.defineProperty(e,"origHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(e,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}function he(){window.addEventListener("hashchange",le,!1),setTimeout(function(){ce.startFromUrl()},500)}Object.defineProperty(ce,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(ce,"hasSilentClose",{enumerable:!0,configurable:!0,writable:!0,value:!1}),oe&&(/complete|interactive|loaded/.test(document.readyState)?he():document.addEventListener("DOMContentLoaded",he));var de="is-zooming-in",V=(_inherits(fe,B),_createClass(fe,[{key:"onCreateSlide",value:function(e,t,i){var n=this.instance.optionFor(i,"src")||"";i.el&&"image"===i.type&&"string"==typeof n&&this.setImage(i,n)}},{key:"onRemoveSlide",value:function(e,t,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}},{key:"onChange",value:function(e,t,i,n){y(this.instance.container,de);var o=!0,a=!1,r=void 0;try{for(var s,l=t.slides[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,u=c.panzoom;u&&c.index!==i&&u.reset(.35)}}catch(e){a=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw r}}}},{key:"onClose",value:function(){var e,t,i,n,o,a,r,s=this.instance,l=s.container,c=s.getSlide();l&&l.parentElement&&c&&(n=c.el,e=c.contentEl,t=c.panzoom,i=c.thumbElSrc,n&&i&&e&&t&&!t.isContentLoading&&t.state!==E.Init&&t.state!==E.Destroy&&(t.updateMetrics(),(n=this.getZoomInfo(c))&&(this.instance.state=ie.CustomClosing,l.classList.remove(de),l.classList.add("is-zooming-out"),e.style.backgroundImage="url('"+i+"')",c=l.getBoundingClientRect(),1===((null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1)&&Object.assign(l.style,{position:"absolute",top:l.offsetTop+window.scrollY+"px",left:l.offsetLeft+window.scrollX+"px",bottom:"auto",right:"auto",width:c.width+"px",height:c.height+"px",overflow:"hidden"}),i=n.x,l=n.y,c=n.scale,(n=n.opacity)&&(a=t.scale,r=c-a,o=function(e){return 1+((e-a)/r*-1||0)},t.on("afterTransform",function(){e.style.opacity=o(t.scale)+""})),t.on("endAnimation",function(){s.destroy()}),t.target.a=c,t.target.b=0,t.target.c=0,t.target.d=c,t.panTo({x:i,y:l,scale:c,friction:n?.2:.33,ignoreBounds:!0}),t.isResting&&s.destroy())))}},{key:"setImage",value:function(u,e){var h=this,d=this.instance;u.src=e,this.process(u,e).then(function(e){var t,i,n,o,a,r=u.contentEl,s=u.imageEl,l=u.thumbElSrc,c=u.el;!d.isClosing()&&r&&s&&(r.offsetHeight,s=!!d.isOpeningSlide(u)&&h.getZoomInfo(u),h.option("protected")&&c&&(c.addEventListener("contextmenu",function(e){e.preventDefault()}),c=document.createElement("div"),F(c,"fancybox-protected"),r.appendChild(c)),l&&s?(o=e.contentRect,t=Math.max(o.fullWidth,o.fullHeight),i=null,!s.opacity&&1200<t&&(i=document.createElement("img"),F(i,"fancybox-ghost"),i.src=l,r.appendChild(i)),n=function(){i&&(F(i,"f-fadeFastOut"),setTimeout(function(){i&&(i.remove(),i=null)},200))},a=l,new Promise(function(e,t){var i=new Image;i.onload=e,i.onerror=t,i.src=a}).then(function(){d.hideLoading(u),u.state=ne.Opening,h.instance.emit("reveal",u),h.zoomIn(u).then(function(){n(),h.instance.done(u)},function(){}),i&&setTimeout(function(){n()},2500<t?800:200)},function(){d.hideLoading(u),d.revealContent(u)})):(o=h.optionFor(u,"initialSize"),s=h.optionFor(u,"zoom"),r={event:d.prevMouseMoveEvent||d.options.event,friction:s?.12:0},l=d.optionFor(u,"showClass")||void 0,s=!0,d.isOpeningSlide(u)&&("full"===o?e.zoomToFull(r):"cover"===o?e.zoomToCover(r):"max"===o?e.zoomToMax(r):s=!1,e.stop("current")),s&&l&&(l=e.isDragging?"f-fadeIn":""),d.hideLoading(u),d.revealContent(u,l)))},function(){d.setError(u,"{{IMAGE_ERROR}}")})}},{key:"process",value:function(s,l){var c=this;return new Promise(function(t,e){var o=c.instance,i=s.el;o.clearContent(s),o.showLoading(s);var n,a,r=c.optionFor(s,"content");(r="string"==typeof r?S(r):r)&&g(r)||((r=document.createElement("img"))instanceof HTMLImageElement&&(a="",a="string"==typeof(n=s.caption)&&n?n.replace(/<[^>]+>/gi,"").substring(0,1e3):"Image "+(s.index+1)+" of "+((null===(n=o.carousel)||void 0===n?void 0:n.pages.length)||1),r.src=l||"",r.alt=a,r.draggable=!1,s.srcset&&r.setAttribute("srcset",s.srcset),c.instance.isOpeningSlide(s)&&(r.fetchPriority="high")),s.sizes&&r.setAttribute("sizes",s.sizes)),F(r,"fancybox-image"),s.imageEl=r,o.setContent(s,r,!1),s.panzoom=new R(i,m({transformParent:!0},c.option("Panzoom")||{},{content:r,width:o.optionFor(s,"width","auto"),height:o.optionFor(s,"height","auto"),wheel:function(){var e=o.option("wheel");return("zoom"===e||"pan"==e)&&e},click:function(e,t){var i;if(o.isCompact||o.isClosing())return!1;if(s.index!==(null===(i=o.getSlide())||void 0===i?void 0:i.index))return!1;if(t){var n=t.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(n.nodeName))return!1}t=!t||t.target&&(null===(n=s.contentEl)||void 0===n?void 0:n.contains(t.target));return o.option(t?"contentClick":"backdropClick")||!1},dblClick:function(){return o.isCompact?"toggleZoom":o.option("contentDblClick")||!1},spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:function(e){t(e)},error:function(){e()},destroy:function(){e()}}}))})}},{key:"zoomIn",value:function(d){var f=this;return new Promise(function(i,e){var t=f.instance,n=t.container,o=d.panzoom,a=d.contentEl,r=d.el;o&&o.updateMetrics();var s,l,c,u,h=f.getZoomInfo(d);h&&r&&a&&o&&n?(u=h.x,r=h.y,s=h.scale,l=h.opacity,c=function(){d.state!==ne.Closing&&(l&&(a.style.opacity=Math.max(Math.min(1,1-(1-o.scale)/(1-s)),0)+""),1<=o.scale&&o.scale>o.targetScale-.1&&i(o))},o.on("endAnimation",h=function e(t){(t.scale<.99||1.01<t.scale)&&!t.isDragging||(y(n,de),a.style.opacity="",t.off("endAnimation",e),t.off("touchStart",e),t.off("afterTransform",c),i(t))}),o.on("touchStart",h),o.on("afterTransform",c),o.on(["error","destroy"],function(){e()}),o.panTo({x:u,y:r,scale:s,friction:0,ignoreBounds:!0}),o.stop("current"),u={event:"mousemove"===o.panMode?t.prevMouseMoveEvent||t.options.event:void 0},r=f.optionFor(d,"initialSize"),F(n,de),t.hideLoading(d),"full"===r?o.zoomToFull(u):"cover"===r?o.zoomToCover(u):"max"===r?o.zoomToMax(u):o.reset(.172)):e()})}},{key:"getZoomInfo",value:function(e){var t=e.el,i=e.imageEl,n=e.thumbEl,o=e.panzoom,a=this.instance,r=a.container;if(!t||!i||!n||!o||Q(n)<3||!this.optionFor(e,"zoom")||!r||a.state===ie.Destroy)return!1;if("0"===getComputedStyle(r).getPropertyValue("--f-images-zoom"))return!1;var s=window.visualViewport||null;if(1!==(s?s.scale:1))return!1;var l=n.getBoundingClientRect(),t=l.top,i=l.left,e=l.width,a=l.height,r=o.contentRect,s=r.top,n=r.left,l=r.fitWidth,r=r.fitHeight;if(!(e&&a&&l&&r))return!1;o=o.container.getBoundingClientRect(),i=-1*((n+=o.left)+.5*l-(i+.5*e)),o=-1*((s+=o.top)+.5*r-(t+.5*a)),s=e/l,t=this.option("zoomOpacity")||!1;return{x:i,y:o,scale:s,opacity:t="auto"===t?.1<Math.abs(e/a-l/r):t}}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}}]),fe);function fe(){return _classCallCheck(this,fe),_possibleConstructorReturn(this,(fe.__proto__||Object.getPrototypeOf(fe)).apply(this,arguments))}Object.defineProperty(V,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}});function ve(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=new URL(e),i=new URLSearchParams(i.search),n=new URLSearchParams,o=[].concat(_toConsumableArray(i),_toConsumableArray(Object.entries(t))),a=0;a<o.length;a++){var r=_slicedToArray(o[a],2),s=r[0],l=r[1]+"";"t"===s?(r=l.match(/((\d*)m)?(\d*)s?/))&&n.set("start",60*parseInt(r[2]||"0")+parseInt(r[3]||"0")+""):n.set(s,l)}return t=n+"",(e=e.match(/#t=((.*)?\d+s)/))&&(t+="#t="+e[1]),t}var pe="html",ge="youtube",me="vimeo",ye="html5video",be=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"],i=(_inherits(we,B),_createClass(we,[{key:"onBeforeInitSlide",value:function(e,t,i){this.processType(i)}},{key:"onCreateSlide",value:function(e,t,i){this.setContent(i)}},{key:"onClearContent",value:function(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);var i=t.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",t.iframeEl=null);var n=t.contentEl,i=t.placeholderEl;if("inline"===t.type&&n&&i)n.classList.remove("fancybox__content"),"none"!==n.style.display&&(n.style.display="none"),i.parentNode&&i.parentNode.insertBefore(n,i),i.remove(),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}},{key:"onSelectSlide",value:function(e,t,i){i.state===ne.Ready&&this.playVideo()}},{key:"onUnselectSlide",value:function(e,t,i){var n,o;if(i.type!==ye){var a=void 0;i.type===me?a={method:"pause",value:"true"}:i.type===ge&&(a={event:"command",func:"pauseVideo"}),a&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(a),"*"),i.poller&&clearTimeout(i.poller)}else try{null===(o=null===(n=i.el)||void 0===n?void 0:n.querySelector("video"))||void 0===o||o.pause()}catch(e){}}},{key:"onDone",value:function(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}},{key:"onRefresh",value:function(e,t){var i=this;t.slides.forEach(function(e){e.el&&(i.resizeIframe(e),i.setAspectRatio(e))})}},{key:"onMessage",value:function(e){try{var t,i=JSON.parse(e.data);if("https://player.vimeo.com"===e.origin){if("ready"===i.event){var n=!0,o=!1,a=void 0;try{for(var r,s=Array.from(document.getElementsByClassName("fancybox__iframe"))[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;l instanceof HTMLIFrameElement&&l.contentWindow===e.source&&(l.dataset.ready="true")}}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}}}else!e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)||"onReady"!==i.event||(t=document.getElementById(i.id))&&(t.dataset.ready="true")}catch(e){}}},{key:"loadAjaxContent",value:function(e){var t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);var i=this.instance,n=new XMLHttpRequest;i.showLoading(e),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===ie.Ready&&(i.hideLoading(e),200===n.status?i.setContent(e,n.responseText):i.setError(e,404===n.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};var o=e.ajax||null;n.open(o?"POST":"GET",t+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(o),e.xhr=n}},{key:"setInlineContent",value:function(e){var t,i,n=null;g(e.src)?n=e.src:"string"==typeof e.src&&(n=(t=e.src.split("#",2).pop())?document.getElementById(t):null),n?("clone"===e.type||n.closest(".fancybox__slide")?((i=(n=n.cloneNode(!0)).dataset.animationName)&&(n.classList.remove(i),delete n.dataset.animationName),i=(i=n.getAttribute("id"))?i+"--clone":"clone-"+this.instance.id+"-"+e.index,n.setAttribute("id",i)):n.parentNode&&((i=document.createElement("div")).classList.add("fancybox-placeholder"),n.parentNode.insertBefore(i,n),e.placeholderEl=i),this.instance.setContent(e,n)):this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}},{key:"setIframeContent",value:function(t){var i=this,e=t.src,n=t.el;if(e&&"string"==typeof e&&n){n.classList.add("is-loading");var o=this.instance,a=document.createElement("iframe");a.className="fancybox__iframe",a.setAttribute("id","fancybox__iframe_"+o.id+"_"+t.index);var r=!0,s=!1,n=void 0;try{for(var l,c=Object.entries(this.optionFor(t,"iframeAttr")||{})[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=_slicedToArray(l.value,2),h=u[0],d=u[1];a.setAttribute(h,d)}}catch(e){s=!0,n=e}finally{try{!r&&c.return&&c.return()}finally{if(s)throw n}}a.onerror=function(){o.setError(t,"{{IFRAME_ERROR}}")},t.iframeEl=a;n=this.optionFor(t,"preload");if("iframe"!==t.type||!1===n)return a.setAttribute("src",t.src+""),o.setContent(t,a,!1),this.resizeIframe(t),void o.revealContent(t);o.showLoading(t),a.onload=function(){var e;a.src.length&&(e="true"!==a.dataset.ready,a.dataset.ready="true",i.resizeIframe(t),e?o.revealContent(t):o.hideLoading(t))},a.setAttribute("src",e),o.setContent(t,a,!1)}}},{key:"resizeIframe",value:function(e){var t=e.type,i=e.iframeEl;if(t!==ge&&t!==me){var n=null==i?void 0:i.parentElement;if(i&&n){var o=e.autoSize;void 0===o&&(o=this.optionFor(e,"autoSize"));var a=e.width||0,r=e.height||0;a&&r&&(o=!1);t=n&&n.style;if(!1!==e.preload&&!1!==o&&t)try{var s,l,c,u=window.getComputedStyle(n),h=parseFloat(u.paddingLeft)+parseFloat(u.paddingRight),d=parseFloat(u.paddingTop)+parseFloat(u.paddingBottom),f=i.contentWindow;f&&(l=(s=f.document).getElementsByTagName(pe)[0],c=s.body,t.width="",c.style.overflow="hidden",a=a||l.scrollWidth+h,t.width=a+"px",c.style.overflow="",t.flex="0 0 auto",t.height=c.scrollHeight+"px",r=l.scrollHeight+d)}catch(e){}(a||r)&&(d={flex:"0 1 auto",width:"",height:""},a&&"auto"!==a&&(d.width=a+"px"),r&&"auto"!==r&&(d.height=r+"px"),Object.assign(t,d))}}}},{key:"playVideo",value:function(){var i=this.instance.getSlide();if(i){var e=i.el;if(e&&e.offsetParent&&this.optionFor(i,"videoAutoplay")){if(i.type===ye)try{var t,n=e.querySelector("video");!n||void 0!==(t=n.play())&&t.then(function(){}).catch(function(e){n.muted=!0,n.play()})}catch(i){}i.type!==ge&&i.type!==me||function e(){if(i.iframeEl&&i.iframeEl.contentWindow){var t=void 0;if("true"===i.iframeEl.dataset.ready)return(t=i.type===ge?{event:"command",func:"playVideo"}:{method:"play",value:"true"})&&i.iframeEl.contentWindow.postMessage(JSON.stringify(t),"*"),void(i.poller=void 0);i.type===ge&&(t={event:"listening",id:i.iframeEl.getAttribute("id")},i.iframeEl.contentWindow.postMessage(JSON.stringify(t),"*"))}i.poller=setTimeout(e,250)}()}}}},{key:"processType",value:function(e){if(e.html)return e.type=pe,e.src=e.html,void(e.html="");var t,i,n,o,a,r,s=this.instance.optionFor(e,"src","");s&&"string"==typeof s&&(t=e.type,i=null,(i=s.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i))?(o=(n=this.optionFor(e,ge)).nocookie,a=function(e,t){var i={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]]);return i}(n,["nocookie"]),n="www.youtube"+(o?"-nocookie":"")+".com",o=ve(s,a),a=encodeURIComponent(i[2]),e.videoId=a,e.src="https://"+n+"/embed/"+a+"?"+o,e.thumbSrc=e.thumbSrc||"https://i.ytimg.com/vi/"+a+"/mqdefault.jpg",t=ge):(i=s.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/))&&(r=ve(s,this.optionFor(e,me)),o=encodeURIComponent(i[1]),a=i[4]||"",e.videoId=o,e.src="https://player.vimeo.com/video/"+o+"?"+(a?"h="+a+(r?"&":""):"")+r,t=me),!t&&e.triggerEl&&(r=e.triggerEl.dataset.type,be.includes(r)&&(t=r)),t||"string"==typeof s&&("#"===s.charAt(0)?t="inline":(i=s.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(t=ye,e.videoFormat=e.videoFormat||"video/"+("ogv"===i[1]?"ogg":i[1])):s.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?t="image":s.match(/\.(pdf)((\?|#).*)?$/i)&&(t="pdf")),(i=s.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src="https://maps.google."+i[1]+"/?ll="+(i[2]?i[2]+"&z="+Math.floor(parseFloat(i[3]))+(i[4]?i[4].replace(/^\//,"&"):""):i[4]+"").replace(/\?/,"&")+"&output="+(i[4]&&0<i[4].indexOf("layer=c")?"svembed":"embed"),t="map"):(i=s.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src="https://maps.google."+i[1]+"/maps?q="+i[2].replace("query=","q=").replace("api=1","")+"&output=embed",t="map"),t=t||this.instance.option("defaultType"),"image"===(e.type=t)&&(e.thumbSrc=e.thumbSrc||e.src))}},{key:"setContent",value:function(e){var t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case pe:this.instance.setContent(e,t);break;case ye:var i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case"map":case ge:case me:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}},{key:"setAspectRatio",value:function(e){var t,i,n,o,a=e.contentEl;e.el&&a&&e.type&&[ge,me,ye].includes(e.type)&&(n=void 0,t=e.width||"auto",i=e.height||"auto","auto"===t||"auto"===i?n=(o=((n=this.optionFor(e,"videoRatio"))+"").match(/(\d+)\s*\/\s?(\d+)/))&&2<o.length?parseFloat(o[1])/parseFloat(o[2]):parseFloat(n+""):t&&i&&(n=t/i),n&&(a.style.aspectRatio="",a.style.width="",a.style.height="",a.offsetHeight,o=(e=a.getBoundingClientRect()).width||1,e=e.height||1,a.style.aspectRatio=n+"",n<o/e?(i="auto"===i?e:Math.min(e,i),a.style.width="auto",a.style.height=i+"px"):(t="auto"===t?o:Math.min(o,t),a.style.width=t+"px",a.style.height="auto")))}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}}]),we);function we(){return _classCallCheck(this,we),_possibleConstructorReturn(this,(we.__proto__||Object.getPrototypeOf(we)).apply(this,arguments))}Object.defineProperty(i,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}}});var xe="play",ke="pause",Se="ready",Ce=(_inherits(Ee,B),_createClass(Ee,[{key:"onReady",value:function(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}},{key:"onChange",value:function(){this.removeProgressBar(),this.pause()}},{key:"onSettle",value:function(){this.resume()}},{key:"onVisibilityChange",value:function(){"visible"===document.visibilityState?this.resume():this.pause()}},{key:"onMouseEnter",value:function(){this.inHover=!0,this.pause()}},{key:"onMouseLeave",value:function(){var e;this.inHover=!1,null!==(e=this.instance.panzoom)&&void 0!==e&&e.isResting&&this.resume()}},{key:"onTimerEnd",value:function(){var e=this.instance;"play"===this.state&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}},{key:"removeProgressBar",value:function(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}},{key:"createProgressBar",value:function(){if(!this.option("showProgress"))return null;this.removeProgressBar();var e=this.instance,t=(null===(i=e.pages[e.page])||void 0===i?void 0:i.slides)||[],i=this.option("progressParentEl");if(!(i=i||((1===t.length?t[0].el:null)||e.viewport)))return null;e=document.createElement("div");return F(e,"f-progress"),i.prepend(e),(this.progressBar=e).offsetHeight,e}},{key:"set",value:function(){var e,t=this,i=t.instance;i.pages.length<2||t.timer||(e=t.option("timeout"),t.state=xe,F(i.container,"has-autoplay"),(i=t.createProgressBar())&&(i.style.transitionDuration=e+"ms",i.style.transform="scaleX(1)"),t.timer=setTimeout(function(){t.timer=null,t.inHover||t.onTimerEnd()},e),t.emit("set"))}},{key:"clear",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.removeProgressBar()}},{key:"start",value:function(){var e,t=this;t.set(),t.state!==Se&&(t.option("pauseOnHover")&&((e=t.instance.container).addEventListener("mouseenter",t.onMouseEnter,!1),e.addEventListener("mouseleave",t.onMouseLeave,!1)),document.addEventListener("visibilitychange",t.onVisibilityChange,!1),t.emit("start"))}},{key:"stop",value:function(){var e=this,t=e.state,i=e.instance.container;e.clear(),e.state=Se,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),y(i,"has-autoplay"),t!==Se&&e.emit("stop")}},{key:"pause",value:function(){this.state===xe&&(this.state=ke,this.clear(),this.emit(ke))}},{key:"resume",value:function(){var e=this,t=e.instance;t.isInfinite||t.page!==t.pages.length-1?e.state!==xe?e.state!==ke||e.inHover||(t=new Event("resume",{bubbles:!0,cancelable:!0}),e.emit("resume",t),t.defaultPrevented||e.set()):e.set():e.stop()}},{key:"toggle",value:function(){this.state===xe||this.state===ke?this.stop():this.start()}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}},{key:"isActive",get:function(){return this.state!==Se}}]),Ee);function Ee(){var e;return _classCallCheck(this,Ee),e=_possibleConstructorReturn(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).apply(this,arguments)),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:Se}),Object.defineProperty(e,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}Object.defineProperty(Ce,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});_inherits(Pe,B),_createClass(Pe,[{key:"onPrepare",value:function(o){var i,e=this,t=o.carousel;!t||(i=o.container)&&(t.options.Autoplay=m({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:function(){return e.option("progressParentEl")||null},on:{start:function(){o.emit("startSlideshow")},set:function(e){var t;i.classList.add("has-slideshow"),(null===(t=o.getSlide())||void 0===t?void 0:t.state)!==ne.Ready&&e.pause()},stop:function(){i.classList.remove("has-slideshow"),o.isCompact||o.endIdle(),o.emit("endSlideshow")},resume:function(e,t){var i,n;!t||!t.cancelable||(null===(i=o.getSlide())||void 0===i?void 0:i.state)===ne.Ready&&null!==(n=null===(n=o.carousel)||void 0===n?void 0:n.panzoom)&&void 0!==n&&n.isResting||t.preventDefault()}}}),t.attachPlugins({Autoplay:Ce}),this.ref=t.plugins.Autoplay)}},{key:"onReady",value:function(e){var t=e.carousel,e=this.ref;e&&t&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&e.start()}},{key:"onDone",value:function(e,t){var i=this.ref,n=e.carousel;i&&n&&((n=t.panzoom)&&n.on("startAnimation",function(){e.isCurrentSlide(t)&&i.stop()}),e.isCurrentSlide(t)&&i.resume())}},{key:"onKeydown",value:function(e,t){var i=this.ref;i&&t===this.option("key")&&"BUTTON"!==(null===(t=document.activeElement)||void 0===t?void 0:t.nodeName)&&i.toggle()}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}}]),b=Pe;function Pe(){var e;return _classCallCheck(this,Pe),e=_possibleConstructorReturn(this,(Pe.__proto__||Object.getPrototypeOf(Pe)).apply(this,arguments)),Object.defineProperty(e,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}Object.defineProperty(b,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:function(e){var t;return(null===(t=e.instance.container)||void 0===t?void 0:t.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||e.instance.container},timeout:3e3}});var Te,x={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};(k=Te=Te||{})[k.Init=0]="Init",k[k.Ready=1]="Ready",k[k.Hidden=2]="Hidden";var Oe="isResting",Me="thumbWidth",Ae="thumbHeight",_e="thumbClipWidth",Le=(_inherits(Re,B),_createClass(Re,[{key:"onInitSlide",value:function(e,t){var i=t.el?t.el.dataset:void 0;i&&(t.thumbSrc=i.thumbSrc||t.thumbSrc||"",t[_e]=parseFloat(i[_e]||"")||t[_e]||0,t[Ae]=parseFloat(i.thumbHeight||"")||t[Ae]||0),this.addSlide(t)}},{key:"onInitSlides",value:function(){this.build()}},{key:"onChange",value:function(){var e,t,i,n,o,a;this.isModern&&(e=this.container,i=(t=this.instance).panzoom,n=(o=this.carousel)?o.panzoom:null,a=t.page,i&&o&&n&&(i.isDragging?(y(e,this.cn(Oe)),o=(null===(o=o.pages[a])||void 0===o?void 0:o.pos)||0,-1*(o+=t.getProgress(a)*(this[_e]+this.thumbGap))>(a=n.getBounds()).x.min&&-1*o<a.x.max&&n.panTo({x:-1*o,friction:.12})):C(e,this.cn(Oe),i.isResting),this.shiftModern()))}},{key:"onRefresh",value:function(){this.updateProps();var e=!0,t=!1,i=void 0;try{for(var n,o=(this.instance.slides||[])[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;this.resizeModernSlide(a)}}catch(e){t=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw i}}this.shiftModern()}},{key:"isDisabled",value:function(){var e=this.option("minCount")||0;if(e){var t=this.instance,i=0,n=!0,o=!1,a=void 0;try{for(var r,s=(t.slides||[])[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)r.value.thumbSrc&&i++}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}if(i<e)return!0}e=this.option("type");return["modern","classic"].indexOf(e)<0}},{key:"getThumb",value:function(e){var t=this.option("thumbTpl")||"";return{html:this.instance.localize(t,[["%i",e.index],["%d",e.index+1],["%s",e.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}},{key:"addSlide",value:function(e){var t=this.carousel;t&&t.addSlide(e.index,this.getThumb(e))}},{key:"getSlides",value:function(){var e=[],t=!0,i=!1,n=void 0;try{for(var o,a=(this.instance.slides||[])[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var r=o.value;e.push(this.getThumb(r))}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}return e}},{key:"resizeModernSlide",value:function(e){this.isModern&&(e[Me]=e[_e]&&e[Ae]?Math.round(this[Ae]*(e[_e]/e[Ae])):this[Me])}},{key:"updateProps",value:function(){var e,t,i=this.container;function n(e){return t.apply(this,arguments)}i&&(t=function(e){return parseFloat(getComputedStyle(i).getPropertyValue("--f-thumb-"+e))||0},n.toString=function(){return t.toString()},this.thumbGap=(e=n)("gap"),this.thumbExtraGap=e("extra-gap"),this[Me]=e("width")||40,this[_e]=e("clip-width")||40,this[Ae]=e("height")||40)}},{key:"build",value:function(){var e,t,i,n,o,a,r,s,l=this;l.state===Te.Init&&(l.isDisabled()?l.emit("disabled"):(t=(e=l.instance).container,s=l.getSlides(),i=l.option("type"),l.type=i,n=l.option("parentEl"),o=l.cn("container"),r=l.cn("track"),(a=null==n?void 0:n.querySelector("."+o))||(a=document.createElement("div"),F(a,o),n?n.appendChild(a):t.after(a)),F(a,"is-"+i),F(t,l.cn("hasThumbs")),l.container=a,l.updateProps(),(r=a.querySelector("."+r))||(r=document.createElement("div"),F(r,l.cn("track")),a.appendChild(r)),l.track=r,s=m({},{track:r,infinite:!1,center:!0,fill:"classic"===i,dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},l.option("Carousel")||{},{Sync:{target:e},slides:s}),(s=new e.constructor(a,s)).on("createSlide",function(e,t){l.setProps(t.index),l.emit("createSlide",t,t.el)}),s.on("ready",function(){l.shiftModern(),l.emit("ready")}),s.on("refresh",function(){l.shiftModern()}),s.on("Panzoom.click",function(e,t,i){l.onClick(i)}),l.carousel=s,l.state=Te.Ready))}},{key:"onClick",value:function(e){e.preventDefault(),e.stopPropagation();function t(e,t){return(t=document.elementFromPoint(e,t))?s(t):[-1,void 0]}var i,n,o=this.instance,a=o.pages,r=o.page,s=function(e){if(e){e=e.closest("[data-carousel-index]");if(e)return[parseInt(e.dataset.carouselIndex||"",10)||0,e]}return[-1,void 0]},l=s(e.target),c=_slicedToArray(l,2),u=c[0];c[1];-1<u||(n=this[_e],c=t((i=e.clientX)-n,l=e.clientY),c=(e=_slicedToArray(c,2))[0],e=e[1],n=t(i+n,l),n=(l=_slicedToArray(n,2))[0],l=l[1],e&&l?(u=Math.abs(i-e.getBoundingClientRect().right)<Math.abs(i-l.getBoundingClientRect().left)?c:n)===r&&(u=u===c?n:c):e?u=c:l&&(u=n),-1<u&&a[u]&&o.slideTo(u))}},{key:"getShift",value:function(e){var t=this,i=t.instance,n=t.carousel;if(!i||!n)return 0;var o=t[Me],a=t[_e],r=t.thumbGap,s=t.thumbExtraGap;if(null===(l=n.slides[e])||void 0===l||!l.el)return 0;var t=.5*(o-a),n=i.pages.length-1,l=i.getProgress(0),o=i.getProgress(n),a=i.getProgress(e,!1,!0),i=0,t=t+s+r,s=l<0&&-1<l,r=0<o&&o<1;return 0===e?(i=t*Math.abs(l),r&&1===l&&(i-=t*Math.abs(o))):e===n?(i=t*Math.abs(o)*-1,s&&-1===o&&(i+=t*Math.abs(l))):s||r?(i=-1*t,i+=t*Math.abs(l),i+=t*(1-Math.abs(o))):i=t*a,i}},{key:"setProps",value:function(e){var t,i;this.isModern&&(i=this.instance,t=this.carousel,i&&t&&((t=null===(t=t.slides[e])||void 0===t?void 0:t.el)&&t.childNodes.length&&(i=L(1-Math.abs(i.getProgress(e))),e=L(this.getShift(e)),t.style.setProperty("--progress",i?i+"":""),t.style.setProperty("--shift",e+""))))}},{key:"shiftModern",value:function(){var e=this;if(e.isModern){var t=e.instance,i=e.track,n=t.panzoom,o=e.carousel;if(t&&i&&n&&o&&n.state!==E.Init&&n.state!==E.Destroy){var a=!0,r=!1,n=void 0;try{for(var s,l=t.slides[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;e.setProps(c.index)}}catch(e){r=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw n}}o=(e[_e]+e.thumbGap)*(o.slides.length||0);i.style.setProperty("--width",o+"")}}}},{key:"cleanup",value:function(){var e=this;e.carousel&&e.carousel.destroy(),e.carousel=null,e.container&&e.container.remove(),e.container=null,e.track&&e.track.remove(),e.track=null,e.state=Te.Init,y(e.instance.container,e.cn("hasThumbs"))}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("initSlide",e.onInitSlide),t.state===D.Init?t.on("initSlides",e.onInitSlides):e.onInitSlides(),t.on(["change","Panzoom.afterTransform"],e.onChange),t.on("Panzoom.refresh",e.onRefresh)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("initSlide",e.onInitSlide),t.off("initSlides",e.onInitSlides),t.off(["change","Panzoom.afterTransform"],e.onChange),t.off("Panzoom.refresh",e.onRefresh),e.cleanup()}},{key:"isModern",get:function(){return"modern"===this.type}}]),Re);function Re(){var e;return _classCallCheck(this,Re),e=_possibleConstructorReturn(this,(Re.__proto__||Object.getPrototypeOf(Re)).apply(this,arguments)),Object.defineProperty(e,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(e,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:Te.Init}),e}Object.defineProperty(Le,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:x});var k=Object.assign(Object.assign({},x),{key:"t",showOnStart:!0,parentEl:null}),ze="is-masked",Ie="aria-hidden",x=(_inherits(je,B),_createClass(je,[{key:"onClick",value:function(e,t){t.stopPropagation()}},{key:"onCreateSlide",value:function(e,t){var i=(null===(n=null===(i=null===(n=this.instance)||void 0===n?void 0:n.carousel)||void 0===i?void 0:i.slides[t.index])||void 0===n?void 0:n.type)||"",n=t.el;n&&i&&(t="for-"+i,["video","youtube","vimeo","html5video"].includes(i)&&(t+=" for-video"),F(n,t))}},{key:"onInit",value:function(){var e,i=this,n=this,t=n.instance,o=t.carousel;n.ref||!o||(e=n.option("parentEl")||t.footer||t.container)&&((e=m({},n.options,{parentEl:e,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:t.option("Carousel.friction")||0}},on:{ready:function(e){var t=e.container;t&&i.hidden&&(n.refresh(),t.style.transition="none",n.hide(),t.offsetHeight,queueMicrotask(function(){t.style.transition="",n.show()}))}}})).Carousel=e.Carousel||{},e.Carousel.on=m((null===(t=n.options.Carousel)||void 0===t?void 0:t.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),o.options.Thumbs=e,o.attachPlugins({Thumbs:Le}),n.ref=o.plugins.Thumbs,n.option("showOnStart")||(n.ref.state=Te.Hidden,n.hidden=!0))}},{key:"onResize",value:function(){var e=null===(e=this.ref)||void 0===e?void 0:e.container;e&&(e.style.maxHeight="")}},{key:"onKeydown",value:function(e,t){var i=this.option("key");i&&i===t&&this.toggle()}},{key:"toggle",value:function(){var e=this.ref;if(e&&!e.isDisabled())return e.state===Te.Hidden?(e.state=Te.Init,void e.build()):void(this.hidden?this.show():this.hide())}},{key:"show",value:function(){var e=this.ref;!e||e.isDisabled()||(e=e.container)&&(this.refresh(),e.offsetHeight,e.removeAttribute(Ie),e.classList.remove(ze),this.hidden=!1)}},{key:"hide",value:function(){var e=this.ref,e=e&&e.container;e&&(this.refresh(),e.offsetHeight,e.classList.add(ze),e.setAttribute(Ie,"true")),this.hidden=!0}},{key:"refresh",value:function(){var e,t=this.ref;t&&t.state&&(t=(null==(e=t.container)?void 0:e.firstChild)||null,e&&t&&t.childNodes.length&&(e.style.maxHeight=t.getBoundingClientRect().height+"px"))}},{key:"attach",value:function(){var e=this,t=e.instance;t.state===ie.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("Carousel.init",e.onInit),t.off("resize",e.onResize),t.off("keydown",e.onKeydown),null===(t=t.carousel)||void 0===t||t.detachPlugins(["Thumbs"]),e.ref=null}},{key:"isEnabled",get:function(){var e=this.ref;return e&&!e.isDisabled()}},{key:"isHidden",get:function(){return this.hidden}}]),je);function je(){var e;return _classCallCheck(this,je),e=_possibleConstructorReturn(this,(je.__proto__||Object.getPrototypeOf(je)).apply(this,arguments)),Object.defineProperty(e,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}Object.defineProperty(x,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:k});var De,Fe={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};(k=De=De||{})[k.Init=0]="Init",k[k.Ready=1]="Ready",k[k.Disabled=2]="Disabled";var He={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Be="has-toolbar",Ne="fancybox__toolbar",B=(_inherits(We,B),_createClass(We,[{key:"onReady",value:function(t){var e;if(t.carousel){var i=this.option("display"),n=this.option("absolute"),o=this.option("enabled");if("auto"===o){var a=this.instance.carousel,r=0;if(a){var s=!0,t=!1,l=void 0;try{for(var c,u=a.slides[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value;!h.panzoom&&"image"!==h.type||r++}}catch(e){t=!0,l=e}finally{try{!s&&u.return&&u.return()}finally{if(t)throw l}}}r||(o=!1)}var d=0,f={left:[],middle:[],right:[]};if(i=!o?void 0:i)for(var v=["left","middle","right"],p=0;p<v.length;p++){var g=v[p],m=!0,y=!1,b=void 0;try{for(var w,x=i[g][Symbol.iterator]();!(m=(w=x.next()).done);m=!0){var k=w.value,S=this.createEl(k);S&&(null===(e=f[g])||void 0===e||e.push(S),d++)}}catch(e){y=!0,b=e}finally{try{!m&&x.return&&x.return()}finally{if(y)throw b}}}var C=null;if(C=d?this.createContainer():C){var E=!0,l=!1,o=void 0;try{for(var P,T=Object.entries(f)[Symbol.iterator]();!(E=(P=T.next()).done);E=!0){var O=_slicedToArray(P.value,2),M=O[0],A=O[1],_=document.createElement("div");F(_,Ne+"__column is-"+M);var L=!0,R=!1,z=void 0;try{for(var I,j=A[Symbol.iterator]();!(L=(I=j.next()).done);L=!0){var D=I.value;_.appendChild(D)}}catch(e){R=!0,z=e}finally{try{!L&&j.return&&j.return()}finally{if(R)throw z}}"auto"!==n||"middle"!==M||A.length||(n=!0),C.appendChild(_)}}catch(e){l=!0,o=e}finally{try{!E&&T.return&&T.return()}finally{if(l)throw o}}!0===n&&F(C,"is-absolute"),this.state=De.Ready,this.onRefresh()}else this.state=De.Disabled}}},{key:"onClick",value:function(e){var t=this.instance,i=t.getSlide(),n=null==i?void 0:i.panzoom,o=e.target,i=o&&g(o)?o.dataset:null;if(i){if(void 0!==i.fancyboxToggleThumbs)return e.preventDefault(),e.stopPropagation(),void(null===(o=t.plugins.Thumbs)||void 0===o||o.toggle());if(void 0!==i.fancyboxToggleFullscreen)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(void 0!==i.fancyboxToggleSlideshow){e.preventDefault(),e.stopPropagation();var a=null===(r=t.carousel)||void 0===r?void 0:r.plugins.Autoplay,r=a.isActive;return n&&"mousemove"===n.panMode&&!r&&n.reset(),void(r?a.stop():a.start())}r=i.panzoomAction,a=i.panzoomChange;if((a||r)&&(e.preventDefault(),e.stopPropagation()),a){i={};try{i=JSON.parse(a)}catch(e){}n&&n.applyChange(i)}else r&&n&&n[r]&&n[r]()}}},{key:"onChange",value:function(){this.onRefresh()}},{key:"onRefresh",value:function(){if(!this.instance.isClosing()){var e=this.container;if(e){var t=this.instance.getSlide();if(t&&t.state===ne.Ready){var i=t&&!t.error&&t.panzoom,n=!0,o=!1,t=void 0;try{for(var a,r=e.querySelectorAll("[data-panzoom-action]")[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var s=a.value;i?(s.removeAttribute("disabled"),s.removeAttribute("tabindex")):(s.setAttribute("disabled",""),s.setAttribute("tabindex","-1"))}}catch(e){o=!0,t=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw t}}var l=i&&i.canZoomIn(),c=i&&i.canZoomOut(),u=!0,o=!1,t=void 0;try{for(var h,d=e.querySelectorAll('[data-panzoom-action="zoomIn"]')[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var f=h.value;l?(f.removeAttribute("disabled"),f.removeAttribute("tabindex")):(f.setAttribute("disabled",""),f.setAttribute("tabindex","-1"))}}catch(e){o=!0,t=e}finally{try{!u&&d.return&&d.return()}finally{if(o)throw t}}var v=!0,o=!1,t=void 0;try{for(var p,g=e.querySelectorAll('[data-panzoom-action="zoomOut"]')[Symbol.iterator]();!(v=(p=g.next()).done);v=!0){var m=p.value;c?(m.removeAttribute("disabled"),m.removeAttribute("tabindex")):(m.setAttribute("disabled",""),m.setAttribute("tabindex","-1"))}}catch(e){o=!0,t=e}finally{try{!v&&g.return&&g.return()}finally{if(o)throw t}}var y=!0,o=!1,t=void 0;try{for(var b,w=e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){var x=b.value;c||l?(x.removeAttribute("disabled"),x.removeAttribute("tabindex")):(x.setAttribute("disabled",""),x.setAttribute("tabindex","-1"));var k=x.querySelector("g");k&&(k.style.display=l?"":"none")}}catch(e){o=!0,t=e}finally{try{!y&&w.return&&w.return()}finally{if(o)throw t}}}}}}},{key:"onDone",value:function(e,t){var i,n=this;null===(i=t.panzoom)||void 0===i||i.on("afterTransform",function(){n.instance.isCurrentSlide(t)&&n.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}},{key:"createContainer",value:function(){var e=this.instance.container;if(!e)return null;var t=this.option("parentEl")||e,i=t.querySelector("."+Ne);return i||(i=document.createElement("div"),F(i,Ne),t.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&F(e,Be),this.container=i}},{key:"createEl",value:function(t){var i=this,e=this.instance,n=e.carousel;if(!n)return null;if("toggleFS"===t)return null;if("fullscreen"===t&&!te())return null;var o,a=null,r=n.slides.length||0,s=0,l=0,c=!0,u=!1,h=void 0;try{for(var d,f=n.slides[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var v=d.value;!v.panzoom&&"image"!==v.type||s++,"image"!==v.type&&!v.downloadSrc||l++}}catch(e){u=!0,h=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}if(r<2&&["infobar","prev","next"].includes(t))return a;if(void 0!==Fe[t]&&!s)return null;if("download"===t&&!l)return null;if("thumbs"===t){e=e.plugins.Thumbs;if(!e||!e.isEnabled)return null}if("slideshow"===t&&(!n.plugins.Autoplay||r<2))return null;void 0!==Fe[t]?(m=Fe[t],(a=document.createElement("button")).setAttribute("title",this.instance.localize("{{"+t.toUpperCase()+"}}")),F(a,"f-button"),m.action&&(a.dataset.panzoomAction=m.action),m.change&&(a.dataset.panzoomChange=JSON.stringify(m.change)),a.appendChild(S(this.instance.localize(m.icon)))):(o=(this.option("items")||[])[t])&&(a=S(this.instance.localize(o.tpl)),"function"==typeof o.click&&a.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),"function"==typeof o.click&&o.click.call(i,i,e)}));var p=null==a?void 0:a.querySelector("svg");if(p){var g=!0,m=!1,t=void 0;try{for(var y,b=Object.entries(He)[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var w=_slicedToArray(y.value,2),x=w[0],k=w[1];p.getAttribute(x)||p.setAttribute(x,String(k))}}catch(e){m=!0,t=e}finally{try{!g&&b.return&&b.return()}finally{if(m)throw t}}}return a}},{key:"removeContainer",value:function(){var e=this.container;e&&e.remove(),this.container=null,this.state=De.Disabled;e=this.instance.container;e&&y(e,Be)}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}}]),We);function We(){var e;return _classCallCheck(this,We),e=_possibleConstructorReturn(this,(We.__proto__||Object.getPrototypeOf(We)).apply(this,arguments)),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:De.Init}),Object.defineProperty(e,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}Object.defineProperty(B,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null}});function Xe(e){return"string"==typeof e}function qe(){var e=window.getSelection();return!!e&&"Range"===e.type}var B={Hash:ce,Html:i,Images:V,Slideshow:b,Thumbs:x,Toolbar:B},Ye="with-fancybox",Ve="hide-scrollbar",Ze="--fancybox-scrollbar-compensate",Ue="--fancybox-body-margin",Ge="aria-hidden",Ke="is-using-tab",Je="is-animated",$e="is-compact",Qe="is-loading",et="is-opening",tt="has-caption",it="disabled",nt="tabindex",ot="download",at="href",rt="src",st=void 0,lt=null,ct=null,ut=0,ht=0,dt=new Map,ft=0,vt=(_inherits(pt,o),_createClass(pt,[{key:"isIdle",get:function(){return this.idle}},{key:"isCompact",get:function(){return this.option("compact")}}]),_createClass(pt,[{key:"init",value:function(){var e,t,i,n,o,a=this;this.state!==ie.Destroy&&(this.state=ie.Init,this.attachPlugins(Object.assign(Object.assign({},pt.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),!0!==this.option("hideScrollbar")||oe&&(e=(n=document).body,t=n.documentElement,e.classList.contains(Ve)||(i=window.innerWidth-t.getBoundingClientRect().width,n=parseFloat(window.getComputedStyle(e).marginRight),t.style.setProperty(Ze,(i=i<0?0:i)+"px"),n&&e.style.setProperty(Ue,n+"px"),e.classList.add(Ve))),this.initLayout(),this.scale(),o=function(){a.initCarousel(a.userSlides),a.state=ie.Ready,a.attachEvents(),a.emit("ready"),setTimeout(function(){a.container&&a.container.setAttribute(Ge,"false")},16)},this.option("Fullscreen.autoStart")&&st&&!st.isFullscreen()?st.request().then(function(){a.startedFs=!0,o()}).catch(o):o())}},{key:"initLayout",value:function(){var e=this,t=this.option("parentEl")||document.body,i=S(this.localize(this.option("tpl.main")||""));i&&(i.setAttribute("id","fancybox-"+this.id),i.setAttribute("aria-label",this.localize("{{MODAL}}")),i.classList.toggle($e,this.isCompact),F(i,this.option("mainClass")||""),F(i,et),this.container=i,this.footer=i.querySelector(".fancybox__footer"),t.appendChild(i),F(document.documentElement,Ye),lt&&ct||(lt=document.createElement("span"),F(lt,"fancybox-focus-guard"),lt.setAttribute(nt,"0"),lt.setAttribute(Ge,"true"),lt.setAttribute("aria-label","Focus guard"),ct=lt.cloneNode(),null===(t=i.parentElement)||void 0===t||t.insertBefore(lt,i),null===(t=i.parentElement)||void 0===t||t.append(ct)),i.addEventListener("mousedown",function(e){ut=e.pageX,ht=e.pageY,y(i,Ke)}),this.option("animated")&&(F(i,Je),setTimeout(function(){e.isClosing()||y(i,Je)},350)),this.emit("initLayout"))}},{key:"initCarousel",value:function(e){var T=this,t=this.container;!t||(t=t.querySelector(".fancybox__carousel"))&&((e=this.carousel=new J(t,m({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}))).on("*",function(e,t){for(var i=arguments.length,n=Array(2<i?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];T.emit.apply(T,["Carousel."+t,e].concat(n))}),e.on(["ready","change"],function(){T.manageCaption()}),this.on("Carousel.removeSlide",function(e,t,i){T.clearContent(i),i.state=void 0}),e.on("Panzoom.touchStart",function(){var e;T.isCompact||T.endIdle(),null!==(e=document.activeElement)&&void 0!==e&&e.closest(".f-thumbs")&&(null===(e=T.container)||void 0===e||e.focus())}),e.on("settle",function(){T.idleTimer||T.isCompact||!T.option("idle")||T.setIdle(),T.option("autoFocus")&&!T.isClosing&&T.checkFocus()}),this.option("dragToClose")&&(e.on("Panzoom.afterTransform",function(e,t){var i,n=T.getSlide();n&&a(n.el)||(i=T.container)&&(t=(n=Math.abs(t.current.f))<1?"":Math.max(.5,Math.min(1,1-n/t.contentRect.fitHeight*1.5)),i.style.setProperty("--fancybox-ts",t?"0s":""),i.style.setProperty("--fancybox-opacity",t+""))}),e.on("Panzoom.touchEnd",function(e,t,i){var n,o=T.getSlide();o&&a(o.el)||t.isMobile&&document.activeElement&&-1!==["TEXTAREA","INPUT"].indexOf(null===(n=document.activeElement)||void 0===n?void 0:n.nodeName)||(n=Math.abs(t.dragOffset.y),"y"===t.lockedAxis&&(200<=n||50<=n&&t.dragOffset.time<300)&&(i&&i.cancelable&&i.preventDefault(),T.close(i,"f-throwOut"+(t.current.f<0?"Up":"Down"))))})),e.on("change",function(e){var t=null===(t=T.getSlide())||void 0===t?void 0:t.triggerEl;t&&(e=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:e.page}),t.dispatchEvent(e))}),e.on(["refresh","change"],function(e){var t=T.container;if(t){var i=!0,n=!1,o=void 0;try{for(var a,r=t.querySelectorAll("[data-fancybox-current-index]")[Symbol.iterator]();!(i=(a=r.next()).done);i=!0)a.value.innerHTML=e.page+1}catch(e){n=!0,o=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}var s=!0,n=!1,o=void 0;try{for(var l,c=t.querySelectorAll("[data-fancybox-count]")[Symbol.iterator]();!(s=(l=c.next()).done);s=!0)l.value.innerHTML=e.pages.length}catch(e){n=!0,o=e}finally{try{!s&&c.return&&c.return()}finally{if(n)throw o}}if(!e.isInfinite){var u=!0,h=!1,d=void 0;try{for(var f,v=t.querySelectorAll("[data-fancybox-next]")[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var p=f.value;e.page<e.pages.length-1?(p.removeAttribute(it),p.removeAttribute(nt)):(p.setAttribute(it,""),p.setAttribute(nt,"-1"))}}catch(e){h=!0,d=e}finally{try{!u&&v.return&&v.return()}finally{if(h)throw d}}var g=!0,h=!1,d=void 0;try{for(var m,y=t.querySelectorAll("[data-fancybox-prev]")[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var b=m.value;0<e.page?(b.removeAttribute(it),b.removeAttribute(nt)):(b.setAttribute(it,""),b.setAttribute(nt,"-1"))}}catch(e){h=!0,d=e}finally{try{!g&&y.return&&y.return()}finally{if(h)throw d}}}var w=T.getSlide();if(w){var x=w.downloadSrc||"";x||"image"!==w.type||w.error||!Xe(w.src)||(x=w.src);var k=!0,h=!1,d=void 0;try{for(var S,C=t.querySelectorAll("[data-fancybox-download]")[Symbol.iterator]();!(k=(S=C.next()).done);k=!0){var E=S.value,P=w.downloadFilename;x?(E.removeAttribute(it),E.removeAttribute(nt),E.setAttribute(at,x),E.setAttribute(ot,P||x),E.setAttribute("target","_blank")):(E.setAttribute(it,""),E.setAttribute(nt,"-1"),E.removeAttribute(at),E.removeAttribute(ot))}}catch(e){h=!0,d=e}finally{try{!k&&C.return&&C.return()}finally{if(h)throw d}}}}}),this.emit("initCarousel"))}},{key:"attachEvents",value:function(){var e=this,t=e.container;t&&(t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize),(t=window.visualViewport)&&(t.addEventListener("scroll",e.onResize),t.addEventListener("resize",e.onResize)))}},{key:"detachEvents",value:function(){var e=this,t=e.container;t&&(document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize),(t=window.visualViewport)&&(t.removeEventListener("resize",e.onResize),t.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0))}},{key:"scale",value:function(){var e,t,i,n,o,a,r,s=this.container;s&&(e=window.visualViewport,t=Math.max(1,(null==e?void 0:e.scale)||1),r=a=o="",e&&1<t&&(i=e.offsetLeft+"px",n=e.offsetTop+"px",o=e.width*t+"px",a=e.height*t+"px",r="translate3d("+i+", "+n+", 0) scale("+1/t+")"),s.style.transform=r,s.style.width=o,s.style.height=a)}},{key:"onClick",value:function(e){var t=this,i=this.container,n=this.isCompact;if(i&&!this.isClosing()){!n&&this.option("idle")&&this.resetIdle();var o=e.composedPath()[0];if(o.closest(".fancybox-spinner")||o.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(o.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(o.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(("click"!==e.type||0!==e.detail)&&!(30<Math.abs(e.pageX-ut)||30<Math.abs(e.pageY-ht))){var a=document.activeElement;if(!(qe()&&a&&i.contains(a)))if(n&&"image"===(null===(r=this.getSlide())||void 0===r?void 0:r.type))this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(function(){t.toggleIdle(),t.clickTimer=null},350);else if(this.emit("click",e),!e.defaultPrevented){var r=!1;if(o.closest(".fancybox__content")){if(a){if(a.closest("[contenteditable]"))return;o.matches(re)||a.blur()}if(qe())return;r=this.option("contentClick")}else o.closest(".fancybox__carousel")&&!o.matches(re)&&(r=this.option("backdropClick"));"close"===r?(e.preventDefault(),this.close(e)):"next"===r?(e.preventDefault(),this.next()):"prev"===r&&(e.preventDefault(),this.prev())}}}}},{key:"onWheel",value:function(e){var t=e.target,i=this.option("wheel",e),n="slide"===(i=t.closest(".fancybox__thumbs")?"slide":i),o=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),a=Math.max(-1,Math.min(1,o)),o=Date.now();this.pwt&&o-this.pwt<300?n&&e.preventDefault():(this.pwt=o,this.emit("wheel",e,a),e.defaultPrevented||("close"===i?(e.preventDefault(),this.close(e)):"slide"===i&&(c(t)||(e.preventDefault(),this[0<a?"prev":"next"]()))))}},{key:"onKeydown",value:function(e){var t,i,n,o;this.isTopmost()&&(this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle(),o=e.key,(t=this.option("keyboard"))&&(i=e.composedPath()[0],n=(n=document.activeElement&&document.activeElement.classList)&&n.contains("f-button")||i.dataset.carouselPage||i.dataset.carouselIndex,"Escape"!==o&&!n&&g(i)&&(i.isContentEditable||-1!==["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(i.nodeName))||(("Tab"===e.key?F:y)(this.container,Ke),e.ctrlKey||e.altKey||e.shiftKey||(this.emit("keydown",o,e),(o=t[o])&&"function"==typeof this[o]&&(e.preventDefault(),this[o]())))))}},{key:"onResize",value:function(){var e,t=this.container;t&&(e=this.isCompact,t.classList.toggle($e,e),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize"))}},{key:"onFocus",value:function(e){this.isTopmost()&&this.checkFocus(e)}},{key:"onMousemove",value:function(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}},{key:"onVisibilityChange",value:function(){"visible"===document.visibilityState?this.checkFocus():this.endIdle()}},{key:"manageCloseBtn",value:function(e){var t=this.optionFor(e,"closeButton")||!1;if("auto"===t){var i=this.plugins.Toolbar;if(i&&i.state===De.Ready)return}t&&(!e.contentEl||e.closeBtnEl||(t=this.option("tpl.closeButton"))&&(t=S(this.localize(t)),e.closeBtnEl=e.contentEl.appendChild(t),e.el&&F(e.el,"has-close-btn")))}},{key:"manageCaption",value:function(){var e,t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,n="fancybox__caption",o=this.container;if(o){y(o,tt);var a,r=this.isCompact||this.option("commonCaption"),s=!r;if(this.caption&&this.stop(this.caption),s&&this.caption&&(this.caption.remove(),this.caption=null),r&&!this.caption){var l=!0,c=!1,u=void 0;try{for(var h,d=((null===(a=this.carousel)||void 0===a?void 0:a.slides)||[])[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;f.captionEl&&(f.captionEl.remove(),f.captionEl=void 0,y(f.el,tt),null===(e=f.el)||void 0===e||e.removeAttribute("aria-labelledby"))}}catch(e){c=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}}!(i=i||this.getSlide())||r&&!this.isCurrentSlide(i)||(a=i.el,(c=this.optionFor(i,"caption",""))?(u=null,s?(u=i.captionEl||null,a&&!u&&(s=n+"_"+this.id+"_"+i.index,u=document.createElement("div"),F(u,n),u.setAttribute("id",s),i.captionEl=a.appendChild(u),F(a,tt),a.setAttribute("aria-labelledby",s))):((u=(u=this.caption)||o.querySelector("."+n))||((u=document.createElement("div")).dataset.fancyboxCaption="",F(u,n),(this.footer||o).prepend(u)),F(o,tt),this.caption=u),u&&(u.innerHTML="",Xe(c)||"number"==typeof c?u.innerHTML=c+"":c instanceof HTMLElement&&u.appendChild(c))):r&&this.caption&&this.animate(this.caption,"f-fadeOut",function(){t.caption&&(t.caption.innerHTML="")}))}}},{key:"checkFocus",value:function(e){this.focus(e)}},{key:"focus",value:function(e){if(!this.ignoreFocusChange){var t=document.activeElement||null,i=(null==e?void 0:e.target)||null,n=this.container,o=null===(d=this.carousel)||void 0===d?void 0:d.viewport;if(n&&o&&(e||!t||!n.contains(t))){var a=this.getSlide(),r=a&&a.state===ne.Ready?a.el:null;if(r&&!r.contains(t)&&n!==t){e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;var s=Array.from(n.querySelectorAll(re)),l=[],c=null,u=!0,h=!1,d=void 0;try{for(var f,v=s[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var p,g,m=f.value,y=!m.offsetParent||!!m.closest('[aria-hidden="true"]'),b=r&&r.contains(m),w=!o.contains(m);m===n||(b||w)&&!y?(l.push(m),void 0!==(p=m.dataset.origTabindex)&&p&&(m.tabIndex=parseFloat(p)),m.removeAttribute("data-orig-tabindex"),!m.hasAttribute("autoFocus")&&c||(c=m)):((g=void 0===m.dataset.origTabindex?m.getAttribute("tabindex")||"":m.dataset.origTabindex)&&(m.dataset.origTabindex=g),m.tabIndex=-1)}}catch(e){h=!0,d=e}finally{try{!u&&v.return&&v.return()}finally{if(h)throw d}}d=null;e?(!i||l.indexOf(i)<0)&&(d=c||n,l.length&&(t===ct?d=l[0]:this.lastFocus!==n&&t!==lt||(d=l[l.length-1]))):d=(!a||"image"!==a.type)&&c||n,d&&ee(d),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}}}}},{key:"next",value:function(){var e=this.carousel;e&&1<e.pages.length&&e.slideNext()}},{key:"prev",value:function(){var e=this.carousel;e&&1<e.pages.length&&e.slidePrev()}},{key:"jumpTo",value:function(){var e;this.carousel&&(e=this.carousel).slideTo.apply(e,arguments)}},{key:"isTopmost",value:function(){var e;return(null===(e=pt.getInstance())||void 0===e?void 0:e.id)==this.id}},{key:"animate",value:function(){var e,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",o=arguments[2];i&&n?(this.stop(i),e=function e(t){t.target===i&&i.dataset.animationName&&(i.removeEventListener("animationend",e),delete i.dataset.animationName,o&&o(),y(i,n))},i.dataset.animationName=n,i.addEventListener("animationend",e),F(i,n)):o&&o()}},{key:"stop",value:function(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}},{key:"setContent",value:function(e){var t,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];this.isClosing()||(t=e.el)&&(i=null,g(n)?i=n:(i=S(n+""),g(i)||((i=document.createElement("div")).innerHTML=n+"")),["img","picture","iframe","video","audio"].includes(i.nodeName.toLowerCase())&&((n=document.createElement("div")).appendChild(i),i=n),(i=g(i)&&e.filter&&!e.error?i.querySelector(e.filter):i)&&g(i)?(F(i,"fancybox__content"),e.id&&i.setAttribute("id",e.id),"none"!==i.style.display&&"none"!==getComputedStyle(i).getPropertyValue("display")||(i.style.display=e.display||this.option("defaultDisplay")||"flex"),t.classList.add("has-"+(e.error?"error":e.type||"unknown")),t.prepend(i),e.contentEl=i,o&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}"))}},{key:"revealContent",value:function(e,t){var i=this,n=e.el,o=e.contentEl;n&&o&&(this.emit("reveal",e),this.hideLoading(e),e.state=ne.Opening,(t=this.isOpeningSlide(e)?void 0===t?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(o,t,function(){i.done(e)}):this.done(e))}},{key:"done",value:function(t){var i=this;this.isClosing()||(t.state=ne.Ready,this.emit("done",t),F(t.el,"is-done"),this.isCurrentSlide(t)&&this.option("autoFocus")&&queueMicrotask(function(){var e;null===(e=t.panzoom)||void 0===e||e.updateControls(),i.option("autoFocus")&&i.focus()}),this.isOpeningSlide(t)&&(y(this.container,et),!this.isCompact&&this.option("idle")&&this.setIdle()))}},{key:"isCurrentSlide",value:function(e){var t=this.getSlide();return!(!e||!t)&&t.index===e.index}},{key:"isOpeningSlide",value:function(e){var t;return null===(null===(t=this.carousel)||void 0===t?void 0:t.prevPage)&&e.index===(null===(e=this.getSlide())||void 0===e?void 0:e.index)}},{key:"showLoading",value:function(t){var i=this;t.state=ne.Loading;var n=t.el;n&&(F(n,Qe),this.emit("loading",t),t.spinnerEl||setTimeout(function(){var e;i.isClosing()||t.spinnerEl||t.state!==ne.Loading||(e=S(P),F(e,"fancybox-spinner"),t.spinnerEl=e,n.prepend(e),i.animate(e,"f-fadeIn"))},250))}},{key:"hideLoading",value:function(e){var t,i=e.el;i&&(t=e.spinnerEl,this.isClosing()?null==t||t.remove():(y(i,Qe),t&&this.animate(t,"f-fadeOut",function(){t.remove()}),e.state===ne.Loading&&(this.emit("loaded",e),e.state=ne.Ready)))}},{key:"setError",value:function(e,t){var i;this.isClosing()||(i=new Event("error",{bubbles:!0,cancelable:!0}),this.emit("error",i,e),i.defaultPrevented||(e.error=t,this.hideLoading(e),this.clearContent(e),(i=document.createElement("div")).classList.add("fancybox-error"),i.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,i)))}},{key:"clearContent",value:function(e){var t;void 0!==e.state&&(this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0),(t=e.el)&&(y(t,"has-error"),y(t,"has-unknown"),y(t,"has-"+(e.type||"unknown"))),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0)}},{key:"getSlide",value:function(){var e=this.carousel;return(null===(e=null==e?void 0:e.pages[null==e?void 0:e.page])||void 0===e?void 0:e.slides[0])||void 0}},{key:"close",value:function(e,t){var i,n=this;this.isClosing()||(i=new Event("shouldClose",{bubbles:!0,cancelable:!0}),this.emit("shouldClose",i,e),i.defaultPrevented||(e&&e.cancelable&&(e.preventDefault(),e.stopPropagation()),i=function(){n.proceedClose(e,t)},this.startedFs&&st&&st.isFullscreen()?Promise.resolve(st.exit()).then(i):i()))}},{key:"clearIdle",value:function(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}},{key:"setIdle",value:function(){function e(){t.clearIdle(),t.idle=!0,F(t.container,"is-idle"),t.emit("setIdle")}var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.clearIdle(),this.isClosing()||(i?e():(i=this.option("idle"))&&(this.idleTimer=setTimeout(e,i)))}},{key:"endIdle",value:function(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,y(this.container,"is-idle"),this.emit("endIdle"))}},{key:"resetIdle",value:function(){this.endIdle(),this.setIdle()}},{key:"toggleIdle",value:function(){this.idle?this.endIdle():this.setIdle(!0)}},{key:"toggleFullscreen",value:function(){var e=this;st&&(st.isFullscreen()?st.exit():st.request().then(function(){e.startedFs=!0}))}},{key:"isClosing",value:function(){return[ie.Closing,ie.CustomClosing,ie.Destroy].includes(this.state)}},{key:"proceedClose",value:function(e,t){var i=this;this.state=ie.Closing,this.clearIdle(),this.detachEvents();var n=this.container,o=this.carousel,a=this.getSlide(),r=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(r&&(Q(r)?ee(r):r.focus()),n&&(y(n,et),F(n,"is-closing"),n.setAttribute(Ge,"true"),this.option("animated")&&F(n,Je),n.style.pointerEvents="none"),o){o.clearTransitions(),null===(r=o.panzoom)||void 0===r||r.destroy(),null===(n=o.plugins.Navigation)||void 0===n||n.detach();var s=!0,r=!1,n=void 0;try{for(var l,c=o.slides[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;u.state=ne.Closing,this.hideLoading(u);var h=u.contentEl;h&&this.stop(h);var d=null==u?void 0:u.panzoom;d&&(d.stop(),d.detachEvents(),d.detachObserver()),this.isCurrentSlide(u)||o.emit("removeSlide",u)}}catch(e){r=!0,n=e}finally{try{!s&&c.return&&c.return()}finally{if(r)throw n}}}this.emit("close",e),this.state!==ie.CustomClosing?(t=void 0===t&&a?this.optionFor(a,"hideClass"):t)&&a?(this.animate(a.contentEl,t,function(){o&&o.emit("removeSlide",a)}),setTimeout(function(){i.destroy()},500)):this.destroy():setTimeout(function(){i.destroy()},500)}},{key:"destroy",value:function(){var e,t;this.state!==ie.Destroy&&(this.state=ie.Destroy,null===(t=this.carousel)||void 0===t||t.destroy(),(e=this.container)&&e.remove(),dt.delete(this.id),(t=pt.getInstance())?t.focus():(lt&&(lt.remove(),lt=null),ct&&(ct.remove(),ct=null),y(document.documentElement,Ye),oe&&((t=(e=document).body).classList.remove(Ve),t.style.setProperty(Ue,""),e.documentElement.style.setProperty(Ze,"")),this.emit("destroy")))}}],[{key:"bind",value:function(e,t,i){var n,o,a;oe&&(a="",o={},(n=void 0)===e?n=document.body:Xe(e)?(n=document.body,a=e,"object"==(void 0===t?"undefined":_typeof(t))&&(o=t||{})):(n=e,Xe(t)&&(a=t),"object"==(void 0===i?"undefined":_typeof(i))&&(o=i||{})),n&&g(n)&&(a=a||"[data-fancybox]",(i=pt.openers.get(n)||new Map).set(a,o),pt.openers.set(n,i),1===i.size&&n.addEventListener("click",pt.fromEvent)))}},{key:"unbind",value:function(e,t){var i=void 0,n="";Xe(e)?(i=document.body,n=e):(i=e,Xe(t)&&(n=t)),i&&((t=pt.openers.get(i))&&n&&t.delete(n),n&&t||(pt.openers.delete(i),i.removeEventListener("click",pt.fromEvent)))}},{key:"destroy",value:function(){for(var e=void 0;e=pt.getInstance();)e.destroy();var t=!0,i=!1,n=void 0;try{for(var o,a=pt.openers.keys()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)o.value.removeEventListener("click",pt.fromEvent)}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}pt.openers=new Map}},{key:"fromEvent",value:function(e){if(!e.defaultPrevented&&!(e.button&&0!==e.button||e.ctrlKey||e.metaKey||e.shiftKey)){var o=e.composedPath()[0],t=o.closest("[data-fancybox-trigger]");if(t&&(n=t.dataset.fancyboxTrigger||"",o=document.querySelectorAll('[data-fancybox="'+n+'"]')[parseInt(t.dataset.fancyboxIndex||"",10)||0]||o),o&&o instanceof Element){var a=void 0,r=void 0,s=void 0,l=void 0;if([].concat(_toConsumableArray(pt.openers)).reverse().find(function(e){var e=_slicedToArray(e,2),n=e[0],e=e[1];return!(!n.contains(o)||![].concat(_toConsumableArray(e)).reverse().find(function(e){var t=_slicedToArray(e,2),i=t[0],e=t[1],t=o.closest(i);return!!t&&(a=n,r=i,s=t,l=e,!0)}))}),a&&r&&s){l=l||{},e.preventDefault(),o=s;var i=[],n=m({},se,l);n.event=e,n.triggerEl=o,n.delegate=t;var t=n.groupAll,c=n.groupAttr,u=c&&o?o.getAttribute(""+c):"";if(o&&!u&&!t||(i=[].slice.call(a.querySelectorAll(r))),(i=o&&!t?u?i.filter(function(e){return e.getAttribute(""+c)===u}):[o]:i).length){t=pt.getInstance();return t&&t.options.triggerEl&&-1<i.indexOf(t.options.triggerEl)?void 0:(o&&(n.startIndex=i.indexOf(o)),pt.fromNodes(i,n))}}}}}},{key:"fromSelector",value:function(e,t,i){var n=null,o="",a={};if(Xe(e)?(n=document.body,o=e,"object"==(void 0===t?"undefined":_typeof(t))&&(a=t||{})):e instanceof HTMLElement&&Xe(t)&&(n=e,o=t,"object"==(void 0===i?"undefined":_typeof(i))&&(a=i||{})),!n||!o)return!1;i=pt.openers.get(n);return!!i&&(!!(a=m({},i.get(o)||{},a))&&pt.fromNodes(Array.from(n.querySelectorAll(o)),a))}},{key:"fromNodes",value:function(e,t){t=m({},se,t||{});var i=[],n=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value,c=l.dataset||{},u=c.src||l.getAttribute(at)||l.getAttribute("currentSrc")||l.getAttribute(rt)||void 0,h=void 0,d=t.delegate,f=void 0;(h=(h=d&&i.length===t.startIndex?d instanceof HTMLImageElement?d:d.querySelector("img:not([aria-hidden])"):h)||(l instanceof HTMLImageElement?l:l.querySelector("img:not([aria-hidden])")))&&(!(f=h.currentSrc||h.src||void 0)&&h.dataset&&(f=h.dataset.lazySrc||h.dataset.src||void 0));var v,p={src:u,triggerEl:l,thumbEl:h,thumbElSrc:f,thumbSrc:f};for(v in c){var g="false"!==(g=c[v]+"")&&("true"===g||g);p[v]=g}i.push(p)}}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return new pt(i,t)}},{key:"getInstance",value:function(e){return e?dt.get(e):Array.from(dt.values()).reverse().find(function(e){return!e.isClosing()&&e})||null}},{key:"getSlide",value:function(){var e;return(null===(e=pt.getInstance())||void 0===e?void 0:e.getSlide())||null}},{key:"show",value:function(){return new pt(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}},{key:"next",value:function(){var e=pt.getInstance();e&&e.next()}},{key:"prev",value:function(){var e=pt.getInstance();e&&e.prev()}},{key:"close",value:function(){for(var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=arguments.length,i=Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(t){var o=!0,t=!1,a=void 0;try{for(var r,s=dt.values()[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var l=r.value;l.close.apply(l,i)}}catch(e){t=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(t)throw a}}}else{a=pt.getInstance();a&&a.close.apply(a,i)}}}]),pt);function pt(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,pt),e=_possibleConstructorReturn(this,(pt.__proto__||Object.getPrototypeOf(pt)).call(this,i)),Object.defineProperty(e,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(e,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:ie.Init}),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),st=st||te(),e.id=i.id||++ft,dt.set(e.id,e),e.userSlides=t,e.userPlugins=n,queueMicrotask(function(){e.init()}),e}Object.defineProperty(vt,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.31"}),Object.defineProperty(vt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:se}),Object.defineProperty(vt,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:B}),Object.defineProperty(vt,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),e.Carousel=J,e.Fancybox=vt,e.Panzoom=R});