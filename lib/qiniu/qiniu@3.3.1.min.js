!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.qiniu=e():t.qiniu=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=87)}([function(t,e,n){t.exports=n(88)},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){var r=n(2),o=n(1),i=n(12),a=n(13),u=n(14),s=function(t,e,n){var c,f,l,p=t&s.F,h=t&s.G,d=t&s.S,g=t&s.P,v=t&s.B,y=t&s.W,m=h?o:o[e]||(o[e]={}),b=m.prototype,w=h?r:d?r[e]:(r[e]||{}).prototype;for(c in h&&(n=e),n)(f=!p&&w&&void 0!==w[c])&&u(m,c)||(l=f?w[c]:n[c],m[c]=h&&"function"!=typeof w[c]?n[c]:v&&f?i(l,r):y&&w[c]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):g&&"function"==typeof l?i(Function.call,l):l,g&&((m.virtual||(m.virtual={}))[c]=l,t&s.R&&b&&!b[c]&&a(b,c,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){var r=n(51)("wks"),o=n(35),i=n(2).Symbol,a="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)("Symbol."+t))}).store=r},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(16)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(9),o=n(65),i=n(45),a=Object.defineProperty;e.f=n(7)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(6);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=n(119)},function(t,e,n){t.exports=n(120)},function(t,e,n){var r=n(22);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(8),o=n(32);t.exports=n(7)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=n(102)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(46),o=n(47);t.exports=function(t){return r(o(t))}},function(t,e,n){"use strict";var r=n(3),o=n(20),i=n(0);i(e,"__esModule",{value:!0});var a={compressImage:!0};i(e,"compressImage",{enumerable:!0,get:function(){return p.default}});var u=n(101);o(u).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(a,t)||i(e,t,{enumerable:!0,get:function(){return u[t]}}))}));var s=n(118);o(s).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(a,t)||i(e,t,{enumerable:!0,get:function(){return s[t]}}))}));var c=n(79);o(c).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(a,t)||i(e,t,{enumerable:!0,get:function(){return c[t]}}))}));var f=n(80);o(f).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(a,t)||i(e,t,{enumerable:!0,get:function(){return f[t]}}))}));var l=n(129);o(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(a,t)||i(e,t,{enumerable:!0,get:function(){return l[t]}}))}));var p=r(n(164))},function(t,e,n){t.exports=n(125)},function(t,e,n){t.exports=n(99)},function(t,e,n){var r=n(12),o=n(109),i=n(110),a=n(9),u=n(48),s=n(111),c={},f={};(e=t.exports=function(t,e,n,l,p){var h,d,g,v,y=p?function(){return t}:s(t),m=r(n,l,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(i(y)){for(h=u(t.length);h>b;b++)if((v=e?m(a(d=t[b])[0],d[1]):m(t[b]))===c||v===f)return v}else for(g=y.call(t);!(d=g.next()).done;)if((v=o(g,m,d.value,e))===c||v===f)return v}).BREAK=c,e.RETURN=f},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=n(3);n(0)(e,"__esModule",{value:!0}),e.QiniuNetworkError=e.QiniuRequestError=e.QiniuError=e.QiniuErrorName=void 0;var o,i,a=r(n(33)),u=r(n(36)),s=(o=function(t,e){return(o=u.default||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?(0,a.default)(e):(n.prototype=e.prototype,new n)});e.QiniuErrorName=i,function(t){t.InvalidFile="InvalidFile",t.InvalidToken="InvalidToken",t.InvalidMetadata="InvalidMetadata",t.InvalidChunkSize="InvalidChunkSize",t.InvalidCustomVars="InvalidCustomVars",t.NotAvailableUploadHost="NotAvailableUploadHost",t.ReadCacheFailed="ReadCacheFailed",t.InvalidCacheData="InvalidCacheData",t.WriteCacheFailed="WriteCacheFailed",t.RemoveCacheFailed="RemoveCacheFailed",t.InvalidTransformOrientation="InvalidTransformOrientation",t.GetCanvasContextFailed="GetCanvasContextFailed",t.UnsupportedFileType="UnsupportedFileType",t.FileReaderReadFailed="FileReaderReadFailed",t.NotAvailableXMLHttpRequest="NotAvailableXMLHttpRequest",t.InvalidProgressEventTarget="InvalidProgressEventTarget",t.RequestError="RequestError"}(i||(e.QiniuErrorName=i={}));var c=function(t,e){this.name=t,this.message=e,this.stack=(new Error).stack};e.QiniuError=c;var f=function(t){function e(e,n,r,o){var a=t.call(this,i.RequestError,r)||this;return a.code=e,a.reqId=n,a.isRequestError=!0,a.data=o,a}return s(e,t),e}(c);e.QiniuRequestError=f;var l=function(t){function e(e,n){return void 0===n&&(n=""),t.call(this,0,n,e)||this}return s(e,t),e}(f);e.QiniuNetworkError=l},function(t,e,n){var r=n(66),o=n(52);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=!0},function(t,e,n){var r=n(47);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports={}},function(t,e,n){var r=n(8).f,o=n(14),i=n(5)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(35)("meta"),o=n(6),i=n(14),a=n(8).f,u=0,s=Object.isExtensible||function(){return!0},c=!n(16)((function(){return s(Object.preventExtensions({}))})),f=function(t){a(t,r,{value:{i:"O"+ ++u,w:{}}})},l=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[r].i},getWeak:function(t,e){if(!i(t,r)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[r].w},onFreeze:function(t){return c&&l.NEED&&s(t)&&!i(t,r)&&f(t),t}}},function(t,e,n){var r=n(6);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=n(90)},function(t,e,n){var r=n(9),o=n(92),i=n(52),a=n(50)("IE_PROTO"),u=function(){},s=function(){var t,e=n(44)("iframe"),r=i.length;for(e.style.display="none",n(67).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s.prototype[i[r]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(u.prototype=r(t),n=new u,u.prototype=null,n[a]=t):n=s(),void 0===e?n:o(n,e)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){t.exports=n(95)},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){},function(t,e,n){n(106);for(var r=n(2),o=n(13),i=n(28),a=n(5)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<u.length;s++){var c=u[s],f=r[c],l=f&&f.prototype;l&&!l[a]&&o(l,a,c),i[c]=i.Array}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(13);t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:r(t,o,e[o]);return t}},function(t,e,n){var r=n(136),o=n(0),i=n(75),a=n(139);function u(){if("function"!=typeof a)return null;var t=new a;return u=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},a=o&&r;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var c=a?r(t,s):null;c&&(c.get||c.set)?o(n,s,c):n[s]=t[s]}return n.default=t,e&&e.set(t,n),n}},function(t,e,n){"use strict";var r=n(42),o=n(3);n(0)(e,"__esModule",{value:!0}),e.getUpHosts=d,e.initUploadParts=function(t,e,n,r){var o=r+"/buckets/"+e+"/objects/"+(null!=n?f.urlSafeBase64Encode(n):"~")+"/uploads";return f.request(o,{method:"POST",headers:f.getAuthHeaders(t)})},e.uploadChunk=function(t,e,n,r,o){var i=g(f.getPutPolicy(t).bucketName,e,r)+"/"+n;return f.request(i,l(l({},o),{method:"PUT",headers:f.getHeadersForChunkUpload(t)}))},e.uploadComplete=function(t,e,n,r){var o=g(f.getPutPolicy(t).bucketName,e,n);return f.request(o,l(l({},r),{method:"POST",headers:f.getHeadersForMkFile(t)}))},e.deleteUploadedChunks=function(t,e,n){var r=g(f.getPutPolicy(t).bucketName,e,n);return f.request(r,{method:"DELETE",headers:f.getAuthHeaders(t)})},e.direct=function(t,e,n){return f.request(t,l({method:"POST",body:e},n))},e.getUploadUrl=function(t,e){return p(this,void 0,void 0,(function(){var n,r,o,i,a;return h(this,(function(u){switch(u.label){case 0:return n=(0,f.normalizeUploadConfig)(t),r=n.upprotocol,n.uphost.length>0?[2,r+"://"+n.uphost[0]]:[4,d((o=f.getPutPolicy(e)).assessKey,o.bucketName,r)];case 1:return i=u.sent(),a=i.data.up.acc.main,[2,r+"://"+a[0]]}}))}))};var i=o(n(10)),a=o(n(11)),u=o(n(15)),s=o(n(19)),c=n(148),f=r(n(18)),l=function(){return(l=s.default||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},p=function(t,e,n,r){return new(n||(n=u.default))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},h=function(t,e){var n,r,o,u,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof a.default&&(u[i.default]=function(){return this}),u;function c(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function d(t,e,n){return p(this,void 0,void 0,(function(){var r,o;return h(this,(function(i){return r=(0,c.stringify)({ak:t,bucket:e}),o=n+"://api.qiniu.com/v2/query?"+r,[2,f.request(o,{method:"GET"})]}))}))}function g(t,e,n){var r=n.url,o=n.id;return r+"/buckets/"+t+"/objects/"+(null!=e?f.urlSafeBase64Encode(e):"~")+"/uploads/"+o}},function(t,e,n){var r=n(6),o=n(2).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(6);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(49),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(51)("keys"),o=n(35);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(1),o=n(2),i="__core-js_shared__",a=o[i]||(o[i]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(26)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(37),o=n(32),i=n(17),a=n(45),u=n(14),s=n(65),c=Object.getOwnPropertyDescriptor;e.f=n(7)?c:function(t,e){if(t=i(t),e=a(e,!0),s)try{return c(t,e)}catch(t){}if(u(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){"use strict";var r=n(103)(!0);n(55)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){"use strict";var r=n(26),o=n(4),i=n(56),a=n(13),u=n(28),s=n(104),c=n(29),f=n(105),l=n(5)("iterator"),p=!([].keys&&"next"in[].keys()),h="keys",d="values",g=function(){return this};t.exports=function(t,e,n,v,y,m,b){s(n,e,v);var w,x,_,S=function(t){if(!p&&t in k)return k[t];switch(t){case h:case d:return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",C=y==d,P=!1,k=t.prototype,I=k[l]||k["@@iterator"]||y&&k[y],O=I||S(y),U=y?C?S("entries"):O:void 0,F="Array"==e&&k.entries||I;if(F&&(_=f(F.call(new t)))!==Object.prototype&&_.next&&(c(_,E,!0),r||"function"==typeof _[l]||a(_,l,g)),C&&I&&I.name!==d&&(P=!0,O=function(){return I.call(this)}),r&&!b||!p&&!P&&k[l]||a(k,l,O),u[e]=O,u[E]=g,y)if(w={values:C?O:S(d),keys:m?O:S(h),entries:U},b)for(x in w)x in k||i(k,x,w[x]);else o(o.P+o.F*(p||P),e,w);return w}},function(t,e,n){t.exports=n(13)},function(t,e,n){var r=n(25),o=n(5)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){"use strict";var r=n(22);function o(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new o(t)}},function(t,e,n){e.f=n(5)},function(t,e,n){var r=n(2),o=n(1),i=n(26),a=n(59),u=n(8).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:a.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(25);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(12),o=n(46),i=n(27),a=n(48),u=n(142);t.exports=function(t,e){var n=1==t,s=2==t,c=3==t,f=4==t,l=6==t,p=5==t||l,h=e||u;return function(e,u,d){for(var g,v,y=i(e),m=o(y),b=r(u,d,3),w=a(m.length),x=0,_=n?h(e,w):s?h(e,0):void 0;w>x;x++)if((p||x in m)&&(v=b(g=m[x],x,y),t))if(n)_[x]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:_.push(g)}else if(f)return!1;return l?-1:c||f?f:_}}},function(t,e,n){"use strict";var r=n(42),o=n(3);n(0)(e,"__esModule",{value:!0}),e.default=e.RETRY_CODE_LIST=e.FREEZE_CODE_LIST=e.DEFAULT_CHUNK_SIZE=void 0;var i=o(n(10)),a=o(n(11)),u=o(n(15)),s=o(n(19)),c=n(23),f=r(n(18)),l=function(){return(l=s.default||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},p=function(t,e,n,r){return new(n||(n=u.default))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},h=function(t,e){var n,r,o,u,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof a.default&&(u[i.default]=function(){return this}),u;function c(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},d=function(t,e){var n="function"==typeof a.default&&t[i.default];if(!n)return t;var r,o,u=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=u.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=u.return)&&n.call(u)}finally{if(o)throw o.error}}return s},g=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t};e.DEFAULT_CHUNK_SIZE=4;var v=[0,502,503,504,599];e.FREEZE_CODE_LIST=v;var y=g(v,[612]);e.RETRY_CODE_LIST=y;var m=Math.pow(1024,3),b=function(){function t(t,e,n,r){this.hostPool=n,this.logger=r,this.aborted=!1,this.retryCount=0,this.xhrList=[],this.config=t.config,r.info("config inited.",this.config),this.putExtra=l({fname:""},t.putExtra),r.info("putExtra inited.",this.putExtra),this.key=t.key,this.file=t.file,this.token=t.token,this.onData=e.onData,this.onError=e.onError,this.onComplete=e.onComplete;try{var o=f.getPutPolicy(this.token);this.bucketName=o.bucketName,this.assessKey=o.assessKey}catch(t){r.error("get putPolicy from token failed.",t),this.onError(t)}}return t.prototype.checkAndUpdateUploadHost=function(){return p(this,void 0,void 0,(function(){var t;return h(this,(function(e){switch(e.label){case 0:return this.logger.info("get available upload host."),[4,this.hostPool.getUp(this.assessKey,this.bucketName,this.config.upprotocol)];case 1:if(null==(t=e.sent()))throw new c.QiniuError(c.QiniuErrorName.NotAvailableUploadHost,"no available upload host.");return null!=this.uploadHost&&this.uploadHost.host!==t.host?this.logger.warn("host switches from "+this.uploadHost.host+" to "+t.host+"."):this.logger.info("use host "+t.host+"."),this.uploadHost=t,[2]}}))}))},t.prototype.checkAndUnfreezeHost=function(){this.logger.info("check unfreeze host."),null!=this.uploadHost&&this.uploadHost.isFrozen()&&(this.logger.warn(this.uploadHost.host+" will be unfrozen."),this.uploadHost.unfreeze())},t.prototype.checkAndFreezeHost=function(t){this.logger.info("check freeze host."),t instanceof c.QiniuRequestError&&null!=this.uploadHost&&v.includes(t.code)&&(this.logger.warn(this.uploadHost.host+" will be temporarily frozen."),this.uploadHost.freeze())},t.prototype.handleError=function(t){this.logger.error(t.message),this.onError(t)},t.prototype.putFile=function(){return p(this,void 0,void 0,(function(){var t,e,n,r,o;return h(this,(function(i){switch(i.label){case 0:if(this.aborted=!1,this.putExtra.fname||(this.logger.info("use file.name as fname."),this.putExtra.fname=this.file.name),this.file.size>1e4*m)return this.handleError(new c.QiniuError(c.QiniuErrorName.InvalidFile,"file size exceed maximum value 10000G")),[2];if(this.putExtra.customVars&&!f.isCustomVarsValid(this.putExtra.customVars))return this.handleError(new c.QiniuError(c.QiniuErrorName.InvalidCustomVars,"customVars key should start width x:")),[2];if(this.putExtra.metadata&&!f.isMetaDataValid(this.putExtra.metadata))return this.handleError(new c.QiniuError(c.QiniuErrorName.InvalidMetadata,"metadata key should start with x-qn-meta-")),[2];i.label=1;case 1:return i.trys.push([1,4,,5]),this.uploadAt=(new Date).getTime(),[4,this.checkAndUpdateUploadHost()];case 2:return i.sent(),[4,this.run()];case 3:return t=i.sent(),this.onComplete(t.data),this.checkAndUnfreezeHost(),this.sendLog(t.reqId,200),[2];case 4:return e=i.sent(),this.logger.error(e),this.clear(),e instanceof c.QiniuRequestError&&(n=this.aborted?"":e.reqId,r=this.aborted?-2:e.code,this.sendLog(n,r),this.checkAndFreezeHost(e),o=++this.retryCount<=this.config.retryCount,!this.aborted&&y.includes(e.code)&&o)?(this.logger.warn("error auto retry: "+this.retryCount+"/"+this.config.retryCount+"."),this.putFile(),[2]):(this.onError(e),[3,5]);case 5:return[2]}}))}))},t.prototype.clear=function(){this.logger.info("start cleaning all xhr."),this.xhrList.forEach((function(t){t.onreadystatechange=null,t.abort()})),this.logger.info("cleanup completed."),this.xhrList=[]},t.prototype.stop=function(){this.logger.info("stop."),this.clear(),this.aborted=!0},t.prototype.addXhr=function(t){this.xhrList.push(t)},t.prototype.sendLog=function(t,e){var n,r;this.logger.report({code:e,reqId:t,remoteIp:"",upType:"jssdk-h5",size:this.file.size,time:Math.floor(this.uploadAt/1e3),port:f.getPortFromUrl(null===(n=this.uploadHost)||void 0===n?void 0:n.getUrl()),host:f.getDomainFromUrl(null===(r=this.uploadHost)||void 0===r?void 0:r.getUrl()),bytesSent:this.progress?this.progress.total.loaded:0,duration:Math.floor(((new Date).getTime()-this.uploadAt)/1e3)})},t.prototype.getProgressInfoItem=function(t,e,n){return l({size:e,loaded:t,percent:t/e*100},null==n?{}:{fromCache:n})},t}();e.default=b},function(t,e,n){t.exports=!n(7)&&!n(16)((function(){return 7!=Object.defineProperty(n(44)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(14),o=n(17),i=n(93)(!1),a=n(50)("IE_PROTO");t.exports=function(t,e){var n,u=o(t),s=0,c=[];for(n in u)n!=a&&r(u,n)&&c.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~i(c,n)||c.push(n));return c}},function(t,e,n){var r=n(2).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(4),o=n(1),i=n(16);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i((function(){n(1)})),"Object",a)}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(9),o=n(22),i=n(5)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[i])?e:o(n)}},function(t,e,n){var r,o,i,a=n(12),u=n(112),s=n(67),c=n(44),f=n(2),l=f.process,p=f.setImmediate,h=f.clearImmediate,d=f.MessageChannel,g=f.Dispatch,v=0,y={},m="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},w=function(t){b.call(t.data)};p&&h||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++v]=function(){u("function"==typeof t?t:Function(t),e)},r(v),v},h=function(t){delete y[t]},"process"==n(25)(l)?r=function(t){l.nextTick(a(b,t,1))}:g&&g.now?r=function(t){g.now(a(b,t,1))}:d?(i=(o=new d).port2,o.port1.onmessage=w,r=a(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",w,!1)):r=m in c("script")?function(t){s.appendChild(c("script")).onreadystatechange=function(){s.removeChild(this),b.call(t)}}:function(t){setTimeout(a(b,t,1),0)}),t.exports={set:p,clear:h}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(9),o=n(6),i=n(58);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(2),o=n(1),i=n(8),a=n(7),u=n(5)("species");t.exports=function(t){var e="function"==typeof o[t]?o[t]:r[t];a&&e&&!e[u]&&i.f(e,u,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(10),o=n(11);function i(e){return t.exports=i="function"==typeof o&&"symbol"==typeof r?function(t){return typeof t}:function(t){return t&&"function"==typeof o&&t.constructor===o&&t!==o.prototype?"symbol":typeof t},i(e)}t.exports=i},function(t,e,n){"use strict";var r=n(2),o=n(14),i=n(7),a=n(4),u=n(56),s=n(30).KEY,c=n(16),f=n(51),l=n(29),p=n(35),h=n(5),d=n(59),g=n(60),v=n(121),y=n(62),m=n(9),b=n(6),w=n(27),x=n(17),_=n(45),S=n(32),E=n(34),C=n(122),P=n(53),k=n(61),I=n(8),O=n(24),U=P.f,F=I.f,R=C.f,A=r.Symbol,M=r.JSON,T=M&&M.stringify,j=h("_hidden"),L=h("toPrimitive"),D={}.propertyIsEnumerable,N=f("symbol-registry"),z=f("symbols"),H=f("op-symbols"),q=Object.prototype,B="function"==typeof A&&!!k.f,G=r.QObject,Q=!G||!G.prototype||!G.prototype.findChild,V=i&&c((function(){return 7!=E(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=U(q,e);r&&delete q[e],F(t,e,n),r&&t!==q&&F(q,e,r)}:F,W=function(t){var e=z[t]=E(A.prototype);return e._k=t,e},X=B&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},K=function(t,e,n){return t===q&&K(H,e,n),m(t),e=_(e,!0),m(n),o(z,e)?(n.enumerable?(o(t,j)&&t[j][e]&&(t[j][e]=!1),n=E(n,{enumerable:S(0,!1)})):(o(t,j)||F(t,j,S(1,{})),t[j][e]=!0),V(t,e,n)):F(t,e,n)},J=function(t,e){m(t);for(var n,r=v(e=x(e)),o=0,i=r.length;i>o;)K(t,n=r[o++],e[n]);return t},Y=function(t){var e=D.call(this,t=_(t,!0));return!(this===q&&o(z,t)&&!o(H,t))&&(!(e||!o(this,t)||!o(z,t)||o(this,j)&&this[j][t])||e)},Z=function(t,e){if(t=x(t),e=_(e,!0),t!==q||!o(z,e)||o(H,e)){var n=U(t,e);return!n||!o(z,e)||o(t,j)&&t[j][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=R(x(t)),r=[],i=0;n.length>i;)o(z,e=n[i++])||e==j||e==s||r.push(e);return r},tt=function(t){for(var e,n=t===q,r=R(n?H:x(t)),i=[],a=0;r.length>a;)!o(z,e=r[a++])||n&&!o(q,e)||i.push(z[e]);return i};B||(u((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===q&&e.call(H,n),o(this,j)&&o(this[j],t)&&(this[j][t]=!1),V(this,t,S(1,n))};return i&&Q&&V(q,t,{configurable:!0,set:e}),W(t)}).prototype,"toString",(function(){return this._k})),P.f=Z,I.f=K,n(77).f=C.f=$,n(37).f=Y,k.f=tt,i&&!n(26)&&u(q,"propertyIsEnumerable",Y,!0),d.f=function(t){return W(h(t))}),a(a.G+a.W+a.F*!B,{Symbol:A});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)h(et[nt++]);for(var rt=O(h.store),ot=0;rt.length>ot;)g(rt[ot++]);a(a.S+a.F*!B,"Symbol",{for:function(t){return o(N,t+="")?N[t]:N[t]=A(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in N)if(N[e]===t)return e},useSetter:function(){Q=!0},useSimple:function(){Q=!1}}),a(a.S+a.F*!B,"Object",{create:function(t,e){return void 0===e?E(t):J(E(t),e)},defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:tt});var it=c((function(){k.f(1)}));a(a.S+a.F*it,"Object",{getOwnPropertySymbols:function(t){return k.f(w(t))}}),M&&a(a.S+a.F*(!B||c((function(){var t=A();return"[null]"!=T([t])||"{}"!=T({a:t})||"{}"!=T(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(b(e)||void 0!==t)&&!X(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,T.apply(M,r)}}),A.prototype[L]||n(13)(A.prototype,L,A.prototype.valueOf),l(A,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,e,n){var r=n(66),o=n(52).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){"use strict";var r=n(7),o=n(24),i=n(61),a=n(37),u=n(27),s=n(46),c=Object.assign;t.exports=!c||n(16)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r}))?function(t,e){for(var n=u(t),c=arguments.length,f=1,l=i.f,p=a.f;c>f;)for(var h,d=s(arguments[f++]),g=l?o(d).concat(l(d)):o(d),v=g.length,y=0;v>y;)h=g[y++],r&&!p.call(d,h)||(n[h]=d[h]);return n}:c},function(t,e,n){"use strict";n(0)(e,"__esModule",{value:!0}),e.urlSafeBase64Encode=function(t){return(t=function(t){var e,n,r,o,i,a,u,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,l=0,p="",h=[];if(!t)return t;t=function(t){if(null==t)return"";var e,n,r=t+"",o="",i=0;e=n=0,i=r.length;for(var a=0;a<i;a++){var u=r.charCodeAt(a),s=null;if(u<128)n++;else if(u>127&&u<2048)s=String.fromCharCode(u>>6|192,63&u|128);else if((63488&u^55296)>0)s=String.fromCharCode(u>>12|224,u>>6&63|128,63&u|128);else{if((64512&u^55296)>0)throw new RangeError("Unmatched trail surrogate at "+a);var c=r.charCodeAt(++a);if((64512&c^56320)>0)throw new RangeError("Unmatched lead surrogate at "+(a-1));u=((1023&u)<<10)+(1023&c)+65536,s=String.fromCharCode(u>>18|240,u>>12&63|128,u>>6&63|128,63&u|128)}null!==s&&(n>e&&(o+=r.slice(e,n)),o+=s,e=n=a+1)}n>e&&(o+=r.slice(e,i));return o}(t+"");do{e=t.charCodeAt(f++),n=t.charCodeAt(f++),r=t.charCodeAt(f++),o=(s=e<<16|n<<8|r)>>18&63,i=s>>12&63,a=s>>6&63,u=63&s,h[l++]=c.charAt(o)+c.charAt(i)+c.charAt(a)+c.charAt(u)}while(f<t.length);switch(p=h.join(""),t.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p}(t)).replace(/\//g,"_").replace(/\+/g,"-")},e.urlSafeBase64Decode=function(t){return function(t){var e,n,r,o,i,a,u,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,l=0,p=[];if(!t)return t;t+="";do{o=c.indexOf(t.charAt(f++)),i=c.indexOf(t.charAt(f++)),a=c.indexOf(t.charAt(f++)),u=c.indexOf(t.charAt(f++)),e=(s=o<<18|i<<12|a<<6|u)>>16&255,n=s>>8&255,r=255&s,p[l++]=64===a?String.fromCharCode(e):64===u?String.fromCharCode(e,n):String.fromCharCode(e,n,r)}while(f<t.length);return function(t){var e=[],n=0,r=0,o=0;t+="";for(;n<t.length;){r=255&t.charCodeAt(n),o=0,r<=191?(r&=127,o=1):r<=223?(r&=31,o=2):r<=239?(r&=15,o=3):(r&=7,o=4);for(var i=1;i<o;++i)r=r<<6|63&t.charCodeAt(i+n);4===o?(r-=65536,e.push(String.fromCharCode(55296|r>>10&1023)),e.push(String.fromCharCode(56320|1023&r))):e.push(String.fromCharCode(r)),n+=o}return e.join("")}(p.join(""))}(t=t.replace(/_/g,"/").replace(/-/g,"+"))}},function(t,e,n){"use strict";var r=n(3);n(0)(e,"__esModule",{value:!0}),e.getChunks=function(t,e){var n=e*v;if(n>t.size)n=t.size;else for(;t.size>1e4*n;)n*=2;for(var r=[],o=Math.ceil(t.size/n),i=0;i<o;i++){var a=t.slice(n*i,i===o-1?t.size:n*(i+1));r.push(a)}return r},e.isMetaDataValid=function(t){return(0,i.default)(t).every((function(t){return 0===t.indexOf("x-qn-meta-")}))},e.isCustomVarsValid=function(t){return(0,i.default)(t).every((function(t){return 0===t.indexOf("x:")}))},e.sum=function(t){return t.reduce((function(t,e){return t+e}),0)},e.setLocalFileInfo=function(t,e,n){try{localStorage.setItem(t,(0,o.default)(e))}catch(e){n.warn(new l.QiniuError(l.QiniuErrorName.WriteCacheFailed,"setLocalFileInfo failed: "+t))}},e.createLocalKey=function(t,e,n){return"qiniu_js_sdk_upload_file_name_"+t+(null==e?"_":"_key_"+e+"_")+"size_"+n},e.removeLocalFileInfo=y,e.getLocalFileInfo=function(t,e){var n=null;try{n=localStorage.getItem(t)}catch(n){e.warn(new l.QiniuError(l.QiniuErrorName.ReadCacheFailed,"getLocalFileInfo failed. key: "+t))}if(null==n)return null;var r=null;try{r=JSON.parse(n)}catch(n){y(t,e),e.warn(new l.QiniuError(l.QiniuErrorName.InvalidCacheData,"getLocalFileInfo failed to parse. key: "+t))}return r},e.getAuthHeaders=m,e.getHeadersForChunkUpload=function(t){var e=m(t);return h({"content-type":"application/octet-stream"},e)},e.getHeadersForMkFile=function(t){var e=m(t);return h({"content-type":"application/json"},e)},e.createXHR=b,e.computeMd5=function(t){return d(this,void 0,void 0,(function(){var e,n;return g(this,(function(r){switch(r.label){case 0:return[4,w(t)];case 1:return e=r.sent(),(n=new f.default.ArrayBuffer).append(e),[2,n.end()]}}))}))},e.readAsArrayBuffer=w,e.request=function(t,e){return new s.default((function(n,r){var o=b();if(o.open(e.method,t),e.onCreate&&e.onCreate(o),e.headers){var a=e.headers;(0,i.default)(a).forEach((function(t){o.setRequestHeader(t,a[t])}))}o.upload.addEventListener("progress",(function(t){t.lengthComputable&&e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})})),o.onreadystatechange=function(){var t=o.responseText;if(4===o.readyState){var e=o.getResponseHeader("x-reqId")||"";if(0!==o.status)if(200===o.status)try{n({data:JSON.parse(t),reqId:e})}catch(t){r(t)}else{var i="xhr request failed, code: "+o.status;t&&(i+=" response: "+t);var a=void 0;try{a=JSON.parse(t)}catch(t){}r(new l.QiniuRequestError(o.status,e,i,a))}else r(new l.QiniuNetworkError("network error.",e))}},o.send(e.body)}))},e.getPortFromUrl=function(t){if(t&&t.match){var e=t.match(/(^https?)/);if(!e)return"";var n=e[1];return(e=t.match(/^https?:\/\/([^:^/]*):(\d*)/))?e[2]:"http"===n?"80":"443"}return""},e.getDomainFromUrl=function(t){if(t&&t.match){var e=t.match(/^https?:\/\/([^:^/]*)/);return e?e[1]:""}return""},e.getPutPolicy=function(t){if(!t)throw new l.QiniuError(l.QiniuErrorName.InvalidToken,"invalid token.");var e=t.split(":");if(1===e.length)throw new l.QiniuError(l.QiniuErrorName.InvalidToken,"invalid token segments.");var n=e.length>3?e[1]:e[0];if(!n)throw new l.QiniuError(l.QiniuErrorName.InvalidToken,"missing assess key field.");var r=null;try{r=JSON.parse((0,p.urlSafeBase64Decode)(e[e.length-1]))}catch(t){throw new l.QiniuError(l.QiniuErrorName.InvalidToken,"token parse failed.")}if(null==r)throw new l.QiniuError(l.QiniuErrorName.InvalidToken,"putPolicy is null.");if(null==r.scope)throw new l.QiniuError(l.QiniuErrorName.InvalidToken,"scope field is null.");var o=r.scope.split(":")[0];if(!o)throw new l.QiniuError(l.QiniuErrorName.InvalidToken,"resolve bucketName failed.");return{assessKey:n,bucketName:o,scope:r.scope}},e.createObjectURL=function(t){return(window.URL||window.webkitURL||window.mozURL).createObjectURL(t)},e.getTransform=function(t,e){var n=t.width,r=t.height;switch(e){case 1:return{width:n,height:r,matrix:[1,0,0,1,0,0]};case 2:return{width:n,height:r,matrix:[-1,0,0,1,n,0]};case 3:return{width:n,height:r,matrix:[-1,0,0,-1,n,r]};case 4:return{width:n,height:r,matrix:[1,0,0,-1,0,r]};case 5:return{width:r,height:n,matrix:[0,1,1,0,0,0]};case 6:return{width:r,height:n,matrix:[0,1,-1,0,r,0]};case 7:return{width:r,height:n,matrix:[0,-1,-1,0,r,n]};case 8:return{width:r,height:n,matrix:[0,-1,1,0,0,n]};default:throw new l.QiniuError(l.QiniuErrorName.InvalidTransformOrientation,"orientation "+e+" is unavailable")}},e.MB=void 0;var o=r(n(81)),i=r(n(20)),a=r(n(10)),u=r(n(11)),s=r(n(15)),c=r(n(19)),f=r(n(128)),l=n(23),p=n(79),h=function(){return(h=c.default||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},d=function(t,e,n,r){return new(n||(n=s.default))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},g=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof u.default&&(i[a.default]=function(){return this}),i;function c(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},v=Math.pow(1024,2);function y(t,e){try{localStorage.removeItem(t)}catch(n){e.warn(new l.QiniuError(l.QiniuErrorName.RemoveCacheFailed,"removeLocalFileInfo failed. key: "+t))}}function m(t){return{Authorization:"UpToken "+t}}function b(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new window.ActiveXObject("Microsoft.XMLHTTP");throw new l.QiniuError(l.QiniuErrorName.NotAvailableXMLHttpRequest,"the current environment does not support.")}function w(t){return new s.default((function(e,n){var r=new FileReader;r.onload=function(t){if(t.target){var r=t.target.result;e(r)}else n(new l.QiniuError(l.QiniuErrorName.InvalidProgressEventTarget,"progress event target is undefined"))},r.onerror=function(){n(new l.QiniuError(l.QiniuErrorName.FileReaderReadFailed,"fileReader read failed"))},r.readAsArrayBuffer(t)}))}e.MB=v},function(t,e,n){t.exports=n(127)},function(t,e,n){"use strict";var r=n(20),o=n(0);o(e,"__esModule",{value:!0});var i=n(135);r(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&o(e,t,{enumerable:!0,get:function(){return i[t]}})}))},function(t,e,n){"use strict";var r=n(3),o=n(42),i=n(20),a=n(0);a(e,"__esModule",{value:!0});var u={createUploadManager:!0};e.createUploadManager=d,e.default=function(t,e,n,r,o){var i=new f.default(n,null==o?void 0:o.disableStatisticsReport,null==o?void 0:o.debugLogLevel,t.name),a={file:t,key:e,token:n,putExtra:r,config:(0,l.normalizeUploadConfig)(o,i)},u=new p.HostPool(a.config.uphost);return new l.Observable((function(t){var e=d(a,{onData:function(e){return t.next(e)},onError:function(e){return t.error(e)},onComplete:function(e){return t.complete(e)}},u,i);return e.putFile(),e.stop.bind(e)}))};var s=o(n(147));i(s).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(u,t)||a(e,t,{enumerable:!0,get:function(){return s[t]}}))}));var c=r(n(151)),f=r(n(152)),l=n(18),p=n(154),h=n(64);function d(t,e,n,r){return t.config&&t.config.forceDirect?(r.info("ues forceDirect mode."),new c.default(t,e,n,r)):t.file.size>4*l.MB?(r.info("file size over 4M, use Resume."),new s.default(t,e,n,r)):(r.info("file size less or equal than 4M, use Direct."),new c.default(t,e,n,r))}i(h).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(u,t)||a(e,t,{enumerable:!0,get:function(){return h[t]}}))}))},function(t,e,n){"use strict";var r=n(2),o=n(4),i=n(30),a=n(16),u=n(13),s=n(41),c=n(21),f=n(40),l=n(6),p=n(29),h=n(8).f,d=n(63)(0),g=n(7);t.exports=function(t,e,n,v,y,m){var b=r[t],w=b,x=y?"set":"add",_=w&&w.prototype,S={};return g&&"function"==typeof w&&(m||_.forEach&&!a((function(){(new w).entries().next()})))?(w=e((function(e,n){f(e,w,t,"_c"),e._c=new b,null!=n&&c(n,y,e[x],e)})),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(t){var e="add"==t||"set"==t;!(t in _)||m&&"clear"==t||u(w.prototype,t,(function(n,r){if(f(this,w,t),!e&&m&&!l(n))return"get"==t&&void 0;var o=this._c[t](0===n?0:n,r);return e?this:o}))})),m||h(w.prototype,"size",{get:function(){return this._c.size}})):(w=v.getConstructor(e,t,y,x),s(w.prototype,n),i.NEED=!0),p(w,t),S[t]=w,o(o.G+o.W+o.F,S),m||v.setStrong(w,t,y),w}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var r=n(4),o=n(22),i=n(12),a=n(21);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,u,s=arguments[1];return o(this),(e=void 0!==s)&&o(s),null==t?new this:(n=[],e?(r=0,u=i(s,arguments[2],2),a(t,!1,(function(t){n.push(u(t,r++))}))):a(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";var r=n(3),o=n(0);o(e,"__esModule",{value:!0}),o(e,"QiniuErrorName",{enumerable:!0,get:function(){return i.QiniuErrorName}}),o(e,"QiniuError",{enumerable:!0,get:function(){return i.QiniuError}}),o(e,"QiniuRequestError",{enumerable:!0,get:function(){return i.QiniuRequestError}}),o(e,"QiniuNetworkError",{enumerable:!0,get:function(){return i.QiniuNetworkError}}),o(e,"imageMogr2",{enumerable:!0,get:function(){return a.imageMogr2}}),o(e,"watermark",{enumerable:!0,get:function(){return a.watermark}}),o(e,"imageInfo",{enumerable:!0,get:function(){return a.imageInfo}}),o(e,"exif",{enumerable:!0,get:function(){return a.exif}}),o(e,"pipeline",{enumerable:!0,get:function(){return a.pipeline}}),o(e,"deleteUploadedChunks",{enumerable:!0,get:function(){return u.deleteUploadedChunks}}),o(e,"getUploadUrl",{enumerable:!0,get:function(){return u.getUploadUrl}}),o(e,"upload",{enumerable:!0,get:function(){return s.default}}),o(e,"region",{enumerable:!0,get:function(){return c.region}}),o(e,"compressImage",{enumerable:!0,get:function(){return f.compressImage}}),o(e,"urlSafeBase64Encode",{enumerable:!0,get:function(){return f.urlSafeBase64Encode}}),o(e,"urlSafeBase64Decode",{enumerable:!0,get:function(){return f.urlSafeBase64Decode}}),o(e,"getHeadersForMkFile",{enumerable:!0,get:function(){return f.getHeadersForMkFile}}),o(e,"getHeadersForChunkUpload",{enumerable:!0,get:function(){return f.getHeadersForChunkUpload}});var i=n(23),a=n(98),u=n(43),s=r(n(83)),c=n(82),f=n(18)},function(t,e,n){n(89);var r=n(1).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(4);r(r.S+r.F*!n(7),"Object",{defineProperty:n(8).f})},function(t,e,n){n(91);var r=n(1).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(4);r(r.S,"Object",{create:n(34)})},function(t,e,n){var r=n(8),o=n(9),i=n(24);t.exports=n(7)?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),u=a.length,s=0;u>s;)r.f(t,n=a[s++],e[n]);return t}},function(t,e,n){var r=n(17),o=n(48),i=n(94);t.exports=function(t){return function(e,n,a){var u,s=r(e),c=o(s.length),f=i(a,c);if(t&&n!=n){for(;c>f;)if((u=s[f++])!=u)return!0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(49),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){n(96),t.exports=n(1).Object.setPrototypeOf},function(t,e,n){var r=n(4);r(r.S,"Object",{setPrototypeOf:n(97).set})},function(t,e,n){var r=n(6),o=n(9),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(12)(Function.call,n(53).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){"use strict";n(0)(e,"__esModule",{value:!0}),e.imageView2=i,e.imageMogr2=a,e.watermark=u,e.imageInfo=function(t,e){var n=o(t,e)+"?imageInfo";return(0,r.request)(n,{method:"GET"})},e.exif=function(t,e){var n=o(t,e)+"?exif";return(0,r.request)(n,{method:"GET"})},e.pipeline=function(t,e,n){var r,s="[object Array]"===Object.prototype.toString.call(t),c=!1,f="";if(s){for(var l=0,p=t.length;l<p;l++){if(!(r=t[l]).fop)throw"fop can't be empty in pipeline";switch(r.fop){case"watermark":f+=u(r)+"|";break;case"imageView2":f+=i(r)+"|";break;case"imageMogr2":f+=a(r)+"|";break;default:c=!0}if(c)throw"fop is wrong in pipeline"}if(e&&n){var h=(f=o(e,n)+"?"+f).length;"|"===f.slice(h-1)&&(f=f.slice(0,h-1))}return f}throw"pipeline's first param should be array"};var r=n(18);function o(t,e){return t=encodeURIComponent(t),"/"!==e.slice(e.length-1)&&(e+="/"),e+t}function i(t,e,n){if(!/^\d$/.test(String(t.mode)))throw"mode should be number in imageView2";var r=t.mode,i=t.w,a=t.h,u=t.q,s=t.format;if(!i&&!a)throw"param w and h is empty in imageView2";var c="imageView2/"+encodeURIComponent(r);return c+=i?"/w/"+encodeURIComponent(i):"",c+=a?"/h/"+encodeURIComponent(a):"",c+=u?"/q/"+encodeURIComponent(u):"",c+=s?"/format/"+encodeURIComponent(s):"",e&&n&&(c=o(e,n)+"?"+c),c}function a(t,e,n){var r=t["auto-orient"],i=t.thumbnail,a=t.strip,u=t.gravity,s=t.crop,c=t.quality,f=t.rotate,l=t.format,p=t.blur,h="imageMogr2";return h+=r?"/auto-orient":"",h+=i?"/thumbnail/"+encodeURIComponent(i):"",h+=a?"/strip":"",h+=u?"/gravity/"+encodeURIComponent(u):"",h+=c?"/quality/"+encodeURIComponent(c):"",h+=s?"/crop/"+encodeURIComponent(s):"",h+=f?"/rotate/"+encodeURIComponent(f):"",h+=l?"/format/"+encodeURIComponent(l):"",h+=p?"/blur/"+encodeURIComponent(p):"",e&&n&&(h=o(e,n)+"?"+h),h}function u(t,e,n){var i=t.mode;if(!i)throw"mode can't be empty in watermark";var a="watermark/"+i;if(1!==i&&2!==i)throw"mode is wrong";if(1===i){var u=t.image;if(!u)throw"image can't be empty in watermark";a+=u?"/image/"+(0,r.urlSafeBase64Encode)(u):""}if(2===i){var s=t.text,c=t.font,f=t.fontsize,l=t.fill;if(!s)throw"text can't be empty in watermark";a+=s?"/text/"+(0,r.urlSafeBase64Encode)(s):"",a+=c?"/font/"+(0,r.urlSafeBase64Encode)(c):"",a+=f?"/fontsize/"+f:"",a+=l?"/fill/"+(0,r.urlSafeBase64Encode)(l):""}var p=t.dissolve,h=t.gravity,d=t.dx,g=t.dy;return a+=p?"/dissolve/"+encodeURIComponent(p):"",a+=h?"/gravity/"+encodeURIComponent(h):"",a+=d?"/dx/"+encodeURIComponent(d):"",a+=g?"/dy/"+encodeURIComponent(g):"",e&&n&&(a=o(e,n)+"?"+a),a}},function(t,e,n){n(100),t.exports=n(1).Object.keys},function(t,e,n){var r=n(27),o=n(24);n(68)("keys",(function(){return function(t){return o(r(t))}}))},function(t,e,n){"use strict";var r=n(3);n(0)(e,"__esModule",{value:!0}),e.Pool=void 0;var o=r(n(15)),i=function(){function t(t,e){this.runTask=t,this.limit=e,this.queue=[],this.processing=[]}return t.prototype.enqueue=function(t){var e=this;return new o.default((function(n,r){e.queue.push({task:t,resolve:n,reject:r}),e.check()}))},t.prototype.run=function(t){var e=this;this.queue=this.queue.filter((function(e){return e!==t})),this.processing.push(t),this.runTask(t.task).then((function(){e.processing=e.processing.filter((function(e){return e!==t})),t.resolve(),e.check()}),(function(e){return t.reject(e)}))},t.prototype.check=function(){var t=this,e=this.processing.length,n=this.limit-e;this.queue.slice(0,n).forEach((function(e){t.run(e)}))},t}();e.Pool=i},function(t,e,n){n(38),n(54),n(39),n(108),n(116),n(117),t.exports=n(1).Promise},function(t,e,n){var r=n(49),o=n(47);t.exports=function(t){return function(e,n){var i,a,u=String(o(e)),s=r(n),c=u.length;return s<0||s>=c?t?"":void 0:(i=u.charCodeAt(s))<55296||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):i:t?u.slice(s,s+2):a-56320+(i-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(34),o=n(32),i=n(29),a={};n(13)(a,n(5)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(14),o=n(27),i=n(50)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){"use strict";var r=n(107),o=n(69),i=n(28),a=n(17);t.exports=n(55)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";var r,o,i,a,u=n(26),s=n(2),c=n(12),f=n(57),l=n(4),p=n(6),h=n(22),d=n(40),g=n(21),v=n(70),y=n(71).set,m=n(113)(),b=n(58),w=n(72),x=n(114),_=n(73),S="Promise",E=s.TypeError,C=s.process,P=C&&C.versions,k=P&&P.v8||"",I=s.Promise,O="process"==f(C),U=function(){},F=o=b.f,R=!!function(){try{var t=I.resolve(1),e=(t.constructor={})[n(5)("species")]=function(t){t(U,U)};return(O||"function"==typeof PromiseRejectionEvent)&&t.then(U)instanceof e&&0!==k.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),A=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;m((function(){for(var r=t._v,o=1==t._s,i=0,a=function(e){var n,i,a,u=o?e.ok:e.fail,s=e.resolve,c=e.reject,f=e.domain;try{u?(o||(2==t._h&&L(t),t._h=1),!0===u?n=r:(f&&f.enter(),n=u(r),f&&(f.exit(),a=!0)),n===e.promise?c(E("Promise-chain cycle")):(i=A(n))?i.call(n,s,c):s(n)):c(r)}catch(t){f&&!a&&f.exit(),c(t)}};n.length>i;)a(n[i++]);t._c=[],t._n=!1,e&&!t._h&&T(t)}))}},T=function(t){y.call(s,(function(){var e,n,r,o=t._v,i=j(t);if(i&&(e=w((function(){O?C.emit("unhandledRejection",o,t):(n=s.onunhandledrejection)?n({promise:t,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)})),t._h=O||j(t)?2:1),t._a=void 0,i&&e.e)throw e.v}))},j=function(t){return 1!==t._h&&0===(t._a||t._c).length},L=function(t){y.call(s,(function(){var e;O?C.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})}))},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},N=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw E("Promise can't be resolved itself");(e=A(t))?m((function(){var r={_w:n,_d:!1};try{e.call(t,c(N,r,1),c(D,r,1))}catch(t){D.call(r,t)}})):(n._v=t,n._s=1,M(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};R||(I=function(t){d(this,I,S,"_h"),h(t),r.call(this);try{t(c(N,this,1),c(D,this,1))}catch(t){D.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(41)(I.prototype,{then:function(t,e){var n=F(v(this,I));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=O?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=c(N,t,1),this.reject=c(D,t,1)},b.f=F=function(t){return t===I||t===a?new i(t):o(t)}),l(l.G+l.W+l.F*!R,{Promise:I}),n(29)(I,S),n(74)(S),a=n(1).Promise,l(l.S+l.F*!R,S,{reject:function(t){var e=F(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(u||!R),S,{resolve:function(t){return _(u&&this===a?I:this,t)}}),l(l.S+l.F*!(R&&n(115)((function(t){I.all(t).catch(U)}))),S,{all:function(t){var e=this,n=F(e),r=n.resolve,o=n.reject,i=w((function(){var n=[],i=0,a=1;g(t,!1,(function(t){var u=i++,s=!1;n.push(void 0),a++,e.resolve(t).then((function(t){s||(s=!0,n[u]=t,--a||r(n))}),o)})),--a||r(n)}));return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=F(e),r=n.reject,o=w((function(){g(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(t,e,n){var r=n(9);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(28),o=n(5)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(57),o=n(5)("iterator"),i=n(28);t.exports=n(1).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(2),o=n(71).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,u=r.Promise,s="process"==n(25)(a);t.exports=function(){var t,e,n,c=function(){var r,o;for(s&&(r=a.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(s)n=function(){a.nextTick(c)};else if(!i||r.navigator&&r.navigator.standalone)if(u&&u.resolve){var f=u.resolve(void 0);n=function(){f.then(c)}}else n=function(){o.call(r,c)};else{var l=!0,p=document.createTextNode("");new i(c).observe(p,{characterData:!0}),n=function(){p.data=l=!l}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){var r=n(2).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var r=n(5)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},t(i)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(4),o=n(1),i=n(2),a=n(70),u=n(73);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,o.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return u(e,t()).then((function(){return n}))}:t,n?function(n){return u(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){"use strict";var r=n(4),o=n(58),i=n(72);r(r.S,"Promise",{try:function(t){var e=o.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";var r=n(3);n(0)(e,"__esModule",{value:!0}),e.Observable=e.Subscriber=void 0;var o,i=r(n(75)),a=r(n(19)),u=r(n(33)),s=r(n(36)),c=(o=function(t,e){return(o=s.default||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?(0,u.default)(e):(n.prototype=e.prototype,new n)}),f=function(){return(f=a.default||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},l=function(t){function e(e,n,r){var o=t.call(this)||this;return o.isStopped=!1,e&&"object"===(0,i.default)(e)?o.destination=e:o.destination=f(f(f({},e&&{next:e}),n&&{error:n}),r&&{complete:r}),o}return c(e,t),e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype.next=function(t){!this.isStopped&&this.destination.next&&this.destination.next(t)},e.prototype.error=function(t){!this.isStopped&&this.destination.error&&(this.isStopped=!0,this.destination.error(t))},e.prototype.complete=function(t){!this.isStopped&&this.destination.complete&&(this.isStopped=!0,this.destination.complete(t))},e}(function(){function t(){this.closed=!1}return t.prototype.unsubscribe=function(){this.closed||(this.closed=!0,this._unsubscribe&&this._unsubscribe())},t.prototype.add=function(t){this._unsubscribe=t},t}());e.Subscriber=l;var p=function(){function t(t){this._subscribe=t}return t.prototype.subscribe=function(t,e,n){var r=new l(t,e,n);return r.add(this._subscribe(r)),r},t}();e.Observable=p},function(t,e,n){n(54),n(39),t.exports=n(59).f("iterator")},function(t,e,n){n(76),n(38),n(123),n(124),t.exports=n(1).Symbol},function(t,e,n){var r=n(24),o=n(61),i=n(37);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var a,u=n(t),s=i.f,c=0;u.length>c;)s.call(t,a=u[c++])&&e.push(a);return e}},function(t,e,n){var r=n(17),o=n(77).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(r(t))}},function(t,e,n){n(60)("asyncIterator")},function(t,e,n){n(60)("observable")},function(t,e,n){n(126),t.exports=n(1).Object.assign},function(t,e,n){var r=n(4);r(r.S+r.F,"Object",{assign:n(78)})},function(t,e,n){var r=n(1),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e,n){t.exports=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],r=t[1],o=t[2],i=t[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+e[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+e[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+e[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+e[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+e[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+e[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+e[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+e[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+e[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+e[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+e[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+e[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+e[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+e[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+e[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+e[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+e[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+e[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+e[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+e[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+e[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+e[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+e[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+e[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+e[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+e[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+e[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+e[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+e[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+e[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+e[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+e[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+e[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+e[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+e[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+e[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+e[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+e[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+e[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+e[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+e[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+e[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+e[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+e[9]-343485551|0)<<21|r>>>11)+o|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=o+t[2]|0,t[3]=i+t[3]|0}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function o(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function i(t){var e,o,i,a,u,s,c=t.length,f=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(f,r(t.substring(e-64,e)));for(o=(t=t.substring(e-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<o;e+=1)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n(f,i),e=0;e<16;e+=1)i[e]=0;return a=(a=8*c).toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(a[2],16),s=parseInt(a[1],16)||0,i[14]=u,i[15]=s,n(f,i),f}function a(t){var e,r,i,a,u,s,c=t.length,f=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(f,o(t.subarray(e-64,e)));for(r=(t=e-64<c?t.subarray(e-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)i[e>>2]|=t[e]<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n(f,i),e=0;e<16;e+=1)i[e]=0;return a=(a=8*c).toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(a[2],16),s=parseInt(a[1],16)||0,i[14]=u,i[15]=s,n(f,i),f}function u(t){var n,r="";for(n=0;n<4;n+=1)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r}function s(t){var e;for(e=0;e<t.length;e+=1)t[e]=u(t[e]);return t.join("")}function c(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function f(t,e){var n,r=t.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=t.charCodeAt(n);return e?i:o}function l(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function p(t,e,n){var r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t)),r.set(new Uint8Array(e),t.byteLength),n?r:r.buffer}function h(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function d(){this.reset()}return s(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,r){var o,i,a,u,s=this.byteLength,c=e(n,s),f=s;return r!==t&&(f=e(r,s)),c>f?new ArrayBuffer(0):(o=f-c,i=new ArrayBuffer(o),a=new Uint8Array(i),u=new Uint8Array(this,c,o),a.set(u),i)}}(),d.prototype.append=function(t){return this.appendBinary(c(t)),this},d.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,o=this._buff.length;for(e=64;e<=o;e+=64)n(this._hash,r(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},d.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(i,o),n=s(this._hash),t&&(n=h(n)),this.reset(),n},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},d.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(t,e){var r,o,i,a=e;if(t[a>>2]|=128<<(a%4<<3),a>55)for(n(this._hash,t),a=0;a<16;a+=1)t[a]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),i=parseInt(r[1],16)||0,t[14]=o,t[15]=i,n(this._hash,t)},d.hash=function(t,e){return d.hashBinary(c(t),e)},d.hashBinary=function(t,e){var n=s(i(t));return e?h(n):n},d.ArrayBuffer=function(){this.reset()},d.ArrayBuffer.prototype.append=function(t){var e,r=p(this._buff.buffer,t,!0),i=r.length;for(this._length+=t.byteLength,e=64;e<=i;e+=64)n(this._hash,o(r.subarray(e-64,e)));return this._buff=e-64<i?new Uint8Array(r.buffer.slice(e-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r[e]<<(e%4<<3);return this._finish(i,o),n=s(this._hash),t&&(n=h(n)),this.reset(),n},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var t=d.prototype.getState.call(this);return t.buff=l(t.buff),t},d.ArrayBuffer.prototype.setState=function(t){return t.buff=f(t.buff,!0),d.prototype.setState.call(this,t)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(t,e){var n=s(a(new Uint8Array(t)));return e?h(n):n},d}()},function(t,e,n){"use strict";var r=n(3);n(0)(e,"__esModule",{value:!0}),e.normalizeUploadConfig=function(t,e){var n=l({},t),r=n.upprotocol,i=n.uphost,a=p(n,["upprotocol","uphost"]),u=l({uphost:[],retryCount:3,checkByMD5:!1,forceDirect:!1,useCdnDomain:!0,concurrentRequestLimit:3,chunkSize:f.DEFAULT_CHUNK_SIZE,upprotocol:"https",debugLogLevel:"OFF",disableStatisticsReport:!1},a);r&&(u.upprotocol=r.replace(/:$/,""));var s=[];e&&null!=(null==t?void 0:t.uphost)&&null!=(null==t?void 0:t.region)&&e.warn("do not use both the uphost and region config.");if(i)(0,o.default)(i)?s.push.apply(s,d(i)):s.push(i);else if(null==u?void 0:u.region){var h=c.regionUphostMap[null==u?void 0:u.region];u.useCdnDomain?s.push.apply(s,d(h.cdnUphost)):s.push.apply(s,d(h.srcUphost))}return l(l({},u),{uphost:s.filter(Boolean)})};var o=r(n(130)),i=r(n(10)),a=r(n(11)),u=r(n(133)),s=r(n(19)),c=n(82),f=n(83),l=function(){return(l=s.default||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},p=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof u.default){var o=0;for(r=(0,u.default)(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},h=function(t,e){var n="function"==typeof a.default&&t[i.default];if(!n)return t;var r,o,u=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=u.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=u.return)&&n.call(u)}finally{if(o)throw o.error}}return s},d=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}},function(t,e,n){t.exports=n(131)},function(t,e,n){n(132),t.exports=n(1).Array.isArray},function(t,e,n){var r=n(4);r(r.S,"Array",{isArray:n(62)})},function(t,e,n){t.exports=n(134)},function(t,e,n){n(76),t.exports=n(1).Object.getOwnPropertySymbols},function(t,e,n){"use strict";var r;n(0)(e,"__esModule",{value:!0}),e.regionUphostMap=e.region=void 0;var o={z0:"z0",z1:"z1",z2:"z2",na0:"na0",as0:"as0",cnEast2:"cn-east-2"};e.region=o;var i=((r={})[o.z0]={srcUphost:["up.qiniup.com"],cdnUphost:["upload.qiniup.com"]},r[o.z1]={srcUphost:["up-z1.qiniup.com"],cdnUphost:["upload-z1.qiniup.com"]},r[o.z2]={srcUphost:["up-z2.qiniup.com"],cdnUphost:["upload-z2.qiniup.com"]},r[o.na0]={srcUphost:["up-na0.qiniup.com"],cdnUphost:["upload-na0.qiniup.com"]},r[o.as0]={srcUphost:["up-as0.qiniup.com"],cdnUphost:["upload-as0.qiniup.com"]},r[o.cnEast2]={srcUphost:["up-cn-east-2.qiniup.com"],cdnUphost:["upload-cn-east-2.qiniup.com"]},r);e.regionUphostMap=i},function(t,e,n){t.exports=n(137)},function(t,e,n){n(138);var r=n(1).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,n){var r=n(17),o=n(53).f;n(68)("getOwnPropertyDescriptor",(function(){return function(t,e){return o(r(t),e)}}))},function(t,e,n){t.exports=n(140)},function(t,e,n){n(38),n(39),n(141),n(145),n(146),t.exports=n(1).WeakMap},function(t,e,n){"use strict";var r,o=n(2),i=n(63)(0),a=n(56),u=n(30),s=n(78),c=n(144),f=n(6),l=n(31),p=n(31),h=!o.ActiveXObject&&"ActiveXObject"in o,d="WeakMap",g=u.getWeak,v=Object.isExtensible,y=c.ufstore,m=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(t){if(f(t)){var e=g(t);return!0===e?y(l(this,d)).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(l(this,d),t,e)}},w=t.exports=n(84)(d,m,b,c,!0,!0);p&&h&&(s((r=c.getConstructor(m,d)).prototype,b),u.NEED=!0,i(["delete","has","get","set"],(function(t){var e=w.prototype,n=e[t];a(e,t,(function(e,o){if(f(e)&&!v(e)){this._f||(this._f=new r);var i=this._f[t](e,o);return"set"==t?this:i}return n.call(this,e,o)}))})))},function(t,e,n){var r=n(143);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(6),o=n(62),i=n(5)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(41),o=n(30).getWeak,i=n(9),a=n(6),u=n(40),s=n(21),c=n(63),f=n(14),l=n(31),p=c(5),h=c(6),d=0,g=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},y=function(t,e){return p(t.a,(function(t){return t[0]===e}))};v.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var n=y(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,i){var c=t((function(t,r){u(t,c,e,"_i"),t._t=e,t._i=d++,t._l=void 0,null!=r&&s(r,n,t[i],t)}));return r(c.prototype,{delete:function(t){if(!a(t))return!1;var n=o(t);return!0===n?g(l(this,e)).delete(t):n&&f(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=o(t);return!0===n?g(l(this,e)).has(t):n&&f(n,this._i)}}),c},def:function(t,e,n){var r=o(i(e),!0);return!0===r?g(t).set(e,n):r[t._i]=n,t},ufstore:g}},function(t,e,n){n(85)("WeakMap")},function(t,e,n){n(86)("WeakMap")},function(t,e,n){"use strict";var r=n(42),o=n(3);n(0)(e,"__esModule",{value:!0}),e.default=void 0;var i,a=o(n(81)),u=o(n(10)),s=o(n(11)),c=o(n(15)),f=o(n(19)),l=o(n(33)),p=o(n(36)),h=n(43),d=n(23),g=r(n(18)),v=o(n(64)),y=(i=function(t,e){return(i=p.default||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?(0,l.default)(e):(n.prototype=e.prototype,new n)}),m=function(){return(m=f.default||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},b=function(t,e,n,r){return new(n||(n=c.default))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},w=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof s.default&&(i[u.default]=function(){return this}),i;function c(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.run=function(){return b(this,void 0,void 0,(function(){var t,e,n,r,o,i=this;return w(this,(function(a){switch(a.label){case 0:if(this.logger.info("start run Resume."),!this.config.chunkSize||!function(t){return/^[1-9]\d*$/.test(String(t))}(this.config.chunkSize))throw new d.QiniuError(d.QiniuErrorName.InvalidChunkSize,"chunkSize must be a positive integer");if(this.config.chunkSize>1024)throw new d.QiniuError(d.QiniuErrorName.InvalidChunkSize,"chunkSize maximum value is 1024");return[4,this.initBeforeUploadChunks()];case 1:a.sent(),t=new g.Pool((function(t){return i.uploadChunk(t)}),this.config.concurrentRequestLimit),e=null,n=this.getLocalKey(),r=this.chunks.map((function(e,n){return t.enqueue({chunk:e,index:n})})),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,c.default.all(r)];case 3:return a.sent(),[4,this.mkFileReq()];case 4:return e=a.sent(),[3,6];case 5:throw(o=a.sent())instanceof d.QiniuRequestError&&(612===o.code||400===o.code)&&g.removeLocalFileInfo(n,this.logger),o;case 6:return g.removeLocalFileInfo(n,this.logger),[2,e]}}))}))},e.prototype.uploadChunk=function(t){return b(this,void 0,void 0,(function(){var e,n,r,o,i,a,u,s,c,f=this;return w(this,(function(l){switch(l.label){case 0:return e=t.index,n=t.chunk,r=this.cachedUploadedList[e],this.logger.info("upload part "+e+", cache:",r),o=this.config.checkByMD5,i=function(){f.usedCacheList[e]=!0,f.updateChunkProgress(n.size,e),f.uploadedList[e]=r,f.updateLocalCache()},r&&!o?(i(),[2]):[4,g.computeMd5(n)];case 1:return a=l.sent(),this.logger.info("computed part md5.",a),r&&a===r.md5?(i(),[2]):(this.usedCacheList[e]=!1,s={body:n,onProgress:u=function(t){f.updateChunkProgress(t.loaded,e)},onCreate:function(t){return f.addXhr(t)}},this.logger.info("part "+e+" start uploading."),[4,(0,h.uploadChunk)(this.token,this.key,t.index+1,this.getUploadInfo(),s)]);case 2:return c=l.sent(),this.logger.info("part "+e+" upload completed."),u({loaded:n.size,total:n.size}),this.uploadedList[e]={etag:c.data.etag,md5:c.data.md5,size:n.size},this.updateLocalCache(),[2]}}))}))},e.prototype.mkFileReq=function(){return b(this,void 0,void 0,(function(){var t,e,n=this;return w(this,(function(r){switch(r.label){case 0:return t=m(m(m({parts:this.uploadedList.map((function(t,e){return{etag:t.etag,partNumber:e+1}})),fname:this.putExtra.fname},this.putExtra.mimeType&&{mimeType:this.putExtra.mimeType}),this.putExtra.customVars&&{customVars:this.putExtra.customVars}),this.putExtra.metadata&&{metadata:this.putExtra.metadata}),this.logger.info("parts upload completed, make file.",t),[4,(0,h.uploadComplete)(this.token,this.key,this.getUploadInfo(),{onCreate:function(t){return n.addXhr(t)},body:(0,a.default)(t)})];case 1:return e=r.sent(),this.logger.info("finish Resume Progress."),this.updateMkFileProgress(1),[2,e]}}))}))},e.prototype.initBeforeUploadChunks=function(){return b(this,void 0,void 0,(function(){var t,e,n;return w(this,(function(r){switch(r.label){case 0:return this.uploadedList=[],this.usedCacheList=[],(t=g.getLocalFileInfo(this.getLocalKey(),this.logger))?[3,2]:(this.logger.info("init upload parts from api."),[4,(0,h.initUploadParts)(this.token,this.bucketName,this.key,this.uploadHost.getUrl())]);case 1:return e=r.sent(),this.logger.info("initd upload parts of id: "+e.data.uploadId+"."),this.uploadId=e.data.uploadId,this.cachedUploadedList=[],[3,3];case 2:n=["resume upload parts from local cache,","total "+t.data.length+" part,","id is "+t.id+"."],this.logger.info(n.join(" ")),this.cachedUploadedList=t.data,this.uploadId=t.id,r.label=3;case 3:return this.chunks=g.getChunks(this.file,this.config.chunkSize),this.loaded={mkFileProgress:0,chunks:this.chunks.map((function(t){return 0}))},this.notifyResumeProgress(),[2]}}))}))},e.prototype.getUploadInfo=function(){return{id:this.uploadId,url:this.uploadHost.getUrl()}},e.prototype.getLocalKey=function(){return g.createLocalKey(this.file.name,this.key,this.file.size)},e.prototype.updateLocalCache=function(){g.setLocalFileInfo(this.getLocalKey(),{id:this.uploadId,data:this.uploadedList},this.logger)},e.prototype.updateChunkProgress=function(t,e){this.loaded.chunks[e]=t,this.notifyResumeProgress()},e.prototype.updateMkFileProgress=function(t){this.loaded.mkFileProgress=t,this.notifyResumeProgress()},e.prototype.notifyResumeProgress=function(){var t=this;this.progress={total:this.getProgressInfoItem(g.sum(this.loaded.chunks)+this.loaded.mkFileProgress,this.file.size+1),chunks:this.chunks.map((function(e,n){var r=t.usedCacheList[n];return t.getProgressInfoItem(t.loaded.chunks[n],e.size,r)})),uploadInfo:{id:this.uploadId,url:this.uploadHost.getUrl()}},this.onData(this.progress)},e}(v.default);e.default=x},function(t,e,n){"use strict";e.decode=e.parse=n(149),e.encode=e.stringify=n(150)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var u=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var c=t.length;s>0&&c>s&&(c=s);for(var f=0;f<c;++f){var l,p,h,d,g=t[f].replace(u,"%20"),v=g.indexOf(n);v>=0?(l=g.substr(0,v),p=g.substr(v+1)):(l=g,p=""),h=decodeURIComponent(l),d=decodeURIComponent(p),r(a,h)?o(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,u){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?i(a(t),(function(a){var u=encodeURIComponent(r(a))+n;return o(t[a])?i(t[a],(function(t){return u+encodeURIComponent(r(t))})).join(e):u+encodeURIComponent(r(t[a]))})).join(e):u?encodeURIComponent(r(u))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";var r=n(3);n(0)(e,"__esModule",{value:!0}),e.default=void 0;var o,i=r(n(20)),a=r(n(10)),u=r(n(11)),s=r(n(15)),c=r(n(33)),f=r(n(36)),l=n(43),p=r(n(64)),h=(o=function(t,e){return(o=f.default||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?(0,c.default)(e):(n.prototype=e.prototype,new n)}),d=function(t,e,n,r){return new(n||(n=s.default))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},g=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof u.default&&(i[a.default]=function(){return this}),i;function c(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.run=function(){return d(this,void 0,void 0,(function(){var t,e,n,r=this;return g(this,(function(o){switch(o.label){case 0:return this.logger.info("start run Direct."),(t=new FormData).append("file",this.file),t.append("token",this.token),null!=this.key&&t.append("key",this.key),t.append("fname",this.putExtra.fname),this.putExtra.customVars&&(this.logger.info("init customVars."),e=this.putExtra.customVars,(0,i.default)(e).forEach((function(n){return t.append(n,e[n].toString())})),this.logger.info("customVars inited.")),this.logger.info("formData inited."),[4,(0,l.direct)(this.uploadHost.getUrl(),t,{onProgress:function(t){r.updateDirectProgress(t.loaded,t.total)},onCreate:function(t){return r.addXhr(t)}})];case 1:return n=o.sent(),this.logger.info("Direct progress finish."),this.finishDirectProgress(),[2,n]}}))}))},e.prototype.updateDirectProgress=function(t,e){this.progress={total:this.getProgressInfoItem(t,e+1)},this.onData(this.progress)},e.prototype.finishDirectProgress=function(){if(!this.progress)return this.logger.warn("progress is null."),this.progress={total:this.getProgressInfoItem(this.file.size,this.file.size)},void this.onData(this.progress);var t=this.progress.total;this.progress={total:this.getProgressInfoItem(t.loaded+1,t.size)},this.onData(this.progress)},e}(p.default);e.default=v},function(t,e,n){"use strict";var r=n(3);n(0)(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n(10)),i=r(n(11)),a=n(153),u=function(t,e){var n="function"==typeof i.default&&t[o.default];if(!n)return t;var r,a,u=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=u.next()).done;)s.push(r.value)}catch(t){a={error:t}}finally{try{r&&!r.done&&(n=u.return)&&n.call(u)}finally{if(a)throw a.error}}return s},s=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t},c=function(){function t(e,n,r,o){void 0===n&&(n=!0),void 0===r&&(r="OFF"),void 0===o&&(o="UPLOAD"),this.token=e,this.disableReport=n,this.level=r,this.prefix=o,this.id=++t.id}return t.prototype.getPrintPrefix=function(t){return"Qiniu-JS-SDK ["+t+"]["+this.prefix+"#"+this.id+"]:"},t.prototype.report=function(t,e){if(!this.disableReport)try{(0,a.reportV3)(this.token,t,e)}catch(t){this.warn(t)}},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=["INFO"];n.includes(this.level)&&console.log.apply(console,s([this.getPrintPrefix("INFO")],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=["INFO","WARN"];n.includes(this.level)&&console.warn.apply(console,s([this.getPrintPrefix("WARN")],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=["INFO","WARN","ERROR"];n.includes(this.level)&&console.error.apply(console,s([this.getPrintPrefix("ERROR")],t))},t.id=0,t}();e.default=c},function(t,e,n){"use strict";n(0)(e,"__esModule",{value:!0}),e.reportV3=function t(e,n,o){void 0===o&&(o=3);var i=(0,r.createXHR)();i.open("POST","https://uplog.qbox.me/log/3"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.setRequestHeader("Authorization",(0,r.getAuthHeaders)(e).Authorization),i.onreadystatechange=function(){4===i.readyState&&200!==i.status&&o>0&&t(e,n,o-1)};var a=[n.code||"",n.reqId||"",n.host||"",n.remoteIp||"",n.port||"",n.duration||"",n.time||"",n.bytesSent||"",n.upType||"",n.size||""].join(",");i.send(a)};var r=n(18)},function(t,e,n){"use strict";var r=n(3);n(0)(e,"__esModule",{value:!0}),e.HostPool=e.Host=void 0;var o=r(n(155)),i=r(n(10)),a=r(n(11)),u=r(n(15)),s=n(43),c=function(t,e,n,r){return new(n||(n=u.default))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},f=function(t,e){var n,r,o,u,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof a.default&&(u[i.default]=function(){return this}),u;function c(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l=function(t,e){var n="function"==typeof a.default&&t[i.default];if(!n)return t;var r,o,u=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=u.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=u.return)&&n.call(u)}finally{if(o)throw o.error}}return s},p=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t},h=new o.default,d=function(){function t(t,e){this.host=t,this.protocol=e}return t.prototype.isFrozen=function(){var t=(new Date).getTime(),e=h.get(this.host);return null!=e&&e>=t},t.prototype.freeze=function(t){void 0===t&&(t=20);var e=(new Date).getTime()+1e3*t;h.set(this.host,e)},t.prototype.unfreeze=function(){h.delete(this.host)},t.prototype.getUrl=function(){return this.protocol+"://"+this.host},t.prototype.getUnfreezeTime=function(){return h.get(this.host)},t}();e.Host=d;var g=function(){function t(t){void 0===t&&(t=[]),this.initHosts=t,this.cachedHostsMap=new o.default}return t.prototype.register=function(t,e,n,r){this.cachedHostsMap.set(t+"@"+e,n.map((function(t){return new d(t,r)})))},t.prototype.refresh=function(t,e,n){var r,o,i,a;return c(this,void 0,void 0,(function(){var u,c;return f(this,(function(f){switch(f.label){case 0:return(this.cachedHostsMap.get(t+"@"+e)||[]).length>0?[2]:this.initHosts.length>0?(this.register(t,e,this.initHosts,n),[2]):[4,(0,s.getUpHosts)(t,e,n)];case 1:return null!=(null==(u=f.sent())?void 0:u.data)&&(c=p((null===(o=null===(r=u.data.up)||void 0===r?void 0:r.acc)||void 0===o?void 0:o.main)||[],(null===(a=null===(i=u.data.up)||void 0===i?void 0:i.acc)||void 0===a?void 0:a.backup)||[]),this.register(t,e,c,n)),[2]}}))}))},t.prototype.getUp=function(t,e,n){return c(this,void 0,void 0,(function(){var r,o;return f(this,(function(i){switch(i.label){case 0:return[4,this.refresh(t,e,n)];case 1:return i.sent(),0===(r=this.cachedHostsMap.get(t+"@"+e)||[]).length?[2,null]:(o=r.filter((function(t){return!t.isFrozen()}))).length>0?[2,o[0]]:[2,r.slice().sort((function(t,e){return(t.getUnfreezeTime()||0)-(e.getUnfreezeTime()||0)}))[0]]}}))}))},t}();e.HostPool=g},function(t,e,n){t.exports=n(156)},function(t,e,n){n(38),n(54),n(39),n(157),n(159),n(162),n(163),t.exports=n(1).Map},function(t,e,n){"use strict";var r=n(158),o=n(31),i="Map";t.exports=n(84)(i,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(o(this,i),t);return e&&e.v},set:function(t,e){return r.def(o(this,i),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(8).f,o=n(34),i=n(41),a=n(12),u=n(40),s=n(21),c=n(55),f=n(69),l=n(74),p=n(7),h=n(30).fastKey,d=n(31),g=p?"_s":"size",v=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var f=t((function(t,r){u(t,f,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[g]=0,null!=r&&s(r,n,t[c],t)}));return i(f.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var n=d(this,e),r=v(n,t);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[g]--}return!!r},forEach:function(t){d(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(d(this,e),t)}}),p&&r(f.prototype,"size",{get:function(){return d(this,e)[g]}}),f},def:function(t,e,n){var r,o,i=v(t,e);return i?i.v=n:(t._l=i={i:o=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[g]++,"F"!==o&&(t._i[o]=i)),t},getEntry:v,setStrong:function(t,e,n){c(t,e,(function(t,n){this._t=d(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?f(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,f(1))}),n?"entries":"values",!n,!0),l(e)}}},function(t,e,n){var r=n(4);r(r.P+r.R,"Map",{toJSON:n(160)("Map")})},function(t,e,n){var r=n(57),o=n(161);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,n){var r=n(21);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){n(85)("Map")},function(t,e,n){n(86)("Map")},function(t,e,n){"use strict";var r=n(3);n(0)(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n(20)),i=r(n(10)),a=r(n(11)),u=r(n(15)),s=r(n(19)),c=n(165),f=n(23),l=n(80),p=function(){return(p=s.default||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},h=function(t,e,n,r){return new(n||(n=u.default))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},d=function(t,e){var n,r,o,u,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof a.default&&(u[i.default]=function(){return this}),u;function c(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},g=function(t,e){var n="function"==typeof a.default&&t[i.default];if(!n)return t;var r,o,u=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=u.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=u.return)&&n.call(u)}finally{if(o)throw o.error}}return s},v=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t},y={PNG:"image/png",JPEG:"image/jpeg",WEBP:"image/webp",BMP:"image/bmp"},m=Math.log(2),b=(0,o.default)(y).map((function(t){return y[t]})),w=y.JPEG;var x=function(){function t(t,e){this.file=t,this.config=e,this.config=p({quality:.92,noCompressIfLarger:!1},this.config)}return t.prototype.process=function(){return h(this,void 0,void 0,(function(){var t,e,n,r,o,i;return d(this,(function(a){switch(a.label){case 0:if(this.outputType=this.file.type,t={},u=this.file.type,!b.includes(u))throw new f.QiniuError(f.QiniuErrorName.UnsupportedFileType,"unsupported file type: "+this.file.type);return[4,this.getOriginImage()];case 1:return e=a.sent(),[4,this.getCanvas(e)];case 2:return n=a.sent(),r=1,this.config.maxWidth&&(r=Math.min(1,this.config.maxWidth/n.width)),this.config.maxHeight&&(r=Math.min(1,r,this.config.maxHeight/n.height)),t.width=n.width,t.height=n.height,[4,this.doScale(n,r)];case 3:return o=a.sent(),(i=this.toBlob(o)).size>this.file.size&&this.config.noCompressIfLarger?[2,{dist:this.file,width:t.width,height:t.height}]:[2,{dist:i,width:o.width,height:o.height}]}var u}))}))},t.prototype.clear=function(t,e,n){this.outputType===w?(t.fillStyle="#fff",t.fillRect(0,0,e,n)):t.clearRect(0,0,e,n)},t.prototype.getOriginImage=function(){var t=this;return new u.default((function(e,n){var r=(0,l.createObjectURL)(t.file),o=new Image;o.onload=function(){e(o)},o.onerror=function(){n("image load error")},o.src=r}))},t.prototype.getCanvas=function(t){var e=this;return new u.default((function(n,r){c.EXIF.getData(t,(function(){var o=c.EXIF.getTag(t,"Orientation")||1,i=(0,l.getTransform)(t,o),a=i.width,u=i.height,s=i.matrix,p=document.createElement("canvas"),h=p.getContext("2d");h?(p.width=a,p.height=u,e.clear(h,a,u),h.transform.apply(h,v(s)),h.drawImage(t,0,0),n(p)):r(new f.QiniuError(f.QiniuErrorName.GetCanvasContextFailed,"context is null"))}))}))},t.prototype.doScale=function(t,e){return h(this,void 0,void 0,(function(){var n,r,o,i,a,u,s,c,l,p,h,g,v,y,b,w;return d(this,(function(d){if(1===e)return[2,t];if(n=t.getContext("2d"),r=Math.min(4,Math.ceil(1/e/m)),o=Math.pow(e,1/r),i=document.createElement("canvas"),a=i.getContext("2d"),u=t.width,s=t.height,c=u,l=s,i.width=u,i.height=s,!a||!n)throw new f.QiniuError(f.QiniuErrorName.GetCanvasContextFailed,"mctx or sctx can't be null");for(g=0;g<r;g++)v=u*o|0,y=s*o|0,g===r-1&&(v=c*e,y=l*e),g%2==0?(p=t,h=a):(p=i,h=n),this.clear(h,u,s),h.drawImage(p,0,0,u,s,0,0,v,y),u=v,s=y;return b=p===t?i:t,w=h.getImageData(0,0,u,s),b.width=u,b.height=s,h.putImageData(w,0,0),[2,b]}))}))},t.prototype.toBlob=function(t){var e=t.toDataURL(this.outputType,this.config.quality),n=atob(e.split(",")[1]).split("").map((function(t){return t.charCodeAt(0)}));return new Blob([new Uint8Array(n)],{type:this.outputType})},t}(),_=function(t,e){return new x(t,e).process()};e.default=_},function(t,e,r){var o;(function(){var r=!1,i=function(t){return t instanceof i?t:this instanceof i?void(this.EXIFwrapped=t):new i(t)};t.exports&&(e=t.exports=i),e.EXIF=i;var a=i.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},u=i.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},s=i.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c=i.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},f=i.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function l(t){return!!t.exifdata}function p(t,e){function n(n){var o=h(n);t.exifdata=o||{};var a=function(t){var e=new DataView(t);r;if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;var n=2,o=t.byteLength,i=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};for(;n<o;){if(i(e,n)){var a=e.getUint8(n+7);return a%2!=0&&(a+=1),0===a&&(a=4),g(t,n+8+a,e.getUint16(n+6+a))}n++}}(n);if(t.iptcdata=a||{},i.isXmpEnabled){var u=function(t){if(!("DOMParser"in self))return;var e=new DataView(t);r;if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;var n=2,o=t.byteLength,i=new DOMParser;for(;n<o-4;){if("http"==m(e,n,4)){var a=n-1,u=e.getUint16(n-2)-1,s=m(e,a,u),c=s.indexOf("xmpmeta>")+8,f=(s=s.substring(s.indexOf("<x:xmpmeta"),c)).indexOf("x:xmpmeta")+10;return s=s.slice(0,f)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+s.slice(f),x(i.parseFromString(s,"text/xml"))}n++}}(n);t.xmpdata=u||{}}e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src))n(function(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(t),r=n.length,o=new ArrayBuffer(r),i=new Uint8Array(o),a=0;a<r;a++)i[a]=n.charCodeAt(a);return o}(t.src));else if(/^blob\:/i.test(t.src)){(a=new FileReader).onload=function(t){n(t.target.result)},function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},n.send()}(t.src,(function(t){a.readAsArrayBuffer(t)}))}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(o.response),o=null},o.open("GET",t.src,!0),o.responseType="arraybuffer",o.send(null)}else if(self.FileReader&&(t instanceof self.Blob||t instanceof self.File)){var a;(a=new FileReader).onload=function(t){n(t.target.result)},a.readAsArrayBuffer(t)}}function h(t){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;for(var n=2,r=t.byteLength;n<r;){if(255!=e.getUint8(n))return!1;if(225==e.getUint8(n+1))return b(e,n+4,e.getUint16(n+2));n+=2+e.getUint16(n+2)}}var d={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function g(t,e,n){for(var r,o,i,a,u=new DataView(t),s={},c=e;c<e+n;)28===u.getUint8(c)&&2===u.getUint8(c+1)&&(a=u.getUint8(c+2))in d&&((i=u.getInt16(c+3))+5,o=d[a],r=m(u,c+5,i),s.hasOwnProperty(o)?s[o]instanceof Array?s[o].push(r):s[o]=[s[o],r]:s[o]=r),c++;return s}function v(t,e,n,r,o){var i,a,u=t.getUint16(n,!o),s={};for(a=0;a<u;a++)i=n+12*a+2,s[r[t.getUint16(i,!o)]]=y(t,i,e,n,o);return s}function y(t,e,n,r,o){var i,a,u,s,c,f,l=t.getUint16(e+2,!o),p=t.getUint32(e+4,!o),h=t.getUint32(e+8,!o)+n;switch(l){case 1:case 7:if(1==p)return t.getUint8(e+8,!o);for(i=p>4?h:e+8,a=[],s=0;s<p;s++)a[s]=t.getUint8(i+s);return a;case 2:return m(t,i=p>4?h:e+8,p-1);case 3:if(1==p)return t.getUint16(e+8,!o);for(i=p>2?h:e+8,a=[],s=0;s<p;s++)a[s]=t.getUint16(i+2*s,!o);return a;case 4:if(1==p)return t.getUint32(e+8,!o);for(a=[],s=0;s<p;s++)a[s]=t.getUint32(h+4*s,!o);return a;case 5:if(1==p)return c=t.getUint32(h,!o),f=t.getUint32(h+4,!o),(u=new Number(c/f)).numerator=c,u.denominator=f,u;for(a=[],s=0;s<p;s++)c=t.getUint32(h+8*s,!o),f=t.getUint32(h+4+8*s,!o),a[s]=new Number(c/f),a[s].numerator=c,a[s].denominator=f;return a;case 9:if(1==p)return t.getInt32(e+8,!o);for(a=[],s=0;s<p;s++)a[s]=t.getInt32(h+4*s,!o);return a;case 10:if(1==p)return t.getInt32(h,!o)/t.getInt32(h+4,!o);for(a=[],s=0;s<p;s++)a[s]=t.getInt32(h+8*s,!o)/t.getInt32(h+4+8*s,!o);return a}}function m(t,e,r){var o="";for(n=e;n<e+r;n++)o+=String.fromCharCode(t.getUint8(n));return o}function b(t,e){if("Exif"!=m(t,e,4))return!1;var n,r,o,i,l,p=e+6;if(18761==t.getUint16(p))n=!1;else{if(19789!=t.getUint16(p))return!1;n=!0}if(42!=t.getUint16(p+2,!n))return!1;var h=t.getUint32(p+4,!n);if(h<8)return!1;if((r=v(t,p,p+h,u,n)).ExifIFDPointer)for(o in i=v(t,p,p+r.ExifIFDPointer,a,n)){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":i[o]=f[o][i[o]];break;case"ExifVersion":case"FlashpixVersion":i[o]=String.fromCharCode(i[o][0],i[o][1],i[o][2],i[o][3]);break;case"ComponentsConfiguration":i[o]=f.Components[i[o][0]]+f.Components[i[o][1]]+f.Components[i[o][2]]+f.Components[i[o][3]]}r[o]=i[o]}if(r.GPSInfoIFDPointer)for(o in l=v(t,p,p+r.GPSInfoIFDPointer,s,n)){switch(o){case"GPSVersionID":l[o]=l[o][0]+"."+l[o][1]+"."+l[o][2]+"."+l[o][3]}r[o]=l[o]}return r.thumbnail=function(t,e,n,r){var o=function(t,e,n){var r=t.getUint16(e,!n);return t.getUint32(e+2+12*r,!n)}(t,e+n,r);if(!o)return{};if(o>t.byteLength)return{};var i=v(t,e,e+o,c,r);if(i.Compression)switch(i.Compression){case 6:if(i.JpegIFOffset&&i.JpegIFByteCount){var a=e+i.JpegIFOffset,u=i.JpegIFByteCount;i.blob=new Blob([new Uint8Array(t.buffer,a,u)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i.Compression)}else 2==i.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}(t,p,h,n),r}function w(t){var e={};if(1==t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(var n=0;n<t.attributes.length;n++){var r=t.attributes.item(n);e["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==t.nodeType)return t.nodeValue;if(t.hasChildNodes())for(var o=0;o<t.childNodes.length;o++){var i=t.childNodes.item(o),a=i.nodeName;if(null==e[a])e[a]=w(i);else{if(null==e[a].push){var u=e[a];e[a]=[],e[a].push(u)}e[a].push(w(i))}}return e}function x(t){try{var e={};if(t.children.length>0)for(var n=0;n<t.children.length;n++){var r=t.children.item(n),o=r.attributes;for(var i in o){var a=o[i],u=a.nodeName,s=a.nodeValue;void 0!==u&&(e[u]=s)}var c=r.nodeName;if(void 0===e[c])e[c]=w(r);else{if(void 0===e[c].push){var f=e[c];e[c]=[],e[c].push(f)}e[c].push(w(r))}}else e=t.textContent;return e}catch(t){console.log(t.message)}}i.enableXmp=function(){i.isXmpEnabled=!0},i.disableXmp=function(){i.isXmpEnabled=!1},i.getData=function(t,e){return!((self.Image&&t instanceof self.Image||self.HTMLImageElement&&t instanceof self.HTMLImageElement)&&!t.complete)&&(l(t)?e&&e.call(t):p(t,e),!0)},i.getTag=function(t,e){if(l(t))return t.exifdata[e]},i.getIptcTag=function(t,e){if(l(t))return t.iptcdata[e]},i.getAllTags=function(t){if(!l(t))return{};var e,n=t.exifdata,r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r},i.getAllIptcTags=function(t){if(!l(t))return{};var e,n=t.iptcdata,r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r},i.pretty=function(t){if(!l(t))return"";var e,n=t.exifdata,r="";for(e in n)n.hasOwnProperty(e)&&("object"==typeof n[e]?n[e]instanceof Number?r+=e+" : "+n[e]+" ["+n[e].numerator+"/"+n[e].denominator+"]\r\n":r+=e+" : ["+n[e].length+" values]\r\n":r+=e+" : "+n[e]+"\r\n");return r},i.readFromBinaryFile=function(t){return h(t)},void 0===(o=function(){return i}.apply(e,[]))||(t.exports=o)}).call(this)}])}));
//# sourceMappingURL=qiniu.min.js.map