<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/pace-js/themes/blue/pace-theme-minimal.css"><script src="/lib/pace-js/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="本文主要介绍 ShardingSphere-JDBC 的入门教程。"><meta property="og:type" content="article"><meta property="og:title" content="ShardingSphere-JDBC 入门教程之一"><meta property="og:url" content="https://www.techgrow.cn/posts/8bb72991.html"><meta property="og:site_name" content="Clay 的技术空间"><meta property="og:description" content="本文主要介绍 ShardingSphere-JDBC 的入门教程。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/cap-1.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/cap-2.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-1.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-2.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-5.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-3.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-4.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-7.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-6.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-22.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-8.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-9.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-10.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-11.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-12.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2025/12/sharding-sphere-13.png"><meta property="article:published_time" content="2022-09-01T15:12:41.000Z"><meta property="article:modified_time" content="2022-09-01T15:12:41.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="微服务"><meta property="article:tag" content="分布式"><meta property="article:tag" content="ORM"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.techgrow.cn/asset/2025/12/cap-1.png"><link rel="canonical" href="https://www.techgrow.cn/posts/8bb72991.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/8bb72991.html","path":"posts/8bb72991.html","title":"ShardingSphere-JDBC 入门教程之一"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>ShardingSphere-JDBC 入门教程之一 | Clay 的技术空间</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false,"measure_protocol_api_secret":null}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn"><link rel="stylesheet" type="text/css" href="/css/injector/main.css"><link rel="preload" as="style" href="/css/injector/light.css"><link rel="preload" as="style" href="/css/injector/dark.css"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术空间" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion"><script src="/lib/jquery/dist/jquery.min.js"></script><script data-pjax="">!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><link rel="stylesheet" href="/lib/aplayer/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="/lib/aplayer/dist/APlayer.min.js"></script><script src="/lib/aplayer/dist/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=jQuery("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=jQuery("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}jQuery(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://open.techgrow.cn/api/wechat/js/signature?url="+a+"&noncestr="+i+"&timestamp="+r;jQuery.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt=""></div><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术空间</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-readingnotes"><a href="https://www.techgrow.cn/reading/" rel="section"><i class="fa fa-book-open-reader fa-fw"></i>读书笔记</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn/" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%A7%E7%BA%B2"><span class="nav-text">大纲</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">前言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90"><span class="nav-text">学习资源</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%A0%B8%E5%BF%83%E7%90%86%E8%AE%BA"><span class="nav-text">基础核心理论</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CAP-%E7%90%86%E8%AE%BA"><span class="nav-text">CAP 理论</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BASE-%E7%90%86%E8%AE%BA"><span class="nav-text">BASE 理论</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E6%80%A7%E8%83%BD%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%B6%E6%9E%84"><span class="nav-text">高性能数据库架构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E6%9E%B6%E6%9E%84"><span class="nav-text">读写分离架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E7%89%87%E6%9E%B6%E6%9E%84"><span class="nav-text">数据库分片架构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9E%82%E7%9B%B4%E5%88%86%E7%89%87"><span class="nav-text">垂直分片</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9E%82%E7%9B%B4%E5%88%86%E8%A1%A8"><span class="nav-text">垂直分表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93"><span class="nav-text">垂直分库</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B0%B4%E5%B9%B3%E5%88%86%E7%89%87"><span class="nav-text">水平分片</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B0%B4%E5%B9%B3%E5%88%86%E8%A1%A8"><span class="nav-text">水平分表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B0%B4%E5%B9%B3%E5%88%86%E5%BA%93"><span class="nav-text">水平分库</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8"><span class="nav-text">结合使用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E5%92%8C%E6%95%B0%E6%8D%AE%E5%88%86%E7%89%87%E6%9E%B6%E6%9E%84"><span class="nav-text">读写分离和数据分片架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E5%92%8C%E6%95%B0%E6%8D%AE%E5%88%86%E7%89%87%E5%AE%9E%E7%8E%B0"><span class="nav-text">读写分离和数据分片实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E4%BB%A3%E7%A0%81%E5%B0%81%E8%A3%85"><span class="nav-text">程序代码封装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="nav-text">中间件封装</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ShardingSphere-%E7%AE%80%E4%BB%8B"><span class="nav-text">ShardingSphere 简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ShardingSphere-%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D"><span class="nav-text">ShardingSphere 简单介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ShardingSphere-%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2"><span class="nav-text">ShardingSphere 发展历史</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ShardingSphere-%E7%94%9F%E6%80%81%E9%A1%B9%E7%9B%AE"><span class="nav-text">ShardingSphere 生态项目</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ShardingSphere-JDBC"><span class="nav-text">ShardingSphere-JDBC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ShardingSphere-Proxy"><span class="nav-text">ShardingSphere-Proxy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ShardingSphere-Sidecar"><span class="nav-text">ShardingSphere-Sidecar</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <span class="site-state-item-count">782</span> <span class="site-state-item-name">文章</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">54</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https://github.com/rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → /sitemap.xml" rel="noopener me"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/8bb72991.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术空间"><meta itemprop="description" content="专注于 Java 后端、分布式、微服务、云原生、数据库、系统架构、大数据、云计算、虚拟化、人工智能学习的技术博客。"></span><span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="ShardingSphere-JDBC 入门教程之一 | Clay 的技术空间"><meta itemprop="description" content="本文主要介绍 ShardingSphere-JDBC 的入门教程。"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> ShardingSphere-JDBC 入门教程之一</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-09-01 23:12:41" itemprop="dateCreated datePublished" datetime="2022-09-01T23:12:41+08:00">2022-09-01</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/8bb72991.html#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/8bb72991.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>8.1k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 ≈</span> <span>7 分钟</span></span></div></div></header><div class="post-body post-container" itemprop="articleBody" id="readmore-container"><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><ul><li><a href="/posts/8bb72991.html">ShardingSphere-JDBC 入门教程之一</a>、<a href="/posts/8dc5e7ed.html">ShardingSphere-JDBC 入门教程之二</a>、<a href="/posts/f26b9135.html">ShardingSphere-JDBC 入门教程之三</a></li><li><a href="/posts/beb9fd2b.html">ShardingSphere-JDBC 入门教程之四</a>、<a href="/posts/a35b9f6e.html">ShardingSphere-JDBC 入门教程之五</a>、<a href="/posts/a542576d.html">ShardingSphere-JDBC 入门教程之六</a></li><li><a href="/posts/c5b2q7od.html">ShardingSphere-JDBC 入门教程之七</a>、<a href="/posts/4c21f258.html">ShardingSphere-JDBC 入门教程之八</a></li></ul><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h3><ul><li><a target="_blank" rel="external nofollow" href="https://github.com/apache/shardingsphere">ShardingSphere 官方项目（GitHub）</a></li><li><a target="_blank" rel="external nofollow" href="https://shardingsphere.apache.org/index_zh.html">ShardingSphere 官方网站（中文站点）</a></li><li><a target="_blank" rel="external nofollow" href="https://shardingsphere.apache.org/document/current/cn/overview/">ShardingSphere 官方文档（最新版本）</a></li><li><a target="_blank" rel="external nofollow" href="https://shardingsphere.apache.org/document/5.1.1/cn/overview/">ShardingSphere 官方文档（5.1.1 版本）</a></li></ul><span id="more"></span><h2 id="基础核心理论"><a href="#基础核心理论" class="headerlink" title="基础核心理论"></a>基础核心理论</h2><h3 id="CAP-理论"><a href="#CAP-理论" class="headerlink" title="CAP 理论"></a>CAP 理论</h3><p><strong>CAP 的概念：</strong></p><ul><li><p>CAP 定理（CAP theorem）又被称作布鲁尔定理（Brewer’s theorem），是加州大学伯克利分校的计算机科学家埃里克・布鲁尔（Eric Brewer）在 2000 年的 ACM PODC 上提出的一个猜想。<code>对于设计分布式系统的架构师来说，CAP 是必须掌握的理论。</code> 在一个 <code>分布式系统中</code>，当涉及读写操作时，只能保证一致性（Consistence）、可用性（Availability）、分区容错性（Partition Tolerance）三者中的两个，另外一个必须被牺牲。</p><ul><li>C 一致性（Consistency）：对某个指定的客户端来说，读操作保证能够返回最新的写操作结果</li><li> A 可用性（Availability）：非故障的节点在合理的时间内返回合理的响应 <code>（不是错误和超时的响应）</code></li><li>P 分区容忍性（Partition Tolerance）：当出现网络分区后 <code>（可能是丢包，也可能是连接中断，还可能是拥塞）</code>，系统能够继续 “履行职责”</li></ul></li></ul><p><strong>CAP 的特点：</strong></p><ul><li><p>在实际设计过程中，每个系统不可能只处理一种数据，而是包含多种类型的数据，<code>有的数据必须选择 CP，有的数据必须选择 AP，分布式系统理论上不可能选择 CA 架构。</code></p><ul><li>CP：如下图所示，<code>为了保证一致性</code>，当发生分区现象后，N1 节点上的数据已经更新到 y，但由于 N1 和 N2 之间的复制通道中断，数据 y 无法同步到 N2，N2 节点上的数据还是 x。<code>这时客户端 C 访问 N2 时，N2 需要返回 Error，提示客户端 C "系统现在发生了错误"，</code> 这种处理方式 <code>违背了可用性</code>（Availability）的要求，因此这里 CAP 三者只能满足 CP。</li></ul><p><img data-src="../../../asset/2025/12/cap-1.png"></p><ul><li>AP：如下图所示，<code>为了保证可用性</code>，当发生分区现象后，N1 节点上的数据已经更新到 y，但由于 N1 和 N2 之间的复制通道中断，数据 y 无法同步到 N2，N2 节点上的数据还是 x。<code>这时客户端 C 访问 N2 时，N2 将当前自己拥有的数据 x 返回给客户端 C 了</code>，而实际上当前最新的数据已经是 y 了，这就 <code>不满足一致性</code>（Consistency）的要求了，因此这里 CAP 三者只能满足 AP。注意：这里 N2 节点返回 x，虽然不是一个 “正确” 的结果，但是一个 “合理” 的结果，因为 x 是旧的数据，并不是一个错乱的值，只是不是最新的数据而已。</li></ul><p><img data-src="../../../asset/2025/12/cap-2.png"></p></li></ul><div class="admonition note"><p class="admonition-title">CAP 理论与 BASE 理论的关系</p><p>BASE 理论是对 CAP 定理中 "一致性与可用性权衡" 的实践总结，是在大规模分布式系统工程经验基础上演化而来的。它并非否定一致性，而是在无法满足强一致性（Strong Consistency）时，为 CAP 中偏向 AP 的系统提供的一种补充思路。BASE 的核心理念是：在业务可接受的前提下牺牲强一致性，以提高系统可用性和伸缩性；允许数据在短时间内不一致，但保证系统最终会达到一致状态（Eventual Consistency）。</p></div><h3 id="BASE-理论"><a href="#BASE-理论" class="headerlink" title="BASE 理论"></a>BASE 理论</h3><p>eBay 的架构师 Dan Pritchett 源于对大规模分布式系统的实践总结，在 ACM 上发表文章提出 BASE 理论。BASE 理论是对 CAP 理论的延伸，核心思想是即使无法做到强一致性（Strong Consistency，CAP 的一致性就是强一致性），但应用可以采用适合的方式达到最终一致性（Eventual Consitency）。BASE 是以下三个原则的缩写：</p><ul><li><p>(1) <strong>Basically Available（基本可用）</strong></p><ul><li>系统保证基本可用性，即系统在大部分时间内是可用的，但不一定保证在所有情况下都能正常处理所有请求。例如，在部分系统节点发生故障时，系统仍然能够提供服务，但可能会有部分功能受限或性能下降。</li></ul></li><li><p>(2) <strong>Soft State（软状态）</strong></p><ul><li>软状态也称为弱状态，和硬状态相对，是指允许系统中的数据存在中间状态，并认为该中间状态的存在不会影响系统的整体可用性，即允许系统在不同节点的数据副本之间进行数据同步的过程存在延时。</li></ul></li><li><p>(3) <strong>Eventually Consistent（最终一致性）</strong></p><ul><li>系统保证在没有新的更新操作后，经过一段时间后，所有数据副本最终会达到一致状态。这与 ACID 中的强一致性（即在事务完成后，所有数据立即一致）不同，最终一致性允许在短期内存在不一致，但最终会达到一致。</li></ul></li></ul><div class="admonition note"><p class="admonition-title">BASE 理论总结</p><ul><li>BASE 理论常用于 NoSQL 数据库和大规模分布式系统中，如 Cassandra、Amazon DynamoDB 等。这些系统通过放松一致性要求，以换取更高的可用性和分区容忍度，适应大规模、分布式环境中的高并发和高性能需求。</li><li>总的来说，BASE 理论在分布式系统中强调的是可用性和扩展性，通过接受短期的不一致性来实现系统的高可用性和高性能。</li></ul></div><h2 id="高性能数据库架构"><a href="#高性能数据库架构" class="headerlink" title="高性能数据库架构"></a>高性能数据库架构</h2><p>互联网业务兴起之后，海量用户加上海量数据的特点，单个数据库服务器已经难以满足业务需要，必须考虑数据库集群的方式来提升性能。高性能数据库集群的<code>第一种方式是 "读写分离"</code>，<code>第二种方式是 "数据库分片"</code>。</p><h3 id="读写分离架构"><a href="#读写分离架构" class="headerlink" title="读写分离架构"></a>读写分离架构</h3><p><strong>读写分离的基本原理：</strong>将数据库读和写操作分散到不同的节点上，下面是其基本架构图：</p><p><img data-src="../../../asset/2025/12/sharding-sphere-1.png"></p><p><strong>读写分离的基本实现：</strong></p><ul><li><code>主库负责处理事务性的增删改操作，从库负责处理查询操作</code>，能够有效的避免由数据更新导致的行锁，使得整个系统的查询性能得到极大的改善。</li><li> 读写分离是 <code>根据 SQL 语义的分析</code>，<code>将读操作和写操作分别路由至主库与从库</code>。</li><li>通过 <code>一主多从</code> 的配置方式，可以将查询请求均匀的分散到多个数据副本，能够进一步的提升系统的处理能力。</li><li>使用 <code>多主多从</code> 的方式，不但能够提升系统的吞吐量，还能够提升系统的可用性，可以达到在任何一个数据库宕机，甚至磁盘物理损坏的情况下仍然不影响系统的正常运行。</li><li>下图展示了根据业务需要，将用户表的写操作和读操分别路由到不同的数据库的方案：</li></ul><p><img data-src="../../../asset/2025/12/sharding-sphere-2.png"></p><p><strong>读写分离的局限（约束）：</strong></p><ul><li>CAP 理论中的 <code>一致性（Consistency）在 MySQL 实践中是不可能完美实现的</code>，在 MySQL 主从数据复制的过程中，主节点 N1 和从节点 N2 的数据并不完全一致（强一致性）。</li><li>即使无法做到 <code>强一致性</code>，但应用可以采用适合的方式达到 <code>最终一致性</code>。具有特点如下：<ul><li>基本可用（Basically Available）：分布式系统在出现故障时，允许损失部分可用性，即保证核心可用。</li><li>软状态（Soft State）：允许系统存在中间状态，而该中间状态不会影响系统整体可用性。这里的中间状态就是 CAP 理论中的数据不一致。</li><li><code>最终一致性（Eventual Consistency）：系统中的所有数据副本经过一定时间后，最终能够达到一致的状态。</code></li></ul></li></ul><h3 id="数据库分片架构"><a href="#数据库分片架构" class="headerlink" title="数据库分片架构"></a>数据库分片架构</h3><p><strong>读写分离的存在问题：</strong></p><ul><li>读写分离分散了数据库读写操作的压力，但没有分散数据库的存储压力，为了满足业务数据存储的需求，就需要 <code>将存储分散到多台数据库服务器上（即数据分片）</code>。</li></ul><p><strong>数据分片是指什么：</strong></p><ul><li>将存放在单一数据库中的数据分散地存放至多个数据库或表中，以达到提升性能瓶颈以及可用性的效果。数据分片的有效手段是对关系型数据库进行 <code>分库和分表</code>。数据分片的拆分方式又分为 <code>垂直分片和水平分片</code>。</li></ul><p><strong>分区、分表、分库如何选择：</strong></p><table><thead><tr><th>类型</th><th>触发条件 / 应用场景</th></tr></thead><tbody><tr><td>分区</td><td> 1、当单个表的数据量增大，且响应时间变长时，首先考虑的不是分表，而是分区。<br>2、对于需要按时间段或按某种业务逻辑划分的数据集，考虑分区管理（例如：按年份区分订单数据的场景）</td></tr><tr><td>分表</td><td>当单表数据量过大，超过 500 万行或数据量大于 2GB 时，需要考虑分表。</td></tr><tr><td>分库</td><td>通常在数据库 QPS 过高，数据库连接数不足时，需要考虑分库。</td></tr></tbody></table><div class="admonition warning"><p class="admonition-title">特别注意</p><ul><li>从逻辑上看，分区、分表、分库的选择顺序通常为：<strong>优先考虑分区，其次是分表，最后才是分库</strong>。可以理解为分区 → 分表 → 分库的渐进式演进。</li><li>需要注意的是，分区在实际使用中存在一些限制，例如分区键设计不够灵活、DDL 操作可能导致锁表、以及数据倾斜等一系列问题。因此，在真实的业务架构中，<strong>分表和分库往往比分区更常用，也更受欢迎</strong>。</li></ul></div><h4 id="垂直分片"><a href="#垂直分片" class="headerlink" title="垂直分片"></a>垂直分片</h4><p><code>垂直分片又称为垂直拆分、纵向拆分，有两种实现方式：垂直分表、垂直分库</code>。垂直分片可以缓解数据量和访问量带来的问题，但无法根治；如果垂直分片之后，表中的数据量依然超过单节点所能承载的阈值，则需要通过水平分片来进一步处理。</p><h5 id="垂直分表"><a href="#垂直分表" class="headerlink" title="垂直分表"></a>垂直分表</h5><ul><li><p>垂直分表是指将单个表按照列的不同特性进行拆分，将一个表中的列拆分到多个表中，比如：<code>将表中某些不常用的列，或者是占了大量空间的列拆分出去</code>。<strong>垂直分表遵循两个定律：1、拆分后每个表的结构（列）都不一样；2、每个表的行数据几乎都不一样，但还是存在有交集的列，一般是用于存储关联的主键。</strong></p></li><li><p>假设有一个婚恋网站，用户在筛选其他用户的时候，主要是用 age 和 sex 两个字段进行查询，而 nickname 和 description 两个字段主要用于展示，一般不会在业务查询中用到。description 本身又比较长，因此可以将这两个字段独立到另外一张表中，这样在查询 age 和 sex 时，就能带来一定的性能提升。</p></li><li><p>垂直分表引入的复杂性主要体现在表操作的数量要增加。例如，原来只要一次查询就可以获取 name、age、sex、nickname、description，现在需要两次查询，一次查询获取 name、age、sex，另外一次查询获取 nickname、description。</p></li></ul><p><img data-src="../../../asset/2025/12/sharding-sphere-5.png"></p><h5 id="垂直分库"><a href="#垂直分库" class="headerlink" title="垂直分库"></a>垂直分库</h5><ul><li><code>按照业务拆分数据库称为垂直分库（也叫业务分库），它的核心理念是专库专用。</code> 在拆分之前，一个数据库由多个数据表构成，每个表对应着不同的业务。而拆分之后，则是按照业务将表进行归类，分布到不同的数据库中，从而将读写压力分散至不同的数据库。</li></ul><p><img data-src="../../../asset/2025/12/sharding-sphere-3.png"></p><ul><li>下图展示了根据业务需要，将用户表和订单表垂直分库到不同的数据库的方案：</li></ul><p><img data-src="../../../asset/2025/12/sharding-sphere-4.png"></p><h4 id="水平分片"><a href="#水平分片" class="headerlink" title="水平分片"></a>水平分片</h4><ul><li><code>水平分片又称为水平拆分、横向拆分，有两种实现方式：水平分表、水平分库</code>。</li></ul><h5 id="水平分表"><a href="#水平分表" class="headerlink" title="水平分表"></a>水平分表</h5><ul><li>水平分表：将同一张表的数据按某种规则（如 ID 范围或哈希）拆分到多张结构相同的表中，每张表只存储部分数据，以减小单表的数据量、提升查询和写入性能。<strong>水平分表遵循两个定律：1、拆分后每个表的结构（列）都一样；2、每个表的行数据都不一样。</strong><code>水平分表适合表行数特别大的表。</code></li></ul><p><img data-src="../../../asset/2025/12/sharding-sphere-7.png"></p><ul><li>单表拆分为多表后，即使多个表仍在同一台数据库服务器上，也能显著提升性能；如果这种方式在性能方面能够满足业务需求，则无需进一步进行水平分库，因为跨库操作会增加系统复杂度（例如跨库事务）。只有当单表拆分为多表后，单机性能仍然不足时，才需要将多个表分散在多台数据库服务器中。</li></ul><h5 id="水平分库"><a href="#水平分库" class="headerlink" title="水平分库"></a>水平分库</h5><p>与垂直分库按业务拆分不同，水平分库是根据某个字段（或几个字段）通过特定规则，将数据分散到多个库或表中，每个分片只存储部分数据。例如，可按主键分片：偶数主键记录放入 0 库（或表），奇数主键记录放入 1 库（或表），如下图所示。</p><p><img data-src="../../../asset/2025/12/sharding-sphere-6.png"></p><p><strong>水平分库通常是在水平分表的基础上进一步进行，将原本分散到多张表的数据继续分布到多台数据库服务器上，以提升整体的并发处理能力。</strong>常见的拆分维度包括业务模块、地理区域、用户属性或访问模式（冷热数据）等。</p><div class="admonition warning"><p class="admonition-title">阿里巴巴 Java 开发手册</p><ul><li>单表行数超过 500 万行或者单表容量超过 2GB，才推荐进行分库分表。</li><li>说明：如果预计三年后的数据量根本达不到这个级别，<code>请不要在创建表时就分库分表</code>。</li><li><strong>判断是否需要分库分表，不能脱离单表的数据量大小，仅关注表中的数据行数是不可取的。</strong></li></ul></div><h4 id="结合使用"><a href="#结合使用" class="headerlink" title="结合使用"></a>结合使用</h4><p>在大型互联网项目中，垂直分片（垂直拆分）与水平分片（水平拆分）往往是结合使用的，如下所示：</p><p><img data-src="../../../asset/2025/12/sharding-sphere-22.png"></p><h3 id="读写分离和数据分片架构"><a href="#读写分离和数据分片架构" class="headerlink" title="读写分离和数据分片架构"></a>读写分离和数据分片架构</h3><p>下图展现了将读写分离与数据分片结合使用时，应用程序与数据库集群之间的复杂拓扑关系。</p><p><img data-src="../../../asset/2025/12/sharding-sphere-8.png"></p><h3 id="读写分离和数据分片实现"><a href="#读写分离和数据分片实现" class="headerlink" title="读写分离和数据分片实现"></a>读写分离和数据分片实现</h3><p>读写分离和数据分片的具体实现方式一般有两种： 程序代码封装和中间件封装。</p><div class="admonition note"><p class="admonition-title">常见解决方案</p><ul><li>MyCat（中间件封装），支持读写分离、数据分片等。</li><li>Apache ShardingSphere（程序代码封装和中间件封装），支持读写分离、数据分片等。</li></ul></div><h4 id="程序代码封装"><a href="#程序代码封装" class="headerlink" title="程序代码封装"></a>程序代码封装</h4><p>程序代码封装是指在项目代码中抽象一个 <code>数据访问层（或中间层封装）</code>，实现读写操作分离和数据库服务器连接的管理。以读写分离为例，其基本架构如下图所示：</p><p><img data-src="../../../asset/2025/12/sharding-sphere-9.png"></p><h4 id="中间件封装"><a href="#中间件封装" class="headerlink" title="中间件封装"></a>中间件封装</h4><p>中间件封装指的是 <code>独立一套系统出来</code>，实现读写操作分离和数据库服务器连接的管理。对于业务服务器来说，访问中间件和访问数据库没有区别，在业务服务器看来，中间件就像是一个数据库服务器。以读写分离为例，其基本架构如下图所示：</p><p><img data-src="../../../asset/2025/12/sharding-sphere-10.png"></p><h2 id="ShardingSphere-简介"><a href="#ShardingSphere-简介" class="headerlink" title="ShardingSphere 简介"></a>ShardingSphere 简介</h2><h3 id="ShardingSphere-简单介绍"><a href="#ShardingSphere-简单介绍" class="headerlink" title="ShardingSphere 简单介绍"></a>ShardingSphere 简单介绍</h3><p>Apache ShardingSphere 是一款分布式的数据库生态系统，可以将任意数据库转换为分布式数据库，并通过数据分片、弹性伸缩、加密等能力对原有数据库进行增强。Apache ShardingSphere 设计哲学为 Database Plus，旨在构建异构数据库上层的标准和生态。它关注如何充分合理地利用数据库的计算和存储能力，而并非实现一个全新的数据库。它站在数据库的上层视角，关注它们之间的协作多于数据库自身。</p><div class="admonition note"><p class="admonition-title">总结</p><p>Apache ShardingSphere 由 JDBC、Proxy 和 Sidecar（规划中）这 3 款既能够独立部署，又支持混合部署配合使用的产品组成。</p></div><h3 id="ShardingSphere-发展历史"><a href="#ShardingSphere-发展历史" class="headerlink" title="ShardingSphere 发展历史"></a>ShardingSphere 发展历史</h3><ul><li><p>(1) Sharding-JDBC 诞生（2015）</p><ul><li>最初由当当网开源。</li><li>作为 轻量级、无代理的 Client 层分库分表组件。</li><li>提供核心能力：读写分离、水平分库分表、SQL 路由、结果归并。</li><li>在当时主要对标 MyCat、TDDL 等数据中间件。</li><li>特点：不需要独立部署，直接嵌入应用端架构，使用最轻量。</li></ul></li><li><p>(2) Sharding-Proxy 与 Sharding-Sidecar 的提出（2018）</p><ul><li>随着业务体量扩大，Client 模式无法覆盖所有场景，ShardingSphere 开始扩展为体系化中间件：</li><li>Sharding-Proxy<ul><li> 类似 MySQL/PostgreSQL 协议代理的独立中间件。</li><li>支持多种语言客户端接入（因其协议兼容）。</li><li>适用于不可修改应用代码或不想侵入业务的场景。</li></ul></li><li>Sharding-Sidecar（未大规模推广）<ul><li>面向云原生 Service Mesh（与 Istio 类似）。</li><li>数据层的 Sidecar 代理模式，但复杂度较高，因此未大规模应用。</li><li>这一步标志着 ShardingSphere 从 “一个轻量库” 向 “分布式数据库中间件体系” 演进。</li></ul></li></ul></li><li><p>(3) 加入 Apache 基金会（2018.11）</p><ul><li>项目进入 Apache 孵化器（Apache Incubator）。</li><li>完成交接后开始进行体系化重构。</li><li>这使得项目由 “企业内部开源” 转变为 “社区驱动的开源生态”。</li></ul></li><li><p>(4) 正式成为 Apache 顶级项目（2020.04）</p><ul><li>项目更名为 Apache ShardingSphere。</li><li>提出 “Database Plus” 的理念，强调增强数据库能力而非替代数据库。</li></ul></li><li><p>(5) ShardingSphere 逐步扩展覆盖数据库增强领域的关键能力（2020 – 2024）</p><ul><li>分库分表（核心）<ul><li>标准分片策略</li><li>确定性路由、广播表、绑定表</li><li>自动生成主键（Snowflake 等）</li></ul></li><li>读写分离<ul><li>多主多从</li><li>基于流量 / 标签路由</li></ul></li><li>分布式事务<ul><li>支持 XA</li><li>BASE 柔性事务（Seata 整合）</li></ul></li><li>高级 SQL 能力<ul><li> SQL 重写、结果归并</li><li> Transparent SQL —— 业务无需改写 SQL</li></ul></li><li> 数据加密<ul><li>列级加密、脱敏</li></ul></li><li>影子库（压测）<ul><li>增强链路压测能力</li></ul></li><li>生态整合<ul><li> Spring Boot Starter</li><li>Kubernetes / Operator</li><li>ElasticJob、Seata、MySQL、PG、TiDB 等生态适配</li></ul></li></ul></li><li><p> (6) 向数据库增强平台演进（2024 – 2025）</p><ul><li>ShardingSphere 不再只是读写分离 / 分库分表的中间件，而是演化为 Database Plus Platform（数据库增强平台）</li><li>目标是：<ul><li>为任意数据库提供增强能力</li><li>不改变数据库、不改变 SQL</li><li> 通过 “规则 + 引擎” 提供扩展</li></ul></li><li>包括：<ul><li>数据治理（Governance）</li><li>SQL 审计、流量治理</li><li>分布式场景增强</li><li>灾备、限流</li><li>热点数据治理等</li></ul></li></ul></li></ul><h3 id="ShardingSphere-生态项目"><a href="#ShardingSphere-生态项目" class="headerlink" title="ShardingSphere 生态项目"></a>ShardingSphere 生态项目</h3><p>ShardingSphere 开源的分布式数据库生态项目：</p><ul><li><p>ShardingSphere-JDBC：</p><ul><li>Client 端框架</li><li>继续增强分库分表、读写分离、影子库压测、分布式事务等能力</li></ul></li><li><p> ShardingSphere-Proxy：</p><ul><li>数据库协议代理</li><li>支持 MySQL / PostgreSQL 协议</li><li>多语言应用均可通过 Proxy 访问分布式数据库能力</li></ul></li><li><p> ShardingSphere-Sidecar（未大规模推广）：</p><ul><li>定位为 Kubernetes 或 Mesos 的云原生数据库代理，以 DaemonSet 的形式代理所有对数据库的访问</li><li>由于复杂度较高，因此未大规模应用，虽然未成为主流，但有部分 PoC（概念验证）版本</li></ul></li></ul><hr><p>ShardingSphere 开源生态项目的对比：</p><table><thead><tr><th>对比项</th><th> ShardingSphere-JDBC</th><th>ShardingSphere-Proxy</th><th>ShardingSphere-Sidecar</th></tr></thead><tbody><tr><td> 数据库</td><td>任意</td><td> MySQL/PostgreSQL</td><td>MySQL/PostgreSQL</td></tr><tr><td> 连接消耗数</td><td>高</td><td>低</td><td>高</td></tr><tr><td>异构语言</td><td>仅 Java</td><td> 任意</td><td>任意</td></tr><tr><td>性能</td><td>损耗低</td><td>损耗略高</td><td>损耗低</td></tr><tr><td>无中心化</td><td>是</td><td>否</td><td>是</td></tr><tr><td>静态入口</td><td>无</td><td>有</td><td>无</td></tr></tbody></table><h4 id="ShardingSphere-JDBC"><a href="#ShardingSphere-JDBC" class="headerlink" title="ShardingSphere-JDBC"></a>ShardingSphere-JDBC</h4><p>ShardingSphere-JDBC 定位为轻量级 Java 框架，<code>在 Java 的 JDBC 层提供的额外服务</code>。它使用客户端直连数据库，<code>以 Jar 包形式提供服务</code>，无需额外部署和依赖，可理解为增强版的 JDBC 驱动，完全兼容 JDBC 和各种 ORM 框架。</p><ul><li>适用于任何基于 JDBC 的 ORM 框架，如：JPA、Hibernate、Mybatis、Spring JDBC Template 或直接使用 JDBC；</li><li>支持任何第三方的数据库连接池，如：C3P0、DBCP、Druid、BoneCP、HikariCP 等；</li><li>支持任意实现了 JDBC 规范的数据库，目前支持 MySQL、PostgreSQL、Oracle、SQLServer 以及任何可使用 JDBC 访问的数据库。</li></ul><p><img data-src="../../../asset/2025/12/sharding-sphere-11.png"></p><h4 id="ShardingSphere-Proxy"><a href="#ShardingSphere-Proxy" class="headerlink" title="ShardingSphere-Proxy"></a>ShardingSphere-Proxy</h4><p>ShardingSphere-Proxy 定位为透明化的 <code>数据库代理端</code>，提供封装了数据库二进制协议的服务端版本，用于完成对<strong>异构语言</strong>的支持。目前提供 MySQL 和 PostgreSQL 版本，它可以使用任何兼容 MySQL / PostgreSQL 协议的访问客户端（如：MySQL Command Client、MySQL Workbench、Navicat 等）操作数据，对 DBA 更加友好。</p><ul><li>对应用程序完全透明，可直接当作 MySQL / PostgreSQL 使用；</li><li>适用于任何兼容 MySQL / PostgreSQL 协议的客户端；</li><li>ShardingSphere-Proxy 的优势在于对异构语言的支持，以及为 DBA 提供可操作入口。</li></ul><p><img data-src="../../../asset/2025/12/sharding-sphere-12.png"></p><h4 id="ShardingSphere-Sidecar"><a href="#ShardingSphere-Sidecar" class="headerlink" title="ShardingSphere-Sidecar"></a>ShardingSphere-Sidecar</h4><p>ShardingSphere-Sidecar 是 ShardingSphere 的第三个产品，目前仍然在 <code>规划中</code>。 定位为 Kubernetes 或 Mesos 的云原生数据库代理，以 DaemonSet 的形式代理所有对数据库的访问。通过无中心、零侵入的方案提供与数据库交互的的啮合层，即 Database Mesh，又可称数据网格。 Database Mesh 的关注重点在于如何将分布式的数据访问应用与数据库有机串联起来，它更加关注的是交互，是将杂乱无章的应用与数据库之间的交互进行有效地梳理。使用 Database Mesh，访问数据库的应用和数据库终将形成一个巨大的网格体系，应用和数据库只需在网格体系中对号入座即可，它们都是被啮合层所治理的对象。</p><p><img data-src="../../../asset/2025/12/sharding-sphere-13.png"></p><div id="readmore-expansion" class="pjax"></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script data-pjax="" src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script data-pjax="">var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),allowMobile=!1;if(!isMobile||isMobile&&allowMobile)try{var plugin=new ReadmorePlugin;plugin.init({type:"hexo",id:"readmore-container",name:"全栈技术驿站",blogId:"96641-5333172926158-056",qrcode:"https://www.techgrow.cn/img/wx_mp_qr.png",keyword:"Tech",random:"1",height:"auto",expires:"365",lockToc:"yes",interval:"30",baseUrl:"",execute:"yes",tocSelector:""})}catch(e){console.warn("readmore plugin occurred error: "+e.name+" | "+e.message)}</script></div><footer class="post-footer"><div class="reward-container"><div>支持一根棒棒糖！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/8bb72991.html" title="ShardingSphere-JDBC 入门教程之一">https://www.techgrow.cn/posts/8bb72991.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎添加博主微信，请备注 "博客"，届时会邀请您加入百人微信群</span><br> <img src="/img/wx_account_qr.png"></div></div></div><div class="post-tags"><a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag"><i class="fa fa-tag"></i> 微服务</a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag"><i class="fa fa-tag"></i> 分布式</a><a href="/tags/ORM/" rel="tag"><i class="fa fa-tag"></i> ORM</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/f5674448.html" rel="prev" title="C++ 进阶基础之十一"><i class="fa fa-angle-left"></i> C++ 进阶基础之十一</a></div><div class="post-nav-item"> <a href="/posts/c61757ff.html" rel="next" title="Kafka 入门教程之四">Kafka 入门教程之四<i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> Copyright © 2018 – <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">2.3m</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 ≈</span> <span title="站点阅读时长">34:41</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & Docker | "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="beian"> <span><img src="/img/gonganbeian.png" alt=""></span> <span><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤ICP备 19024664号-1</a></span> <span>|&nbsp;</span> <span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302004035" rel="external nofollow" target="_blank">粤公网安备 44011302004035号</a></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div> <a href="https://github.com/rqh656418510" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="external nofollow" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script src="/js/third-party/pace.js"></script><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://www.techgrow.cn/lib/darkmode/darkmode@1.5.7.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '30px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js"></script><script>
    var qiniu_domain = "https://oss.techgrow.cn";
    var qiniu_token_url = "https://open.techgrow.cn/api/oss/qiniu/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline.techgrow.cn","cssUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css","commentCount":true,"pageview":false,"copyright":false,"allowUploadImage":true,"libUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.js","locale":{"placeholder":"支持匿名评论啦，若希望及时收到博主的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧"},"dark":"body.darkmode--activated","emoji":["https://www.techgrow.cn/lib/@waline/emojis/1.0.1/weibo"],"meta":["nick","mail","link"],"login":"enable","pageSize":10,"qiniuDebug":false,"qiniuDomain":"https://oss.techgrow.cn","qiniuTokenUrl":"https://open.techgrow.cn/api/oss/qiniu/token/upload","qiniuLibUrl":"https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js","el":"#waline","comment":true,"path":"/posts/8bb72991.html"}</script><link rel="stylesheet" href="https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css"><script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.imageUploader = false;
  }
  else if (CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.imageUploader = qiniuUploadImage;
  } else {
   CONFIG.waline.imageUploader = true;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script><div class="moon-menu"><div class="moon-menu-items"><div id="moon-menu-item-back2bottom" class="moon-menu-item"><i class="fas fa-chevron-down"></i></div><div id="moon-menu-item-back2top" class="moon-menu-item"><i class="fas fa-chevron-up"></i></div></div><div class="moon-menu-button"><svg class="moon-menu-bg"><circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle><circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle></svg><div class="moon-menu-content"><div class="moon-menu-icon"><i class="fas fa-ellipsis-v"></i></div><div class="moon-menu-text"></div></div></div></div><script src="/js/injector.js"></script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),e="ipad"==i.match(/ipad/i),a="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),r="ucweb"==i.match(/ucweb/i),c="android"==i.match(/android/i),l="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(e||a||o||n||r||c||l||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;jQuery(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||jQuery("#aplayer").css("display","block"))}),jQuery(window).on("load",function(){aplayerEnable&&jQuery(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>