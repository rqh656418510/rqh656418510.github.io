<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","width":300,"display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="日常编程开发最佳实践总结。"><meta property="og:type" content="article"><meta property="og:title" content="日常编程开发技巧之二"><meta property="og:url" content="https://www.techgrow.cn/posts/eb118fe2.html"><meta property="og:site_name" content="Clay 的技术博客"><meta property="og:description" content="日常编程开发最佳实践总结。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.techgrow.cn/asset/2020/12/markdown-code-fold.png"><meta property="article:published_time" content="2020-01-04T12:15:41.000Z"><meta property="article:modified_time" content="2021-09-21T14:35:23.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="Linux"><meta property="article:tag" content="开发随笔"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.techgrow.cn/asset/2020/12/markdown-code-fold.png"><link rel="canonical" href="https://www.techgrow.cn/posts/eb118fe2.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/eb118fe2.html","path":"posts/eb118fe2.html","title":"日常编程开发技巧之二"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>日常编程开发技巧之二 | Clay 的技术博客</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn:9360"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术博客" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}</style></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><script src="https://cdn.jsdelivr.net/npm/jquery@1.11.0/dist/jquery.min.js"></script><script data-pjax>!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><script data-ad-client="ca-pub-4014850419768221" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/color-thief-don@2.0.2/src/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=$("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=$("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}$(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://api.techgrow.cn:9080/wx/sdk/signature?url="+a+"&noncestr="+i+"&timestamp="+r;$.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt></div><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术博客</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn:9360/ui/login?lng=zh-cn" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">323</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">39</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → &#x2F;sitemap.xml"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div> <a href="https://github.com/rqh656418510" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/eb118fe2.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"><meta itemprop="description" content="专注于 Java、前端、移动端、微服务、分布式系统、数据库、系统架构、人工智能、大数据、云计算、物联网、虚拟化学习的技术博客。"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 日常编程开发技巧之二</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-01-04 20:15:41" itemprop="dateCreated datePublished" datetime="2020-01-04T20:15:41+08:00">2020-01-04</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-09-21 22:35:23" itemprop="dateModified" datetime="2021-09-21T22:35:23+08:00">2021-09-21</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/eb118fe2.html#waline-comments" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" id="/posts/eb118fe2.html" data-xid="/posts/eb118fe2.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><blockquote><p><strong>Centos 7 卸载系统自带的 NodeJs</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看已安装的npm</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rpm -qa|grep npm</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看已安装的nodejs</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rpm -qa|grep nodejs</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum -y remove nodejs npm</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除残留文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf ~/.npm</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf ~/.npmrc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -f /usr/bin/npm</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -f /usr/bin/node</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf /usr/lib/node_modules</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Linux 批量替换文件内容</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 命令格式：sed -i <span class="string">"s/查找字段/替换字段/g"</span> `grep 查找字段 -rl 路径`</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 为了不区分大小写匹配搜索，可以使用 I 参数</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">'s/unix/linux/gI'</span> sed-test.txt</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将当前目录下所有文件中的字符串oldstring替换为newstring</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed -i <span class="string">"s/oldstring/newstring/g"</span> `ls`</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找当前目录下所有后缀为md的文件，并将文件中的字符串oldstring替换为newstring</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed -i <span class="string">"s/oldstring/newstring/g"</span> `find . -name <span class="string">"*.md"</span>`</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 当搜索和替换含分隔符的字符串时，需要用反斜杠 \ 来取消转义</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">"s/\/bin\/bash/\/usr\/bin\/fish/g"</span> sed-test.txt</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Linux 删除文件中的某行内容</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 删除文件中的某行内容</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed -i <span class="string">'/hello/d'</span> abc.txt</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找当前目录下所有后缀为txt的文件，并批量删除文件中的某行内容</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> find . -<span class="built_in">type</span> f -iname <span class="string">"*.txt"</span> | xargs -I {} sed -i <span class="string">'/hello/d'</span> {}</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Linux 批量替换文件名中的字符串</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 假设原文件名是“stu_102999_5_finished.jpg”，需要替换字符串<span class="string">"_finished"</span>为<span class="string">""</span>空字符串</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 方法一：使用rename改名(支持中文特殊字符的替换)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> rename <span class="string">"_finished"</span> <span class="string">""</span> *.jpg</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用rename批量改名</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> find . -name <span class="string">"*.avi"</span> | xargs -I {} rename <span class="string">"xxx"</span> <span class="string">""</span> {}</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 方法二：<span class="keyword">for</span>循环结合sed替换</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">for</span> file <span class="keyword">in</span> `ls *.jpg`;<span class="keyword">do</span> mv <span class="variable">$file</span> `<span class="built_in">echo</span> <span class="variable">$file</span>|sed <span class="string">'s/_finished//g'</span>`;<span class="keyword">done</span>;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 方法三：<span class="keyword">for</span>循环加变量部分截取</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">for</span> file <span class="keyword">in</span> `ls *.jpg`;<span class="keyword">do</span> mv <span class="variable">$file</span> `<span class="built_in">echo</span> <span class="variable">${file%_finished*}</span>.jpg`;<span class="keyword">done</span>;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 方法四：ls结合awk，输出交给bash执行</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls *.jpg |awk -F <span class="string">"_finished"</span> <span class="string">'{print "mv "$0" "$1$2""}'</span>|bash</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Linux 搜索文件里面的内容</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在单个文件中搜索内容，区分大小写</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> grep <span class="string">'keyword'</span> filename</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在单个文件中搜索内容，忽略区分大小写</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> grep -i <span class="string">'keyword'</span> filename</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在多个文件中搜索内容，忽略区分大小写</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> grep -i <span class="string">'keyword'</span> filename1 filename2 filename3</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 搜索一个目录下所有文件里面的内容，忽略区分大小写</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> find . -<span class="built_in">type</span> f -name <span class="string">"*"</span> | xargs grep -i <span class="string">"keyword"</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 搜索一个目录下后缀为 .properties 的文件里面的内容，忽略区分大小写</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> find . -<span class="built_in">type</span> f -name <span class="string">"*.properties"</span> | xargs grep -i <span class="string">"keyword"</span></span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>FFmpeg 常用命令</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将flv格式的视频转换为mp4格式</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ffmpeg -i xxxxx.flv xxxxx.mp4</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 按时间戳截取视频片段</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ffmpeg  -i ./SN.mp4 -vcodec copy -acodec copy -ss 00:00:00 -to 00:00:05 ./cutout1.mp4 -y</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Hexo 创建草稿</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建草稿，默认会在<span class="built_in">source</span>/_drafts目录下生成first-draft.md文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hexo new draft <span class="string">"first-draft"</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提示：草稿不会被显示在任何页面上，链接也访问不到，也就是说如果想把某一篇文章移除显示，又不舍得删除，可以尝试把它移动到<span class="built_in">source</span>/_drafts目录之中</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果希望强行预览草稿，可以更改_config.yml配置文件中的以下参数</span></span><br><span class="line">render_drafts: true</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者，使用如下方式启动server后预览草稿</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hexo server --drafts</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将草稿转成正式文章</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hexo publish <span class="string">"first-draft"</span></span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Linux 压缩 Jpeg 图片</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装软件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum install -y jpegoptim</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定图片压缩后的大小</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> jpegoptim --size=520k pic.jpeg</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定图片压缩质量</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> jpegoptim -m80 pic.jpg --dest pic-2.jpg</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 批量压缩图片</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> find . -name <span class="string">"*.jpg"</span> | xargs jpegoptim</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Linux 压缩 Png 图片</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装软件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum install -y optipng</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 压缩图片</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> optipng pic.png -out pic-2.png</span></span><br></pre></td></tr></tbody></table></figure><p><a target="_blank" rel="external nofollow" href="https://github.com/bugwhine/lookbusy">https://github.com/bugwhine/lookbusy</a></p><blockquote><p><strong>卸载 UrBackup 服务</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 提示：UrBackup的服务之前是通过手动编译的方式来安装</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找UrBackup的自启动服务</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> systemctl list-unit-files --<span class="built_in">type</span>=service | grep enabled | grep urbackup</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止UrBackup的自启动服务</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> systemctl stop urbackup-server.service</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> systemctl <span class="built_in">disable</span> urbackup-server.service</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除UrBackup的日志文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf /var/<span class="built_in">log</span>/urbackup.log</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除UrBackup的安装文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf /usr/<span class="built_in">local</span>/var/urbackup</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf /usr/<span class="built_in">local</span>/share/urbackup</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf /usr/<span class="built_in">local</span>/bin/urbackupsrv</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除UrBackup的配置文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf /etc/default/urbackupsrv</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf /etc/logrotate.d/urbackupsrv</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf /etc/systemd/system/urbackup-server.service</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查漏补缺，将搜索到的文件全部删除掉</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> find / -<span class="built_in">type</span> d -iname <span class="string">'urbackup'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> find / -<span class="built_in">type</span> f -iname <span class="string">'urbackupsrv'</span></span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Github 搜索技巧</strong></p></blockquote><p>Github 官方的<a target="_blank" rel="external nofollow" href="https://help.github.com/en/github/searching-for-information-on-github/understanding-the-search-syntax">搜索语法介绍</a>，常用搜索示例如下，当同时使用多个搜索参数时，使用” 空格” 符隔开不同的参数</p><ul><li>in:name spring // 搜索名字中带有”spring” 的项目</li><li> in:readme spring // 搜索 readme 中带有”spring” 的项目</li><li> in:description spring // 搜索描述中带有”spring” 的项目</li><li> stars:&gt;1000 // 搜索 stars&gt;1000 的项目</li><li> forks:&gt;1000 // 搜索 forks&gt;1000 的项目</li><li> pushed:&gt;2020-01-15 // 搜索最近更新于 2020 年 1 月 15 日之后的项目</li><li> language:Python // 搜索 Python 的项目</li></ul><blockquote><p><strong>Linux 查看硬盘转数</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载sg3_utils工具的压缩包，官网地址：http://sg.danny.cz/sg/sg3_utils.html</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget http://sg.danny.cz/sg/p/sg3_utils-1.45.tar.xz</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tar -xvf sg3_utils-1.45.tar.xz</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入解压目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> sg3_utils-1.45</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译安装</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ./configure</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看硬盘转数</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sg_vpd --page=0xb1 /dev/sde</span></span><br><span class="line">Nominal rotation rate: 7200 rpm</span><br><span class="line">Nominal form factor: 3.5 inch</span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Linux 使用 Sysbench 进行压测</strong></p></blockquote><p>常用的压测工具：ab、stress、sysbench、webbench、jmeter。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 压测CPU性能（单核、四核、八核）</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench --<span class="built_in">test</span>=cpu --num-threads=1 --max-requests=10000 run</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench --<span class="built_in">test</span>=cpu --num-threads=4 --max-requests=100000 run</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench --<span class="built_in">test</span>=cpu --num-threads=8 --max-requests=100000 run</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 压测CPU性能（单核、四核、八核），cpu-max-prime 是素数生成数量的上限，threads 是线程数，time 是运行的时间（秒），event 是达到上限的次数（默认值为0，表示不限制上限次数）</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench cpu --cpu-max-prime=20000 --threads=1 --time=10 run</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench cpu --cpu-max-prime=20000 --threads=4 --time=10 run</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench cpu --cpu-max-prime=20000 --threads=8 --time=10 run</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 压测内存性能（随机读写、连续读写）</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench --<span class="built_in">test</span>=memory --memory-block-size=1K --memory-total-size=1G --memory-access-mode=rnd  run</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench --<span class="built_in">test</span>=memory --memory-block-size=1K --memory-total-size=1G --memory-access-mode=seq  run</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 压测八线程的共享线程锁</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench --<span class="built_in">test</span>=threads --num-threads=1000 --thread-yields=1000 --thread-locks=8 run</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 压测互斥锁</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench --<span class="built_in">test</span>=mutex --mutex-num=4096 --mutex-locks=50000 --mutex-loops=10000  run</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 压测磁盘IO（随机读写、连续读写）</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench --<span class="built_in">test</span>=fileio --file-num=2 --file-total-size=64M --file-test-mode=rndwr run</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sysbench --<span class="built_in">test</span>=fileio --file-num=2 --file-total-size=64M --file-test-mode=seqrewr run</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>CRT 格式证书转为 PEM 格式证书</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl x509 -<span class="keyword">in</span> example.com.crt -out example.com.pem -outform PEM</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>系统端口号冲突排查</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看当前系统各服务占用的端口号</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> netstat -lntup</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看占用8080端口的服务</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> netstat -anp|grep 8080</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> netstat -aon|grep 8080</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Centos 6、7 的服务类相关命令</strong></p></blockquote><ul><li><p><strong>Centos 6</strong></p><ul><li>注册在系统中的标准化程序</li><li>统一的管理方式（常用方法）<ul><li>service 服务名 start</li><li>service 服务名 stop</li><li>service 服务名 restart</li><li>service 服务名 status</li></ul></li><li> 查看服务的方法： <code>/etc/init.d/服务名</code></li><li>通过 chkconfig 命令管理服务自启动<ul><li>查看自启动的服务： <code>chkconfig --list|grep xxx</code></li><li>启用服务自启动： <code>chkconfig --level 5 服务名 on</code></li><li>关闭服务自启动： <code>chkconfig --level 5 服务名 off</code></li></ul></li></ul></li><li><p><strong>Centos 7</strong></p><ul><li>注册在系统中的标准化程序</li><li>统一的管理方式（常用方法）<ul><li>systemctl start 服务名（xxx.service）</li><li>systemctl stop 服务名（xxx.service）</li><li>systemctl restart 服务名（xxx.service）</li><li>systemctl reload 服务名（xxx.service）</li><li>systemctl status 服务名（xxx.service）</li></ul></li><li>查看服务的方法： <code>/usr/lib/systemd/system/服务名</code></li><li>查看服务的命令<ul><li><code>systemctl list-unit-files | grep service_name</code></li><li><code>systemctl --type service | grep service_name</code></li></ul></li><li>通过 systemctl 命令管理服务自启动<ul><li>启用服务自启动： <code>systemctl enable service_name</code></li><li>关闭服务自启动： <code>systemctl disable service_name</code></li></ul></li></ul></li></ul><blockquote><p><strong>Centos7 管理不同版本的 JDK</strong></p></blockquote><p><code>/etc/alternatives/</code> 目录存放着系统默认命令的链接符，而 <code>update-alternatives</code> 是 Linux 系统中专门维护系统命令链接符的工具，通过它可以很方便地设置系统默认使用哪个命令、哪个软件版本。例如，在系统中同时安装了 Open JDK 和 Oracle JDK（两者都通过 RPM 包安装），而实际又希望系统默认使用的是 Oracle JDK，此时就可以通过 <code>update-alternatives</code> 很方便地实现。当执行以下命令后，根据输出的提示信息，直接输入希望被系统默认使用的选项的编号即可；命令执行完后，可以看到 <code>/etc/alternatives/</code> 目录下 Java 相关的链接符发生了改变。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> update-alternatives --config java</span></span><br><span class="line"></span><br><span class="line">共有 3 个提供“java”的程序。</span><br><span class="line"></span><br><span class="line">  选项    命令</span><br><span class="line">-----------------------------------------------</span><br><span class="line">   1           /usr/java/jdk1.8.0_102/jre/bin/java</span><br><span class="line">   2           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.272.b10-1.el7_9.x86_64/jre/bin/java)</span><br><span class="line">*+ 3           /usr/java/jdk-11.0.9/bin/java</span><br><span class="line"></span><br><span class="line">按 Enter 保留当前选项[+]，或者键入选项编号：</span><br></pre></td></tr></tbody></table></figure><p>特别注意的是，如果 JDK 是通过解压的方式来安装的（非 RPM 包安装），那么就只能通过手动配置系统的 JDK 环境变量来替代 <code>update-alternatives</code> 命令的功能，具体可以参考以下配置：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 编辑配置文件，添加对应的JDK环境变量</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> vim /etc/profile</span></span><br><span class="line">JAVA_HOME=/usr/java/jdk1.8.0_102</span><br><span class="line">JRE_HOME=/usr/java/jdk1.8.0_102/jre</span><br><span class="line">PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</span><br><span class="line">CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib</span><br><span class="line">export JAVA_HOME JRE_HOME PATH CLASSPATH</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使配置文件生效</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> /etc/profile</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Debian 9（Stretch）更换阿里云镜像源</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 方法一：不依赖任何文本编辑器</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 备份</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp /etc/apt/sources.list /etc/apt/backup.sources.list</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将配置信息写入文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"deb http://mirrors.aliyun.com/debian/ stretch main non-free contrib"</span> &gt; /etc/apt/sources.list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"deb-src http://mirrors.aliyun.com/debian/ stretch main non-free contrib"</span> &gt;&gt; /etc/apt/sources.list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"deb http://mirrors.aliyun.com/debian-security stretch/updates main"</span> &gt;&gt; /etc/apt/sources.list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"deb-src http://mirrors.aliyun.com/debian-security stretch/updates main"</span> &gt;&gt; /etc/apt/sources.list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"deb http://mirrors.aliyun.com/debian/ stretch-updates main non-free contrib"</span> &gt;&gt; /etc/apt/sources.list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"deb-src http://mirrors.aliyun.com/debian/ stretch-updates main non-free contrib"</span> &gt;&gt; /etc/apt/sources.list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"deb http://mirrors.aliyun.com/debian/ stretch-backports main non-free contrib"</span> &gt;&gt; /etc/apt/sources.list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"deb-src http://mirrors.aliyun.com/debian/ stretch-backports main non-free contrib"</span> &gt;&gt; /etc/apt/sources.list</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 方法二：依赖Vi、Vim等文本编辑器</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 备份</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp /etc/apt/sources.list /etc/apt/backup.sources.list</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 清空文件内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">""</span> &gt; /etc/apt/sources.list</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加以下配置信息到文件中</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> vi /etc/apt/sources.list</span></span><br><span class="line">deb http://mirrors.aliyun.com/debian/ stretch main non-free contrib</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian/ stretch main non-free contrib</span><br><span class="line">deb http://mirrors.aliyun.com/debian-security stretch/updates main</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian-security stretch/updates main</span><br><span class="line">deb http://mirrors.aliyun.com/debian/ stretch-updates main non-free contrib</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian/ stretch-updates main non-free contrib</span><br><span class="line">deb http://mirrors.aliyun.com/debian/ stretch-backports main non-free contrib</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian/ stretch-backports main non-free contrib</span><br></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 更新软件索引（必须）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> apt-get update</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 升级系统所有软件（非必须）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> apt-get upgrade</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 升级系统版本（非必须）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> apt-get dist-upgrade</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Ubuntu 20.4 LTS 更换阿里镜像源</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 备份</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp /etc/apt/sources.list /etc/apt/sources.list.bak</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 清空文件内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">""</span> &gt; /etc/apt/sources.list</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加以下配置信息到文件中</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> vim /etc/apt/sources.list</span></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更新软件索引</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> apt-get update</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Markdown 折叠代码语法</strong></p></blockquote><ul><li><code>code：</code>指定代码块</li><li><code>details：</code>折叠语法标签</li><li><code>summary</code>：折叠语法展示的摘要</li><li><code>pre：</code>以原有格式显示元素内的文字是已经格式化的文本</li></ul><p><img data-src="../../../asset/2020/12/markdown-code-fold.png" alt="markdown-code-fold"></p><blockquote><p><strong>Centos7 清除命令历史记录、登录信息</strong></p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 清除命令历史记录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> &gt; .bash_history</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">history</span> -cw</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证清除效果</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">history</span></span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 清除登录信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo sh -c <span class="string">'echo &gt; /var/log/wtmp'</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo sh -c <span class="string">'echo &gt; /var/log/btmp'</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo sh -c <span class="string">'echo &gt; /var/log/lastlog'</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo sh -c <span class="string">'echo &gt; /var/log/secure'</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证清除效果</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> last</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>配置阿里巴巴的 DNS 服务</strong></p></blockquote><p>域名系统（服务）协议（DNS）是一种分布式网络目录服务，主要用于域名与 IP 地址的相互转换，以及控制因特网的电子邮件的发送。在 Linux 服务器上快速配置阿里巴巴 DNS 服务的方法如下：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 编辑系统配置文件，只需要添加以下两行内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> vim /etc/resolv.conf</span></span><br><span class="line"></span><br><span class="line">nameserver 223.5.5.5</span><br><span class="line">nameserver 223.6.6.6</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启网络服务</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> service network restart</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>模拟 CPU 高负载</strong></p></blockquote><ul><li>Lookbusy 的安装，详见 <a target="_blank" rel="external nofollow" href="http://www.devin.com/lookbusy/download/">Lookbusy 官网</a></li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget http://www.devin.com/lookbusy/download/lookbusy-1.4.tar.gz</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tar -xvf lookbusy-1.4.tar.gz</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入解压目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> lookbusy-1.4</span></span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 预配置</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ./configure</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make -j4</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make install</span></span><br></pre></td></tr></tbody></table></figure><ul><li>Lookbusy 的使用</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 让所有CPU核心的使用率都是30%</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> lookbusy -c 30</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 让两个CPU核心的使用率为30%</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> lookbusy -n 2 -c 30</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 让所有CPU核心的使用率在60%-70%上下浮动</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> lookbusy -c 60-70 -r curve</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 让所有CPU核心的使用率在20%-80%之间，周期为24小时，在14点达到峰值</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> lookbusy --cpu-mode curve --cpu-curve-peak 14h -c 20-80</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 让所有CPU核心的使用率在20%-30%之间，周期为60分钟，在30分钟达到峰值</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> lookbusy --cpu-mode curve --cpu-curve-period 60m --cpu-curve-peak 30m -c 20-30</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>Debian/Ubuntu 安装 GCC 与 G++</strong></p></blockquote><p><code>build-essential</code> 是 C/C++ 的开发包，包含了 <code>gcc</code>、<code>g++</code>、<code>make</code>、<code>gdb</code> 和 <code>libc</code> 等工具，执行下面的命令安装即可：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> apt-get -y install build-essential</span></span><br></pre></td></tr></tbody></table></figure></div><footer class="post-footer"><div class="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/eb118fe2.html" title="日常编程开发技巧之二">https://www.techgrow.cn/posts/eb118fe2.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎加入微信群</span><br> <img src="/img/wx-group-qr-technology.png"></div></div></div><div class="post-tags"><a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a><a href="/tags/%E5%BC%80%E5%8F%91%E9%9A%8F%E7%AC%94/" rel="tag"><i class="fa fa-tag"></i> 开发随笔</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/35766a62.html" rel="prev" title="Nacos 入门教程 - 配置管理中级篇"><i class="fa fa-chevron-left"></i> Nacos 入门教程 - 配置管理中级篇</a></div><div class="post-nav-item"> <a href="/posts/f30bc89b.html" rel="next" title="Hexo 插件开发">Hexo 插件开发<i class="fa fa-chevron-right"></i></a></div></div><div style="text-align:center"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4014850419768221" data-ad-slot="7586134725" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></footer></article></div><div class="comments" id="waline-comments"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2018 – <span itemprop="copyrightYear">2022</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">629k</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 &asymp;</span> <span title="站点阅读时长">9:32</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & NexT on Docker： "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="beian"><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤ICP备19024664号</a></div></div></footer><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-ph3Dk89VmuTVXG6x/RDzk53SU9LPdAh1tpv0UvnDZ2I="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"/lib/mermaid/dist/mermaid.min.js","integrity":"sha256-QmSAc2kIaUjleIJ46X7qPW2zrpCbXlMz3YIGgWpQ1Jo="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '32px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://unpkg.com/qiniu-js@3.3.1/dist/qiniu.min.js"></script><script>
    var qiniu_domain = "https://qiniu.techgrow.cn";
    var qiniu_token_url = "https://api.techgrow.cn:9080/qiniu/sdk/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://waline.techgrow.cn:9360","placeholder":"支持匿名评论啦，若希望及时收到作者的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧","pageSize":10,"visitor":false,"comment_count":true,"requiredMeta":[],"copyright":false,"allowUploadImage":true,"login":"","dark":"body.darkmode--activated","meta":["nick","mail","link"],"libUrl":"https://cdn.jsdelivr.net/npm/@waline/client@1.5.2/dist/Waline.min.js","qiniuDebug":false,"qiniuDomain":"https://qiniu.techgrow.cn","qiniuTokenUrl":"https://api.techgrow.cn:9080/qiniu/sdk/token/upload","avatar":"robohash","el":"#waline-comments","path":"/posts/eb118fe2.html"}</script><script>
document.addEventListener('page:loaded', () => {
  if(!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.uploadImage = false;
  }
  else if(CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.uploadImage = qiniuUploadImage;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => {
    new Waline(CONFIG.waline);
  });
});
</script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),a="ipad"==i.match(/ipad/i),o="iphone os"==i.match(/iphone os/i),e="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),c="ucweb"==i.match(/ucweb/i),l="android"==i.match(/android/i),r="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(a||o||e||n||c||l||r||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;$(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||$("#aplayer").css("display","block"))}),$(window).load(function(){aplayerEnable&&$(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>