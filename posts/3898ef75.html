<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/pace-js/themes/blue/pace-theme-minimal.css"><script src="/lib/pace-js/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="本文主要介绍 Linux 服务器的性能诊断工具。"><meta property="og:type" content="article"><meta property="og:title" content="Linux 服务器的性能诊断工具"><meta property="og:url" content="https://www.techgrow.cn/posts/3898ef75.html"><meta property="og:site_name" content="Clay 的技术空间"><meta property="og:description" content="本文主要介绍 Linux 服务器的性能诊断工具。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.techgrow.cn/asset/2024/04/linux-command-top.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2024/03/linux-command-vmstat-0.png"><meta property="article:published_time" content="2024-04-11T14:13:45.000Z"><meta property="article:modified_time" content="2024-04-11T14:13:45.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="Linux"><meta property="article:tag" content="开发工具"><meta property="article:tag" content="并发编程"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.techgrow.cn/asset/2024/04/linux-command-top.png"><link rel="canonical" href="https://www.techgrow.cn/posts/3898ef75.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/3898ef75.html","path":"posts/3898ef75.html","title":"Linux 服务器的性能诊断工具"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Linux 服务器的性能诊断工具 | Clay 的技术空间</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false,"measure_protocol_api_secret":null}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn"><link rel="stylesheet" type="text/css" href="/css/injector/main.css"><link rel="preload" as="style" href="/css/injector/light.css"><link rel="preload" as="style" href="/css/injector/dark.css"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术空间" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion"><script src="/lib/jquery/dist/jquery.min.js"></script><script data-pjax="">!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><link rel="stylesheet" href="/lib/aplayer/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="/lib/aplayer/dist/APlayer.min.js"></script><script src="/lib/aplayer/dist/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=jQuery("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=jQuery("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}jQuery(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://open.techgrow.cn/app/api/wechat/js/signature?url="+a+"&noncestr="+i+"&timestamp="+r;jQuery.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt=""></div><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术空间</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-readingnotes"><a href="https://www.techgrow.cn/reading/" rel="section"><i class="fa fa-book-open-reader fa-fw"></i>读书笔记</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn/" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%95%B4%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD"><span class="nav-text">查看整机系统性能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#top"><span class="nav-text">top</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#htop"><span class="nav-text">htop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#uptime"><span class="nav-text">uptime</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B-CPU-%E4%BF%A1%E6%81%AF"><span class="nav-text">查看 CPU 信息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#vmstat"><span class="nav-text">vmstat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mpstat"><span class="nav-text">mpstat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pidstat"><span class="nav-text">pidstat</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%86%85%E5%AD%98%E4%BF%A1%E6%81%AF"><span class="nav-text">查看内存信息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#free"><span class="nav-text">free</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%A1%AC%E7%9B%98%E4%BF%A1%E6%81%AF"><span class="nav-text">查看硬盘信息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#df"><span class="nav-text">df</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iostat"><span class="nav-text">iostat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pidstat-1"><span class="nav-text">pidstat</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF"><span class="nav-text">查看网络信息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#netstat"><span class="nav-text">netstat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ifstat"><span class="nav-text">ifstat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iftop"><span class="nav-text">iftop</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <span class="site-state-item-count">588</span> <span class="site-state-item-name">文章</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">54</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https://github.com/rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → /sitemap.xml" rel="noopener me"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/3898ef75.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术空间"><meta itemprop="description" content="专注于 Java 后端、分布式、微服务、云原生、数据库、系统架构、大数据、云计算、虚拟化、人工智能学习的技术博客。"></span><span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Linux 服务器的性能诊断工具 | Clay 的技术空间"><meta itemprop="description" content="本文主要介绍 Linux 服务器的性能诊断工具。"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Linux 服务器的性能诊断工具</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-04-11 22:13:45" itemprop="dateCreated datePublished" datetime="2024-04-11T22:13:45+08:00">2024-04-11</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/3898ef75.html#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/3898ef75.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.9k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 ≈</span> <span>3 分钟</span></span></div></div></header><div class="post-body post-container" itemprop="articleBody" id="readmore-container"><h2 id="查看整机系统性能"><a href="#查看整机系统性能" class="headerlink" title="查看整机系统性能"></a>查看整机系统性能</h2><h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><p>使用 <code>top</code> 命令，可以查看系统的负载情况，重点关注的是 <code>%CPU</code>、<code>%MEM</code> 、<code>load average</code> 三个性能指标。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><p><img data-src="../../../asset/2024/04/linux-command-top.png"></p><p>这里的 <code>load average: 0.08, 0.10, 0.12</code> 代表系统的平均负载，三个值分别表示系统在过去 1 分钟、5 分钟、15 分钟内的平均负载情况。通常情况下，这个数值越低越好，因为它反映了系统的负载情况，即系统中正在运行或等待运行的进程数量。值得一提的是，在 <code>top</code> 命令运行期间，按下键盘的数字键 <code>1</code>，可以看到每个 CPU 的使用率。</p><h3 id="htop"><a href="#htop" class="headerlink" title="htop"></a>htop</h3><p>使用 <code>htop</code> 命令，通过友好和丰富的界面，可以更方便地查看和管理系统资源的使用情况。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">htop</span><br></pre></td></tr></tbody></table></figure><p><code>htop</code> 是一个交互式的系统监控工具，输出结果的格式如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1  [                                        0.0%]     Tasks: 94, 103 thr; 1 running</span><br><span class="line">2  [                                        0.1%]     Load average: 0.00 0.01 0.05</span><br><span class="line">3  [                                        0.0%]     Uptime: 10 days, 03:45:28</span><br><span class="line">4  [                                        0.0%]</span><br><span class="line">Mem[|||||||||||||||||||||||||||||||||||867/15861MB]</span><br><span class="line">Swp[                                        0/7999MB]</span><br><span class="line"></span><br><span class="line">PID USER      PRI  NI  VIRT   RES   SHR S CPU% MEM%   TIME+  Command</span><br><span class="line">943 root       20   0  1.7G 53968  6720 S  0.0  0.3  0:03.56 systemd</span><br><span class="line">937 root       20   0  1.7G 37500  6348 S  0.0  0.2  0:05.76 (sd-pam)</span><br><span class="line">923 root       20   0  381M 18424 11140 S  0.0  0.1  0:00.38 NetworkManager</span><br><span class="line">911 root       20   0  6.2G 12932  8568 S  0.0  0.1  0:01.14 Xorg</span><br><span class="line">707 root       20   0  1.8G 11920  7476 S  0.0  0.1  0:01.55 dockerd</span><br><span class="line">841 root       20   0  1.6G 11692  4380 S  0.0  0.1  0:00.60 polkitd</span><br><span class="line">918 root       20   0  1.3G  9264  5144 S  0.0  0.1  0:00.56 ModemManager</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure><p>在这个界面中，可以使用键盘上的方向键和其他功能键来浏览进程列表和查看系统资源的使用情况。可以按下 <code>F1</code> 键查看帮助文档，以了解更多操作方法。</p><h3 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h3><p>使用 <code>uptime</code> 命令，可以查看系统的运行时间以及系统的平均负载。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime</span><br></pre></td></tr></tbody></table></figure><p><code>uptime</code> 是系统性能命令的精简版，输出结果的格式如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">15:32:11 up 10 days,  5:17,  2 users,  load average: 0.08, 0.10, 0.12</span><br></pre></td></tr></tbody></table></figure><h2 id="查看-CPU-信息"><a href="#查看-CPU-信息" class="headerlink" title="查看 CPU 信息"></a>查看 CPU 信息</h2><h3 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h3><p>使用 <code>vmstat</code> 命令，可以查看进程、内存、I/O 操作和 CPU 活动等统计信息。一般配合两个数字参数来使用，第一个参数是采样的时间间隔（以秒为单位），第二个参数是采样的次数。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmstat -n 2 3   // 每隔2秒采样一次，一共采样3次</span><br></pre></td></tr></tbody></table></figure><p><code>vmstat</code> 命令的输出结果格式如下：</p><p><img data-src="../../../asset/2024/03/linux-command-vmstat-0.png"></p><p><code>vmstat</code> 命令的输出结果说明如下：</p><ul><li><p><code>procs</code></p><ul><li><code>r</code>: 正在运行或等待运行的进程数量。如果这个数字长期高于 CPU 核心数量，则表示系统可能存在 CPU 瓶颈。</li><li><code>b</code>: 在等待 I/O 操作完成时被阻塞的进程数量。如果这个数字持续增长，则表示可能存在磁盘 I/O、网络 I/O 等瓶颈。</li></ul></li><li><p><code>memory</code>:</p><ul><li><code>swpd</code>: 虚拟内存已使用的大小（单位：KB）。即表示被换出到磁盘的内存大小。</li><li><code>free</code>: 空闲内存的大小（单位：KB）。</li><li><code>buff</code>: 用作缓冲区的内存大小（单位：KB）。缓冲区是用于存储文件系统元数据的内存。</li><li><code>cache</code>: 用作缓存的内存大小（单位：KB）。缓存是用于存储文件数据的内存。</li><li><code>si</code>: 每秒从磁盘交换到内存的数据量（单位：KB）。</li><li><code>so</code>: 每秒从内存交换到磁盘的数据量（单位：KB）。</li></ul></li><li><p><code>swap</code>:</p><ul><li><code>si</code>: 每秒从磁盘交换到内存的数据量（单位：KB）。</li><li><code>so</code>: 每秒从内存交换到磁盘的数据量（单位：KB）。</li></ul></li><li><p><code>io</code>:</p><ul><li><code>bi</code>: 每秒从块设备读取的块数量（单位：blocks/s）。</li><li><code>bo</code>: 每秒写入块设备的块数量（单位：blocks/s）。</li></ul></li><li><p><code>system</code>:</p><ul><li><code>in</code>: 每秒中断的数量，包括时钟中断。</li><li><code>cs</code>: 每秒上下文切换的数量（单位：次 /s）。</li></ul></li><li><p><code>cpu</code></p><ul><li><code>us</code>：用户进程的 CPU 时间占用百分比，us 值越高，用户进程消耗的 CPU 时间越多，如果长期大于 <code>50%</code>，则需要优化程序。</li><li><code>sy</code>：内核进程的 CPU 时间占用百分比。</li><li><code>id</code>：CPU 空闲时间占用百分比。</li><li><code>wa</code>：等待 I/O 操作完成的 CPU 时间占用百分比。</li><li><code>st</code>：被虚拟机监控程序（如 KVM）偷取的 CPU 时间百分比</li></ul></li></ul><div class="admonition warning"><p class="admonition-title">特别注意</p><p>us + sy 的参考值为 <code>80%</code>，如果 us + sy 大于 <code>80%</code>，说明系统可能存在 CPU 资源不足的问题。</p></div><h3 id="mpstat"><a href="#mpstat" class="headerlink" title="mpstat"></a>mpstat</h3><p>使用 <code>mpstat</code> 命令，可以查看每个 CPU 的统计信息，包括 CPU 的使用情况、上下文切换、中断等。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mpstat -P ALL 5     // 每隔5秒显示一次每个CPU的统计信息</span><br></pre></td></tr></tbody></table></figure><h3 id="pidstat"><a href="#pidstat" class="headerlink" title="pidstat"></a>pidstat</h3><p>使用 <code>pidstat</code> 命令，可以查看进程的 CPU、内存、I/O 以及上下文切换等资源的使用情况。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pidstat -u 5    // 每隔5秒显示一次所有进程的CPU使用情况</span><br><span class="line">pidstat -u 5 -p 14421    //每隔5秒显示一次进程ID为14421的CPU使用情况</span><br><span class="line">pidstat -u 5 -p 14421 25541    //每隔5秒显示一次进程ID为14421、25541的CPU使用情况</span><br></pre></td></tr></tbody></table></figure><p><code>pidstat</code> 命令的输出结果格式如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">15时06分35秒   UID       PID    %usr %system  %guest    %CPU   CPU  Command</span><br><span class="line">15时06分40秒  1000      5997    0.40    0.40    0.00    0.80    17  java</span><br></pre></td></tr></tbody></table></figure><p><code>pidstat</code> 命令的输出结果说明如下：</p><ul><li><code>PID</code>：进程 ID。</li><li><code>%usr</code>：用户空间的 CPU 使用率，即进程在用户模式下消耗 CPU 的百分比。</li><li><code>%system</code>：内核空间的 CPU 使用率，即进程在内核模式下消耗 CPU 的百分比。</li><li><code>%guest</code>：虚拟 CPU 使用率，即进程运行虚拟 CPU 的时间百分比。</li><li><code>%CPU</code>：进程在所有 CPU 上的 CPU 使用率。</li><li><code>CPU</code>：进程运行的 CPU 编号。</li><li><code>Command</code>：进程的命令名称。</li></ul><h2 id="查看内存信息"><a href="#查看内存信息" class="headerlink" title="查看内存信息"></a>查看内存信息</h2><h3 id="free"><a href="#free" class="headerlink" title="free"></a>free</h3><p>使用 <code>free</code> 命令，可以查看系统内存的使用情况，包括物理内存、交换空间和系统缓存的使用情况。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">free       // 输出的内存大小会以KB为单位显示</span><br><span class="line">free -m    // 输出的内存大小会以MB为单位显示</span><br><span class="line">free -g    // 输出的内存大小会以GB为单位显示</span><br><span class="line">free -h    // 输出的内存大小会自动以人类能看懂的方式（如KB、MB、GB）来显示</span><br></pre></td></tr></tbody></table></figure><p><code>free</code> 命令的输出结果格式如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:       16238752     3190972     8253404      520508     4799376    12177876</span><br><span class="line">Swap:       2097148           0     2097148</span><br></pre></td></tr></tbody></table></figure><p><code>free</code> 命令的输出结果说明如下：</p><ul><li><code>total</code>: 总的物理内存大小。</li><li><code>used</code>: 已经被使用的物理内存大小。</li><li><code>free</code>: 可用的物理内存大小。</li><li><code>shared</code>: 被共享的内存大小，一般为 0。</li><li><code>buff/cache</code>: 用作缓存的内存大小。</li><li><code>available</code>: 可用的内存大小。</li><li><code>Swap total</code>: 交换空间的总大小。</li><li><code>Swap used</code>: 已经被使用的交换空间大小。</li><li><code>Swap free</code>: 可用的交换空间大小。</li></ul><h2 id="查看硬盘信息"><a href="#查看硬盘信息" class="headerlink" title="查看硬盘信息"></a>查看硬盘信息</h2><h3 id="df"><a href="#df" class="headerlink" title="df"></a>df</h3><p>使用 <code>df</code> 命令，可以查看磁盘空间的使用情况，包括磁盘的总空间、已用空间、可用空间以及文件系统的挂载点。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h       // 输出的磁盘空间大小会以人类能看懂的方式（如KB、MB、GB）来显示</span><br></pre></td></tr></tbody></table></figure><h3 id="iostat"><a href="#iostat" class="headerlink" title="iostat"></a>iostat</h3><p>使用 <code>iostat</code> 命令，可以查看磁盘 I/O 活动、磁盘分区的吞吐量和响应时间等。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -xdk 2 3     // 每隔2秒采样一次，一共采样3次</span><br></pre></td></tr></tbody></table></figure><p><code>iostat</code> 命令的输出结果格式如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br><span class="line">sda               0.00    34.63    1.56    2.57    28.16   148.78    85.77     0.91  220.93    5.91  351.07   3.30   1.36</span><br><span class="line">sdb               0.00     0.01    0.41    0.00     4.72     0.04    23.32     0.00    3.06    3.06    1.75   2.75   0.11</span><br></pre></td></tr></tbody></table></figure><p><code>iostat</code> 命令的输出结果说明如下：</p><ul><li><code>Device</code>：磁盘或分区的设备名。</li><li><code>rrqm/s</code>：每秒钟合并的读取请求。</li><li><code>wrqm/s</code>：每秒钟合并的写入请求。</li><li><code>r/s</code>：每秒钟完成的读取请求次数（独立请求）。</li><li><code>w/s</code>：每秒钟完成的写入请求次数（独立请求）。</li><li><code>rkB/s</code>：每秒从磁盘读取的数据量，单位为 KB/s。</li><li><code>wkB/s</code>：每秒写入到磁盘的数据量，单位为 KB/s。</li><li><code>avgrq-sz</code>：平均每个请求的扇区数。</li><li><code>avgqu-sz</code>：平均请求队列长度。</li><li><code>await</code>：平均 I/O 操作等待时间（单位为毫秒）。</li><li><code>r_await</code>：平均读取操作等待时间（单位为毫秒）。</li><li><code>w_await</code>：平均写入操作等待时间（单位为毫秒）。</li><li><code>svctm</code>：平均 I/O 操作服务时间（单位为毫秒）。</li><li><code>%util</code>：设备利用率，即设备在采样周期内的活动时间与周期总时间的比率。</li></ul><div class="admonition warning"><p class="admonition-title">特别注意</p><ul><li><code>awit</code> 的值越小，代表磁盘性能越好。</li><li><code>rkB/s</code> 与 <code>wkB/s</code> 根据系统应用不同会有不同的值，但有规律遵循：长期、超大数据的读写，肯定不正常，必须需要优化程序。</li><li><code>svctm</code> 的值与 <code>await</code> 的值很接近，表示几乎没有 I/O 等待，磁盘性能好。如果 <code>await</code> 的值远高于 <code>svctm</code> 的值，则表示 I/O 队列等待太长，需要优化程序或更换更快的磁盘（如 SSD 硬盘）。</li></ul></div><h3 id="pidstat-1"><a href="#pidstat-1" class="headerlink" title="pidstat"></a>pidstat</h3><p>使用 <code>pidstat</code> 命令，可以查看进程的磁盘 I/O 等统计信息。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pidstat -d -u 5                   // 每隔5秒显示一次所有进程的磁盘I/O情况</span><br><span class="line">pidstat -d -u 5 -p 14421          // 每隔5秒显示一次进程ID为14421的磁盘I/O情况</span><br><span class="line">pidstat -d -u 5 -p 14421 25541    // 每隔5秒显示一次进程ID为14421、25541的磁盘I/O情况</span><br></pre></td></tr></tbody></table></figure><p><code>pidstat</code> 命令的输出结果格式如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">16时24分13秒   UID       PID   kB_rd/s   kB_wr/s kB_ccwr/s  Command</span><br><span class="line">16时24分15秒  1000      5997      0.00      0.00      0.00  java</span><br></pre></td></tr></tbody></table></figure><p><code>pidstat</code> 命令的输出结果说明如下：</p><ul><li><code>UID</code>：进程所属用户的用户 ID。</li><li><code>PID</code>：进程 ID。</li><li><code>kB_rd/s</code>：每秒从磁盘读取的数据量（单位为 KB）。</li><li><code>kB_wr/s</code>：每秒写入到磁盘的数据量（单位为 KB）。</li><li><code>kB_ccwr/s</code>：每秒取消预读取的数据量（单位为 KB）。</li><li><code>Command</code>：进程的命令名称。</li></ul><h2 id="查看网络信息"><a href="#查看网络信息" class="headerlink" title="查看网络信息"></a>查看网络信息</h2><h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><p>使用 <code>netstat</code> 命令，可以查看网络连接、路由表、接口统计信息等。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">netstat -a  // 显示所有活动的网络连接</span><br><span class="line">netstat -l  // 显示所有监听端口</span><br><span class="line">netstat -t  // 显示所有 TCP 连接</span><br><span class="line">netstat -u  // 显示所有 UDP 连接</span><br><span class="line">netstat -p  // 显示进程和 PID</span><br><span class="line">netstat -r  // 显示路由表</span><br><span class="line">netstat -i  // 显示接口统计信息</span><br><span class="line">netstat -n  // 以数字形式显示网络连接和路由信息，忽略对 IP 地址和端口号的主机名解析</span><br><span class="line">netstat -tuln | grep 3306  // 显示所有监听的 TCP 连接，并筛选出其中监听在本地端口 3306 上的连接</span><br><span class="line">netstat -aon|grep 3306  // 显示所有的网络连接和监听端口，并筛选出本地端口为 3306 的连接，并显示与之相关联的进程 ID</span><br></pre></td></tr></tbody></table></figure><p><code>netstat</code> 命令的输出结果格式如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1234/sshd           </span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      5678/sendmail       </span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      9012/httpd          </span><br><span class="line">udp        0      0 0.0.0.0:68              0.0.0.0:*                           3456/dhclient       </span><br><span class="line">udp        0      0 0.0.0.0:123             0.0.0.0:*                           7890/ntpd           </span><br></pre></td></tr></tbody></table></figure><h3 id="ifstat"><a href="#ifstat" class="headerlink" title="ifstat"></a>ifstat</h3><p>使用 <code>ifstat</code> 命令，可以查看每个网络接口的输入和输出流量信息。Linux 系统默认是没有 <code>ifstat</code> 命令的，需要自行安装。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifstat         // 查看所有网络接口的流量信息</span><br><span class="line">ifstat eth0    // 查看特定网络接口的流量信息</span><br></pre></td></tr></tbody></table></figure><p><code>ifstat</code> 命令的输出结果格式如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Interface        RX Pkts/Rate    TX Pkts/Rate    RX Data/Rate    TX Data/Rate  </span><br><span class="line">                 RX Errs/Drop    TX Errs/Drop    RX Over/Rate    TX Coll/Rate  </span><br><span class="line">lo                  1175 0          1175 0        103200 0        103200 0      </span><br><span class="line">                       0 0             0 0             0 0             0 0      </span><br><span class="line">eth0                8183 0         24556 0        677082 0        34262K 0      </span><br><span class="line">                       0 0             0 0             0 0             0 0      </span><br><span class="line">eth1                   0 0             0 0             0 0             0 0      </span><br><span class="line">                       0 0             0 0             0 0             0 0   </span><br></pre></td></tr></tbody></table></figure><h3 id="iftop"><a href="#iftop" class="headerlink" title="iftop"></a>iftop</h3><p>使用 <code>iftop</code> 命令，可以实时查看系统的网络连接和流量使用情况。Linux 系统默认是没有 <code>iftop</code> 命令的，需要自行安装。</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iftop            // 查看所有网络接口的实时流量信息</span><br><span class="line">iftop -i eth0    // 查看特定网络接口的实时流量信息</span><br><span class="line">iftop -n         // 查看所有网络接口的实时流量信息，并禁用 DNS 反解析，以加快显示速度</span><br></pre></td></tr></tbody></table></figure><p><code>iftop</code> 命令的输出结果格式如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface: en0</span><br><span class="line">IP address is: 192.168.1.2</span><br><span class="line">MAC address is: 00:1f:f3:6a:3d:97</span><br><span class="line">  1.94Mb         3.89Mb         5.83Mb</span><br></pre></td></tr></tbody></table></figure><p><code>iftop</code> 命令的输出结果说明如下：</p><ul><li><code>iftop</code> 默认每隔 2 秒更新一次数据。</li><li><code>iftop</code> 默认输出 3 列数据，分别表示入站流量、出站流量和总流量。</li></ul><div id="readmore-expansion" class="pjax"></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script data-pjax="" src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script data-pjax="">var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),allowMobile=!1;if(!isMobile||isMobile&&allowMobile)try{var plugin=new ReadmorePlugin;plugin.init({type:"hexo",id:"readmore-container",name:"全栈技术驿站",blogId:"96641-5333172926158-056",qrcode:"https://www.techgrow.cn/img/wx_mp_qr.png",keyword:"Tech",random:"1",height:"auto",expires:"365",lockToc:"yes",interval:"30",baseUrl:"",execute:"yes",tocSelector:""})}catch(e){console.warn("readmore plugin occurred error: "+e.name+" | "+e.message)}</script></div><footer class="post-footer"><div class="reward-container"><div>支持一根棒棒糖！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/3898ef75.html" title="Linux 服务器的性能诊断工具">https://www.techgrow.cn/posts/3898ef75.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎添加博主微信，请备注 "博客"，届时会邀请您加入百人微信群</span><br> <img src="/img/wx_account_qr.png"></div></div></div><div class="post-tags"><a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a><a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" rel="tag"><i class="fa fa-tag"></i> 开发工具</a><a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag"><i class="fa fa-tag"></i> 并发编程</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/1461029e.html" rel="prev" title="C 语言和 C++ 精品电子书资源推荐"><i class="fa fa-angle-left"></i> C 语言和 C++ 精品电子书资源推荐</a></div><div class="post-nav-item"> <a href="/posts/17b04dfd.html" rel="next" title="Java 线程死锁的定位与分析">Java 线程死锁的定位与分析<i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> Copyright © 2018 – <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">1.3m</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 ≈</span> <span title="站点阅读时长">20:26</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & Docker | "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="beian"> <span><img src="/img/gonganbeian.png" alt=""></span> <span><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤 ICP 备 19024664 号</a></span> <span>|&nbsp;</span> <span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302004035" rel="external nofollow" target="_blank">粤公网安备 44011302004035 号</a></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div> <a href="https://github.com/rqh656418510" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="external nofollow" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"/lib/mermaid/dist/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/pace.js"></script><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://www.techgrow.cn/lib/darkmode/darkmode@1.5.7.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '30px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js"></script><script>
    var qiniu_domain = "https://oss.techgrow.cn";
    var qiniu_token_url = "https://open.techgrow.cn/app/api/qiniu/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline.techgrow.cn","cssUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css","commentCount":true,"pageview":false,"copyright":false,"allowUploadImage":true,"libUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.js","locale":{"placeholder":"支持匿名评论啦，若希望及时收到博主的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧"},"dark":"body.darkmode--activated","emoji":["https://www.techgrow.cn/lib/@waline/emojis/1.0.1/weibo"],"meta":["nick","mail","link"],"login":"enable","pageSize":10,"qiniuDebug":false,"qiniuDomain":"https://oss.techgrow.cn","qiniuTokenUrl":"https://open.techgrow.cn/app/api/qiniu/token/upload","qiniuLibUrl":"https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js","el":"#waline","comment":true,"path":"/posts/3898ef75.html"}</script><link rel="stylesheet" href="https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css"><script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.imageUploader = false;
  }
  else if (CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.imageUploader = qiniuUploadImage;
  } else {
   CONFIG.waline.imageUploader = true;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script><div class="moon-menu"><div class="moon-menu-items"><div id="moon-menu-item-back2bottom" class="moon-menu-item"><i class="fas fa-chevron-down"></i></div><div id="moon-menu-item-back2top" class="moon-menu-item"><i class="fas fa-chevron-up"></i></div></div><div class="moon-menu-button"><svg class="moon-menu-bg"><circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle><circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle></svg><div class="moon-menu-content"><div class="moon-menu-icon"><i class="fas fa-ellipsis-v"></i></div><div class="moon-menu-text"></div></div></div></div><script src="/js/injector.js"></script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),e="ipad"==i.match(/ipad/i),a="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),r="ucweb"==i.match(/ucweb/i),c="android"==i.match(/android/i),l="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(e||a||o||n||r||c||l||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;jQuery(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||jQuery("#aplayer").css("display","block"))}),jQuery(window).on("load",function(){aplayerEnable&&jQuery(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>