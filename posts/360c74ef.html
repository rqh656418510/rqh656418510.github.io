<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/pace-js/themes/blue/pace-theme-minimal.css"><script src="/lib/pace-js/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="本文主要介绍 C++ 的进阶基础教程，包括 STL 几大容器的使用，包括 set、multiset、map、multimap 容器等。"><meta property="og:type" content="article"><meta property="og:title" content="C++ 进阶基础之九"><meta property="og:url" content="https://www.techgrow.cn/posts/360c74ef.html"><meta property="og:site_name" content="Clay 的技术空间"><meta property="og:description" content="本文主要介绍 C++ 的进阶基础教程，包括 STL 几大容器的使用，包括 set、multiset、map、multimap 容器等。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.techgrow.cn/asset/2023/12/cpluspus-set-1.png"><meta property="article:published_time" content="2022-07-26T14:55:34.000Z"><meta property="article:modified_time" content="2023-12-11T13:55:34.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="C++"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.techgrow.cn/asset/2023/12/cpluspus-set-1.png"><link rel="canonical" href="https://www.techgrow.cn/posts/360c74ef.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/360c74ef.html","path":"posts/360c74ef.html","title":"C++ 进阶基础之九"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>C++ 进阶基础之九 | Clay 的技术空间</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false,"measure_protocol_api_secret":null}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn"><link rel="stylesheet" type="text/css" href="/css/injector/main.css"><link rel="preload" as="style" href="/css/injector/light.css"><link rel="preload" as="style" href="/css/injector/dark.css"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术空间" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion"><script src="/lib/jquery/dist/jquery.min.js"></script><script data-pjax="">!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><link rel="stylesheet" href="/lib/aplayer/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="/lib/aplayer/dist/APlayer.min.js"></script><script src="/lib/aplayer/dist/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=jQuery("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=jQuery("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}jQuery(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://open.techgrow.cn/api/wechat/js/signature?url="+a+"&noncestr="+i+"&timestamp="+r;jQuery.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt=""></div><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术空间</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-readingnotes"><a href="https://www.techgrow.cn/reading/" rel="section"><i class="fa fa-book-open-reader fa-fw"></i>读书笔记</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn/" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%A7%E7%BA%B2"><span class="nav-text">大纲</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#set-%E4%B8%8E-multiset-%E5%AE%B9%E5%99%A8"><span class="nav-text">set 与 multiset 容器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#set-%E4%B8%8E-multiset-%E5%AE%B9%E5%99%A8%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-text">set 与 multiset 容器的概念</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#set-%E5%AE%B9%E5%99%A8%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-text">set 容器的概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#multiset-%E5%AE%B9%E5%99%A8%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-text">multiset 容器的概念</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#set-%E4%B8%8E-multiset-%E5%AE%B9%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">set 与 multiset 容器的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#set-%E4%B8%8E-multiset-%E7%9A%84%E6%9E%84%E9%80%A0%E4%B8%8E%E8%B5%8B%E5%80%BC"><span class="nav-text">set 与 multiset 的构造与赋值</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-text">默认构造函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E"><span class="nav-text">赋值操作说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E4%B8%8E%E8%B5%8B%E5%80%BC%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">构造与赋值的使用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set-%E4%B8%8E-multiset-%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="nav-text">set 与 multiset 的迭代器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set-%E4%B8%8E-multiset-%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-text">set 与 multiset 的常用操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set-%E4%B8%8D%E5%85%81%E8%AE%B8%E6%8F%92%E5%85%A5%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0"><span class="nav-text">set 不允许插入重复元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set-%E5%AF%B9%E5%85%83%E7%B4%A0%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%E6%93%8D%E4%BD%9C"><span class="nav-text">set 对元素进行排序操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set-%E6%8F%92%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-text">set 插入自定义数据类型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#map-%E5%92%8C-multimap-%E5%AE%B9%E5%99%A8"><span class="nav-text">map 和 multimap 容器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#map-%E5%92%8C-multimap-%E5%AE%B9%E5%99%A8%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-text">map 和 multimap 容器的概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#map-%E5%92%8C-multimap-%E5%AE%B9%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">map 和 multimap 容器的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#map-%E5%92%8C-multimap-%E7%9A%84%E6%9E%84%E9%80%A0%E4%B8%8E%E8%B5%8B%E5%80%BC"><span class="nav-text">map 和 multimap 的构造与赋值</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-1"><span class="nav-text">默认构造函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E-1"><span class="nav-text">赋值操作说明</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#map-%E5%92%8C-multimap-%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-text">map 和 multimap 的常用操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#map-%E5%AF%B9%E5%85%83%E7%B4%A0%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%E6%93%8D%E4%BD%9C"><span class="nav-text">map 对元素进行排序操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#map-%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA-Key"><span class="nav-text">map 使用自定义数据类型作为 Key</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <span class="site-state-item-count">685</span> <span class="site-state-item-name">文章</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">53</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https://github.com/rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → /sitemap.xml" rel="noopener me"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/360c74ef.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术空间"><meta itemprop="description" content="专注于 Java 后端、分布式、微服务、云原生、数据库、系统架构、大数据、云计算、虚拟化、人工智能学习的技术博客。"></span><span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="C++ 进阶基础之九 | Clay 的技术空间"><meta itemprop="description" content="本文主要介绍 C++ 的进阶基础教程，包括 STL 几大容器的使用，包括 set、multiset、map、multimap 容器等。"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> C++ 进阶基础之九</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-07-26 22:55:34" itemprop="dateCreated datePublished" datetime="2022-07-26T22:55:34+08:00">2022-07-26</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-12-11 21:55:34" itemprop="dateModified" datetime="2023-12-11T21:55:34+08:00">2023-12-11</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/360c74ef.html#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/360c74ef.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.8k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 ≈</span> <span>3 分钟</span></span></div></div></header><div class="post-body post-container" itemprop="articleBody" id="readmore-container"><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><ul><li><a href="/posts/dbff2af9.html">C++ 进阶基础之一</a>、<a href="/posts/779107de.html">C++ 进阶基础之二</a>、<a href="/posts/35cd91d3.html">C++ 进阶基础之三</a></li><li><a href="/posts/791ffdcd.html">C++ 进阶基础之四</a>、<a href="/posts/64fd9f88.html">C++ 进阶基础之五</a>、<a href="/posts/62e4578b.html">C++ 进阶基础之六</a></li><li><a href="/posts/9e89901e.html">C++ 进阶基础之七</a>、<a href="/posts/8b87f2be.html">C++ 进阶基础之八</a>、<a href="/posts/360c74ef.html">C++ 进阶基础之九</a></li><li><a href="/posts/98e5b160.html">C++ 进阶基础之十</a>、<a href="/posts/f5674448.html">C++ 进阶基础之十一</a></li></ul><h2 id="set-与-multiset-容器"><a href="#set-与-multiset-容器" class="headerlink" title="set 与 multiset 容器"></a>set 与 multiset 容器</h2><h3 id="set-与-multiset-容器的概念"><a href="#set-与-multiset-容器的概念" class="headerlink" title="set 与 multiset 容器的概念"></a>set 与 multiset 容器的概念</h3><h4 id="set-容器的概念"><a href="#set-容器的概念" class="headerlink" title="set 容器的概念"></a>set 容器的概念</h4><p><strong>set 是一个集合容器，其中所包含的元素是唯一的，集合中的元素会自动按一定的顺序排列。</strong>元素插入过程是按排序规则插入，所以不能指定插入位置。set 的元素不像 map 那样可以同时拥有实值和键值，set 的元素即是键值又是实值。Set 不允许两个元素有相同的键，也不可以通过 set 的迭代器改变 set 元素的值，因为 set 元素值就是其键值，关系到 set 元素的排序规则。如果任意改变 set 元素值，会严重破坏 set 的组织。换句话说 set 的 <code>iterator</code> 是一种 <code>const iterator</code>。set 拥有和 list 某些相同的性质，当对容器中的元素进行插入操作或者删除操作的时候，操作之前所有的迭代器，在操作完成之后依然有效，被删除的那个元素的迭代器必然是一个例外。</p><span id="more"></span><h4 id="multiset-容器的概念"><a href="#multiset-容器的概念" class="headerlink" title="multiset 容器的概念"></a>multiset 容器的概念</h4><p><strong>multiset 的特性及用法和 set 完全相同，唯一的区别在于它允许元素重复。</strong>set 和 multiset 的底层实现都是红黑树，而红黑树是平衡二叉树的一种。二又树就是任何节点最多允许有两个字节点，分别是左子结点和右子节点，如下图所示：</p><p><img data-src="../../../asset/2023/12/cpluspus-set-1.png"></p><div class="admonition note"><p class="admonition-title">总结</p><ul><li>set 采用红黑树变体的数据结构实现，红黑树属于平衡二叉树，在插入操作和删除操作上比 vector 快。</li><li>set 不可以直接存取元素，即不可以使用 <code>at.(pos)</code> 函数和 <code>[]</code> 操作符。</li><li>multiset 与 set 的区别：set 支持唯一键值，每个元素值只能出现一次；而 multiset 中同一值可以出现多次。</li><li>不可以直接修改 set 或 multiset 容器中的元素值，因为这类容器是自动排序的，如果希望修改一个元素值，必须先删除原有的元素，再插入新的元素。</li></ul></div><h3 id="set-与-multiset-容器的使用"><a href="#set-与-multiset-容器的使用" class="headerlink" title="set 与 multiset 容器的使用"></a>set 与 multiset 容器的使用</h3><h4 id="set-与-multiset-的构造与赋值"><a href="#set-与-multiset-的构造与赋值" class="headerlink" title="set 与 multiset 的构造与赋值"></a>set 与 multiset 的构造与赋值</h4><h5 id="默认构造函数"><a href="#默认构造函数" class="headerlink" title="默认构造函数"></a>默认构造函数</h5><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">set&lt;<span class="keyword">int</span>&gt; setInt;         <span class="comment">// 一个存放 int 数据的 set 容器</span></span><br><span class="line">set&lt;<span class="keyword">float</span>&gt; setFloat;     <span class="comment">// 一个存放 float 数据的 set 容器</span></span><br><span class="line">set&lt;string&gt; setString;   <span class="comment">// 一个存放 string 数据的 set 容器</span></span><br><span class="line"></span><br><span class="line">multiset&lt;<span class="keyword">int</span>&gt; mulsetInt;            <span class="comment">// 一个存放 int 数据的 multiset 容器</span></span><br><span class="line">multi set&lt;<span class="keyword">float</span>&gt; multisetFloat;     <span class="comment">// 一个存放 float 数据的 multiset 容器</span></span><br><span class="line">multi set&lt;string&gt; multisetString;   <span class="comment">// 一个存放 string 数据的 multiset 容器</span></span><br></pre></td></tr></tbody></table></figure><h5 id="赋值操作说明"><a href="#赋值操作说明" class="headerlink" title="赋值操作说明"></a>赋值操作说明</h5><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>(<span class="keyword">const</span> set &amp;st);              <span class="comment">// 拷贝构造函数</span></span><br><span class="line">set&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> set &amp;st);   <span class="comment">// 重载等号操作符</span></span><br><span class="line">set.<span class="built_in">swap</span>(st);                    <span class="comment">// 交换两个集合容器</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">multiset</span>(<span class="keyword">const</span> multiset &amp;mst);              <span class="comment">// 拷贝构造函数</span></span><br><span class="line">multiset&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> multiset &amp;mst);   <span class="comment">// 重载等号操作符</span></span><br><span class="line">multiset.<span class="built_in">swap</span>(mst);                         <span class="comment">// 交换两个集合容器</span></span><br></pre></td></tr></tbody></table></figure><h5 id="构造与赋值的使用"><a href="#构造与赋值的使用" class="headerlink" title="构造与赋值的使用"></a>构造与赋值的使用</h5><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="keyword">int</span>&gt; &amp;s)</span> </span>{</span><br><span class="line">    <span class="comment">// 遍历容器</span></span><br><span class="line">    <span class="keyword">for</span> (set&lt;<span class="keyword">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printMultiSet</span><span class="params">(multiset&lt;<span class="keyword">int</span>&gt; &amp;s)</span> </span>{</span><br><span class="line">    <span class="comment">// 遍历容器</span></span><br><span class="line">    <span class="keyword">for</span> (set&lt;<span class="keyword">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ set 构造函数 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 默认构造函数</span></span><br><span class="line">    set&lt;<span class="keyword">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关联式容器，默认按照 Key 从小到大排序</span></span><br><span class="line">    s1.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">    s1.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">    s1.<span class="built_in">insert</span>(<span class="number">9</span>);</span><br><span class="line">    s1.<span class="built_in">insert</span>(<span class="number">4</span>);</span><br><span class="line">    s1.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 拷贝构造函数</span></span><br><span class="line">    set&lt;<span class="keyword">int</span>&gt; s2 = s1;</span><br><span class="line">    <span class="built_in">printSet</span>(s2);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ set 赋值操作 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 赋值操作，重载等号操作符</span></span><br><span class="line">    set&lt;<span class="keyword">int</span>&gt; s3;</span><br><span class="line">    s3 = s1;</span><br><span class="line">    <span class="built_in">printSet</span>(s3);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 赋值操作，将其他容器与本身的元素互换</span></span><br><span class="line">    set&lt;<span class="keyword">int</span>&gt; s4;</span><br><span class="line">    s4.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">    s4.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">    s4.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">    s4.<span class="built_in">swap</span>(s1);</span><br><span class="line">    <span class="built_in">printSet</span>(s1);</span><br><span class="line">    <span class="built_in">printSet</span>(s4);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ multiset 构造函数 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    multiset&lt;<span class="keyword">int</span>&gt; s5;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// multiset 允许插入多个相同的元素</span></span><br><span class="line">    s5.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">    s5.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">    s5.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">    s5.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">    s5.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printMultiSet</span>(s5);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 拷贝构造函数</span></span><br><span class="line">    multiset&lt;<span class="keyword">int</span>&gt; s6 = s5;</span><br><span class="line">    <span class="built_in">printMultiSet</span>(s6);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ multiset 赋值操作 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 赋值操作，重载等号操作符</span></span><br><span class="line">    multiset&lt;<span class="keyword">int</span>&gt; s7;</span><br><span class="line">    s7 = s5;</span><br><span class="line">    <span class="built_in">printMultiSet</span>(s7);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 赋值操作，将其他容器与本身的元素互换</span></span><br><span class="line">    multiset&lt;<span class="keyword">int</span>&gt; s8;</span><br><span class="line">    s8.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">    s8.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">    s8.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">    s8.<span class="built_in">swap</span>(s5);</span><br><span class="line">    <span class="built_in">printMultiSet</span>(s5);</span><br><span class="line">    <span class="built_in">printMultiSet</span>(s8);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">------ set 构造函数 ------</span><br><span class="line">2 3 4 5 9 </span><br><span class="line">2 3 4 5 9 </span><br><span class="line">------ set 赋值操作 ------</span><br><span class="line">2 3 4 5 9 </span><br><span class="line">10 20 30 </span><br><span class="line">2 3 4 5 9 </span><br><span class="line">------ multiset 构造函数 ------</span><br><span class="line">2 2 3 3 5 </span><br><span class="line">2 2 3 3 5 </span><br><span class="line">------ multiset 赋值操作 ------</span><br><span class="line">2 2 3 3 5 </span><br><span class="line">10 20 30 </span><br><span class="line">2 2 3 3 5 </span><br></pre></td></tr></tbody></table></figure><h4 id="set-与-multiset-的迭代器"><a href="#set-与-multiset-的迭代器" class="headerlink" title="set 与 multiset 的迭代器"></a>set 与 multiset 的迭代器</h4><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">set.<span class="built_in">begin</span>();            <span class="comment">// 返回容器中第一个数据的迭代器</span></span><br><span class="line">set.<span class="built_in">end</span>();              <span class="comment">// 返回容器中最后一个数据之后的迭代器</span></span><br><span class="line">set.<span class="built_in">rbegin</span>();           <span class="comment">// 返回容器中倒数第一个元素的迭代器</span></span><br><span class="line">set.<span class="built_in">rend</span>();             <span class="comment">// 返回容器中倒数最后一个元素的后面的迭代器</span></span><br><span class="line"></span><br><span class="line">multiset.<span class="built_in">begin</span>();       <span class="comment">// 返回容器中第一个数据的迭代器</span></span><br><span class="line">multiset.<span class="built_in">end</span>();         <span class="comment">// 返回容器中最后一个数据之后的迭代器</span></span><br><span class="line">multiset.<span class="built_in">rbegin</span>();      <span class="comment">// 返回容器中倒数第一个元素的迭代器</span></span><br><span class="line">multiset.<span class="built_in">rend</span>();        <span class="comment">// 返回容器中倒数最后一个元素的后面的迭代器</span></span><br></pre></td></tr></tbody></table></figure><h4 id="set-与-multiset-的常用操作"><a href="#set-与-multiset-的常用操作" class="headerlink" title="set 与 multiset 的常用操作"></a>set 与 multiset 的常用操作</h4><div class="admonition note"><p class="admonition-title">提示</p><p>multiset 的特性及用法和 set 完全相同，唯一的区别在于它允许元素重复。因此在下述的例子中只介绍 set 的常用操作，而 multiset 的常用操作不再累述。</p></div><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="keyword">int</span>&gt; &amp;s)</span> </span>{</span><br><span class="line">    <span class="comment">// 遍历容器</span></span><br><span class="line">    <span class="keyword">for</span> (set&lt;<span class="keyword">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    cout &lt;&lt; <span class="string">"------ set 插入操作 ------"</span> &lt;&lt; endl;</span><br><span class="line">    set&lt;<span class="keyword">int</span>&gt; s1;</span><br><span class="line">    s1.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">    s1.<span class="built_in">insert</span>(<span class="number">9</span>);</span><br><span class="line">    s1.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">    s1.<span class="built_in">insert</span>(<span class="number">8</span>);</span><br><span class="line">    <span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ set 大小操作 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取容器大小</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"size = "</span> &lt;&lt; s1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断容器是否为空</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"isEmpty = "</span> &lt;&lt; (s1.<span class="built_in">empty</span>() ? <span class="string">"true"</span> : <span class="string">"false"</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ set 查找操作 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查找键 Key 的元素个数，返回结果是 0 或者 1</span></span><br><span class="line">    <span class="keyword">int</span> count = s1.<span class="built_in">count</span>(<span class="number">8</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">"count = "</span> &lt;&lt; count &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查找键 Key 是否存在，若存在，则返回该键的元素的迭代器，若不存在，则返回 set.end() 迭代器</span></span><br><span class="line">    set&lt;<span class="keyword">int</span>&gt;::iterator pos = s1.<span class="built_in">find</span>(<span class="number">8</span>);</span><br><span class="line">    <span class="keyword">if</span> (pos != s1.<span class="built_in">end</span>()) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"found value for "</span> &lt;&lt; *pos &lt;&lt; endl;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"not found value"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回第一个 key &gt;= keyElem 元素的迭代器，若不存在，则返回 set.end() 迭代器</span></span><br><span class="line">    set&lt;<span class="keyword">int</span>&gt;::iterator pos2 = s1.<span class="built_in">lower_bound</span>(<span class="number">8</span>);</span><br><span class="line">    <span class="keyword">if</span> (pos2 != s1.<span class="built_in">end</span>()) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"found lower_bound(8) result is "</span> &lt;&lt; *pos2 &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"note found lower_bound(8) result"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回第一个 key &gt; keyElem 元素的迭代器，若不存在，则返回 set.end() 迭代器</span></span><br><span class="line">    set&lt;<span class="keyword">int</span>&gt;::iterator pos3 = s1.<span class="built_in">upper_bound</span>(<span class="number">8</span>);</span><br><span class="line">    <span class="keyword">if</span> (pos3 != s1.<span class="built_in">end</span>()) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"found upper_bound(8) result is "</span> &lt;&lt; *pos3 &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"note found upper_bound(8) result"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回容器中 key 与 keyElem 相等的上下限的两个迭代器(即上限是 lower_bound，下限是 upper_bound)，若不存在，则返回 set.end() 迭代器</span></span><br><span class="line">    pair&lt;set&lt;<span class="keyword">int</span>&gt;::iterator, set&lt;<span class="keyword">int</span>&gt;::iterator&gt; result = s1.<span class="built_in">equal_range</span>(<span class="number">8</span>);</span><br><span class="line">    <span class="comment">// 获取第一个结果值</span></span><br><span class="line">    <span class="keyword">if</span> (result.first != s1.<span class="built_in">end</span>()) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"found equal_range(8) first result is "</span> &lt;&lt; *result.first &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"note found equal_range(8) first result"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 获取第二个结果值</span></span><br><span class="line">    <span class="keyword">if</span> (result.second != s1.<span class="built_in">end</span>()) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"found equal_range(8) second result is "</span> &lt;&lt; *result.second &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"note found equal_range(8) second result"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ set 删除操作 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除迭代器所指的元素，返回下一个元素的迭代器</span></span><br><span class="line">    s1.<span class="built_in">erase</span>(s1.<span class="built_in">begin</span>());</span><br><span class="line">    <span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除容器中值为 elem 的元素</span></span><br><span class="line">    s1.<span class="built_in">erase</span>(<span class="number">5</span>);</span><br><span class="line">    <span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ set 清空操作 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    s1.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">------ set 插入操作 ------</span><br><span class="line">3 5 8 9 </span><br><span class="line">------ set 大小操作 ------</span><br><span class="line">size = 4</span><br><span class="line">isEmpty = false</span><br><span class="line">------ set 查找操作 ------</span><br><span class="line">count = 1</span><br><span class="line">found value for 8</span><br><span class="line">found lower_bound(8) result is 8</span><br><span class="line">found upper_bound(8) result is 9</span><br><span class="line">found equal_range(8) first result is 8</span><br><span class="line">found equal_range(8) second result is 9</span><br><span class="line">------ set 删除操作 ------</span><br><span class="line">5 8 9 </span><br><span class="line">8 9 </span><br><span class="line">------ set 清空操作 ------</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="set-不允许插入重复元素"><a href="#set-不允许插入重复元素" class="headerlink" title="set 不允许插入重复元素"></a>set 不允许插入重复元素</h4><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="keyword">int</span>&gt; &amp;s)</span> </span>{</span><br><span class="line">    <span class="comment">// 遍历容器</span></span><br><span class="line">    <span class="keyword">for</span> (set&lt;<span class="keyword">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    set&lt;<span class="keyword">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">    pair&lt;set&lt;<span class="keyword">int</span>&gt;::iterator, <span class="keyword">bool</span>&gt; result = s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">    <span class="comment">// 判断是否插入成功</span></span><br><span class="line">    <span class="keyword">if</span> (result.second) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"insert success"</span> &lt;&lt; endl;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"insert failed"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    result = s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">    <span class="comment">// 判断是否插入成功</span></span><br><span class="line">    <span class="keyword">if</span> (result.second) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"insert success"</span> &lt;&lt; endl;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"insert failed"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert success</span><br><span class="line">insert failed</span><br><span class="line">10</span><br></pre></td></tr></tbody></table></figure><h4 id="set-对元素进行排序操作"><a href="#set-对元素进行排序操作" class="headerlink" title="set 对元素进行排序操作"></a>set 对元素进行排序操作</h4><p>set 容器默认会对基础数据类型的元素进行升序排序（从小到大），若需要更改 set 容器的排序规则，需要在 set 容器初始化的时候指定排序规则。<strong>值得一提的是，如果需要自定义 set 容器的排序规则，那么就需要使用到 C++ 的仿函数（Functor），也被称作函数对象或者伪函数。</strong></p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set&lt;<span class="keyword">int</span>, less&lt;<span class="keyword">int</span>&gt;&gt; setIntA;      <span class="comment">// 容器按升序方式排列元素（从小到大）</span></span><br><span class="line">set&lt;<span class="keyword">int</span>, greater&lt;<span class="keyword">int</span>&gt;&gt; setIntB;   <span class="comment">// 容器按降序方式排列元素（从大到小）</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">提示</p><ul><li><code>set&lt;int&gt;</code> 相当于 <code>set&lt;int, less&lt;int&gt;&gt;</code>，两者都是按升序方式排列元素（从小到大）。</li><li><code>less&lt;int&gt;</code> 与 <code>greater&lt;int&gt;</code> 中的 <code>int</code> 可以改成其它类型，该类型主要要跟 set 容纳的数据类型一致。</li></ul></div><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仿函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myCustomCompare</span> {</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 重载</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> &amp;v1, <span class="keyword">const</span> <span class="keyword">int</span> &amp;v2)</span> </span>{</span><br><span class="line">        <span class="comment">// 排序规则</span></span><br><span class="line">        <span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="keyword">int</span>&gt; &amp;s)</span> </span>{</span><br><span class="line">    <span class="comment">// 遍历容器</span></span><br><span class="line">    <span class="keyword">for</span> (set&lt;<span class="keyword">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printGreaterSet</span><span class="params">(set&lt;<span class="keyword">int</span>, greater&lt;<span class="keyword">int</span>&gt;&gt; &amp;s)</span> </span>{</span><br><span class="line">    <span class="comment">// 遍历容器</span></span><br><span class="line">    <span class="keyword">for</span> (set&lt;<span class="keyword">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printCustomCompareSet</span><span class="params">(set&lt;<span class="keyword">int</span>, myCustomCompare&gt; &amp;s)</span> </span>{</span><br><span class="line">    <span class="comment">// 遍历容器</span></span><br><span class="line">    <span class="keyword">for</span> (set&lt;<span class="keyword">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// 容器按升序方式排列元素（从小到大）</span></span><br><span class="line">    set&lt;<span class="keyword">int</span>, less&lt;<span class="keyword">int</span>&gt;&gt; s2;</span><br><span class="line">    s2.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">    s2.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">    s2.<span class="built_in">insert</span>(<span class="number">7</span>);</span><br><span class="line">    s2.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">    s2.<span class="built_in">insert</span>(<span class="number">9</span>);</span><br><span class="line">    <span class="built_in">printSet</span>(s2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 容器按降序方式排列元素（从大到小）</span></span><br><span class="line">    set&lt;<span class="keyword">int</span>, greater&lt;<span class="keyword">int</span>&gt;&gt; s3;</span><br><span class="line">    s3.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">    s3.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">    s3.<span class="built_in">insert</span>(<span class="number">7</span>);</span><br><span class="line">    s3.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">    s3.<span class="built_in">insert</span>(<span class="number">9</span>);</span><br><span class="line">    <span class="built_in">printGreaterSet</span>(s3);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 按照自定义的排序方式排列元素</span></span><br><span class="line">    set&lt;<span class="keyword">int</span>, myCustomCompare&gt; s4;</span><br><span class="line">    s4.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">    s4.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">    s4.<span class="built_in">insert</span>(<span class="number">7</span>);</span><br><span class="line">    s4.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">    s4.<span class="built_in">insert</span>(<span class="number">9</span>);</span><br><span class="line">    s4.<span class="built_in">insert</span>(<span class="number">9</span>);</span><br><span class="line">    <span class="built_in">printCustomCompareSet</span>(s4);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 3 5 7 9 </span><br><span class="line">9 7 5 3 1 </span><br><span class="line">9 7 5 3 1 </span><br></pre></td></tr></tbody></table></figure><h4 id="set-插入自定义数据类型"><a href="#set-插入自定义数据类型" class="headerlink" title="set 插入自定义数据类型"></a>set 插入自定义数据类型</h4><div class="admonition warning"><p class="admonition-title">特别注意</p><p>由于 set 容器中的元素默认会按一定的顺序排列，所以往 set 容器插入自定义数据类型时，必须在 set 容器初始化的时候指定仿函数（即自定义的排序规则），否则无法向 set 容器中插入自定义数据类型。</p></div><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义数据类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> {</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>(string name, <span class="keyword">int</span> age) {</span><br><span class="line">        <span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">        <span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function">string <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> <span class="keyword">const</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仿函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myCompare</span> {</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 重载</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> Person &amp;p1, <span class="keyword">const</span> Person &amp;p2)</span> </span>{</span><br><span class="line">        <span class="comment">// 排序规则</span></span><br><span class="line">        <span class="keyword">return</span> p1.<span class="built_in">getAge</span>() &gt; p2.<span class="built_in">getAge</span>();</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printCustomSet</span><span class="params">(set&lt;Person, myCompare&gt; &amp;p)</span> </span>{</span><br><span class="line">    <span class="comment">// 遍历容器</span></span><br><span class="line">    <span class="keyword">for</span> (set&lt;Person, myCompare&gt;::iterator it = p.<span class="built_in">begin</span>(); it != p.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"name: "</span> &lt;&lt; it-&gt;<span class="built_in">getName</span>() &lt;&lt; <span class="string">", age: "</span> &lt;&lt; it-&gt;<span class="built_in">getAge</span>() &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// 使用仿函数，让 set 容器按照年龄进行倒序排序（从大到小）</span></span><br><span class="line">    set&lt;Person, myCompare&gt; s1;</span><br><span class="line">    </span><br><span class="line">    <span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">"Tom"</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line">    <span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">"Peter"</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">    <span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">"Jim"</span>, <span class="number">15</span>)</span></span>;</span><br><span class="line">    <span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">"David"</span>, <span class="number">28</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    s1.<span class="built_in">insert</span>(p1);</span><br><span class="line">    s1.<span class="built_in">insert</span>(p2);</span><br><span class="line">    s1.<span class="built_in">insert</span>(p3);</span><br><span class="line">    s1.<span class="built_in">insert</span>(p4);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printCustomSet</span>(s1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name: David, age: 28</span><br><span class="line">name: Peter, age: 20</span><br><span class="line">name: Tom, age: 18</span><br><span class="line">name: Jim, age: 15</span><br></pre></td></tr></tbody></table></figure><h2 id="map-和-multimap-容器"><a href="#map-和-multimap-容器" class="headerlink" title="map 和 multimap 容器"></a>map 和 multimap 容器</h2><h3 id="map-和-multimap-容器的概念"><a href="#map-和-multimap-容器的概念" class="headerlink" title="map 和 multimap 容器的概念"></a>map 和 multimap 容器的概念</h3><p>map 是 STL 的一个关联式容器，它提供一对一（其中第一个称为关键字，每个关键字只能在 map 中出现一次，第二个称为该关键字的值）的数据处理能力。map 容器存储的都是 <code>pair</code> 对象，也就是用 <code>pair</code> 类模板创建的键值对。其中，各个键值对的键和值可以是任意数据类型，包括 C++ 基本数据类型（<code>int</code>、<code>double</code> 等）、使用结构体或类自定义的类型。通常情况下，map 容器中存储的各个键值对都选用 string 字符串作为键的类型。<strong>map 内部自建了一颗红黑树 (一种非严格意义上的平衡二叉树)，这颗树具有对数据自动排序的功能，所以在 map 内部所有的数据都是有序的。</strong>map 的特点是增加和删除节点对迭代器的影响很小，除了那个被操作的节点，对其他的节点都没有什么影响。<strong>使用 map 容器存储的各个键值对，键的值既不能重复也不能被修改。</strong>map 可以根据 key 值快速查找记录，复杂度在 <code>log(n)</code> 级别，如果有 1000 条记录，最多查找 10 次，如果有 1000000 条记录，最多查找 20 次。**multimap 与 map 的区别：map 支持唯一键值，每个键只能出现一次；而在 multimap 中相同键可以出现多次。</p><div class="admonition note"><p class="admonition-title">总结</p><ul><li>map 是标准的关联式容器，一个 map 是一个键值对序列，即 (key - value) 对。它提供基于 key 的快速检索能力。</li><li>map 中 key 值是唯一的。集合中的元素按一定的顺序排列。元素插入过程是按排序规则插入，所以不能指定插入到指定位置。</li><li>map 的底层实现采用红黑树变体的平衡二叉树的数据结构，在插入操作和删除操作上比 vector 快。</li><li>map 可以直接存取 key 所对应的 value，支持 <code>[]</code> 操作符，如 <code>map[key] = value</code>。</li><li>multimap 与 map 的区别：map 支持唯一键值，每个键只能出现一次；而在 multimap 中相同键可以出现多次。</li><li>map 支持 <code>[]</code> 操作符，而 multimap 不支持 <code>[]</code> 操作符。</li></ul></div><h3 id="map-和-multimap-容器的使用"><a href="#map-和-multimap-容器的使用" class="headerlink" title="map 和 multimap 容器的使用"></a>map 和 multimap 容器的使用</h3><h4 id="map-和-multimap-的构造与赋值"><a href="#map-和-multimap-的构造与赋值" class="headerlink" title="map 和 multimap 的构造与赋值"></a>map 和 multimap 的构造与赋值</h4><h5 id="默认构造函数-1"><a href="#默认构造函数-1" class="headerlink" title="默认构造函数"></a>默认构造函数</h5><p>map 与 multimap 采用模板类实现，map 对象的默认构造形式：<code>map&lt;T1, T2&gt; mapTT;</code>，其中 <code>&lt;&gt;</code> 尖括号内还可以设置指针类型或自定义类型</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map&lt;<span class="keyword">int</span>, <span class="keyword">char</span>&gt; mapA;</span><br><span class="line">map&lt;string, <span class="keyword">float</span>&gt; mapB;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multimap&lt;<span class="keyword">int</span>, <span class="keyword">char</span>&gt; multimapA;</span><br><span class="line">multimap&lt;string, <span class="keyword">float</span>&gt; multimapB;</span><br></pre></td></tr></tbody></table></figure><h5 id="赋值操作说明-1"><a href="#赋值操作说明-1" class="headerlink" title="赋值操作说明"></a>赋值操作说明</h5><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>(<span class="keyword">const</span> map &amp;mp);              <span class="comment">// 拷贝构造函数</span></span><br><span class="line">map&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> map &amp;mp);   <span class="comment">// 重载等号操作符</span></span><br><span class="line">map.<span class="built_in">swap</span>(mp);                    <span class="comment">// 交换两个集合容器的元素</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">multimap</span>(<span class="keyword">const</span> map &amp;mp);              <span class="comment">// 拷贝构造函数</span></span><br><span class="line">multimap&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> map &amp;mp);   <span class="comment">// 重载等号操作符</span></span><br><span class="line">multimap.<span class="built_in">swap</span>(mp);                    <span class="comment">// 交换两个集合容器的元素</span></span><br></pre></td></tr></tbody></table></figure><h4 id="map-和-multimap-的常用操作"><a href="#map-和-multimap-的常用操作" class="headerlink" title="map 和 multimap 的常用操作"></a>map 和 multimap 的常用操作</h4><p>multimap 的特性及用法和 map 完全相同，唯一的区别在于它允许相同的键可以出现多次。因此在下述的例子中只介绍 map 的常用操作，而 multimap 的常用操作不再累述。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ map 插入操作 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 默认构造函数</span></span><br><span class="line">    map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第一种数据插入方式</span></span><br><span class="line">    m.<span class="built_in">insert</span>(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">    <span class="comment">// 第二种数据插入方式（推荐）</span></span><br><span class="line">    m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">3</span>, <span class="number">4</span>));</span><br><span class="line">    <span class="comment">// 第三种数据插入方式</span></span><br><span class="line">    m.<span class="built_in">insert</span>(map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;::<span class="built_in">value_type</span>(<span class="number">5</span>, <span class="number">6</span>));</span><br><span class="line">    <span class="comment">// 第四种数据插入方式</span></span><br><span class="line">    m[<span class="number">7</span>] = <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ map 遍历操作 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第一种方式遍历 map 集合</span></span><br><span class="line">    <span class="keyword">for</span> (map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"key: "</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">" , value: "</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第二种方式遍历 map 集合</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"key = "</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">" , value = "</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ map 存取操作 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取指定的 key</span></span><br><span class="line">    map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;::iterator item = m.<span class="built_in">find</span>(<span class="number">5</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">"key = "</span> &lt;&lt; item-&gt;first &lt;&lt; <span class="string">" , value = "</span> &lt;&lt; item-&gt;second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第一种方式判断 key 是否存在</span></span><br><span class="line">    <span class="comment">// 如果 key 存在，find() 函数会返回 key 对应的迭代器，如果 key 不存在，find() 函数会返回尾后迭代器 end()</span></span><br><span class="line">    <span class="keyword">if</span> (m.<span class="built_in">find</span>(<span class="number">100</span>) == m.<span class="built_in">end</span>()) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"key "</span> &lt;&lt; <span class="number">100</span> &lt;&lt; <span class="string">" not exist"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第二种方式判断 key 是否存在</span></span><br><span class="line">    <span class="comment">// count() 函数用于统计 key 值在 map 中出现的次数，map 的 key 是不允许重复的，因此如果 key 存在会返回 1，不存在会返回 0</span></span><br><span class="line">    <span class="keyword">if</span> (m.<span class="built_in">count</span>(<span class="number">5</span>) == <span class="number">1</span>) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"key "</span> &lt;&lt; <span class="number">5</span> &lt;&lt; <span class="string">" existed"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回第一个 key &gt;= keyElem 元素的迭代器</span></span><br><span class="line">    map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;::iterator result1 = m.<span class="built_in">lower_bound</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">if</span> (result1 != m.<span class="built_in">end</span>()) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"found result for lower_bound(3), key: "</span> &lt;&lt; result1-&gt;first &lt;&lt; <span class="string">", value: "</span> &lt;&lt; result1-&gt;second &lt;&lt; endl;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"not found result for lower_bound(3)"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回第一个 key &gt; keyElem 元素的迭代器</span></span><br><span class="line">    map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;::iterator result2 = m.<span class="built_in">upper_bound</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">if</span> (result2 != m.<span class="built_in">end</span>()) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"found result for upper_bound(3), key: "</span> &lt;&lt; result2-&gt;first &lt;&lt; <span class="string">", value: "</span> &lt;&lt; result2-&gt;second &lt;&lt; endl;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"not found result for upper_bound(3)"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回容器中 key 与 keyElem 相等的上下限的两个容器</span></span><br><span class="line">    pair&lt;map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;::iterator, map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;::iterator&gt; result3 = m.<span class="built_in">equal_range</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="comment">// 上限的容器</span></span><br><span class="line">    <span class="keyword">if</span> (result3.first != m.<span class="built_in">end</span>()) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"found lower_bound for equal_range(3), key: "</span> &lt;&lt; result3.first-&gt;first &lt;&lt; <span class="string">", value: "</span> &lt;&lt; result3.first-&gt;second &lt;&lt; endl;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"not found lower_bound for equal_range(3)"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 下限的容器</span></span><br><span class="line">    <span class="keyword">if</span> (result3.second != m.<span class="built_in">end</span>()) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"found upper_bound for equal_range(3), key: "</span> &lt;&lt; result3.second-&gt;first &lt;&lt; <span class="string">", value: "</span> &lt;&lt; result3.second-&gt;second &lt;&lt; endl;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        cout &lt;&lt; <span class="string">"not found upper_bound for equal_range(3)"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">"------ map 删除操作 ------"</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除指定的 key</span></span><br><span class="line">    m.<span class="built_in">erase</span>(<span class="number">7</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"key = "</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">" , value = "</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">------ map 插入操作 ------</span><br><span class="line">------ map 遍历操作 ------</span><br><span class="line">key: 1 , value: 2</span><br><span class="line">key: 3 , value: 4</span><br><span class="line">key: 5 , value: 6</span><br><span class="line">key: 7 , value: 8</span><br><span class="line">key = 1 , value = 2</span><br><span class="line">key = 3 , value = 4</span><br><span class="line">key = 5 , value = 6</span><br><span class="line">key = 7 , value = 8</span><br><span class="line">------ map 存取操作 ------</span><br><span class="line">key = 5 , value = 6</span><br><span class="line">key 100 not exist</span><br><span class="line">key 5 existed</span><br><span class="line">found result for lower_bound(3), key: 3, value: 4</span><br><span class="line">found result for upper_bound(3), key: 5, value: 6</span><br><span class="line">found lower_bound for equal_range(3), key: 3, value: 4</span><br><span class="line">found upper_bound for equal_range(3), key: 5, value: 6</span><br><span class="line">------ map 删除操作 ------</span><br><span class="line">key = 1 , value = 2</span><br><span class="line">key = 3 , value = 4</span><br><span class="line">key = 5 , value = 6</span><br></pre></td></tr></tbody></table></figure><h4 id="map-对元素进行排序操作"><a href="#map-对元素进行排序操作" class="headerlink" title="map 对元素进行排序操作"></a>map 对元素进行排序操作</h4><p>map 容器默认会对基础数据类型的 key 进行升序排序（从小到大），若需要更改 map 容器的排序规则，需要在 map 容器初始化的时候指定排序规则。<strong>值得一提的是，如果需要自定义 map 容器的排序规则，那么就需要使用到 C++ 的仿函数（Functor），也被称作函数对象或者伪函数。</strong></p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仿函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myCompare</span> {</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 重载</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> &amp;v1, <span class="keyword">const</span> <span class="keyword">int</span> &amp;v2)</span> </span>{</span><br><span class="line">        <span class="comment">// 排序规则</span></span><br><span class="line">        <span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printMap</span><span class="params">(map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>, myCompare&gt; &amp;m)</span> </span>{</span><br><span class="line">    <span class="comment">// 遍历容器</span></span><br><span class="line">    <span class="keyword">for</span> (map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>, myCompare&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"key = "</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">", value = "</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// 使用仿函数，让 map 容器按照 key 进行倒序排序（从大到小）</span></span><br><span class="line">    map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>, myCompare&gt; m1;</span><br><span class="line">    m1.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="number">8</span>));</span><br><span class="line">    m1.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">7</span>, <span class="number">2</span>));</span><br><span class="line">    m1.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">4</span>, <span class="number">10</span>));</span><br><span class="line">    m1.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">9</span>, <span class="number">5</span>));</span><br><span class="line">    <span class="built_in">printMap</span>(m1);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">key = 9, value = 5</span><br><span class="line">key = 7, value = 2</span><br><span class="line">key = 4, value = 10</span><br><span class="line">key = 1, value = 8</span><br></pre></td></tr></tbody></table></figure><h4 id="map-使用自定义数据类型作为-Key"><a href="#map-使用自定义数据类型作为-Key" class="headerlink" title="map 使用自定义数据类型作为 Key"></a>map 使用自定义数据类型作为 Key</h4><div class="admonition warning"><p class="admonition-title">特别注意</p><p>由于 map 容器中的元素默认会根据 key 按一定的顺序排列，所以往 map 容器插入 key 为自定义数据类型的元素时，必须在 map 容器初始化的时候指定仿函数（即自定义的排序规则），否则无法向 map 容器中插入 key 为自定义数据类型的元素。</p></div><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义数据类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> {</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>(string name, <span class="keyword">int</span> age) {</span><br><span class="line">        <span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">        <span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function">string <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> <span class="keyword">const</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仿函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myCompare</span> {</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 重载</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> Person &amp;p1, <span class="keyword">const</span> Person &amp;p2)</span> </span>{</span><br><span class="line">        <span class="comment">// 排序规则</span></span><br><span class="line">        <span class="keyword">return</span> p1.<span class="built_in">getAge</span>() &gt; p2.<span class="built_in">getAge</span>();</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printMap</span><span class="params">(map&lt;Person, string, myCompare&gt; &amp;m)</span> </span>{</span><br><span class="line">    <span class="comment">// 遍历容器</span></span><br><span class="line">    <span class="keyword">for</span> (map&lt;Person, string, myCompare&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++) {</span><br><span class="line">        cout &lt;&lt; <span class="string">"age = "</span> &lt;&lt; it-&gt;first.<span class="built_in">getAge</span>() &lt;&lt; <span class="string">", name = "</span> &lt;&lt; it-&gt;first.<span class="built_in">getName</span>() &lt;&lt; <span class="string">", role = "</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// 使用仿函数，让 map 容器按照年龄进行倒序排序（从大到小）</span></span><br><span class="line">    map&lt;Person, string, myCompare&gt; m1;</span><br><span class="line">    m1.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="built_in">Person</span>(<span class="string">"Tom"</span>, <span class="number">19</span>), <span class="string">"Student"</span>));</span><br><span class="line">    m1.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="built_in">Person</span>(<span class="string">"Jim"</span>, <span class="number">18</span>), <span class="string">"Student"</span>));</span><br><span class="line">    m1.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="built_in">Person</span>(<span class="string">"Peter"</span>, <span class="number">28</span>), <span class="string">"Teacher"</span>));</span><br><span class="line">    <span class="built_in">printMap</span>(m1);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">age = <span class="number">28</span>, name = Peter, role = Teacher</span><br><span class="line">age = <span class="number">19</span>, name = Tom, role = Student</span><br><span class="line">age = <span class="number">18</span>, name = Jim, role = Student</span><br></pre></td></tr></tbody></table></figure><div id="readmore-expansion" class="pjax"></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script data-pjax="" src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script data-pjax="">var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),allowMobile=!1;if(!isMobile||isMobile&&allowMobile)try{var plugin=new ReadmorePlugin;plugin.init({type:"hexo",id:"readmore-container",name:"全栈技术驿站",blogId:"96641-5333172926158-056",qrcode:"https://www.techgrow.cn/img/wx_mp_qr.png",keyword:"Tech",random:"1",height:"auto",expires:"365",lockToc:"yes",interval:"30",baseUrl:"",execute:"yes",tocSelector:""})}catch(e){console.warn("readmore plugin occurred error: "+e.name+" | "+e.message)}</script></div><footer class="post-footer"><div class="reward-container"><div>支持一根棒棒糖！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/360c74ef.html" title="C++ 进阶基础之九">https://www.techgrow.cn/posts/360c74ef.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎添加博主微信，请备注 "博客"，届时会邀请您加入百人微信群</span><br> <img src="/img/wx_account_qr.png"></div></div></div><div class="post-tags"><a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C++</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/3b82844a.html" rel="prev" title="Java 多线程编程之四 CAS、ABA 问题、锁"><i class="fa fa-angle-left"></i> Java 多线程编程之四 CAS、ABA 问题、锁</a></div><div class="post-nav-item"> <a href="/posts/28df7196.html" rel="next" title="Java 自动生成数据库文档">Java 自动生成数据库文档<i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> Copyright © 2018 – <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">1.7m</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 ≈</span> <span title="站点阅读时长">26:22</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & Docker | "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="beian"> <span><img src="/img/gonganbeian.png" alt=""></span> <span><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤ICP备 19024664号-1</a></span> <span>|&nbsp;</span> <span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302004035" rel="external nofollow" target="_blank">粤公网安备 44011302004035号</a></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div> <a href="https://github.com/rqh656418510" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="external nofollow" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"/lib/mermaid/dist/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/pace.js"></script><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://www.techgrow.cn/lib/darkmode/darkmode@1.5.7.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '30px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js"></script><script>
    var qiniu_domain = "https://oss.techgrow.cn";
    var qiniu_token_url = "https://open.techgrow.cn/api/oss/qiniu/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline.techgrow.cn","cssUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css","commentCount":true,"pageview":false,"copyright":false,"allowUploadImage":true,"libUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.js","locale":{"placeholder":"支持匿名评论啦，若希望及时收到博主的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧"},"dark":"body.darkmode--activated","emoji":["https://www.techgrow.cn/lib/@waline/emojis/1.0.1/weibo"],"meta":["nick","mail","link"],"login":"enable","pageSize":10,"qiniuDebug":false,"qiniuDomain":"https://oss.techgrow.cn","qiniuTokenUrl":"https://open.techgrow.cn/api/oss/qiniu/token/upload","qiniuLibUrl":"https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js","el":"#waline","comment":true,"path":"/posts/360c74ef.html"}</script><link rel="stylesheet" href="https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css"><script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.imageUploader = false;
  }
  else if (CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.imageUploader = qiniuUploadImage;
  } else {
   CONFIG.waline.imageUploader = true;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script><div class="moon-menu"><div class="moon-menu-items"><div id="moon-menu-item-back2bottom" class="moon-menu-item"><i class="fas fa-chevron-down"></i></div><div id="moon-menu-item-back2top" class="moon-menu-item"><i class="fas fa-chevron-up"></i></div></div><div class="moon-menu-button"><svg class="moon-menu-bg"><circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle><circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle></svg><div class="moon-menu-content"><div class="moon-menu-icon"><i class="fas fa-ellipsis-v"></i></div><div class="moon-menu-text"></div></div></div></div><script src="/js/injector.js"></script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),e="ipad"==i.match(/ipad/i),a="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),r="ucweb"==i.match(/ucweb/i),c="android"==i.match(/android/i),l="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(e||a||o||n||r||c||l||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;jQuery(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||jQuery("#aplayer").css("display","block"))}),jQuery(window).on("load",function(){aplayerEnable&&jQuery(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>