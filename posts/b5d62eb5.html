<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/pace-js/themes/blue/pace-theme-minimal.css"><script src="/lib/pace-js/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="本文主要介绍分布式链路追踪技术选型的内容，包括 Jaeger、Zipkin、Sleuth、OpenTracing、OpenCensus、OpenTelemetry 等。"><meta property="og:type" content="article"><meta property="og:title" content="分布式链路追踪的技术选型介绍"><meta property="og:url" content="https://www.techgrow.cn/posts/b5d62eb5.html"><meta property="og:site_name" content="Clay 的技术空间"><meta property="og:description" content="本文主要介绍分布式链路追踪技术选型的内容，包括 Jaeger、Zipkin、Sleuth、OpenTracing、OpenCensus、OpenTelemetry 等。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.techgrow.cn/asset/2024/09/micrometer-4.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2024/09/micrometer-5.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2024/10/distribute-tracing-3.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2024/10/distribute-tracing-2.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2024/10/distribute-tracing-1.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2024/10/distribute-tracing-4.png"><meta property="article:published_time" content="2024-09-29T13:32:38.000Z"><meta property="article:modified_time" content="2024-09-29T13:32:38.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="微服务"><meta property="article:tag" content="分布式"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.techgrow.cn/asset/2024/09/micrometer-4.png"><link rel="canonical" href="https://www.techgrow.cn/posts/b5d62eb5.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/b5d62eb5.html","path":"posts/b5d62eb5.html","title":"分布式链路追踪的技术选型介绍"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>分布式链路追踪的技术选型介绍 | Clay 的技术空间</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false,"measure_protocol_api_secret":null}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn"><link rel="stylesheet" type="text/css" href="/css/injector/main.css"><link rel="preload" as="style" href="/css/injector/light.css"><link rel="preload" as="style" href="/css/injector/dark.css"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术空间" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion"><script src="/lib/jquery/dist/jquery.min.js"></script><script data-pjax="">!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><link rel="stylesheet" href="/lib/aplayer/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="/lib/aplayer/dist/APlayer.min.js"></script><script src="/lib/aplayer/dist/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=jQuery("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=jQuery("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}jQuery(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://open.techgrow.cn/app/api/wechat/js/signature?url="+a+"&noncestr="+i+"&timestamp="+r;jQuery.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt=""></div><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术空间</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-readingnotes"><a href="https://www.techgrow.cn/reading/" rel="section"><i class="fa fa-book-open-reader fa-fw"></i>读书笔记</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn/" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Jaeger"><span class="nav-text">Jaeger</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Zipkin"><span class="nav-text">Zipkin</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Sleuth"><span class="nav-text">Sleuth</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pinpoint"><span class="nav-text">Pinpoint</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OpenTracing"><span class="nav-text">OpenTracing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OpenCensus"><span class="nav-text">OpenCensus</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OpenTelemetry"><span class="nav-text">OpenTelemetry</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SkyWalking"><span class="nav-text">SkyWalking</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88"><span class="nav-text">其他实现方案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94"><span class="nav-text">技术方案对比</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B%E6%80%BB%E7%BB%93"><span class="nav-text">技术选型总结</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <span class="site-state-item-count">659</span> <span class="site-state-item-name">文章</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">55</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https://github.com/rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → /sitemap.xml" rel="noopener me"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/b5d62eb5.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术空间"><meta itemprop="description" content="专注于 Java 后端、分布式、微服务、云原生、数据库、系统架构、大数据、云计算、虚拟化、人工智能学习的技术博客。"></span><span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="分布式链路追踪的技术选型介绍 | Clay 的技术空间"><meta itemprop="description" content="本文主要介绍分布式链路追踪技术选型的内容，包括 Jaeger、Zipkin、Sleuth、OpenTracing、OpenCensus、OpenTelemetry 等。"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 分布式链路追踪的技术选型介绍</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-09-29 21:32:38" itemprop="dateCreated datePublished" datetime="2024-09-29T21:32:38+08:00">2024-09-29</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/b5d62eb5.html#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/b5d62eb5.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>4.4k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 ≈</span> <span>4 分钟</span></span></div></div></header><div class="post-body post-container" itemprop="articleBody" id="readmore-container"><h2 id="Jaeger"><a href="#Jaeger" class="headerlink" title="Jaeger"></a>Jaeger</h2><ul><li>简介：<ul><li>Jaeger 是 Uber 开源的分布式追踪系统，具备强大的追踪、监控和故障诊断功能。它是 CNCF 的项目之一，得到了广泛的社区支持。</li></ul></li><li>特点：<ul><li>高性能：Jaeger 专为大规模分布式系统设计，适合高并发、大规模系统。</li><li>丰富的功能：支持多种存储后端（如 Elasticsearch、Cassandra），具备查询、可视化、错误诊断等多种强大功能。</li><li>支持 OpenTracing：与 OpenTracing 标准完全兼容，可与多种语言和平台进行集成。</li><li>扩展性：支持多种采样策略和链路追踪数据的丰富查询。</li></ul></li><li>适用场景：<ul><li>适合大型分布式系统，尤其是要求在高性能、高并发的场景下表现优异。</li><li>适合系统需要和其他平台或语言进行互操作，且希望遵循 OpenTracing 标准的场景。</li></ul></li></ul><span id="more"></span><h2 id="Zipkin"><a href="#Zipkin" class="headerlink" title="Zipkin"></a>Zipkin</h2><ul><li>简介：<ul><li>Zipkin 是 Twitter 开源的一个分布式链路追踪系统，最早集成在 Spring Cloud Sleuth 中，可以用于收集时序数据并可视化微服务调用链路。</li></ul></li><li>特点：<ul><li>轻量级：它的架构相对简单，容易部署，尤其适合中小规模系统。</li><li>集成度高：Spring Cloud Sleuth 对 Zipkin 的支持非常完善，集成简单，提供了现成的解决方案。</li><li>查询功能：支持可视化链路展示，方便查看微服务调用的延时、失败等信息。</li><li>插件化支持：可以支持不同的存储后端，比如 MySQL、Elasticsearch 等。</li></ul></li><li>适用场景：<ul><li>适合中小型项目（规模不大），且已使用 Spring Cloud 生态技术。</li></ul></li></ul><h2 id="Sleuth"><a href="#Sleuth" class="headerlink" title="Sleuth"></a>Sleuth</h2><ul><li>简介：<ul><li>Sleuth 是 Spring Cloud 自带的分布式链路追踪工具，支持自动为 Spring Cloud 的微服务添加 TraceId 和 SpanId。</li></ul></li><li>特点：<ul><li>深度集成：和 Spring Cloud 生态高度集成，几乎开箱即用，默认使用 Zipkin 来进行数据存储和展示。</li><li>自动化：自动为 HTTP 请求、消息队列、数据库操作等关键操作添加追踪信息，无需开发者手动干预。</li><li>可扩展性：支持与其他追踪系统（如 Jaeger）的集成，具备较高的扩展性。</li></ul></li><li>适用场景：<ul><li>适合基于 Spring Cloud 架构的中小型项目团队，尤其是希望利用 Spring 生态快速集成链路追踪的情况。</li></ul></li></ul><h2 id="Pinpoint"><a href="#Pinpoint" class="headerlink" title="Pinpoint"></a>Pinpoint</h2><ul><li>简介：<ul><li>Pinpoint 是一款开源的 APM（应用性能管理）工具，主要用于大规模分布式系统的性能监控和故障诊断。它最初由韩国的 Naver 公司开发，现已成为监控 Java 和 PHP 应用的常用工具之一。</li></ul></li><li>特点：<ul><li>分布式跟踪：支持跟踪分布式系统中不同服务之间的调用关系，提供详细的调用链分析。</li><li>实时监控：通过仪表盘实时查看应用的状态，如响应时间、吞吐量、硬件资源使用情况（如 CPU、内存）等。</li><li>非侵入式安装：不需要修改现有代码即可集成 Pinpoint，可以通过字节码注入的方式收集数据。</li><li>支持多种框架：Pinpoint 支持监控 Java 和 PHP 应用，涵盖常见的 Web 框架、RPC 框架（如 Spring、Dubbo、gRPC）等。</li><li>可视化展示：提供拓扑图、调用链视图、热图等丰富的可视化（UI）功能，帮助快速定位性能问题。</li><li>告警机制：支持自定义性能阈值，监控超过阈值时发送告警通知。</li></ul></li><li>适用场景：<ul><li>适用于微服务架构或者大型分布式系统的性能监控，可以追踪多个服务间的调用关系，帮助开发者快速定位系统的性能瓶颈，优化应用性能，并快速定位问题。</li></ul></li></ul><h2 id="OpenTracing"><a href="#OpenTracing" class="headerlink" title="OpenTracing"></a>OpenTracing</h2><ul><li>简介：<ul><li>OpenTracing 是一个开源的 API 标准，诞生于 2016 年，旨在为分布式追踪系统提供统一的接口规范。它允许开发者在应用程序代码中无缝插入追踪代码，而无需绑定到特定的追踪工具（如 Jaeger 或 Zipkin）</li></ul></li><li>目标：<ul><li>提供跨语言的标准 API 来记录分布式系统中的 Trace 和 Span，使得开发者能够通过标准接口与各种追踪实现集成。</li></ul></li><li>局限性：<ul><li>OpenTracing 仅提供了 API 规范，没有包含具体的实现和上下文传播等内容。因此，开发者还需要额外的库或工具来实际记录和处理追踪数据。</li></ul></li></ul><h2 id="OpenCensus"><a href="#OpenCensus" class="headerlink" title="OpenCensus"></a>OpenCensus</h2><ul><li>简介：<ul><li>OpenCensus 由 Google 开发，最初作为其内部监控系统的开源版本，旨在解决分布式系统的追踪和度量问题。与 OpenTracing 不同，OpenCensus 不仅提供 API 规范，还包含了用于收集和导出追踪和度量数据的库和实现。</li></ul></li><li>特点：<ul><li>OpenCensus 不仅支持分布式追踪，还提供应用程序级别的度量（Metrics），如请求速率、延迟等。它还包含了一些内置的采集和上下文传播机制。</li></ul></li><li>局限性：<ul><li>OpenCensus 不仅提供了 API，还提供了具体的实现，这与 OpenTracing 产生了竞争关系。</li><li>OpenCensus 与 OpenTracing 的功能重叠，并且各自采用了不同的 API 规范，导致生态系统中出现了分裂。</li></ul></li></ul><h2 id="OpenTelemetry"><a href="#OpenTelemetry" class="headerlink" title="OpenTelemetry"></a>OpenTelemetry</h2><ul><li>简介：<ul><li>OpenTelemetry 是 OpenTracing 和 OpenCensus 的合并项目，由 CNCF 领导。它于 2019 年启动，旨在统一追踪和度量的标准，成为云原生应用的统一遥测（Telemetry）解决方案。</li></ul></li><li>目标：<ul><li>结合 OpenTracing 的标准化 API 和 OpenCensus 的实现，OpenTelemetry 提供了一个统一的库，支持分布式追踪、度量和日志的收集和导出。</li></ul></li><li>特点：<ul><li>分布式追踪： 提供类似于 OpenTracing 的 API，用于记录分布式系统中的追踪信息。</li><li>度量： 像 OpenCensus 一样，OpenTelemetry 也提供了应用性能度量数据的收集。</li><li>日志： 除了追踪和度量，OpenTelemetry 计划支持日志数据的统一收集和处理。</li><li>支持多种后端： OpenTelemetry 支持将数据导出到多种后端系统，如 Jaeger、Zipkin、Prometheus 等。</li></ul></li><li>发展现状：<ul><li>OpenTelemetry 是目前 CNCF 重点支持的项目，逐渐成为行业标准，并被广泛应用于云原生应用程序中。</li></ul></li></ul><h2 id="SkyWalking"><a href="#SkyWalking" class="headerlink" title="SkyWalking"></a>SkyWalking</h2><ul><li>简介：<ul><li>SkyWalking 是一个非常强大的全栈 APM（应用性能监控）和分布式链路追踪解决方案，而 OpenTracing、OpenCensus、OpenTelemetry 则是更倾向于标准化和 API 的解决方案。</li></ul></li><li>核心功能：<ul><li>开箱即用：SkyWalking 从数据收集到可视化仪表盘都有现成的功能，尤其适合希望快速搭建一整套 APM 解决方案的团队。</li><li>分布式链路追踪：自动追踪微服务之间的调用，记录服务调用链，提供请求延迟、错误率等信息。</li><li>性能监控（APM）：提供如响应时间、吞吐量、系统健康状况等性能指标的监控。</li><li>服务拓扑图：SkyWalking 生成微服务之间的交互拓扑图，帮助用户快速理解系统的依赖关系。</li><li>日志和度量集成：支持集成日志系统（如 ELK）以及度量系统，形成一个全方位的监控平台。</li><li>自动探针：通过代理（Agent）自动采集应用程序的 Trace 和 Metrics，无需对代码进行显式修改。</li><li>性能和扩展性：支持大规模分布式系统的监控，具备强大的可扩展性，支持高并发的链路追踪数据采集和处理。</li></ul></li><li>适用场景：<ul><li>多语言支持：SkyWalking 支持多种编程语言和框架，这使得它非常适合多技术栈的团队。</li><li>完整的 APM 需求：如果系统不仅需要链路追踪，还需要监控应用性能、日志分析，那么非常适合选择 SkyWalking。</li><li>自动化集成：对于已经运行的大规模分布式系统，如果不想在代码中手动添加追踪信息，SkyWalking 的自动探针功能非常适合。</li></ul></li></ul><blockquote><p>SkyWalking 与 OpenTelemetry 的对比</p></blockquote><ul><li>生态与标准：<ul><li>OpenTelemetry 是 CNCF 的标准项目，提供追踪、度量和日志的统一 API，并且可以与 Jaeger、Prometheus、Zipkin 等工具进行深度集成。</li><li>SkyWalking 则是一个完整的监控和链路追踪解决方案，不仅仅是一个 API 标准。它提供了完整的前端 UI、数据存储后端，以及自动化的数据收集器。</li><li>SkyWalking 也兼容 OpenTracing 和 OpenTelemetry API，这意味着可以将 SkyWalking 与其他系统结合使用，甚至可以使用 OpenTelemetry 的 API 通过 SkyWalking 收集和处理数据。</li></ul></li><li>功能差异：<ul><li>自动化程度：SkyWalking 提供了强大的 自动探针功能，开发者不需要在代码中显式添加追踪代码。这对于已经运行中的大型分布式系统特别有用。而 OpenTelemetry 需要通过 SDK 或 API 来实现追踪（尽管有一些自动化探针，也需要配置）。</li><li>全栈 APM：SkyWalking 不仅仅是一个分布式追踪工具，它是一个完整的 APM 解决方案，提供应用性能监控、链路追踪、日志集成等功能。OpenTelemetry 本身只是一个标准和工具库，需要和其他工具（如 Jaeger 或 Prometheus）配合使用才能实现同样的功能。</li><li>可视化和存储：SkyWalking 内置了完善的可视化仪表盘和后端存储解决方案（如 Elasticsearch、MySQL 等）。而 OpenTelemetry 没有内置的存储和可视化功能，需要与 Jaeger、Prometheus、Grafana 等工具组合使用。</li><li>生态支持：SkyWalking 提供了对多种环境的深度支持，包括 Java、Go、Node.js、PHP 等语言，且支持多种微服务框架（如 Kubernetes、Spring Cloud、Envoy、Istio 等）。</li></ul></li></ul><blockquote><p>SkyWalking 与 Jaeger、Zipkin 的对比</p></blockquote><ul><li>功能集成度：<ul><li>SkyWalking 是一个集成度更高的系统，除了链路追踪，还包括性能监控、日志管理等功能。</li><li>Jaeger 和 Zipkin 专注于分布式追踪，它们侧重于提供链路追踪的可视化和数据采集。</li></ul></li><li>可视化体验：<ul><li>SkyWalking 的 UI 更加用户友好，内置了服务拓扑图、依赖分析、告警功能，可以提供更丰富的可视化体验。</li><li>Jaeger 和 Zipkin 更偏重于单一的追踪功能，可能需要与其他工具组合使用才能达到同样的监控效果。</li></ul></li></ul><div class="admonition note"><p class="admonition-title">如何选择 SkyWalking 和 OpenTracing</p><ul><li>如果目标是快速构建一个可视化、自动化的监控平台，SkyWalking 是一个非常合适的选择。</li><li>如果需要使用行业标准（比如 OpenTracing），且需要与结合其他工具来构建定制化的监控系统，OpenTelemetry 是一个更灵活、标准化的选择。</li></ul></div><h2 id="其他实现方案"><a href="#其他实现方案" class="headerlink" title="其他实现方案"></a>其他实现方案</h2><p>分布式链路追踪系统还有其他比较成熟的实现，例如：</p><ul><li>京东的 Hydra</li><li> 美团点评的 CAT</li><li> 新浪的 Watchman</li><li>Apache 的 HTrace</li><li> 阿里巴巴的鹰眼 Tracing</li></ul><h2 id="技术方案对比"><a href="#技术方案对比" class="headerlink" title="技术方案对比"></a>技术方案对比</h2><p><img data-src="../../../asset/2024/09/micrometer-4.png"></p><hr><p><img data-src="../../../asset/2024/09/micrometer-5.png"></p><hr><p><img data-src="../../../asset/2024/10/distribute-tracing-3.png"></p><hr><p><img data-src="../../../asset/2024/10/distribute-tracing-2.png"></p><hr><p><img data-src="../../../asset/2024/10/distribute-tracing-1.png"></p><hr><p><img data-src="../../../asset/2024/10/distribute-tracing-4.png"></p><h2 id="技术选型总结"><a href="#技术选型总结" class="headerlink" title="技术选型总结"></a>技术选型总结</h2><ul><li>如果是中小型项目，且已使用 Spring Cloud 周边生态的技术，建议采用 Sleuth + Zipkin 方案。</li><li>如果目标是快速构建一个高性能、可视化、自动化的大型分布式链路追踪平台，Pinpoint 和 SkyWalking 都是一个非常合适的选择。</li><li>如果需要使用行业标准（比如 OpenTracing），且需要与结合其他工具来构建定制化的大型分布式链路追踪系统，OpenTelemetry 是一个更灵活、标准化的选择。</li></ul><div id="readmore-expansion" class="pjax"></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script data-pjax="" src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script data-pjax="">var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),allowMobile=!1;if(!isMobile||isMobile&&allowMobile)try{var plugin=new ReadmorePlugin;plugin.init({type:"hexo",id:"readmore-container",name:"全栈技术驿站",blogId:"96641-5333172926158-056",qrcode:"https://www.techgrow.cn/img/wx_mp_qr.png",keyword:"Tech",random:"1",height:"auto",expires:"365",lockToc:"yes",interval:"30",baseUrl:"",execute:"yes",tocSelector:""})}catch(e){console.warn("readmore plugin occurred error: "+e.name+" | "+e.message)}</script></div><footer class="post-footer"><div class="reward-container"><div>支持一根棒棒糖！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/b5d62eb5.html" title="分布式链路追踪的技术选型介绍">https://www.techgrow.cn/posts/b5d62eb5.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎添加博主微信，请备注 "博客"，届时会邀请您加入百人微信群</span><br> <img src="/img/wx_account_qr.png"></div></div></div><div class="post-tags"><a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag"><i class="fa fa-tag"></i> 微服务</a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag"><i class="fa fa-tag"></i> 分布式</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/e4fdec1e.html" rel="prev" title="Docker Swarm 入门使用教程"><i class="fa fa-angle-left"></i> Docker Swarm 入门使用教程</a></div><div class="post-nav-item"> <a href="/posts/1326ecd9.html" rel="next" title="Docker 安装单机版的 Nacos 与 MySQL 8">Docker 安装单机版的 Nacos 与 MySQL 8<i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> Copyright © 2018 – <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">1.6m</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 ≈</span> <span title="站点阅读时长">24:49</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & Docker | "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="beian"> <span><img src="/img/gonganbeian.png" alt=""></span> <span><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤 ICP 备 19024664 号</a></span> <span>|&nbsp;</span> <span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302004035" rel="external nofollow" target="_blank">粤公网安备 44011302004035 号</a></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div> <a href="https://github.com/rqh656418510" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="external nofollow" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"/lib/mermaid/dist/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/pace.js"></script><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://www.techgrow.cn/lib/darkmode/darkmode@1.5.7.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '30px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js"></script><script>
    var qiniu_domain = "https://oss.techgrow.cn";
    var qiniu_token_url = "https://open.techgrow.cn/app/api/qiniu/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline.techgrow.cn","cssUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css","commentCount":true,"pageview":false,"copyright":false,"allowUploadImage":true,"libUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.js","locale":{"placeholder":"支持匿名评论啦，若希望及时收到博主的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧"},"dark":"body.darkmode--activated","emoji":["https://www.techgrow.cn/lib/@waline/emojis/1.0.1/weibo"],"meta":["nick","mail","link"],"login":"enable","pageSize":10,"qiniuDebug":false,"qiniuDomain":"https://oss.techgrow.cn","qiniuTokenUrl":"https://open.techgrow.cn/app/api/qiniu/token/upload","qiniuLibUrl":"https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js","el":"#waline","comment":true,"path":"/posts/b5d62eb5.html"}</script><link rel="stylesheet" href="https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css"><script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.imageUploader = false;
  }
  else if (CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.imageUploader = qiniuUploadImage;
  } else {
   CONFIG.waline.imageUploader = true;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script><div class="moon-menu"><div class="moon-menu-items"><div id="moon-menu-item-back2bottom" class="moon-menu-item"><i class="fas fa-chevron-down"></i></div><div id="moon-menu-item-back2top" class="moon-menu-item"><i class="fas fa-chevron-up"></i></div></div><div class="moon-menu-button"><svg class="moon-menu-bg"><circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle><circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle></svg><div class="moon-menu-content"><div class="moon-menu-icon"><i class="fas fa-ellipsis-v"></i></div><div class="moon-menu-text"></div></div></div></div><script src="/js/injector.js"></script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),e="ipad"==i.match(/ipad/i),a="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),r="ucweb"==i.match(/ucweb/i),c="android"==i.match(/android/i),l="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(e||a||o||n||r||c||l||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;jQuery(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||jQuery("#aplayer").css("display","block"))}),jQuery(window).on("load",function(){aplayerEnable&&jQuery(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>