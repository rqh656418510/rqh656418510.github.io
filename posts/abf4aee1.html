<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/pace-js/themes/blue/pace-theme-minimal.css"><script src="/lib/pace-js/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.18.0","exturl":false,"sidebar":{"position":"left","width":300,"display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="本文主要介绍如何为 Hexo Next 7.x 与 8.x 主题添加可切换的暗黑模式，包括暗黑模式切换插件的使用与手动添加可切换的暗黑模式。"><meta property="og:type" content="article"><meta property="og:title" content="Hexo Next 8.x 主题添加可切换的暗黑模式"><meta property="og:url" content="https://www.techgrow.cn/posts/abf4aee1.html"><meta property="og:site_name" content="Clay 的技术空间"><meta property="og:description" content="本文主要介绍如何为 Hexo Next 7.x 与 8.x 主题添加可切换的暗黑模式，包括暗黑模式切换插件的使用与手动添加可切换的暗黑模式。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.techgrow.cn/gif/2021/04/darkmode.gif"><meta property="article:published_time" content="2021-04-28T15:19:23.000Z"><meta property="article:modified_time" content="2023-08-21T14:18:34.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="静态博客"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.techgrow.cn/gif/2021/04/darkmode.gif"><link rel="canonical" href="https://www.techgrow.cn/posts/abf4aee1.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/abf4aee1.html","path":"posts/abf4aee1.html","title":"Hexo Next 8.x 主题添加可切换的暗黑模式"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Hexo Next 8.x 主题添加可切换的暗黑模式 | Clay 的技术空间</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn:9360"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术空间" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion"><script src="/lib/jquery/dist/jquery.min.js"></script><script data-pjax="">!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><link rel="stylesheet" href="/lib/aplayer/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="/lib/aplayer/dist/APlayer.min.js"></script><script src="/lib/aplayer/dist/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=jQuery("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=jQuery("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}jQuery(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://open.techgrow.cn/app/api/wechat/js/signature?url="+a+"&noncestr="+i+"&timestamp="+r;jQuery.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt=""></div><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术空间</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-readingnotes"><a href="https://www.techgrow.cn/reading/" rel="section"><i class="fa fa-book-open-reader fa-fw"></i>读书笔记</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn:9360/ui/login?lng=zh-cn" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">前言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Next-8-x-%E5%8E%9F%E7%94%9F%E7%9A%84%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F"><span class="nav-text">Next 8.x 原生的暗黑模式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Next-7-x-%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%E5%8F%AF%E5%88%87%E6%8D%A2%E7%9A%84%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F"><span class="nav-text">Next 7.x 自动添加可切换的暗黑模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Next-8-x-%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%E5%8F%AF%E5%88%87%E6%8D%A2%E7%9A%84%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F"><span class="nav-text">Next 8.x 自动添加可切换的暗黑模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Hexo-%E6%8F%92%E4%BB%B6"><span class="nav-text">安装 Hexo 插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-Hexo-%E6%8F%92%E4%BB%B6"><span class="nav-text">配置 Hexo 插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E5%8E%9F%E7%94%9F%E7%9A%84%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F"><span class="nav-text">关闭原生的暗黑模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F-CSS-%E6%A0%B7%E5%BC%8F%E8%87%AA%E5%AE%9A%E4%B9%89%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="nav-text">暗黑模式 CSS 样式自定义（可选）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E6%96%B0%E6%9E%84%E5%BB%BA%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="nav-text">重新构建生成静态资源文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Next-8-x-%E6%89%8B%E5%8A%A8%E6%B7%BB%E5%8A%A0%E5%8F%AF%E5%88%87%E6%8D%A2%E7%9A%84%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F"><span class="nav-text">Next 8.x 手动添加可切换的暗黑模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E5%8E%9F%E7%94%9F%E7%9A%84%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F-1"><span class="nav-text">关闭原生的暗黑模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0-JS-%E5%BA%93-Darkmode-js"><span class="nav-text">添加 JS 库 Darkmode.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0-Darkmode-js-%E7%9A%84%E5%90%AF%E7%94%A8%E5%BC%80%E5%85%B3"><span class="nav-text">添加 Darkmode.js 的启用开关</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-JS-%E5%BA%93-Darkmode-js"><span class="nav-text">配置 JS 库 Darkmode.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F-CSS-%E6%A0%B7%E5%BC%8F%E8%87%AA%E5%AE%9A%E4%B9%89"><span class="nav-text">暗黑模式 CSS 样式自定义</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="nav-text">实现原理分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4%E4%BB%8B%E7%BB%8D"><span class="nav-text">实现步骤介绍</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E6%96%B0%E6%9E%84%E5%BB%BA%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6-1"><span class="nav-text">重新构建生成静态资源文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F"><span class="nav-text">支持评论系统的暗黑模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Waline-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F"><span class="nav-text">Waline 评论系统</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%80%E7%BB%88%E6%BC%94%E7%A4%BA%E6%95%88%E6%9E%9C"><span class="nav-text">最终演示效果</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98"><span class="nav-text">常见使用问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F%E5%88%87%E6%8D%A2%E6%8F%92%E4%BB%B6%E4%B8%8D%E7%94%9F%E6%95%88"><span class="nav-text">暗黑模式切换插件不生效</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%84%E8%AE%BA%E5%8C%BA%E7%95%99%E8%A8%80%E5%8F%8D%E9%A6%88%E4%BD%BF%E7%94%A8%E4%BD%93%E9%AA%8C"><span class="nav-text">评论区留言反馈使用体验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Darkmode-js-%E7%9A%84%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE"><span class="nav-text">Darkmode.js 的详细配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Chrome-%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E6%98%BE%E7%A4%BA%E5%88%87%E6%8D%A2%E6%8C%89%E9%92%AE%E7%9A%84%E5%9B%BE%E6%A0%87"><span class="nav-text">Chrome 无法正常显示切换按钮的图标</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <span class="site-state-item-count">474</span> <span class="site-state-item-name">文章</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">45</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https://github.com/rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → /sitemap.xml" rel="noopener me"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/abf4aee1.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术空间"><meta itemprop="description" content="专注于 Java、前端、移动端、微服务、分布式系统、数据库、系统架构、人工智能、大数据、云计算、物联网、虚拟化学习的技术博客。"></span><span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Hexo Next 8.x 主题添加可切换的暗黑模式 | Clay 的技术空间"><meta itemprop="description" content="本文主要介绍如何为 Hexo Next 7.x 与 8.x 主题添加可切换的暗黑模式，包括暗黑模式切换插件的使用与手动添加可切换的暗黑模式。"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Hexo Next 8.x 主题添加可切换的暗黑模式</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-04-28 23:19:23" itemprop="dateCreated datePublished" datetime="2021-04-28T23:19:23+08:00">2021-04-28</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-08-21 22:18:34" itemprop="dateModified" datetime="2023-08-21T22:18:34+08:00">2023-08-21</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/abf4aee1.html#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/abf4aee1.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.7k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 ≈</span> <span>2 分钟</span></span></div></div></header><div class="post-body post-container" itemprop="articleBody" id="readmore-container"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="Next-8-x-原生的暗黑模式"><a href="#Next-8-x-原生的暗黑模式" class="headerlink" title="Next 8.x 原生的暗黑模式"></a>Next 8.x 原生的暗黑模式</h3><p>Next 8.x 主题已经原生支持暗黑模式，只需要在 Next 的 <code>_config.yml</code> 配置文件中，将相应的开关打开即可（如下所示）：</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">darkmode:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><p>Next 8.x 主题原生暗黑模式的优缺点：</p><ul><li>优点：<ul><li>配置非常简单</li></ul></li><li>缺点：<ul><li>缺少切换按钮，默认是根据系统偏好（系统是否处于暗黑模式）来决定是否启用</li></ul></li></ul><span id="more"></span><h2 id="Next-7-x-自动添加可切换的暗黑模式"><a href="#Next-7-x-自动添加可切换的暗黑模式" class="headerlink" title="Next 7.x 自动添加可切换的暗黑模式"></a>Next 7.x 自动添加可切换的暗黑模式</h2><p>若您正在使用的 Next 版本是 7.x，建议直接安装 <a target="_blank" rel="external nofollow" href="https://github.com/rqh656418510/hexo-next-darkmode">hexo-next-darkmode</a> 插件来自动添加可切换的暗黑模式，具体的安装步骤与下面讲述的 <a href="/posts/abf4aee1.html#Next-8-x-%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%E5%8F%AF%E5%88%87%E6%8D%A2%E7%9A%84%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F">Next 8.x 教程</a>一致。</p><h2 id="Next-8-x-自动添加可切换的暗黑模式"><a href="#Next-8-x-自动添加可切换的暗黑模式" class="headerlink" title="Next 8.x 自动添加可切换的暗黑模式"></a>Next 8.x 自动添加可切换的暗黑模式</h2><p><a target="_blank" rel="external nofollow" href="https://github.com/rqh656418510/hexo-next-darkmode">hexo-next-darkmode</a> 插件支持自动添加可切换的暗黑模式，同时支持暗黑模式下的 CSS 样式高度自定义，兼容 Next 7.x 与 8.x 版本。</p><h3 id="安装-Hexo-插件"><a href="#安装-Hexo-插件" class="headerlink" title="安装 Hexo 插件"></a>安装 Hexo 插件</h3><p>安装 <code>hexo-next-darkmode</code> 插件</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">$ npm</span> install hexo-next-darkmode<span class="params"> --save</span></span><br></pre></td></tr></tbody></table></figure><h3 id="配置-Hexo-插件"><a href="#配置-Hexo-插件" class="headerlink" title="配置 Hexo 插件"></a>配置 Hexo 插件</h3><p>在 Next 主题的 <code>_config.yml</code> 配置文件里添加以下内容</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Darkmode JS</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/rqh656418510/hexo-next-darkmode, https://github.com/sandoche/Darkmode.js</span></span><br><span class="line"><span class="attr">darkmode_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">bottom:</span> <span class="string">'64px'</span> <span class="comment"># default: '32px'</span></span><br><span class="line">  <span class="attr">right:</span> <span class="string">'unset'</span> <span class="comment"># default: '32px'</span></span><br><span class="line">  <span class="attr">left:</span> <span class="string">'32px'</span> <span class="comment"># default: 'unset'</span></span><br><span class="line">  <span class="attr">time:</span> <span class="string">'0.5s'</span> <span class="comment"># default: '0.3s'</span></span><br><span class="line">  <span class="attr">mixColor:</span> <span class="string">'transparent'</span> <span class="comment"># default: '#fff'</span></span><br><span class="line">  <span class="attr">backgroundColor:</span> <span class="string">'transparent'</span> <span class="comment"># default: '#fff'</span></span><br><span class="line">  <span class="attr">buttonColorDark:</span> <span class="string">'#100f2c'</span> <span class="comment"># default: '#100f2c'</span></span><br><span class="line">  <span class="attr">buttonColorLight:</span> <span class="string">'#fff'</span> <span class="comment"># default: '#fff'</span></span><br><span class="line">  <span class="attr">isActivated:</span> <span class="literal">false</span> <span class="comment"># default false</span></span><br><span class="line">  <span class="attr">saveInCookies:</span> <span class="literal">true</span> <span class="comment"># default: true</span></span><br><span class="line">  <span class="attr">label:</span> <span class="string">'🌓'</span> <span class="comment"># default: ''</span></span><br><span class="line">  <span class="attr">autoMatchOsTheme:</span> <span class="literal">true</span> <span class="comment"># default: true</span></span><br><span class="line">  <span class="attr">libUrl:</span> <span class="comment"># Set custom library cdn url for Darkmode.js</span></span><br></pre></td></tr></tbody></table></figure><ul><li><code>isActivated: true</code>：默认激活暗黑 / 夜间模式，请始终与 <code>saveInCookies: false</code>、<code>autoMatchOsTheme: false</code> 一起使用；同时需要在 NexT 主题的 <code>_config.yml</code> 配置文件里设置 <code>pjax: true</code>，即启用 Pjax。</li></ul><h3 id="关闭原生的暗黑模式"><a href="#关闭原生的暗黑模式" class="headerlink" title="关闭原生的暗黑模式"></a>关闭原生的暗黑模式</h3><p>确保 Next 原生的 <code>darkmode</code> 选项设置为 <code>false</code>，在 Next 的 <code>_config.yml</code> 配置文件中更改以下内容：</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">darkmode:</span> <span class="literal">false</span></span><br></pre></td></tr></tbody></table></figure><h3 id="暗黑模式-CSS-样式自定义（可选）"><a href="#暗黑模式-CSS-样式自定义（可选）" class="headerlink" title="暗黑模式 CSS 样式自定义（可选）"></a>暗黑模式 CSS 样式自定义（可选）</h3><p>暗黑模式激活后，<code>hexo-next-darkmode</code> 插件会将 <code>darkmode--activated</code> CSS 类添加到 <code>body</code> 标签，可以利用它覆盖插件默认自带的 CSS 样式（如下所示），这样就可以实现暗黑模式 CSS 样式的高度自定义。更多配置内容介绍可以参考<a target="_blank" rel="external nofollow" href="https://github.com/rqh656418510/hexo-next-darkmode/blob/main/README_CN.md">官方文档</a>，实现原理分析可以看<a href="/posts/abf4aee1.html#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90">这里</a>。</p><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.darkmode--activated</span> {</span><br><span class="line">  --<span class="selector-tag">body</span>-bg-<span class="attribute">color</span>: <span class="number">#282828</span>;</span><br><span class="line">  --<span class="attribute">content</span>-bg-<span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  --card-bg-<span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">  --text-<span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  --<span class="selector-tag">blockquote</span>-<span class="attribute">color</span>: <span class="number">#bbb</span>;</span><br><span class="line">  --link-<span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  --link-hover-<span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  --brand-<span class="attribute">color</span>: <span class="number">#ddd</span>;</span><br><span class="line">  --brand-hover-<span class="attribute">color</span>: <span class="number">#ddd</span>;</span><br><span class="line">  --<span class="selector-tag">table</span>-row-odd-bg-<span class="attribute">color</span>: <span class="number">#282828</span>;</span><br><span class="line">  --<span class="selector-tag">table</span>-row-hover-bg-<span class="attribute">color</span>: <span class="number">#363636</span>;</span><br><span class="line">  --<span class="selector-tag">menu</span>-item-bg-<span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">  --btn-default-bg: <span class="number">#222</span>;</span><br><span class="line">  --btn-default-<span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  --btn-default-<span class="attribute">border-color</span>: <span class="number">#555</span>;</span><br><span class="line">  --btn-default-hover-bg: <span class="number">#666</span>;</span><br><span class="line">  --btn-default-hover-<span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  --btn-default-hover-<span class="attribute">border-color</span>: <span class="number">#666</span>;</span><br><span class="line">  --highlight-<span class="attribute">background</span>: <span class="number">#282b2e</span>;</span><br><span class="line">  --highlight-foreground: <span class="number">#a9b7c6</span>;</span><br><span class="line">  --highlight-gutter-<span class="attribute">background</span>: <span class="number">#34393d</span>;</span><br><span class="line">  --highlight-gutter-foreground: <span class="number">#9ca9b6</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.darkmode--activated</span> <span class="selector-tag">img</span> {</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.75</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.darkmode--activated</span> <span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> {</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.darkmode--activated</span> <span class="selector-tag">code</span> {</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#69dbdc</span>;</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="重新构建生成静态资源文件"><a href="#重新构建生成静态资源文件" class="headerlink" title="重新构建生成静态资源文件"></a>重新构建生成静态资源文件</h3><p>Hexo 重新构建生成静态资源文件后，点击页面上的按钮即可切换暗黑模式，最终演示效果可以看<a href="/posts/abf4aee1.html#%E6%9C%80%E7%BB%88%E6%BC%94%E7%A4%BA%E6%95%88%E6%9E%9C">这里</a>。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">$ hexo</span> clean</span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">$ hexo</span> g<span class="params"> -d</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Next-8-x-手动添加可切换的暗黑模式"><a href="#Next-8-x-手动添加可切换的暗黑模式" class="headerlink" title="Next 8.x 手动添加可切换的暗黑模式"></a>Next 8.x 手动添加可切换的暗黑模式</h2><h3 id="关闭原生的暗黑模式-1"><a href="#关闭原生的暗黑模式-1" class="headerlink" title="关闭原生的暗黑模式"></a>关闭原生的暗黑模式</h3><p>确保 Next 原生的 <code>darkmode</code> 选项设置为 <code>false</code>，在 Next 的 <code>_config.yml</code> 配置文件中更改以下内容：</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">darkmode:</span> <span class="literal">false</span></span><br></pre></td></tr></tbody></table></figure><h3 id="添加-JS-库-Darkmode-js"><a href="#添加-JS-库-Darkmode-js" class="headerlink" title="添加 JS 库 Darkmode.js"></a>添加 JS 库 Darkmode.js</h3><p>下载 <code>darkmode.js</code> 或者直接添加 CDN 配置到 Next 的 <code>themes/next/_vendors.yml</code> 文件末尾，这里采用 CDN 配置的方式（如下所示）</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">darkmode_js:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">darkmode-js</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">1.5</span><span class="number">.7</span></span><br><span class="line">  <span class="attr">file:</span> <span class="string">lib/darkmode-js.min.js</span></span><br></pre></td></tr></tbody></table></figure><h3 id="添加-Darkmode-js-的启用开关"><a href="#添加-Darkmode-js-的启用开关" class="headerlink" title="添加 Darkmode.js 的启用开关"></a>添加 Darkmode.js 的启用开关</h3><p>在 Next 的 <code>_config.yml</code> 配置文件添加以下内容，值得一提的是，这里需要注意缩进，第一个 <code>darkmode_js</code> 是在 <code>vendors</code> 栏目下，第二个 <code>darkmode_js</code> 是一个单独的栏目</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="comment"># Darkmode.js</span></span><br><span class="line">  <span class="attr">darkmode_js:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">darkmode_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><h3 id="配置-JS-库-Darkmode-js"><a href="#配置-JS-库-Darkmode-js" class="headerlink" title="配置 JS 库 Darkmode.js"></a>配置 JS 库 Darkmode.js</h3><p>编辑 <code>themes/next/layout/_scripts/vendors.njk</code> 文件，将原有的代码删除掉，替换为以下代码即可：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">{%- <span class="keyword">if</span> theme.canvas_ribbon.enable %}</span><br><span class="line">  &lt;script size=<span class="string">"{{ theme.canvas_ribbon.size }}"</span> alpha=<span class="string">"{{ theme.canvas_ribbon.alpha }}"</span> zIndex=<span class="string">"{{ theme.canvas_ribbon.zIndex }}"</span> src=<span class="string">"{{ theme.vendors.canvas_ribbon }}"</span>&gt;&lt;/script&gt;</span><br><span class="line">{%- endif %}</span><br><span class="line"></span><br><span class="line">{# Customize darkmode.js - Declaration #}</span><br><span class="line">{%- <span class="keyword">if</span> theme.darkmode_js.enable %}</span><br><span class="line">  &lt;script src=<span class="string">"{{ theme.vendors.darkmode_js }}"</span>&gt;&lt;/script&gt;</span><br><span class="line">{%- endif %}</span><br><span class="line"></span><br><span class="line">{%- <span class="keyword">for</span> name <span class="keyword">in</span> js_vendors() %}</span><br><span class="line">  &lt;script src=<span class="string">"{{ url_for(theme.vendors[name]) }}"</span>&gt;&lt;/script&gt;</span><br><span class="line">{%- endfor %}</span><br><span class="line"></span><br><span class="line">{# Customize darkmode.js - Invokation #}</span><br><span class="line">{%- <span class="keyword">if</span> theme.darkmode_js.enable %}</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> options = {</span><br><span class="line">  <span class="attr">bottom</span>: <span class="string">'64px'</span>, <span class="comment">// default: '32px'</span></span><br><span class="line">  <span class="attr">right</span>: <span class="string">'unset'</span>, <span class="comment">// default: '32px'</span></span><br><span class="line">  <span class="attr">left</span>: <span class="string">'32px'</span>, <span class="comment">// default: 'unset'</span></span><br><span class="line">  <span class="attr">time</span>: <span class="string">'0.5s'</span>, <span class="comment">// default: '0.3s'</span></span><br><span class="line">  <span class="attr">mixColor</span>: <span class="string">'#fff'</span>, <span class="comment">// default: '#fff'</span></span><br><span class="line">  <span class="attr">backgroundColor</span>: <span class="string">'#fff'</span>,  <span class="comment">// default: '#fff'</span></span><br><span class="line">  <span class="attr">buttonColorDark</span>: <span class="string">'#100f2c'</span>,  <span class="comment">// default: '#100f2c'</span></span><br><span class="line">  <span class="attr">buttonColorLight</span>: <span class="string">'#fff'</span>, <span class="comment">// default: '#fff'</span></span><br><span class="line">  <span class="attr">saveInCookies</span>: <span class="literal">true</span>, <span class="comment">// default: true,</span></span><br><span class="line">  <span class="attr">label</span>: <span class="string">'🌓'</span>, <span class="comment">// default: ''</span></span><br><span class="line">  <span class="attr">autoMatchOsTheme</span>: <span class="literal">true</span> <span class="comment">// default: true</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">const</span> darkmode = <span class="keyword">new</span> Darkmode(options);</span><br><span class="line">darkmode.showWidget();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">{%- endif %}</span><br></pre></td></tr></tbody></table></figure><p>更改后的源文件就如上所示，其他内容可以根据实际情况自行更改。添加上面的代码后，暗黑模式的切换按钮默认显示在左下角，如果希望切换按钮显示在右下角，可以参考以下代码：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">{# Customize darkmode.js - Invokation #}</span><br><span class="line">{%- <span class="keyword">if</span> theme.darkmode_js.enable %}</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> options = {</span><br><span class="line">  <span class="attr">bottom</span>: <span class="string">'64px'</span>, <span class="comment">// default: '32px'</span></span><br><span class="line">  <span class="attr">right</span>: <span class="string">'32px'</span>, <span class="comment">// default: '32px'</span></span><br><span class="line">  <span class="attr">left</span>: <span class="string">'unset'</span>, <span class="comment">// default: 'unset'</span></span><br><span class="line">  <span class="attr">time</span>: <span class="string">'0.5s'</span>, <span class="comment">// default: '0.3s'</span></span><br><span class="line">  <span class="attr">mixColor</span>: <span class="string">'#fff'</span>, <span class="comment">// default: '#fff'</span></span><br><span class="line">  <span class="attr">backgroundColor</span>: <span class="string">'#fff'</span>,  <span class="comment">// default: '#fff'</span></span><br><span class="line">  <span class="attr">buttonColorDark</span>: <span class="string">'#100f2c'</span>,  <span class="comment">// default: '#100f2c'</span></span><br><span class="line">  <span class="attr">buttonColorLight</span>: <span class="string">'#fff'</span>, <span class="comment">// default: '#fff'</span></span><br><span class="line">  <span class="attr">saveInCookies</span>: <span class="literal">true</span>, <span class="comment">// default: true,</span></span><br><span class="line">  <span class="attr">label</span>: <span class="string">'🌓'</span>, <span class="comment">// default: ''</span></span><br><span class="line">  <span class="attr">autoMatchOsTheme</span>: <span class="literal">false</span> <span class="comment">// default: true</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">const</span> darkmode = <span class="keyword">new</span> Darkmode(options);</span><br><span class="line">darkmode.showWidget();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">{%- endif %}</span><br></pre></td></tr></tbody></table></figure><h3 id="暗黑模式-CSS-样式自定义"><a href="#暗黑模式-CSS-样式自定义" class="headerlink" title="暗黑模式 CSS 样式自定义"></a>暗黑模式 CSS 样式自定义</h3><h4 id="实现原理分析"><a href="#实现原理分析" class="headerlink" title="实现原理分析"></a>实现原理分析</h4><p>从 Next 8.0 开始，已经原生支持代码块 Dark 主题，直接在 Next 的 <code>_config.xml</code> 文件里配置即可（如下所示）：</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Code Highlight theme</span></span><br><span class="line">  <span class="comment"># All available themes: https://theme-next.js.org/highlight/</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">atelier-forest-light</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">androidstudio</span></span><br><span class="line">  <span class="attr">prism:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">prism</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">prism-atom-dark</span></span><br></pre></td></tr></tbody></table></figure><p>其中 Next 8.3 源文件 <code>themes/next/source/css/_colors.styl</code> 的内容如下所示：</p><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> {</span><br><span class="line">  --<span class="selector-tag">body</span>-bg-<span class="attribute">color</span>: $body-bg-color;</span><br><span class="line">  --<span class="attribute">content</span>-bg-<span class="attribute">color</span>: $content-bg-color;</span><br><span class="line">  --card-bg-<span class="attribute">color</span>: $card-bg-color;</span><br><span class="line">  --text-<span class="attribute">color</span>: $text-color;</span><br><span class="line">  --<span class="selector-tag">blockquote</span>-<span class="attribute">color</span>: $blockquote-color;</span><br><span class="line">  --link-<span class="attribute">color</span>: $link-color;</span><br><span class="line">  --link-hover-<span class="attribute">color</span>: $link-hover-color;</span><br><span class="line">  --brand-<span class="attribute">color</span>: $brand-color;</span><br><span class="line">  --brand-hover-<span class="attribute">color</span>: $brand-hover-color;</span><br><span class="line">  --<span class="selector-tag">table</span>-row-odd-bg-<span class="attribute">color</span>: $table-row-odd-bg-color;</span><br><span class="line">  --<span class="selector-tag">table</span>-row-hover-bg-<span class="attribute">color</span>: $table-row-hover-bg-color;</span><br><span class="line">  --<span class="selector-tag">menu</span>-item-bg-<span class="attribute">color</span>: $menu-item-bg-color;</span><br><span class="line"></span><br><span class="line">  --btn-default-bg: $btn-default-bg;</span><br><span class="line">  --btn-default-<span class="attribute">color</span>: $btn-default-color;</span><br><span class="line">  --btn-default-<span class="attribute">border-color</span>: $btn-default-border-color;</span><br><span class="line">  --btn-default-hover-bg: $btn-default-hover-bg;</span><br><span class="line">  --btn-default-hover-<span class="attribute">color</span>: $btn-default-hover-color;</span><br><span class="line">  --btn-default-hover-<span class="attribute">border-color</span>: $btn-default-hover-border-color;</span><br><span class="line"></span><br><span class="line">  --highlight-<span class="attribute">background</span>: $highlight-background;</span><br><span class="line">  --highlight-foreground: $highlight-foreground;</span><br><span class="line">  --highlight-gutter-<span class="attribute">background</span>: $highlight-gutter-background;</span><br><span class="line">  --highlight-gutter-foreground: $highlight-gutter-foreground;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">if (hexo-config('darkmode')) {</span><br><span class="line">  <span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme</span>: dark) {</span><br><span class="line">    <span class="selector-pseudo">:root</span> {</span><br><span class="line">      --<span class="selector-tag">body</span>-bg-<span class="attribute">color</span>: $body-bg-color-dark;</span><br><span class="line">      --<span class="attribute">content</span>-bg-<span class="attribute">color</span>: $content-bg-color-dark;</span><br><span class="line">      --card-bg-<span class="attribute">color</span>: $card-bg-color-dark;</span><br><span class="line">      --text-<span class="attribute">color</span>: $text-color-dark;</span><br><span class="line">      --<span class="selector-tag">blockquote</span>-<span class="attribute">color</span>: $blockquote-color-dark;</span><br><span class="line">      --link-<span class="attribute">color</span>: $link-color-dark;</span><br><span class="line">      --link-hover-<span class="attribute">color</span>: $link-hover-color-dark;</span><br><span class="line">      --brand-<span class="attribute">color</span>: $brand-color-dark;</span><br><span class="line">      --brand-hover-<span class="attribute">color</span>: $brand-hover-color-dark;</span><br><span class="line">      --<span class="selector-tag">table</span>-row-odd-bg-<span class="attribute">color</span>: $table-row-odd-bg-color-dark;</span><br><span class="line">      --<span class="selector-tag">table</span>-row-hover-bg-<span class="attribute">color</span>: $table-row-hover-bg-color-dark;</span><br><span class="line">      --<span class="selector-tag">menu</span>-item-bg-<span class="attribute">color</span>: $menu-item-bg-color-dark;</span><br><span class="line"></span><br><span class="line">      --btn-default-bg: $btn-default-bg-dark;</span><br><span class="line">      --btn-default-<span class="attribute">color</span>: $btn-default-color-dark;</span><br><span class="line">      --btn-default-<span class="attribute">border-color</span>: $btn-default-border-color-dark;</span><br><span class="line">      --btn-default-hover-bg: $btn-default-hover-bg-dark;</span><br><span class="line">      --btn-default-hover-<span class="attribute">color</span>: $btn-default-hover-color-dark;</span><br><span class="line">      --btn-default-hover-<span class="attribute">border-color</span>: $btn-default-hover-border-color-dark;</span><br><span class="line"></span><br><span class="line">      --highlight-<span class="attribute">background</span>: $highlight-background-dark;</span><br><span class="line">      --highlight-foreground: $highlight-foreground-dark;</span><br><span class="line">      --highlight-gutter-<span class="attribute">background</span>: $highlight-gutter-background-dark;</span><br><span class="line">      --highlight-gutter-foreground: $highlight-gutter-foreground-dark;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">img</span> {</span><br><span class="line">      <span class="attribute">opacity</span>: .<span class="number">75</span>;</span><br><span class="line"></span><br><span class="line">      &amp;<span class="selector-pseudo">:hover</span> {</span><br><span class="line">        <span class="attribute">opacity</span>: .<span class="number">9</span>;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>暗黑模式激活后，<code>Darkmode.js</code> 默认会将 <code>darkmode--activated</code> CSS 类添加到 <code>body</code> 标签，可以利用它覆盖暗黑模式默认的 CSS 样式。换句话说，只要将上面的 <code>themes/next/source/css/_colors.styl</code> 里的 CSS 样式添加到 <code>darkmode--activated</code> CSS 类的下面，就可以实现暗黑模式的 CSS 样式自定义。</p><h4 id="实现步骤介绍"><a href="#实现步骤介绍" class="headerlink" title="实现步骤介绍"></a>实现步骤介绍</h4><ul><li>第一步：创建 <code>themes/next/source/css/_custom/darkmode.styl</code> 源文件，并将以下内容写入到文件里，<code>code</code> 样式用于控制暗黑模式下的代码块颜色显示</li></ul><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.darkmode--activated</span>{</span><br><span class="line">  --<span class="selector-tag">body</span>-bg-<span class="attribute">color</span>: $body-bg-color-dark;</span><br><span class="line">  --<span class="attribute">content</span>-bg-<span class="attribute">color</span>: $content-bg-color-dark;</span><br><span class="line">  --card-bg-<span class="attribute">color</span>: $card-bg-color-dark;</span><br><span class="line">  --text-<span class="attribute">color</span>: $text-color-dark;</span><br><span class="line">  --<span class="selector-tag">blockquote</span>-<span class="attribute">color</span>: $blockquote-color-dark;</span><br><span class="line">  --link-<span class="attribute">color</span>: $link-color-dark;</span><br><span class="line">  --link-hover-<span class="attribute">color</span>: $link-hover-color-dark;</span><br><span class="line">  --brand-<span class="attribute">color</span>: $brand-color-dark;</span><br><span class="line">  --brand-hover-<span class="attribute">color</span>: $brand-hover-color-dark;</span><br><span class="line">  --<span class="selector-tag">table</span>-row-odd-bg-<span class="attribute">color</span>: $table-row-odd-bg-color-dark;</span><br><span class="line">  --<span class="selector-tag">table</span>-row-hover-bg-<span class="attribute">color</span>: $table-row-hover-bg-color-dark;</span><br><span class="line">  --<span class="selector-tag">menu</span>-item-bg-<span class="attribute">color</span>: $menu-item-bg-color-dark;</span><br><span class="line"></span><br><span class="line">  --btn-default-bg: $btn-default-bg-dark;</span><br><span class="line">  --btn-default-<span class="attribute">color</span>: $btn-default-color-dark;</span><br><span class="line">  --btn-default-<span class="attribute">border-color</span>: $btn-default-border-color-dark;</span><br><span class="line">  --btn-default-hover-bg: $btn-default-hover-bg-dark;</span><br><span class="line">  --btn-default-hover-<span class="attribute">color</span>: $btn-default-hover-color-dark;</span><br><span class="line">  --btn-default-hover-<span class="attribute">border-color</span>: $btn-default-hover-border-color-dark;</span><br><span class="line"></span><br><span class="line">  --highlight-<span class="attribute">background</span>: $highlight-background-dark;</span><br><span class="line">  --highlight-foreground: $highlight-foreground-dark;</span><br><span class="line">  --highlight-gutter-<span class="attribute">background</span>: $highlight-gutter-background-dark;</span><br><span class="line">  --highlight-gutter-foreground: $highlight-gutter-foreground-dark;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">img</span> {</span><br><span class="line">    <span class="attribute">opacity</span>: .<span class="number">75</span>;</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> {</span><br><span class="line">      <span class="attribute">opacity</span>: .<span class="number">9</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">code</span> {</span><br><span class="line">   <span class="attribute">color</span>: <span class="number">#69dbdc</span>;</span><br><span class="line">   <span class="attribute">background</span>: transparent;</span><br><span class="line"> }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>若添加上述 CSS 样式后，暗黑模式的切换按钮点击无效，那么可以尝试追加以下样式来解决</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">button.darkmode-toggle {</span><br><span class="line">  z-index: 9999;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>第二步：在 <code>themes/next/source/css/main.styl</code> 文件里引入上面创建的 CSS 文件即可</li></ul><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">'_custom/darkmode.styl'</span>;</span><br></pre></td></tr></tbody></table></figure><ul><li>第三步：在 <code>themes/next/layout/_scripts/vendors.njk</code> 里更改 <code>Darkmode.js</code> 的颜色配置（如下所示），其中主要设置 <code>mixColor: 'transparent'</code> 与 <code>backgroundColor: 'transparent'</code>，否则自定义的暗黑模式 CSS 样式无法达到预期的显示效果</li></ul><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">{# Customize darkmode<span class="selector-class">.js</span> - Declaration #}</span><br><span class="line">{%- if theme<span class="selector-class">.darkmode_js</span><span class="selector-class">.enable</span> %}</span><br><span class="line">  &lt;script <span class="attribute">src</span>="{{ theme<span class="selector-class">.vendors</span><span class="selector-class">.darkmode_js</span> }}"&gt;&lt;/script&gt;</span><br><span class="line">{%- endif %}</span><br><span class="line"></span><br><span class="line">{# Customize darkmode<span class="selector-class">.js</span> - Invokation #}</span><br><span class="line">{%- if theme<span class="selector-class">.darkmode_js</span><span class="selector-class">.enable</span> %}</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="selector-tag">var</span> options = {</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="string">'64px'</span>, // default: <span class="string">'32px'</span></span><br><span class="line">  right: <span class="string">'unset'</span>, // default: <span class="string">'32px'</span></span><br><span class="line">  left: <span class="string">'32px'</span>, // default: <span class="string">'unset'</span></span><br><span class="line">  time: <span class="string">'0.5s'</span>, // default: <span class="string">'0.3s'</span></span><br><span class="line">  mixColor: <span class="string">'transparent'</span>, // default: <span class="string">'#fff'</span></span><br><span class="line">  backgroundColor: <span class="string">'transparent'</span>,  // default: <span class="string">'#fff'</span></span><br><span class="line">  buttonColorDark: <span class="string">'#100f2c'</span>,  // default: <span class="string">'#100f2c'</span></span><br><span class="line">  buttonColorLight: <span class="string">'#fff'</span>, // default: <span class="string">'#fff'</span></span><br><span class="line">  saveInCookies: true, // default: true,</span><br><span class="line">  label: <span class="string">'🌓'</span>, // default: <span class="string">''</span></span><br><span class="line">  autoMatchOsTheme: true // default: true</span><br><span class="line">}</span><br><span class="line">const darkmode = new Darkmode(options);</span><br><span class="line">darkmode<span class="selector-class">.showWidget</span>();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">{%- endif %}</span><br></pre></td></tr></tbody></table></figure><h3 id="重新构建生成静态资源文件-1"><a href="#重新构建生成静态资源文件-1" class="headerlink" title="重新构建生成静态资源文件"></a>重新构建生成静态资源文件</h3><p>Hexo 重新构建生成静态资源文件后，点击页面上的按钮即可切换暗黑模式</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">$ hexo</span> clean</span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">$ hexo</span> g<span class="params"> -d</span></span><br></pre></td></tr></tbody></table></figure><h2 id="支持评论系统的暗黑模式"><a href="#支持评论系统的暗黑模式" class="headerlink" title="支持评论系统的暗黑模式"></a>支持评论系统的暗黑模式</h2><h3 id="Waline-评论系统"><a href="#Waline-评论系统" class="headerlink" title="Waline 评论系统"></a>Waline 评论系统</h3><ul><li><a href="/posts/ae18fb85.html#%E5%90%AF%E7%94%A8%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F">Waline 评论系统启用暗黑模式</a></li></ul><h2 id="最终演示效果"><a href="#最终演示效果" class="headerlink" title="最终演示效果"></a>最终演示效果</h2><p><img data-src="/gif/2021/04/darkmode.gif" alt="darkmode.gif"></p><h2 id="常见使用问题"><a href="#常见使用问题" class="headerlink" title="常见使用问题"></a>常见使用问题</h2><h3 id="暗黑模式切换插件不生效"><a href="#暗黑模式切换插件不生效" class="headerlink" title="暗黑模式切换插件不生效"></a>暗黑模式切换插件不生效</h3><p>由于暗黑模式切换插件依赖了 <a target="_blank" rel="external nofollow" href="https://github.com/sandoche/Darkmode.js">Darkmode.js</a>，如果插件不生效，这很有可能是 <code>Darkmode.js</code> 的 CDN 资源失效了（在国内访问被墙）。此时，建议使用暗黑模式切换插件的 <code>libUrl</code> 配置参数来指定可用的 CDN 资源链接，如下所示：</p><ul><li>使用 <code>Unpkg</code> 免费提供的 CDN 资源</li></ul><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">darkmode_js:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">libUrl:</span> <span class="string">'https://unpkg.com/darkmode-js@1.5.7/lib/darkmode-js.min.js'</span></span><br></pre></td></tr></tbody></table></figure><ul><li>使用 <code>Jsdelivr</code> 免费提供的 CDN 资源</li></ul><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">darkmode_js:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">libUrl:</span> <span class="string">'https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js'</span></span><br></pre></td></tr></tbody></table></figure><div class="admonition note"><p class="admonition-title">提示</p><ol><li>为了博客网站运行的稳定性，建议将 <code>Darkmode.js</code> 下载到本地，然后将它部署到自己的博客站点内，最后使用暗黑模式切换插件的 <code>libUrl</code> 配置参数来指定站内的 JS 资源链接。</li><li>值得一提的是，<code>Darkmode.js</code> 可以从 <a href="https://www.techgrow.cn/lib/darkmode/darkmode@1.5.7.min.js">这里</a>下载得到。</li></ol></div><h3 id="评论区留言反馈使用体验"><a href="#评论区留言反馈使用体验" class="headerlink" title="评论区留言反馈使用体验"></a>评论区留言反馈使用体验</h3><p>若您在使用插件的过程中遇到问题，或者有好的建议，欢迎在下方的评论区留言，也可以选择创建 <a target="_blank" rel="external nofollow" href="https://github.com/rqh656418510/hexo-next-darkmode/issues/new">GitHub Issue</a>。希望您在留言的时候，能提供 <code>NexT 主题的版本</code> + <code>博客链接</code>，这样方便博主跟踪并帮你解决问题。</p><h3 id="Darkmode-js-的详细配置"><a href="#Darkmode-js-的详细配置" class="headerlink" title="Darkmode.js 的详细配置"></a>Darkmode.js 的详细配置</h3><ul><li><a target="_blank" rel="external nofollow" href="https://github.com/sandoche/Darkmode.js">Darkmode Github</a></li></ul><h3 id="Chrome-无法正常显示切换按钮的图标"><a href="#Chrome-无法正常显示切换按钮的图标" class="headerlink" title="Chrome 无法正常显示切换按钮的图标"></a>Chrome 无法正常显示切换按钮的图标</h3><p>默认的切换按钮图标 <code>label: '🌓'</code> 是 Emoji 表情字符，部分浏览器（如 Chrome）可能会显示为一个方块。解决方法是访问 <a target="_blank" rel="external nofollow" href="https://chrome.google.com/webstore/detail/chromoji-emojis-for-googl/negakbijaemdgbhklopmghphgaeadmpo">Chrome 网上应用商店</a>，手动安装 <code>Chromoji</code> 浏览器插件，即可让 Chrome 正常显示 Emoji 表情字符。请确保可以科学上网，否则无法正常访问 Chrome 的网上应用商店。若此方法依旧无法解决该问题，请参考下方评论区中网友 <code>busyops</code> 给出的解决方案。</p><div id="readmore-expansion" class="pjax"></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script data-pjax="" src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script data-pjax="">var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),allowMobile=!1;if(!isMobile||isMobile&&allowMobile)try{var plugin=new ReadmorePlugin;plugin.init({type:"hexo",id:"readmore-container",name:"全栈技术驿站",blogId:"96641-5333172926158-056",qrcode:"https://www.techgrow.cn/img/wx_mp_qr.png",keyword:"Tech",random:"1",height:"auto",expires:"365",lockToc:"yes",interval:"30",baseUrl:"",execute:"no"})}catch(e){console.warn("readmore plugin occurred error: "+e.name+" | "+e.message)}</script></div><footer class="post-footer"><div class="reward-container"><div>支持一根棒棒糖！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/abf4aee1.html" title="Hexo Next 8.x 主题添加可切换的暗黑模式">https://www.techgrow.cn/posts/abf4aee1.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎添加博主微信，请备注 "博客"，届时会邀请您加入微信群</span><br> <img src="/img/wx_account_qr.png"></div></div></div><div class="post-tags"><a href="/tags/%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/" rel="tag"><i class="fa fa-tag"></i> 静态博客</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/cfba1e15.html" rel="prev" title="PyCharm 2021.1 最新专业版激活教程"><i class="fa fa-angle-left"></i> PyCharm 2021.1 最新专业版激活教程</a></div><div class="post-nav-item"> <a href="/posts/a4ef22cd.html" rel="next" title="Centos 7 安装 R 语言">Centos 7 安装 R 语言<i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> Copyright © 2018 – <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">964k</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 ≈</span> <span title="站点阅读时长">14:37</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & Docker | "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="beian"> <span><img src="/img/gonganbeian.png" alt=""></span> <span><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤 ICP 备 19024664 号</a></span> <span>|&nbsp;</span> <span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302004035" rel="external nofollow" target="_blank">粤公网安备 44011302004035 号</a></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div> <a href="https://github.com/rqh656418510" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="external nofollow" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-g2xji1rlE3KsGVClvuxTbcR0Kn2+wtQADSff2Tbb4zA="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"/lib/mermaid/dist/mermaid.min.js","integrity":"sha256-9y71g5Lz/KLsHjB8uXwnkuWDtAMDSzD/HdIbqhJfTAI="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/pace.js"></script><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://www.techgrow.cn/lib/darkmode/darkmode@1.5.7.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '30px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js"></script><script>
    var qiniu_domain = "https://qiniu.techgrow.cn";
    var qiniu_token_url = "https://open.techgrow.cn/app/api/qiniu/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline.techgrow.cn:9360","cssUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css","commentCount":true,"pageview":false,"copyright":false,"allowUploadImage":true,"libUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.js","locale":{"placeholder":"支持匿名评论啦，若希望及时收到博主的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧"},"dark":"body.darkmode--activated","emoji":["https://www.techgrow.cn/lib/@waline/emojis/1.0.1/weibo"],"meta":["nick","mail","link"],"login":"enable","pageSize":10,"qiniuDebug":false,"qiniuDomain":"https://qiniu.techgrow.cn","qiniuTokenUrl":"https://open.techgrow.cn/app/api/qiniu/token/upload","qiniuLibUrl":"https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js","el":"#waline","comment":true,"path":"/posts/abf4aee1.html"}</script><link rel="stylesheet" href="https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css"><script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.imageUploader = false;
  }
  else if (CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.imageUploader = qiniuUploadImage;
  } else {
   CONFIG.waline.imageUploader = true;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),e="ipad"==i.match(/ipad/i),a="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),r="ucweb"==i.match(/ucweb/i),c="android"==i.match(/android/i),l="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(e||a||o||n||r||c||l||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;jQuery(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||jQuery("#aplayer").css("display","block"))}),jQuery(window).on("load",function(){aplayerEnable&&jQuery(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>