<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/pace-js/themes/blue/pace-theme-minimal.css"><script src="/lib/pace-js/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="本文主要介绍 C++ 的进阶基础教程，包括 STL 几大容器的使用，包括 string 容器、pair 对组等。"><meta property="og:type" content="article"><meta property="og:title" content="C++ 进阶基础之六"><meta property="og:url" content="https://www.techgrow.cn/posts/62e4578b.html"><meta property="og:site_name" content="Clay 的技术空间"><meta property="og:description" content="本文主要介绍 C++ 的进阶基础教程，包括 STL 几大容器的使用，包括 string 容器、pair 对组等。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2021-12-18T13:55:34.000Z"><meta property="article:modified_time" content="2023-12-06T13:55:34.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="C++"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.techgrow.cn/posts/62e4578b.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/62e4578b.html","path":"posts/62e4578b.html","title":"C++ 进阶基础之六"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>C++ 进阶基础之六 | Clay 的技术空间</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false,"measure_protocol_api_secret":null}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn"><link rel="stylesheet" type="text/css" href="/css/injector/main.css"><link rel="preload" as="style" href="/css/injector/light.css"><link rel="preload" as="style" href="/css/injector/dark.css"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术空间" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion"><script src="/lib/jquery/dist/jquery.min.js"></script><script data-pjax="">!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><link rel="stylesheet" href="/lib/aplayer/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="/lib/aplayer/dist/APlayer.min.js"></script><script src="/lib/aplayer/dist/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=jQuery("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=jQuery("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}jQuery(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://open.techgrow.cn/api/wechat/js/signature?url="+a+"&noncestr="+i+"&timestamp="+r;jQuery.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt=""></div><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术空间</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-readingnotes"><a href="https://www.techgrow.cn/reading/" rel="section"><i class="fa fa-book-open-reader fa-fw"></i>读书笔记</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn/" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%A7%E7%BA%B2"><span class="nav-text">大纲</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string-%E5%AE%B9%E5%99%A8"><span class="nav-text">string 容器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#string-%E5%AE%B9%E5%99%A8%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-text">string 容器的概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#stirng-%E5%AE%B9%E5%99%A8%E7%9A%84-API"><span class="nav-text">stirng 容器的 API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-text">string 的构造函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E9%95%BF%E5%BA%A6"><span class="nav-text">string 的长度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E8%B5%8B%E5%80%BC"><span class="nav-text">string 的赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E5%AD%90%E4%B8%B2"><span class="nav-text">string 的子串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E6%9F%A5%E6%89%BE"><span class="nav-text">string 的查找</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E6%9B%BF%E6%8D%A2"><span class="nav-text">string 的替换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E6%AF%94%E8%BE%83"><span class="nav-text">string 的比较</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E5%AD%97%E7%AC%A6%E5%AD%98%E5%82%A8"><span class="nav-text">string 的字符存储</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E5%8C%BA%E9%97%B4%E6%8F%92%E5%85%A5"><span class="nav-text">string 的区间插入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E5%8C%BA%E9%97%B4%E5%88%A0%E9%99%A4"><span class="nav-text">string 的区间删除</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string-%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5"><span class="nav-text">string 的字符串拼接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%8E-string-%E5%8F%96%E5%BE%97-char"><span class="nav-text">从 string 取得 char*</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%86-string-%E6%8B%B7%E8%B4%9D%E5%88%B0-char-%E6%8C%87%E5%90%91%E7%9A%84%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4"><span class="nav-text">将 string 拷贝到 char* 指向的内存空间</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#string-%E5%AE%B9%E5%99%A8%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-text">string 容器的常用操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pair-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">pair 的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pair-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">pair 的基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pair-%E7%9A%84-API-%E4%BB%8B%E7%BB%8D"><span class="nav-text">pair 的 API 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pair-%E7%9A%84%E6%9E%84%E9%80%A0%E4%B8%8E%E8%B5%8B%E5%80%BC"><span class="nav-text">pair 的构造与赋值</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#pair-%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-text">pair 的构造函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pair-%E7%9A%84%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C"><span class="nav-text">pair 的赋值操作</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pair-%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-text">pair 的常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84-pair-%E5%AF%B9%E8%B1%A1"><span class="nav-text">创建新的 pair 对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE-pair-%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0"><span class="nav-text">访问 pair 的两个元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-tie-%E8%8E%B7%E5%8F%96-pair-%E5%85%83%E7%B4%A0%E5%80%BC"><span class="nav-text">通过 tie 获取 pair 元素值</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-text">参考资料</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <span class="site-state-item-count">717</span> <span class="site-state-item-name">文章</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">53</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https://github.com/rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → /sitemap.xml" rel="noopener me"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/62e4578b.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术空间"><meta itemprop="description" content="专注于 Java 后端、分布式、微服务、云原生、数据库、系统架构、大数据、云计算、虚拟化、人工智能学习的技术博客。"></span><span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="C++ 进阶基础之六 | Clay 的技术空间"><meta itemprop="description" content="本文主要介绍 C++ 的进阶基础教程，包括 STL 几大容器的使用，包括 string 容器、pair 对组等。"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> C++ 进阶基础之六</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-12-18 21:55:34" itemprop="dateCreated datePublished" datetime="2021-12-18T21:55:34+08:00">2021-12-18</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-12-06 21:55:34" itemprop="dateModified" datetime="2023-12-06T21:55:34+08:00">2023-12-06</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/62e4578b.html#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/62e4578b.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>4.1k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 ≈</span> <span>4 分钟</span></span></div></div></header><div class="post-body post-container" itemprop="articleBody" id="readmore-container"><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><ul><li><a href="/posts/dbff2af9.html">C++ 进阶基础之一</a>、<a href="/posts/779107de.html">C++ 进阶基础之二</a>、<a href="/posts/35cd91d3.html">C++ 进阶基础之三</a></li><li><a href="/posts/791ffdcd.html">C++ 进阶基础之四</a>、<a href="/posts/64fd9f88.html">C++ 进阶基础之五</a>、<a href="/posts/62e4578b.html">C++ 进阶基础之六</a></li><li><a href="/posts/9e89901e.html">C++ 进阶基础之七</a>、<a href="/posts/8b87f2be.html">C++ 进阶基础之八</a>、<a href="/posts/360c74ef.html">C++ 进阶基础之九</a></li><li><a href="/posts/98e5b160.html">C++ 进阶基础之十</a>、<a href="/posts/f5674448.html">C++ 进阶基础之十一</a></li></ul><h2 id="string-容器"><a href="#string-容器" class="headerlink" title="string 容器"></a>string 容器</h2><h3 id="string-容器的概念"><a href="#string-容器的概念" class="headerlink" title="string 容器的概念"></a>string 容器的概念</h3><p><code>string</code> 是 STL 的字符串类型，通常用来表示字符串。而在使用 <code>string</code> 之前，字符串通常是用 <code>char*</code> 表示的。<code>string</code> 与 <code>char*</code> 都可以用来表示字符串，两者的区别如下：</p><ul><li><code>string</code> 是一个类，<code>char*</code> 是一个指向字符的指针</li><li><code>string</code> 封装了 <code>char*</code> 来管理字符串，本质是一个 <code>char*</code> 类型的容器</li><li><code>string</code> 不用考虑内存释放和越界的问题</li><li><code>string</code> 负责管理 <code>char*</code> 所分配的内存。每一次 <code>string</code> 的复制，取值都由 <code>string</code> 类负责维护，不用担心复制越界和取值越界等问题</li><li><code>string</code> 提供了一系列的字符串操作函数，例如：查找（find）、拷贝（copy）、删除（erase）、替换（replace）、插入（insert）</li></ul><span id="more"></span><h3 id="stirng-容器的-API"><a href="#stirng-容器的-API" class="headerlink" title="stirng 容器的 API"></a>stirng 容器的 API</h3><h4 id="string-的构造函数"><a href="#string-的构造函数" class="headerlink" title="string 的构造函数"></a>string 的构造函数</h4><ul><li>默认构造函数：<code>string();</code></li><li>带参数的构造函数：<ul><li><code>string(const char *s);</code>，用字符串 s 初始化</li><li><code>string(int n, char c);</code>，用 <code>n</code> 个字符 c 初始化</li></ul></li><li>拷贝构造函数：<code>string(const string &amp;str);</code></li></ul><h4 id="string-的长度"><a href="#string-的长度" class="headerlink" title="string 的长度"></a>string 的长度</h4><ul><li><code>size_t size() const</code>，返回当前字符串的长度，这里的长度不包括字符串的结尾的 <code>\0</code> 字符</li><li><code>size_t length() const;</code>，返回当前字符串的长度，这里的长度不包括字符串的结尾的 <code>\0</code> 字符</li><li><code>bool empty() const;</code>，判断当前字符串是否为空</li></ul><p>值得一提的是，<code>sizeof()</code> 返回的是对象所占用空间的字节数，<code>strlen()</code> 返回的是字符数组中第一个 <code>\0</code> 前的字节数，<code>string</code> 的成员函数 <code>size()</code> 和 <code>length()</code> 没有任何区别。</p><h4 id="string-的赋值"><a href="#string-的赋值" class="headerlink" title="string 的赋值"></a>string 的赋值</h4><ul><li><code>string &amp;operator=(const string &amp;s);</code>，把字符串 s 赋给当前的字符串</li><li><code>string &amp;assign(const char *s);</code>，把字符串 s 赋给当前的字符串</li><li><code>string &amp;assign(const char *s, int n);</code>，把字符串 s 的前 <code>n</code> 个字符赋给当前的字符串</li><li><code>string &amp;assign(const string &amp;s);</code>，把字符串 s 赋给当前字符串</li><li><code>string &amp;assign(int n, char c);</code>，用 <code>n</code> 个字符 c 赋值给当前字符串</li><li><code>string &amp;assign(const string &amp;s, int start, int n);</code>，把字符串 s 中从 start 开始的 <code>n</code> 个字符赋值给当前字符串</li></ul><h4 id="string-的子串"><a href="#string-的子串" class="headerlink" title="string 的子串"></a>string 的子串</h4><ul><li><code>string substr(int pos=0, int n=npos) const;</code>，返回由 <code>pos</code> 位置开始的 <code>n</code> 个字符组成的子字符串</li></ul><h4 id="string-的查找"><a href="#string-的查找" class="headerlink" title="string 的查找"></a>string 的查找</h4><ul><li><code>int find(char c, int pos=0) const;</code>，从 <code>pos</code> 位置开始查找字符 c 在当前字符串第一次出现的位置</li><li><code>int find(const char *s, int pos=0) const;</code>，从 <code>pos</code> 位置开始查找字符串 s 在当前字符串第一次出现的位置</li><li><code>int find(const string &amp;s, int pos=0) const;</code>，从 <code>pos</code> 位置开始查找字符串 s 在当前字符串第一次出现的位置</li><li><code>int rfind(char c, int pos=npos) const;</code>，从 <code>pos</code> 位置开始查找字符 c 在当前字符串中最后一次出现的位置</li><li><code>int rfind(const char *s, int pos=npos) const;</code>，从 <code>pos</code> 位置开始查找字符串 s 在当前字符串中最后一次出现的位置</li><li><code>int rfind(const string &amp;s, int pos=npos) const;</code>，从 <code>pos</code> 位置开始查找字符串 s 在当前字符串中最后一次出现的位置</li></ul><p>值得一提的是，当 <code>find()</code> 与 <code>rfind()</code> 函数查找不到时，都会返回 <code>-1</code>；两者不同的是 <code>find()</code> 是正向查找，而 <code>rfind()</code> 是逆向查找，但是最终两个函数返回的位置均是字符 <code>/</code> 字符串出现的正向位置；若有重复字符 <code>/</code> 字符串时，则 <code>rfind()</code> 返回的是逆向查找到的字符 / 字符串在正向的位置（即最后一次出现的正向位置）。</p><h4 id="string-的替换"><a href="#string-的替换" class="headerlink" title="string 的替换"></a>string 的替换</h4><ul><li><code>string &amp;replace(int pos, int n, const char *s);</code>，删除从 <code>pos</code> 位置开始的 <code>n</code> 个字符，然后在 <code>pos</code> 位置插入字符串 s</li><li><code>string &amp;replace(int pos, int n, const string &amp;s);</code>，删除从 <code>pos</code> 位置开始的 <code>n</code> 个字符，然后在 <code>pos</code> 位置插入字符串 s</li><li><code>void swap(string &amp;s2);</code>，交换当前字符串与字符串 s2 的值</li></ul><h4 id="string-的比较"><a href="#string-的比较" class="headerlink" title="string 的比较"></a>string 的比较</h4><ul><li><code>int compare(const string &amp;s) const;</code>，与字符串 s 比较</li><li><code>int compare(const char *s) const;</code>，与字符串 s 比较</li></ul><p><code>compare()</code> 函数的结果在 <code>&gt;</code> 时返回 1，<code>&lt;</code> 时返回 -1，<code>=</code> 时返回 0。字符串比较区分大小写，比较时参考字典顺序，排越前面的越小。大写的 A（65） 比小写的 a（97） 小。</p><h4 id="string-的字符存储"><a href="#string-的字符存储" class="headerlink" title="string 的字符存储"></a>string 的字符存储</h4><ul><li><code>char &amp;at(int n);</code></li><li><code>char &amp;operator[] (int n);</code></li><li><code>operator[]</code> 和 <code>at()</code> 均返回当前字符串中的第 <code>n</code> 个字符，但二者是有区别的<ul><li><code>at()</code> 在越界时会抛出异常，<code>[]</code> 在刚好越界时会返回 <code>(char)0</code>，再继续越界时，程序异常终止</li><li>如果程序希望可以通过 <code>try catch</code> 捕获异常，则建议采用 <code>at()</code></li></ul></li></ul><h4 id="string-的区间插入"><a href="#string-的区间插入" class="headerlink" title="string 的区间插入"></a>string 的区间插入</h4><ul><li><code>string &amp;insert(int pos, const char *s);</code>，在 <code>pos</code> 位置插入字符串 s，返回修改后的字符串</li><li><code>string &amp;insert(int pos, const string &amp;s);</code>，在 <code>pos</code> 位置插入字符串 s，返回修改后的字符串</li><li><code>string &amp;insert(int pos, int n, char c);</code>，在 <code>pos</code> 位置插入 <code>n</code> 个字符 c，返回修改后的字符串</li></ul><h4 id="string-的区间删除"><a href="#string-的区间删除" class="headerlink" title="string 的区间删除"></a>string 的区间删除</h4><ul><li><code>string &amp;erase(int pos=0, int n=npos);</code>，删除从 <code>pos</code> 位置开始的 <code>n</code> 个字符，返回修改后的字符串</li></ul><h4 id="string-的字符串拼接"><a href="#string-的字符串拼接" class="headerlink" title="string 的字符串拼接"></a>string 的字符串拼接</h4><ul><li><code>string &amp;operator+=(const string &amp;s);</code>，把字符串 s 连接到当前字符串的结尾</li><li><code>string &amp;operator+=(const char *s);</code>，把字符串 s 连接到当前字符串的结尾</li><li><code>string &amp;append(const char *s);</code> ，把字符串 s 连接到当前字符串的结尾</li><li><code>string &amp;append(const char *s, int n);</code>，把字符串 s 的前 <code>n</code> 个字符连接到当前字符串的结尾</li><li><code>string &amp;append(const string &amp;s);</code> ，把字符串 s 连接到当前字符串的结尾</li><li><code>string &amp;append(const string &amp;s, int pos, int n);</code>，把字符串 s 中从 <code>pos</code> 位置开始的 <code>n</code> 个字符连接到当前字符串的结尾</li><li><code>string &amp;append(int n, char c);</code> ，在当前字符串的结尾添加 <code>n</code> 个字符 c</li></ul><h4 id="从-string-取得-char"><a href="#从-string-取得-char" class="headerlink" title="从 string 取得 char*"></a>从 string 取得 char*</h4><ul><li><code>const char *c_str() const;</code>，返回一个以 <code>\0</code> 结尾的字符串的首地址</li></ul><p>值得一提的是，<code>char *</code> 可以隐式转换为 <code>string</code> 类型，反过来则不可以，例如右边这种写法是合法的： <code>char *p = "abc"; string str = p;</code></p><h4 id="将-string-拷贝到-char-指向的内存空间"><a href="#将-string-拷贝到-char-指向的内存空间" class="headerlink" title="将 string 拷贝到 char* 指向的内存空间"></a>将 string 拷贝到 char* 指向的内存空间</h4><ul><li><code>int copy(char *s, int n, int pos=0) const;</code></li></ul><p>将当前串中以 <code>pos</code> 位置开始的 <code>n</code> 个字符拷贝到以 <code>s</code> 为起始位置的字符数组中，返回实际拷贝的字符数量。特别注意，要保证指针 <code>s</code> 所指向的内存空间足以容纳当前的字符串，不然可能会发生越界。</p><h3 id="string-容器的常用操作"><a href="#string-容器的常用操作" class="headerlink" title="string 容器的常用操作"></a>string 容器的常用操作</h3><ul><li>string 容器的构造与赋值</li></ul><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// 默认构造函数</span></span><br><span class="line">    string str1;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 拷贝构造函数</span></span><br><span class="line">    string str2 = str1;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 有参构造函数</span></span><br><span class="line">    <span class="function">string <span class="title">str3</span><span class="params">(<span class="string">"abced"</span>)</span></span>;</span><br><span class="line">    <span class="function">string <span class="title">str4</span><span class="params">(<span class="number">5</span>, <span class="string">'f'</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 基本赋值</span></span><br><span class="line">    str1 = <span class="string">"123456"</span>;</span><br><span class="line">    str2 = str3;</span><br><span class="line">    str3.<span class="built_in">assign</span>(<span class="string">"mnopq"</span>, <span class="number">3</span>);</span><br><span class="line">    str4.<span class="built_in">assign</span>(<span class="string">"45678"</span>, <span class="number">1</span>, <span class="number">3</span>);     <span class="comment">// 从0开始索引，1表示第2个字符</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"str1 = "</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">"str2 = "</span> &lt;&lt; str2 &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">"str3 = "</span> &lt;&lt; str3 &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">"str4 = "</span> &lt;&lt; str4 &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str1 = 123456</span><br><span class="line">str2 = abced</span><br><span class="line">str3 = mno</span><br><span class="line">str4 = 567</span><br></pre></td></tr></tbody></table></figure><ul><li>string 容器的 API 调用</li></ul><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// 存储字符</span></span><br><span class="line">    string str1 = <span class="string">"abcde"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str1.<span class="built_in">size</span>(); i++) {</span><br><span class="line">        <span class="comment">// 第一种方式</span></span><br><span class="line">        cout &lt;&lt; str1[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        <span class="comment">// 第二种方式</span></span><br><span class="line">        <span class="comment">// cout &lt;&lt; str1.at(i) &lt;&lt; " ";</span></span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串拼接</span></span><br><span class="line">    string str2 = <span class="string">"hello "</span>;</span><br><span class="line">    string str3 = <span class="string">"world "</span>;</span><br><span class="line">    str2 += str3;</span><br><span class="line">    str3.<span class="built_in">append</span>(<span class="string">"where"</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">"str2 = "</span> &lt;&lt; str2 &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">"str3 = "</span> &lt;&lt; str3 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串查找</span></span><br><span class="line">    string str4 = <span class="string">"My name is Peter"</span>;</span><br><span class="line">    <span class="keyword">int</span> index1 = str4.<span class="built_in">find</span>(<span class="string">"name"</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">"index1 = "</span> &lt;&lt; index1 &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">int</span> index2 = str4.<span class="built_in">rfind</span>(<span class="string">"e"</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">"index2 = "</span> &lt;&lt; index2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串替换</span></span><br><span class="line">    string str5 = <span class="string">"abc123"</span>;</span><br><span class="line">    str5.<span class="built_in">replace</span>(<span class="number">3</span>, <span class="number">3</span>, <span class="string">"def"</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">"str5 = "</span> &lt;&lt; str5 &lt;&lt; endl;</span><br><span class="line">    string str6 = <span class="string">"123456"</span>;</span><br><span class="line">    string str7 = <span class="string">"654321"</span>;</span><br><span class="line">    str6.<span class="built_in">swap</span>(str7);</span><br><span class="line">    cout &lt;&lt; <span class="string">"str6 = "</span> &lt;&lt; str6 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串比较</span></span><br><span class="line">    string str8 = <span class="string">"ABC"</span>;</span><br><span class="line">    string str9 = <span class="string">"abc"</span>;</span><br><span class="line">    <span class="keyword">int</span> result = str8.<span class="built_in">compare</span>(str9);    <span class="comment">// 返回值小于等于-1</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"result = "</span> &lt;&lt; result &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 截取子字符串</span></span><br><span class="line">    string str10 = <span class="string">"124abc"</span>;</span><br><span class="line">    string str11 = str10.<span class="built_in">substr</span>(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">"str11 = "</span> &lt;&lt; str11 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串的区间插入</span></span><br><span class="line">    string str12 = <span class="string">"abcdef"</span>;</span><br><span class="line">    str12.<span class="built_in">insert</span>(<span class="number">2</span>, <span class="string">"123"</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">"str12 = "</span> &lt;&lt; str12 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串的区间删除</span></span><br><span class="line">    string str13 = <span class="string">"123456"</span>;</span><br><span class="line">    str13.<span class="built_in">erase</span>(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">"str13 = "</span> &lt;&lt; str13 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 从字符串取得 char *</span></span><br><span class="line">    string str14 = <span class="string">"hijkl"</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *p1 = str14.<span class="built_in">c_str</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">"p1 = "</span> &lt;&lt; p1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// char * 隐式类型转换为 string</span></span><br><span class="line">    <span class="keyword">char</span> *p2 = <span class="string">"abc123"</span>;</span><br><span class="line">    string str15 = p2;</span><br><span class="line">    cout &lt;&lt; <span class="string">"str15 = "</span> &lt;&lt; str15 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将 string 拷贝到 char* 指向的内存空间</span></span><br><span class="line">    <span class="keyword">char</span> *p3 = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">3</span>];</span><br><span class="line">    string str16 = <span class="string">"hello jim"</span>;</span><br><span class="line">    <span class="keyword">int</span> number = str16.<span class="built_in">copy</span>(p3, <span class="number">3</span>, <span class="number">2</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">"number = "</span> &lt;&lt; number &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">"p3 = "</span> &lt;&lt; p3 &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">delete</span>[] p3;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a b c d e </span><br><span class="line">str2 = hello world </span><br><span class="line">str3 = world where</span><br><span class="line">index1 = 3</span><br><span class="line">index2 = 14</span><br><span class="line">str5 = abcdef</span><br><span class="line">str6 = 654321</span><br><span class="line">result = -32</span><br><span class="line">str11 = 24a</span><br><span class="line">str12 = ab123cdef</span><br><span class="line">str13 = 1256</span><br><span class="line">p1 = hijkl</span><br><span class="line">str15 = abc123</span><br><span class="line">number = 3</span><br><span class="line">p3 = llo</span><br></pre></td></tr></tbody></table></figure><h2 id="pair-的使用"><a href="#pair-的使用" class="headerlink" title="pair 的使用"></a>pair 的使用</h2><h3 id="pair-的基本概念"><a href="#pair-的基本概念" class="headerlink" title="pair 的基本概念"></a>pair 的基本概念</h3><p>pair 是将 2 个数据组合成一组数据，当有这样的需求时就可以使用 pair，如 STL 中的 map 就是将 key 和 value 放在一起来保存。另一个应用是，当一个函数的返回值需要返回 2 个数据的时候，可以选择 pair。 值得一提的是，pair 的实现是一个结构体，主要的两个成员变量是 <code>first</code> 和 <code>second</code>；因为是使用 struct 不是 class，所以可以直接使用 pair 的成员变量。pair 定义如下：</p><ul><li>类模板：<code>template&lt;class T1,class T2&gt; struct pair</code></li><li>参数：T1 是第一个值的数据类型，T2 是第二个值的数据类型</li><li>功能：pair 将一对值 (T1 和 T2) 组合成一个值，这一对值可以具有不同的数据类型</li></ul><h3 id="pair-的-API-介绍"><a href="#pair-的-API-介绍" class="headerlink" title="pair 的 API 介绍"></a>pair 的 API 介绍</h3><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p1 &lt; p2;                   <span class="comment">// 两个 pair 对象间的小于运算，其定义遵循字典次序：如 p1.first &lt; p2.first 或者 !(p2.first &lt; p1.first) &amp;&amp; (p1.second &lt; p2.second) 则返回 true</span></span><br><span class="line">p1 == p2；                 <span class="comment">// 如果两个对象的 first 和 second 依次相等，则这两个对象相等，该运算使用元素的 == 操作符</span></span><br><span class="line">p1.first;                  <span class="comment">// 返回对象 p1 中名为 first 的公有数据成员</span></span><br><span class="line">p1.second;                 <span class="comment">// 返回对象 p1 中名为 second 的公有数据成员</span></span><br></pre></td></tr></tbody></table></figure><h3 id="pair-的构造与赋值"><a href="#pair-的构造与赋值" class="headerlink" title="pair 的构造与赋值"></a>pair 的构造与赋值</h3><h4 id="pair-的构造函数"><a href="#pair-的构造函数" class="headerlink" title="pair 的构造函数"></a>pair 的构造函数</h4><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pair&lt;T1, T2&gt; p1;            <span class="comment">// 创建一个空的 pair 对象（使用默认构造函数），它的两个元素分别是 T1 和 T2 类型，采用值初始化。</span></span><br><span class="line"><span class="function">pair&lt;T1, T2&gt; <span class="title">p1</span><span class="params">(v1, v2)</span></span>;    <span class="comment">// 创建一个 pair 对象，它的两个元素分别是 T1 和 T2 类型，其中 first 成员初始化为 v1，second 成员初始化为 v2。</span></span><br><span class="line"><span class="built_in">make_pair</span>(v1, v2);          <span class="comment">// 以 v1 和 v2 的值创建一个新的 pair 对象，其元素类型分别是 v1 和 v2 的类型。</span></span><br></pre></td></tr></tbody></table></figure><p>pair 包含两个数值，与容器一样，pair 也是一种模板类型，但是又与之前介绍的容器不同。在创建 pair 对象时，必须提供两个类型名，两个对应的类型名的类型可以不相同。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pair&lt;string, string&gt; anon;        <span class="comment">// 创建一个空对象 anon，两个元素类型都是 string</span></span><br><span class="line">pair&lt;string, <span class="keyword">int</span>&gt; word_count;     <span class="comment">// 创建一个空对象 word_count， 两个元素类型分别是 string 和 int 类型</span></span><br><span class="line">pair&lt;string, vector&lt;<span class="keyword">int</span>&gt; &gt; line;  <span class="comment">// 创建一个空对象 line，两个元素类型分别是 string 和 vector 类型</span></span><br></pre></td></tr></tbody></table></figure><p>当然也可以在定义时进行成员初始化</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">pair&lt;string, string&gt; <span class="title">author</span><span class="params">(<span class="string">"James"</span>, <span class="string">"Joy"</span>)</span></span>;    <span class="comment">// 创建一个 author 对象，两个元素类型分别为 string 类型，并默认初始值为 James 和 Joy</span></span><br><span class="line"><span class="function">pair&lt;string, <span class="keyword">int</span>&gt; <span class="title">name_age</span><span class="params">(<span class="string">"Tom"</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"><span class="function">pair&lt;string, <span class="keyword">int</span>&gt; <span class="title">name_age2</span><span class="params">(name_age)</span></span>;          <span class="comment">// 拷贝构造初始化</span></span><br></pre></td></tr></tbody></table></figure><p>pair 类型的使用相当的繁琐，如果定义多个相同的 pair 类型对象，可以使用 <code>typedef</code> 关键字简化声明</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> pair&lt;string,string&gt; Author;</span><br><span class="line"><span class="function">Author <span class="title">proust</span><span class="params">(<span class="string">"March"</span>, <span class="string">"Proust"</span>)</span></span>;</span><br><span class="line"><span class="function">Author <span class="title">Joy</span><span class="params">(<span class="string">"James"</span>,<span class="string">"Joy"</span>)</span></span>;</span><br></pre></td></tr></tbody></table></figure><h4 id="pair-的赋值操作"><a href="#pair-的赋值操作" class="headerlink" title="pair 的赋值操作"></a>pair 的赋值操作</h4><p>pair 变量之间的赋值操作如下：</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">pair&lt;<span class="keyword">int</span>, <span class="keyword">double</span>&gt; <span class="title">p1</span><span class="params">(<span class="number">1</span>, <span class="number">1.2</span>)</span></span>;</span><br><span class="line">pair&lt;<span class="keyword">int</span>, <span class="keyword">double</span>&gt; p2 = p1;    <span class="comment">// 拷贝构造初始化</span></span><br><span class="line">pair&lt;<span class="keyword">int</span>, <span class="keyword">double</span>&gt; p3;</span><br><span class="line">p3 = p1;                      <span class="comment">// 重载等号操作符</span></span><br></pre></td></tr></tbody></table></figure><h3 id="pair-的常用操作"><a href="#pair-的常用操作" class="headerlink" title="pair 的常用操作"></a>pair 的常用操作</h3><h4 id="创建新的-pair-对象"><a href="#创建新的-pair-对象" class="headerlink" title="创建新的 pair 对象"></a>创建新的 pair 对象</h4><p>可以调用 <code>make_pair()</code> 函数创建新的 pair 对象。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> age = <span class="number">18</span>;</span><br><span class="line">    string name = <span class="string">"James"</span>;</span><br><span class="line">    pair&lt;string, <span class="keyword">int</span>&gt; newone;</span><br><span class="line">    newone = <span class="built_in">make_pair</span>(name, age);</span><br><span class="line">    cout &lt;&lt; <span class="string">"name: "</span> &lt;&lt; newone.first &lt;&lt; <span class="string">", age: "</span> &lt;&lt; newone.second &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name: James, age: 18</span><br></pre></td></tr></tbody></table></figure><h4 id="访问-pair-的两个元素"><a href="#访问-pair-的两个元素" class="headerlink" title="访问 pair 的两个元素"></a>访问 pair 的两个元素</h4><p>可以通过 <code>first</code> 和 <code>sencond</code> 访问 pair 中的两个元素。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    pair&lt;<span class="keyword">int</span>, <span class="keyword">double</span>&gt; p1;</span><br><span class="line">    p1.first = <span class="number">1</span>;</span><br><span class="line">    p1.second = <span class="number">2.5</span>;</span><br><span class="line">    cout &lt;&lt; p1.first &lt;&lt; <span class="string">' '</span> &lt;&lt; p1.second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    string firstBook;</span><br><span class="line">    <span class="function">pair&lt;string, string&gt; <span class="title">author</span><span class="params">(<span class="string">"James"</span>, <span class="string">"Joy"</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (author.first == <span class="string">"James"</span> &amp;&amp; author.second == <span class="string">"Joy"</span>) {</span><br><span class="line">        firstBook = <span class="string">"Stephen Hero"</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; firstBook &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 2.5</span><br><span class="line">Stephen Hero</span><br></pre></td></tr></tbody></table></figure><h4 id="通过-tie-获取-pair-元素值"><a href="#通过-tie-获取-pair-元素值" class="headerlink" title="通过 tie 获取 pair 元素值"></a>通过 tie 获取 pair 元素值</h4><p>可以通过 <code>tie</code> 获取 pair 元素值。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tuple&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function">pair&lt;string, <span class="keyword">int</span>&gt; <span class="title">getPreson</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">make_pair</span>(<span class="string">"Sven"</span>, <span class="number">25</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    string name;</span><br><span class="line">    <span class="built_in">tie</span>(name, age) = <span class="built_in">getPreson</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">"name: "</span> &lt;&lt; name &lt;&lt; <span class="string">", age: "</span> &lt;&lt; age &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>程序运行输出的结果如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name: Sven, age: 25</span><br></pre></td></tr></tbody></table></figure><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><a target="_blank" rel="external nofollow" href="https://cloud.tencent.com/developer/article/1176228">C++ 中 string 成员函数 length ()、size () 与 strlen () 的区别</a></li></ul><div id="readmore-expansion" class="pjax"></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script data-pjax="" src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script data-pjax="">var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),allowMobile=!1;if(!isMobile||isMobile&&allowMobile)try{var plugin=new ReadmorePlugin;plugin.init({type:"hexo",id:"readmore-container",name:"全栈技术驿站",blogId:"96641-5333172926158-056",qrcode:"https://www.techgrow.cn/img/wx_mp_qr.png",keyword:"Tech",random:"1",height:"auto",expires:"365",lockToc:"yes",interval:"30",baseUrl:"",execute:"yes",tocSelector:""})}catch(e){console.warn("readmore plugin occurred error: "+e.name+" | "+e.message)}</script></div><footer class="post-footer"><div class="reward-container"><div>支持一根棒棒糖！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/62e4578b.html" title="C++ 进阶基础之六">https://www.techgrow.cn/posts/62e4578b.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎添加博主微信，请备注 "博客"，届时会邀请您加入百人微信群</span><br> <img src="/img/wx_account_qr.png"></div></div></div><div class="post-tags"><a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C++</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/64fd9f88.html" rel="prev" title="C++ 进阶基础之五"><i class="fa fa-angle-left"></i> C++ 进阶基础之五</a></div><div class="post-nav-item"> <a href="/posts/15f45d12.html" rel="next" title="Linux 移植 Windows 的 C++ 代码">Linux 移植 Windows 的 C++ 代码<i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> Copyright © 2018 – <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">1.9m</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 ≈</span> <span title="站点阅读时长">29:25</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & Docker | "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="beian"> <span><img src="/img/gonganbeian.png" alt=""></span> <span><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤ICP备 19024664号-1</a></span> <span>|&nbsp;</span> <span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302004035" rel="external nofollow" target="_blank">粤公网安备 44011302004035号</a></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div> <a href="https://github.com/rqh656418510" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="external nofollow" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"/lib/mermaid/dist/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/pace.js"></script><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://www.techgrow.cn/lib/darkmode/darkmode@1.5.7.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '30px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js"></script><script>
    var qiniu_domain = "https://oss.techgrow.cn";
    var qiniu_token_url = "https://open.techgrow.cn/api/oss/qiniu/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline.techgrow.cn","cssUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css","commentCount":true,"pageview":false,"copyright":false,"allowUploadImage":true,"libUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.js","locale":{"placeholder":"支持匿名评论啦，若希望及时收到博主的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧"},"dark":"body.darkmode--activated","emoji":["https://www.techgrow.cn/lib/@waline/emojis/1.0.1/weibo"],"meta":["nick","mail","link"],"login":"enable","pageSize":10,"qiniuDebug":false,"qiniuDomain":"https://oss.techgrow.cn","qiniuTokenUrl":"https://open.techgrow.cn/api/oss/qiniu/token/upload","qiniuLibUrl":"https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js","el":"#waline","comment":true,"path":"/posts/62e4578b.html"}</script><link rel="stylesheet" href="https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css"><script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.imageUploader = false;
  }
  else if (CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.imageUploader = qiniuUploadImage;
  } else {
   CONFIG.waline.imageUploader = true;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script><div class="moon-menu"><div class="moon-menu-items"><div id="moon-menu-item-back2bottom" class="moon-menu-item"><i class="fas fa-chevron-down"></i></div><div id="moon-menu-item-back2top" class="moon-menu-item"><i class="fas fa-chevron-up"></i></div></div><div class="moon-menu-button"><svg class="moon-menu-bg"><circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle><circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle></svg><div class="moon-menu-content"><div class="moon-menu-icon"><i class="fas fa-ellipsis-v"></i></div><div class="moon-menu-text"></div></div></div></div><script src="/js/injector.js"></script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),e="ipad"==i.match(/ipad/i),a="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),r="ucweb"==i.match(/ucweb/i),c="android"==i.match(/android/i),l="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(e||a||o||n||r||c||l||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;jQuery(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||jQuery("#aplayer").css("display","block"))}),jQuery(window).on("load",function(){aplayerEnable&&jQuery(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>