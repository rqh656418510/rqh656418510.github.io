<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/pace-js/themes/blue/pace-theme-minimal.css"><script src="/lib/pace-js/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="本文主要介绍 Dubbo 的巩固教程。"><meta property="og:type" content="article"><meta property="og:title" content="Dubbo 2 巩固教程之一"><meta property="og:url" content="https://www.techgrow.cn/posts/ef04d10a.html"><meta property="og:site_name" content="Clay 的技术空间"><meta property="og:description" content="本文主要介绍 Dubbo 的巩固教程。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.techgrow.cn/asset/2024/12/dubbo-13.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2024/12/dubbo-12.png"><meta property="article:published_time" content="2019-09-11T15:42:35.000Z"><meta property="article:modified_time" content="2019-09-11T15:42:35.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="微服务"><meta property="article:tag" content="分布式"><meta property="article:tag" content="RPC"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.techgrow.cn/asset/2024/12/dubbo-13.png"><link rel="canonical" href="https://www.techgrow.cn/posts/ef04d10a.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/ef04d10a.html","path":"posts/ef04d10a.html","title":"Dubbo 2 巩固教程之一"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Dubbo 2 巩固教程之一 | Clay 的技术空间</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false,"measure_protocol_api_secret":null}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn"><link rel="stylesheet" type="text/css" href="/css/injector/main.css"><link rel="preload" as="style" href="/css/injector/light.css"><link rel="preload" as="style" href="/css/injector/dark.css"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术空间" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion"><script src="/lib/jquery/dist/jquery.min.js"></script><script data-pjax="">!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><link rel="stylesheet" href="/lib/aplayer/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="/lib/aplayer/dist/APlayer.min.js"></script><script src="/lib/aplayer/dist/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=jQuery("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=jQuery("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}jQuery(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://open.techgrow.cn/api/wechat/js/signature?url="+a+"&noncestr="+i+"&timestamp="+r;jQuery.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt=""></div><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术空间</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-readingnotes"><a href="https://www.techgrow.cn/reading/" rel="section"><i class="fa fa-book-open-reader fa-fw"></i>读书笔记</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn/" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%A7%E7%BA%B2"><span class="nav-text">大纲</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">前言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90"><span class="nav-text">学习资源</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dubbo-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="nav-text">Dubbo 核心功能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE"><span class="nav-text">通信协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E5%8D%8F%E8%AE%AE"><span class="nav-text">序列化协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5"><span class="nav-text">负载均衡策略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99%E7%AD%96%E7%95%A5"><span class="nav-text">集群容错策略</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dubbo-%E6%BA%90%E7%A0%81%E6%B5%85%E6%9E%90"><span class="nav-text">Dubbo 源码浅析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E5%BB%BA%E8%AE%AE"><span class="nav-text">学习建议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E4%BB%A3%E7%90%86"><span class="nav-text">接口代理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"><span class="nav-text">注册中心</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0"><span class="nav-text">配置实现</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-text">参考资料</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <span class="site-state-item-count">733</span> <span class="site-state-item-name">文章</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">53</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https://github.com/rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → /sitemap.xml" rel="noopener me"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/ef04d10a.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术空间"><meta itemprop="description" content="专注于 Java 后端、分布式、微服务、云原生、数据库、系统架构、大数据、云计算、虚拟化、人工智能学习的技术博客。"></span><span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Dubbo 2 巩固教程之一 | Clay 的技术空间"><meta itemprop="description" content="本文主要介绍 Dubbo 的巩固教程。"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Dubbo 2 巩固教程之一</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-09-11 23:42:35" itemprop="dateCreated datePublished" datetime="2019-09-11T23:42:35+08:00">2019-09-11</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/ef04d10a.html#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/ef04d10a.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>5.7k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 ≈</span> <span>5 分钟</span></span></div></div></header><div class="post-body post-container" itemprop="articleBody" id="readmore-container"><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><ul><li><a href="/posts/ef04d10a.html">Dubbo 2 巩固教程之一</a></li><li><a href="/posts/b6d5fbb8.html">Dubbo 2 巩固教程之二</a></li></ul><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h3><ul><li><a target="_blank" rel="external nofollow" href="https://github.com/apache/incubator-dubbo/">Dubbo 官方项目</a></li><li><a target="_blank" rel="external nofollow" href="https://dubbo.apache.org/zh-cn/">Dubbo 官方文档</a></li><li><a target="_blank" rel="external nofollow" href="https://github.com/apache/dubbo-samples">Dubbo 官方案例</a></li></ul><span id="more"></span><h2 id="Dubbo-核心功能"><a href="#Dubbo-核心功能" class="headerlink" title="Dubbo 核心功能"></a>Dubbo 核心功能</h2><h3 id="通信协议"><a href="#通信协议" class="headerlink" title="通信协议"></a>通信协议</h3><div class="admonition warning"><p class="admonition-title">特别注意</p><ul><li>Dubbo 支持多种通信协议，在 <code>3.0</code> 版本之前支持 Dubbo、gRPC、Hessian2、REST 等核心通信协议。</li><li>从 Dubbo <code>3.0</code> 开始，Dubbo 官方新引入了自研的 Triple 通信协议，不过也保留了 Dubbo 和 REST 通信协议的支持。</li><li>从 Dubbo <code>3.2</code> 开始，Dubbo 官方已经废弃原有的 gRPC 通信协议，使用 Triple 通信协议进行替代，Triple 通信协议完全兼容 gRPC 通信协议。</li><li>从 Dubbo <code>3.3</code> 开始，Dubbo 官方直接移除了 REST 通信协议的直接支持，使用 Triple 通信协议间接支持 REST 通信协议。</li></ul></div><ul><li>Dubbo 3 支持的通信协议</li></ul><table><thead><tr><th>通信协议</th><th>通信协议名 / 标识</th><th>传输层</th><th>核心特性</th><th>适用场景</th><th>是否为默认通信协议</th></tr></thead><tbody><tr><td> Dubbo 通信协议</td><td><code>dubbo</code></td><td>TCP</td><td> 单一长连接、NIO 异步通信、高性能</td><td>高并发小数据量场景（消费者数 &gt;&gt; 提供者）</td><td>是</td></tr><tr><td> Triple 通信协议</td><td><code>tri</code></td><td>HTTP/2</td><td> 兼容 gRPC 生态、支持流式通信、跨语言能力增强</td><td>多语言交互、流式数据传输</td><td>否</td></tr><tr><td> gRPC 通信协议</td><td><code>grpc</code></td><td>HTTP/2</td><td>Google 开源 RPC 框架、高性能跨语言通信</td><td>跨语言高性能服务调用</td><td>否</td></tr><tr><td> REST 通信协议</td><td><code>rest</code></td><td>HTTP</td><td> 严格遵循 RESTful 规范、支持 JSON/XML 格式</td><td>浏览器调用、跨平台集成</td><td>否</td></tr><tr><td> Hessian 通信协议</td><td><code>hessian</code></td><td>HTTP</td><td> 表单序列化、短连接、传输效率优于 WebService</td><td> 文件 / 视频等大数据传输</td><td>否</td></tr><tr><td> Thrift 通信协议</td><td><code>thrift</code></td><td>TCP</td><td>Apache 开源 RPC 框架、强类型接口定义</td><td>多语言服务交互</td><td>否</td></tr><tr><td> Redis 通信协议</td><td><code>redis</code></td><td>文本通信协议</td><td>基于 Redis 的轻量级通信</td><td>缓存操作、简单消息队列</td><td>否</td></tr><tr><td> MQTT 通信协议</td><td><code>mqtt</code></td><td>TCP</td><td> 发布 / 订阅模式、低带宽占用</td><td>物联网设备通信</td><td>否</td></tr><tr><td> WebService</td><td><code>webservice</code></td><td>HTTP</td><td> 基于 SOAP 通信协议、XML 序列化</td><td>传统企业系统集成</td><td>否</td></tr><tr><td> HTTP 通信协议</td><td><code>http</code></td><td>HTTP</td><td> 通用同步传输、支持表单序列化</td><td>混合数据大小场景</td><td>否</td></tr></tbody></table><ul><li>通信协议的选择对比</li></ul><table><thead><tr><th>维度</th><th> Triple</th><th>Dubbo</th><th>REST</th><th>gRPC</th></tr></thead><tbody><tr><td> 性能</td><td>⭐⭐⭐⭐</td><td>⭐⭐⭐⭐⭐</td><td>⭐⭐</td><td>⭐⭐⭐⭐</td></tr><tr><td>跨语言</td><td>⭐⭐⭐⭐⭐</td><td>⭐⭐</td><td>⭐⭐⭐⭐</td><td>⭐⭐⭐⭐⭐</td></tr><tr><td>流式通信</td><td>支持</td><td>不支持</td><td>不支持</td><td>支持</td></tr><tr><td>浏览器兼容</td><td>支持</td><td>不支持</td><td>直接支持</td><td>需要依赖 Gateway（网关）</td></tr><tr><td>配置复杂度</td><td>低</td><td>低</td><td>中</td><td>高</td></tr></tbody></table><div class="admonition note"><p class="admonition-title">Dubbo 通信协议的使用</p><p>更多关于 Dubbo 通信协议的介绍和使用案例可以看 <a href="/posts/fab9c84c.html#%E5%A4%9A%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E5%8F%91%E5%B8%83">这里</a>。</p></div><h3 id="序列化协议"><a href="#序列化协议" class="headerlink" title="序列化协议"></a>序列化协议</h3><ul><li>Dubbo 支持的序列化协议</li></ul><table><thead><tr><th>序列化协议</th><th>优点</th><th>缺点</th><th>适用场景</th></tr></thead><tbody><tr><td> Hessian2（默认协议）</td><td>- 跨语言支持好<br>- 二进制序列化，协议紧凑<br>- 使用简单，Dubbo 原生支持</td><td> - 性能中等，不是最高<br>- 不支持对象引用共享</td><td>默认通用场景，适合大多数 RPC 调用</td></tr><tr><td> FastJson（JSON 格式）</td><td>- 可读性强，易于调试<br>- 跨语言方便，尤其适合前端交互</td><td> - 文本冗余，体积大<br>- 性能低于二进制序列化协议（如 Hessian、Protobuf）</td><td>需要与前端或非 Java 系统交互，或调试、日志记录场景</td></tr><tr><td> GSON（JSON 格式）</td><td>- 可读性强，易于调试<br>- 跨语言方便，尤其适合前端交互</td><td> - 文本冗余，体积大<br>- 性能低于二进制序列化协议（如 Hessian、Protobuf）</td><td>需要与前端或非 Java 系统交互，或调试、日志记录场景</td></tr><tr><td> Kryo</td><td>- 高性能，二进制序列化速度快<br>- 体积小<br>- 支持对象图</td><td> - 不支持跨语言<br>- 需要手动注册类才能获得最佳性能</td><td>内部 Java 服务之间的高性能 RPC 调用</td></tr><tr><td> FST（Fast-Serialization）</td><td>- 二进制序列化速度快，性能接近 Kryo<br>- 使用更简单</td><td> - 不支持跨语言<br>- 对类版本变化敏感</td><td>内部 Java 服务之间的高性能 RPC 调用</td></tr><tr><td> Protobuf（Google Protocol Buffers）</td><td>- 高性能，体积小<br>- 强类型定义<br>- 跨语言支持好</td><td> - 需要 <code>.proto</code> 文件定义<br>- 学习成本高</td><td>跨语言、高性能 RPC 或需要协议稳定性的场景</td></tr><tr><td> Avro</td><td>- 支持动态 Schema<br>- 跨语言支持好</td><td> - 性能不如 Protobuf<br>- 使用复杂</td><td>大数据场景，如 Kafka、Hadoop，需要动态 Schema</td></tr><tr><td>Java 原生序列化</td><td> - Java 原生支持，无需额外依赖<br>- 保留完整对象结构</td><td> - 体积大，性能低<br>- 安全性差（反序列化漏洞风险高）<br>- 不支持跨语言</td><td>仅用于内部 Java 服务调试或原型验证，不建议生产使用</td></tr></tbody></table><ul><li> Dubbo 序列化协议的选择建议</li></ul><table><thead><tr><th>场景</th><th>推荐的序列化协议</th><th>说明</th></tr></thead><tbody><tr><td>默认场景（通用 RPC 调用）</td><td>Hessian2</td><td>Dubbo 默认的序列化协议，跨语言支持好、易用，性能中等，适合大多数场景</td></tr><tr><td> Java 内部高性能 RPC 调用</td><td> Kryo 或 FST</td><td> 二进制序列化速度快、体积小，适合 Java 内部服务之间的高性能调用</td></tr><tr><td>跨语言且追求极致性能</td><td> Protobuf</td><td> 高性能、体积小、跨语言支持好，但需要 <code>.proto</code> 文件定义，学习成本较高</td></tr><tr><td>调试或日志场景</td><td> FastJson</td><td> 可读性强，易于调试，适合调试、日志记录或与前端交互，但性能较低</td></tr><tr><td>不建议使用</td><td> Java 原生序列化</td><td>性能低、体积大、安全性差（反序列化漏洞风险高），仅适合内部调试或原型验证</td></tr></tbody></table><div class="admonition note"><p class="admonition-title">Dubbo 序列化协议的使用</p><p>更多关于 Dubbo 序列化协议的介绍和使用案例可以看 <a href="/posts/fab9c84c.html#%E5%BA%8F%E5%88%97%E5%8C%96%E5%8D%8F%E8%AE%AE">这里</a>。</p></div><h3 id="负载均衡策略"><a href="#负载均衡策略" class="headerlink" title="负载均衡策略"></a>负载均衡策略</h3><ul><li>Dubbo 提供了五种负载均衡策略，如下所示：</li></ul><table><thead><tr><th>负载均衡策略</th><th>说明</th><th>适用场景</th></tr></thead><tbody><tr><td> RandomLoadBalance</td><td> 随机（默认策略），支持按权重设置随机概率</td><td>适用于请求量分散、服务性能相近的场景，能保证简单有效的负载均衡效果</td></tr><tr><td> RoundRobinLoadBalance</td><td> 轮询，支持按公约后的权重设置轮询比率</td><td>适用于服务节点性能相近、需要保证调用次数均匀的场景</td></tr><tr><td> LeastActiveLoadBalance</td><td> 最少活跃调用数，支持相同活跃数的权重随机</td><td>适用于服务性能差异较大或请求响应时间差异较大的场景，能提高请求分配效率</td></tr><tr><td> ConsistentHashLoadBalance</td><td> 一致性哈希，相同参数的请求总是发送到同一个服务提供者</td><td>适用于需要保证请求一致性的场景，例如：缓存服务或用户会话粘性</td></tr><tr><td> ShortestResponseLoadBalance</td><td> 最短响应时间优先，选择响应时间最短的服务提供者</td><td>适用于请求响应时间差异较大，且希望优先使用低延迟服务节点的场景</td></tr></tbody></table><p><img data-src="../../../asset/2024/12/dubbo-13.png"></p><div class="admonition note"><p class="admonition-title">Dubbo 负载均衡策略的使用</p><ul><li><a href="/posts/ad584707.html#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">Dubbo 负载均衡策略的使用案例</a></li></ul></div><h3 id="集群容错策略"><a href="#集群容错策略" class="headerlink" title="集群容错策略"></a>集群容错策略</h3><ul><li>Dubbo 提供了八种集群容错策略，如下所示：</li></ul><table><thead><tr><th>集群容错策略</th><th>策略名称</th><th>策略说明</th><th>适用场景</th></tr></thead><tbody><tr><td> Failover</td><td> 故障转移</td><td>默认策略，当出现服务调用失败，重试调用其它服务器，默认重试 2 次，使用 <code>retries</code> 属性配置重试次数</td><td>通常用于读操作（幂等操作），如查询数据时可以容忍偶尔失败并重试的场景</td></tr><tr><td> Failfast</td><td> 快速失败</td><td>消费者只发起一次调用，若失败则立即抛出异常，类似于 Failover 集群容错策略中重试次数设置为 0 的情况</td><td>通常用于写操作（非幂等操作），如数据插入操作，失败时不应该重试</td></tr><tr><td> Failsafe</td><td> 失败安全</td><td>当消费者调用提供者出现异常时，只会打印异常，而不会抛出异常，即直接忽略本次消费操作，返回一个空结果</td><td>适用于不重要的操作，如日志记录或监控信息上报，出现失败不影响整体业务逻辑</td></tr><tr><td> Failback</td><td> 失败自动恢复</td><td>在消费者调用失败后，返回一个空结果。Dubbo 会在内存中记录下（非持久化）该失败请求，并通过定时任务对失败的调用进行重试，且重试间隔默认是 5 秒（不可配置）</td><td>通常用于消息通知操作，如异步通知，失败后可自动补偿</td></tr><tr><td> Forking</td><td> 并行调用</td><td>消费者对于同一服务会并行调用多个提供者服务器，只要有一个成功就调用结束，并返回结果</td><td>通常用于实时性要求较高的读操作，但需要浪费更多的服务资源，可通过 <code>forks = "2"</code> 来设置最大并行数</td></tr><tr><td> Broadcast</td><td> 广播调用</td><td>通过广播调用所有提供者，逐个调用，任意一个提供者报错则报错</td><td>适用于更新配置或通知所有服务提供者的场景，如缓存更新或者服务健康检查</td></tr><tr><td> ZoneAware</td><td> 区域感知集群</td><td>当部署了多个机房或区域（Zone）时，优先调用同一机房的服务提供者，以降低跨区调用延迟和网络风险</td><td>适用于多区域部署场景，优先减少跨区域网络延迟的情况下实现高效负载均衡</td></tr><tr><td> Mergeable</td><td> 结果合并集群</td><td>调用多个服务提供者，并将多个服务提供者的调用结果进行合并，最终返回合并后的结果</td><td>适用于需要聚合结果的场景，例如分布式查询、汇总统计等操作</td></tr></tbody></table><div class="admonition note"><p class="admonition-title">Dubbo 集群容错策略的使用</p><ul><li><a href="/posts/ad584707.html#%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99">Dubbo 集群容错策略的使用案例</a></li></ul></div><ul><li><code>FailbackCluster</code>（失败自动恢复）的使用问题<ul><li>问题描述：<ul><li>调用失败的记录只存储在内存中，应用重启或进程崩溃后，重试记录将会丢失，导致重试机制失效。</li><li>这种重试机制不适用于核心业务，比如支付交易、订单创建、库存扣减、用户积分更新等。</li></ul></li><li>问题解决：<ul><li>第一种方案：<ul><li>Dubbo 调用改为消息驱动，使用 MQ 做调用的缓冲与重试。<ul><li>(1) 生产者不直接调用 Dubbo 服务，而是先将消息写入 MQ 中；</li><li>(2) 由一个消息消费服务订阅 MQ 消息，然后执行 Dubbo RPC 调用（基于 Dubbo 原生 API 实现泛化调用）；</li><li>(3) 如果 Dubbo RPC 调用失败，可以将消息写入到延迟队列中，直到 RPC 调用成功；</li><li>(4) 如果重试调用次数达到最大重试次数，则将消息写入死信队列。</li><li>(5) 为了避免重复调用，需要实现幂等性，比如使用数据库唯一约束（如 <code>requestId</code> 字段）、Redis 缓存（如 <code>SETNX</code>）等。</li></ul></li></ul></li><li>第二种解决方案：<ul><li>(1) 自定义扩展 <code>FailbackCluster</code> 的实现；</li><li>(2) 将失败记录写入外部存储（如 Redis、DB）；</li><li>(3) 创建后台线程，每隔固定时间扫描一次外部存储，尝试重新调用 Dubbo 服务（基于 Dubbo 原生 API 实现泛化调用）；</li><li>(4) 当重试调用成功返回时，将对应的失败记录从外部存储中删除，避免重复调用和数据堆积；</li><li>(5) 应用重启后重新加载未完成的失败记录，并继续由后台线程执行重试逻辑；</li><li>(6) 为了避免重复调用，需要实现幂等性，比如使用数据库唯一约束（如 <code>requestId</code> 字段）、Redis 缓存（如 <code>SETNX</code>）等。</li></ul></li></ul></li><li>方案对比：<table><thead><tr><th>对比维度</th><th> MQ（Kafka / RabbitMQ / RocketMQ）</th><th>Redis / MySQL</th></tr></thead><tbody><tr><td> 数据持久化</td><td>内置持久化到 Broker</td><td> 持久化到外部存储，需要自己实现</td></tr><tr><td>应用重启恢复</td><td>重启后仍可消费未完成消息</td><td>重启后可读取失败记录，依赖自定义逻辑</td></tr><tr><td>重试保障</td><td>原生支持延迟重试和死信队列</td><td>需定时任务扫描和手动实现延迟 / 死信机制</td></tr><tr><td>吞吐能力</td><td>高，支持大规模并发</td><td>中等，定时扫描会成为性能瓶颈</td></tr><tr><td>延迟控制</td><td>原生支持延迟队列</td><td>延迟不可控，依赖扫描频率</td></tr><tr><td>实现复杂度</td><td>中等，需要部署 MQ，但重试逻辑成熟</td><td>低 - 中，不依赖额外中间件，但需自己实现重试和死信机制</td></tr><tr><td>适用场景</td><td>核心业务，如订单、支付、交易</td><td>弱异步业务，如日志、通知、监控埋点等，可容忍一定延迟或失败</td></tr><tr><td>维护成本</td><td>低，MQ 自带可靠机制</td><td>高，定时任务、重试逻辑和死信处理需自行维护</td></tr></tbody></table></li></ul></li></ul><div class="admonition warning"><p class="admonition-title">Dubbo 的泛化调用是什么</p><p>普通的 Dubbo 调用依赖接口类，会进行编译期类型检查，适合直接业务调用。而泛化调用则不依赖接口类，只通过接口名称和方法信息在运行时进行调用，参数类型通过字符串描述，适合消息化、动态调用、异步或重试场景。</p></div><h2 id="Dubbo-源码浅析"><a href="#Dubbo-源码浅析" class="headerlink" title="Dubbo 源码浅析"></a>Dubbo 源码浅析</h2><h3 id="学习建议"><a href="#学习建议" class="headerlink" title="学习建议"></a>学习建议</h3><ul><li><p>学习内容</p><ul><li>基于接口代理、注册中心、配置实现</li></ul></li><li><p>学习方法</p><ul><li><code>接口代理</code>：Dubbo 的接口代理是如何实现的？</li><li><code>注册中心</code>：Dubbo 在 Zookeeper 上面干了什么？</li><li><code>配置实现</code>：Dubbo 不同粒度配置的覆盖关系是怎样？</li></ul></li></ul><div class="admonition warning"><p class="admonition-title">特别注意</p><p>在学习 Dubbo 的底层源码时，建议使用<a href="/posts/d484ffa3.html#%E5%8E%9F%E7%94%9F-API-%E6%96%B9%E5%BC%8F%E4%BD%BF%E7%94%A8-Dubbo">原生 API 的方式</a>来使用 Dubbo，这样更容易探寻 Dubbo 内部细节的入口。</p></div><h3 id="接口代理"><a href="#接口代理" class="headerlink" title="接口代理"></a>接口代理</h3><ul><li><p>Dubbo 接口代理的底层源码</p><ul><li>Dubbo 基于接口的代理实现<ul><li><code>ReferenceConfig.get()</code> -&gt; <code>ReferenceConfig.init()</code> -&gt; <code>ReferenceConfig.createProxy()</code> -&gt; <code>StubProxyFactoryWrapper.getProxy()</code> -&gt; <code>JavassistProxyFactory.getProxy()</code> -&gt; <code>DubboInvoker.doInvoke()</code></li></ul></li><li>Nettty 在远程过程调用的应用<ul><li><code>NettyClient.doOpen()</code> -&gt; <code>NettyClientHandler</code></li><li><code>NettyServer.doOpen()</code> -&gt; <code>NettyHandler</code></li></ul></li></ul></li><li><p>Dubbo 支持的动态代理策略有以下三种</p><ul><li>Javassist（基于字节码）：默认，使用 Javassist 字节码操作库生成代理类。</li><li>JDK 动态代理（基于反射）：使用 JDK 动态代理生成代理类。</li><li>CGLib（基于 ASM）：使用 CGLib 字节码操作库生成代理类。</li></ul></li><li><p>Dubbo 默认使用 Javassist 来实现动态代理，而不是使用 CGlib 的原因</p></li></ul><table><thead><tr><th>原因</th><th>说明</th></tr></thead><tbody><tr><td>功能冗余</td><td> Dubbo 只需要接口代理，CGlib 面向类代理，其优势无法发挥。</td></tr><tr><td>Javassist 足够优秀</td><td>生成速度快，运行性能高，API 友好，完全可以替代 CGlib。</td></tr><tr><td>依赖冲突</td><td> Spring 等框架也使用 CGlib，如果 Dubbo 也使用 CGlib 容易产生版本冲突和类加载问题。</td></tr><tr><td>维护成本高</td><td> ASM 对 JDK 版本敏感，Dubbo 不希望承担额外的版本升级压力，增加维护成本。</td></tr><tr><td>社区策略</td><td> Dubbo 官方逐步废弃 CGlib，未来版本彻底移除。</td></tr></tbody></table><div class="admonition note"><p class="admonition-title">提示</p><p>Dubbo 默认使用 Javassist 字节码操作来生成代理类，还可以通过 Dubbo 的 SPI 扩展机制配置用户自己的动态代理实现。</p></div><h3 id="注册中心"><a href="#注册中心" class="headerlink" title="注册中心"></a>注册中心</h3><ul><li><p>Dubbo 中注册中心相关的底层源码</p><ul><li>将服务注册到 ZooKeeper<ul><li><code>ZookeeperRegistry.doRegister()</code></li></ul></li><li>从 ZooKeeper 订阅服务<ul><li><code>ZookeeperRegistry.doSubscribe()</code></li></ul></li></ul></li><li><p>Dubbo 在 ZooKeeper 中的数据存储结构</p></li></ul><p><img data-src="../../../asset/2024/12/dubbo-12.png"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/dubbo</span><br><span class="line">└── com.clay.dubbo.service.DemoService</span><br><span class="line">    ├── providers</span><br><span class="line">    │   └── [dubbo%3A%2F%2F127.0.0.1%3A20880%2Fcom.clay.dubbo.service.DemoService%3Fanyhost%3Dtrue%26application%3Ddubbo-provider-application%26bean.name%3Dcom.clay.dubbo.service.DemoService%26dubbo%3D2.0.2%26generic%3Dfalse%26interface%3Dcom.clay.dubbo.service.DemoService%26methods%3DsayHello%26pid%3D36945%26side%3Dprovider%26timestamp%3D1735281570416]</span><br><span class="line">    │</span><br><span class="line">    ├── consumers</span><br><span class="line">    │   └── [consumer%3A%2F%2F172.17.0.1%2Fcom.clay.dubbo.service.DemoService%3Fapplication%3Ddubbo-consumer-application%26category%3Dconsumers%26check%3Dfalse%26dubbo%3D2.0.2%26init%3Dfalse%26interface%3Dcom.clay.dubbo.service.DemoService%26loadbalance%3Drandom%26metadata-type%3Dremote%26methods%3DsayHello%26pid%3D2581%26qos.enable%3Dfalse%26release%3D2.7.23%26retries%3D0%26side%3Dconsumer%26sticky%3Dfalse%26timeout%3D1000%26timestamp%3D1758801158327]</span><br><span class="line">    │</span><br><span class="line">    ├── configurators</span><br><span class="line">    │   └── empty</span><br><span class="line">    │</span><br><span class="line">    └── routers</span><br><span class="line">        └── empty</span><br></pre></td></tr></tbody></table></figure><ul><li>查看 ZooKeeper 的节点信息（Root Node）</li></ul><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: localhost:2181(CONNECTED) 7] ls /dubbo</span><br><span class="line">[com.clay.dubbo.service.DemoService, config, metadata]</span><br></pre></td></tr></tbody></table></figure><ul><li>查看 ZooKeeper 的节点信息（Service）</li></ul><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: localhost:2181(CONNECTED) 9] ls /dubbo/com.clay.dubbo.service.DemoService</span><br><span class="line">[configurators, consumers, providers, routers]</span><br></pre></td></tr></tbody></table></figure><ul><li>查看 ZooKeeper 的节点信息（Type），默认通过 <code>URLEncoder</code> 进行编码</li></ul><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: localhost:2181(CONNECTED) 10] ls /dubbo/com.clay.dubbo.service.DemoService/providers </span><br><span class="line">[dubbo%3A%2F%2F127.0.0.1%3A20880%2Fcom.clay.dubbo.service.DemoService%3Fanyhost%3Dtrue%26application%3Ddubbo-provider-application%26bean.name%3Dcom.clay.dubbo.service.DemoService%26dubbo%3D2.0.2%26generic%3Dfalse%26interface%3Dcom.clay.dubbo.service.DemoService%26methods%3DsayHello%26pid%3D36945%26side%3Dprovider%26timestamp%3D1735281570416]</span><br></pre></td></tr></tbody></table></figure><ul><li>将上述的节点信息（Provider - 服务提供者）通过 <code>URLDecoder</code> 解码后，得到的内容如下：</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[dubbo://127.0.0.1:20880/com.clay.dubbo.service.DemoService?anyhost=true&amp;application=dubbo-provider-application&amp;deprecated=false&amp;dubbo=2.0.2&amp;dynamic=true&amp;generic=false&amp;interface=com.clay.dubbo.service.DemoService&amp;methods=sayHello&amp;pid=24895&amp;release=2.7.6&amp;side=provider&amp;timestamp=1735287128612]</span><br></pre></td></tr></tbody></table></figure><h3 id="配置实现"><a href="#配置实现" class="headerlink" title="配置实现"></a>配置实现</h3><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="/posts/ad584707.html">Dubbo 2 入门教程之二</a></li><li><a href="/posts/fab9c84c.html">Dubbo 2 入门教程之三</a></li></ul><div id="readmore-expansion" class="pjax"></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script data-pjax="" src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script data-pjax="">var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),allowMobile=!1;if(!isMobile||isMobile&&allowMobile)try{var plugin=new ReadmorePlugin;plugin.init({type:"hexo",id:"readmore-container",name:"全栈技术驿站",blogId:"96641-5333172926158-056",qrcode:"https://www.techgrow.cn/img/wx_mp_qr.png",keyword:"Tech",random:"1",height:"auto",expires:"365",lockToc:"yes",interval:"30",baseUrl:"",execute:"yes",tocSelector:""})}catch(e){console.warn("readmore plugin occurred error: "+e.name+" | "+e.message)}</script></div><footer class="post-footer"><div class="reward-container"><div>支持一根棒棒糖！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/ef04d10a.html" title="Dubbo 2 巩固教程之一">https://www.techgrow.cn/posts/ef04d10a.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎添加博主微信，请备注 "博客"，届时会邀请您加入百人微信群</span><br> <img src="/img/wx_account_qr.png"></div></div></div><div class="post-tags"><a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag"><i class="fa fa-tag"></i> 微服务</a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag"><i class="fa fa-tag"></i> 分布式</a><a href="/tags/RPC/" rel="tag"><i class="fa fa-tag"></i> RPC</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/fab9c84c.html" rel="prev" title="Dubbo 2 入门教程之三"><i class="fa fa-angle-left"></i> Dubbo 2 入门教程之三</a></div><div class="post-nav-item"> <a href="/posts/89d0a2f4.html" rel="next" title="GitHub 排行榜与资源整理">GitHub 排行榜与资源整理<i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> Copyright © 2018 – <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">2m</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 ≈</span> <span title="站点阅读时长">30:33</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & Docker | "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="beian"> <span><img src="/img/gonganbeian.png" alt=""></span> <span><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤ICP备 19024664号-1</a></span> <span>|&nbsp;</span> <span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302004035" rel="external nofollow" target="_blank">粤公网安备 44011302004035号</a></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div> <a href="https://github.com/rqh656418510" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="external nofollow" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script src="/js/third-party/pace.js"></script><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://www.techgrow.cn/lib/darkmode/darkmode@1.5.7.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '30px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js"></script><script>
    var qiniu_domain = "https://oss.techgrow.cn";
    var qiniu_token_url = "https://open.techgrow.cn/api/oss/qiniu/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline.techgrow.cn","cssUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css","commentCount":true,"pageview":false,"copyright":false,"allowUploadImage":true,"libUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.js","locale":{"placeholder":"支持匿名评论啦，若希望及时收到博主的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧"},"dark":"body.darkmode--activated","emoji":["https://www.techgrow.cn/lib/@waline/emojis/1.0.1/weibo"],"meta":["nick","mail","link"],"login":"enable","pageSize":10,"qiniuDebug":false,"qiniuDomain":"https://oss.techgrow.cn","qiniuTokenUrl":"https://open.techgrow.cn/api/oss/qiniu/token/upload","qiniuLibUrl":"https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js","el":"#waline","comment":true,"path":"/posts/ef04d10a.html"}</script><link rel="stylesheet" href="https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css"><script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.imageUploader = false;
  }
  else if (CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.imageUploader = qiniuUploadImage;
  } else {
   CONFIG.waline.imageUploader = true;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script><div class="moon-menu"><div class="moon-menu-items"><div id="moon-menu-item-back2bottom" class="moon-menu-item"><i class="fas fa-chevron-down"></i></div><div id="moon-menu-item-back2top" class="moon-menu-item"><i class="fas fa-chevron-up"></i></div></div><div class="moon-menu-button"><svg class="moon-menu-bg"><circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle><circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle></svg><div class="moon-menu-content"><div class="moon-menu-icon"><i class="fas fa-ellipsis-v"></i></div><div class="moon-menu-text"></div></div></div></div><script src="/js/injector.js"></script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),e="ipad"==i.match(/ipad/i),a="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),r="ucweb"==i.match(/ucweb/i),c="android"==i.match(/android/i),l="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(e||a||o||n||r||c||l||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;jQuery(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||jQuery("#aplayer").css("display","block"))}),jQuery(window).on("load",function(){aplayerEnable&&jQuery(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>