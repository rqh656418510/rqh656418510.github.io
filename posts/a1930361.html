<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/pace-js/themes/blue/pace-theme-minimal.css"><script src="/lib/pace-js/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.18.0","exturl":false,"sidebar":{"position":"left","width":300,"display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="本文主要介绍在Linux环境下，通过CrossOver安装原生版本的微信（WeChat），适用于Debian/Ubuntu/CentOS系的Linux发行版。"><meta property="og:type" content="article"><meta property="og:title" content="CrossOver 安装微信（WeChat）"><meta property="og:url" content="https://www.techgrow.cn/posts/a1930361.html"><meta property="og:site_name" content="Clay 的技术空间"><meta property="og:description" content="本文主要介绍在Linux环境下，通过CrossOver安装原生版本的微信（WeChat），适用于Debian/Ubuntu/CentOS系的Linux发行版。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.techgrow.cn/asset/2019/12/yong-input-0.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2019/12/yong-input-1.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2019/12/yong-input-2.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2019/12/yong-input-3.png"><meta property="og:image" content="https://www.techgrow.cn/asset/2019/12/crossover-wechat.png"><meta property="article:published_time" content="2019-12-22T15:13:22.000Z"><meta property="article:modified_time" content="2021-11-22T12:13:22.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="Linux"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.techgrow.cn/asset/2019/12/yong-input-0.png"><link rel="canonical" href="https://www.techgrow.cn/posts/a1930361.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/a1930361.html","path":"posts/a1930361.html","title":"CrossOver 安装微信（WeChat）"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>CrossOver 安装微信（WeChat） | Clay 的技术空间</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn:9360"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术空间" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion"><script src="/lib/jquery/dist/jquery.min.js"></script><script data-pjax="">!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><link rel="stylesheet" href="/lib/aplayer/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="/lib/aplayer/dist/APlayer.min.js"></script><script src="/lib/aplayer/dist/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=jQuery("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=jQuery("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}jQuery(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://open.techgrow.cn/app/api/wechat/js/signature?url="+a+"&noncestr="+i+"&timestamp="+r;jQuery.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt=""></div><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术空间</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-readingnotes"><a href="https://www.techgrow.cn/reading/" rel="section"><i class="fa fa-book-open-reader fa-fw"></i>读书笔记</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn:9360/ui/login?lng=zh-cn" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">前言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="nav-text">软件版本说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CrossOver-%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C%E5%BE%AE%E4%BF%A1%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91"><span class="nav-text">CrossOver 安装运行微信遇到的坑</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-%E5%AE%89%E8%A3%85-CrossOver"><span class="nav-text">Linux 安装 CrossOver</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CrossOver-%E5%AE%89%E8%A3%85%E5%BE%AE%E4%BF%A1"><span class="nav-text">CrossOver 安装微信</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%BE%AE%E4%BF%A1%E8%BF%90%E8%A1%8C%E5%90%8E%E5%87%BA%E7%8E%B0%E7%9A%84%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98"><span class="nav-text">解决微信运行后出现的各种问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AE%E4%BF%A1%E5%90%AF%E5%8A%A8%E6%97%B6%E5%81%B6%E5%B0%94%E5%B4%A9%E6%BA%83"><span class="nav-text">微信启动时偶尔崩溃</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AE%E4%BF%A1%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%E5%90%8E%EF%BC%8C%E6%97%A0%E6%B3%95%E7%9B%B4%E6%8E%A5%E5%8F%91%E9%80%81%E5%9B%BE%E7%89%87"><span class="nav-text">微信屏幕截图后，无法直接发送图片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E5%BE%AE%E4%BF%A1%E6%8F%90%E7%A4%BA-WeChatWin-dll-%E6%96%87%E4%BB%B6%E7%BC%BA%E5%A4%B1"><span class="nav-text">启动微信提示 WeChatWin.dll 文件缺失</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AE%E4%BF%A1%E8%BE%93%E5%85%A5%E6%A1%86%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%E5%85%89%E6%A0%87%E4%B8%8E%E6%96%87%E5%AD%97%EF%BC%8C%E5%8F%AA%E8%83%BD%E5%A4%8D%E5%88%B6%E9%BB%8F%E8%B4%B4"><span class="nav-text">微信输入框无法显示光标与文字，只能复制黏贴</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AE%E4%BF%A1%E8%BE%93%E5%85%A5%E6%A1%86%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95%EF%BC%88Linux-%E7%89%88%EF%BC%89%E8%BE%93%E5%85%A5%E4%B8%AD%E6%96%87"><span class="nav-text">微信输入框无法使用搜狗输入法（Linux 版）输入中文</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CrossOver-%E5%AE%89%E8%A3%85%E5%B0%8F%E5%B0%8F%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95"><span class="nav-text">CrossOver 安装小小中文输入法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E5%B0%8F%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E7%9A%84%E5%AE%89%E8%A3%85%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-text">小小中文输入法的安装注意事项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E5%B0%8F%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-text">小小中文输入法的使用注意事项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AE%E4%BF%A1%E8%BF%90%E8%A1%8C%E7%9A%84%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C%E5%9B%BE"><span class="nav-text">微信运行的最终效果图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AE%E4%BF%A1%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7"><span class="nav-text">微信版本升级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CrossOver-%E8%AF%95%E7%94%A8%E6%9C%9F%E5%B7%B2%E8%BF%87"><span class="nav-text">CrossOver 试用期已过</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%85%B6%E4%BB%96-Windows-%E5%8E%9F%E7%94%9F%E5%BA%94%E7%94%A8"><span class="nav-text">安装其他 Windows 原生应用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-%E5%AE%89%E8%A3%85%E5%BE%AE%E4%BF%A1%E7%9A%84%E5%8F%AF%E9%80%89%E6%96%B9%E6%A1%88%E6%80%BB%E7%BB%93"><span class="nav-text">Linux 安装微信的可选方案总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E5%8D%9A%E5%AE%A2"><span class="nav-text">参考博客</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <span class="site-state-item-count">500</span> <span class="site-state-item-name">文章</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">47</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https://github.com/rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → /sitemap.xml" rel="noopener me"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/a1930361.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术空间"><meta itemprop="description" content="专注于 Java、前端、移动端、微服务、分布式系统、数据库、系统架构、人工智能、大数据、云计算、物联网、虚拟化学习的技术博客。"></span><span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="CrossOver 安装微信（WeChat） | Clay 的技术空间"><meta itemprop="description" content="本文主要介绍在Linux环境下，通过CrossOver安装原生版本的微信（WeChat），适用于Debian/Ubuntu/CentOS系的Linux发行版。"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> CrossOver 安装微信（WeChat）</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-12-22 23:13:22" itemprop="dateCreated datePublished" datetime="2019-12-22T23:13:22+08:00">2019-12-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-11-22 20:13:22" itemprop="dateModified" datetime="2021-11-22T20:13:22+08:00">2021-11-22</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/a1930361.html#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/a1930361.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>3.5k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 ≈</span> <span>3 分钟</span></span></div></div></header><div class="post-body post-container" itemprop="articleBody" id="readmore-container"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>笔者曾在文章”<a href="https://www.techgrow.cn/posts/3f15d076.html">CentOS 7 安装常用桌面软件</a> “中，推荐使用 <code>electronic-wechat</code> 作为 Linux 微信客户端，可惜在 CentOS 7 环境下的长期使用体验比较一般，例如接收到消息时无声音提示，且微信的托盘图标不会闪烁，同时由于 <code>electronic-wechat</code> 是在 Web 版微信的基础上开发的，这就导致新注册的微信账号登录受限，最终无法使用。经过一番尝试，发现 CrossOver 可以近乎完美地安装微信，而且运行的是微信官方原生的二进制执行文件。本教程适用于 Debian/Ubuntu/CentOS 系的 Linux 发行版，文章末尾附有微信运行的<a href="/posts/a1930361.html#%E5%BE%AE%E4%BF%A1%E8%BF%90%E8%A1%8C%E7%9A%84%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C%E5%9B%BE">最终效果图</a>。</p><h3 id="软件版本说明"><a href="#软件版本说明" class="headerlink" title="软件版本说明"></a>软件版本说明</h3><ul><li>CrossOver： 19.0.0</li><li> 微信 PC 客户端： 2.7.1.88</li><li>CrossOver 容器： WinXp-64-bit</li><li>Linux 系统的输入法：搜狗输入法 For Linux 2.2.0.0108</li></ul><h3 id="CrossOver-安装运行微信遇到的坑"><a href="#CrossOver-安装运行微信遇到的坑" class="headerlink" title="CrossOver 安装运行微信遇到的坑"></a>CrossOver 安装运行微信遇到的坑</h3><p>CrossOver 安装微信的过程中可能遇到了以下问题，本文后面会详细一一给出对应的解决方法：</p><ul><li>微信启动时偶尔崩溃</li><li>启动微信提示 <code>WeChatWin.dll</code> 文件缺失</li><li>微信的输入框无法显示光标与文字，只能复制黏贴</li><li>微信屏幕截图后，无法直接发送图片</li><li>微信的输入框无法使用搜狗输入法（Linux 版）输入中文</li></ul><span id="more"></span><h2 id="Linux-安装-CrossOver"><a href="#Linux-安装-CrossOver" class="headerlink" title="Linux 安装 CrossOver"></a>Linux 安装 CrossOver</h2><p>CrossOver 支持 Ubuntu、Mint、Debian 使用 <code>.deb</code> 包安装，支持 Fedora、RHEL 使用 <code>.rpm</code> 包安装，支持其他发行版（例如 CentOS）使用 <code>.bin</code> 安装包安装。CrossOver 的安装比较简单，此处不再累述，可参考” <a target="_blank" rel="external nofollow" href="http://www.crossoverchina.com/rumen/col-xaj.html">官方安装教程</a> “。推荐使用 <code>root</code> 用户进行安装，若安装过程中自定义了 CrossOver 的安装路径，则需要新增环境变量来指定 CrossOver 的安装路径，否则 CrossOver 部分命令将无法使用，如下所示：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加环境变量，指定CrossOver的自定义安装路径</span></span><br><span class="line"><span class="keyword"># vim</span> /etc/profile</span><br><span class="line"><span class="built_in">export</span> CX_ROOT=/usr/<span class="built_in">local</span>/cxoffice</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使配置生效</span></span><br><span class="line"><span class="keyword"># source</span> /etc/profile</span><br></pre></td></tr></tbody></table></figure><h2 id="CrossOver-安装微信"><a href="#CrossOver-安装微信" class="headerlink" title="CrossOver 安装微信"></a>CrossOver 安装微信</h2><p>从<a target="_blank" rel="external nofollow" href="https://pc.weixin.qq.com/">微信官网</a>下载 PC 版的微信客户端后，可参考”<a target="_blank" rel="external nofollow" href="https://www.douban.com/note/735763836/?type=collect">CrossOver 如何安装未知应用程序</a> “里的步骤，在 CrossOver 上安装原生的微信 PC 客户端。值得一提的是，这里的 CrossOver 容器建议选择 <code>WinXp-64-bit</code>。</p><h2 id="解决微信运行后出现的各种问题"><a href="#解决微信运行后出现的各种问题" class="headerlink" title="解决微信运行后出现的各种问题"></a>解决微信运行后出现的各种问题</h2><h3 id="微信启动时偶尔崩溃"><a href="#微信启动时偶尔崩溃" class="headerlink" title="微信启动时偶尔崩溃"></a>微信启动时偶尔崩溃</h3><p>微信需要运行在 CrossOver 的 <code>WinXp-64-bit</code> 容器中，否则微信启动时可能会崩溃。</p><h3 id="微信屏幕截图后，无法直接发送图片"><a href="#微信屏幕截图后，无法直接发送图片" class="headerlink" title="微信屏幕截图后，无法直接发送图片"></a>微信屏幕截图后，无法直接发送图片</h3><p>微信屏幕截图，如果按” 钩” 确定截图完成，那么截图将则直接消失，不会将图片显示到输入框里，导致无法直接发送图片。建议截图完成后保存图片到本地，再从本地将图片拖拽到输入框里，这样就可以正常发送图片了。强烈推荐使用系统自带的截图工具或者第三方截图工具（例如 Shutter）替代微信的截图功能，因为可以将粘贴板里的图片直接粘贴到微信的输入框里。</p><h3 id="启动微信提示-WeChatWin-dll-文件缺失"><a href="#启动微信提示-WeChatWin-dll-文件缺失" class="headerlink" title="启动微信提示 WeChatWin.dll 文件缺失"></a>启动微信提示 WeChatWin.dll 文件缺失</h3><p>原因是 Linux 系统缺少 <code>lib32-libldap</code> 依赖库，导致 CrossOver 无法加载特定的 <code>dll</code> 文件，安装上对应的依赖库后，重启微信客户端即可。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 适用系统：Debian/Ubuntu/Mint</span></span><br><span class="line"><span class="keyword"># apt</span>-get install<span class="params"> -y</span> libldap-2.4-2:i386</span><br><span class="line"></span><br><span class="line"><span class="comment"># 适用系统：Fedora/RHEL/CentOS</span></span><br><span class="line"><span class="keyword"># yum</span> install<span class="params"> -y</span> compat-openldap.i686 openldap.i686 openldap-devel.i686 compat-openldap.x86_64 openldap.x86_64 openldap-devel.x86_64</span><br></pre></td></tr></tbody></table></figure><h3 id="微信输入框无法显示光标与文字，只能复制黏贴"><a href="#微信输入框无法显示光标与文字，只能复制黏贴" class="headerlink" title="微信输入框无法显示光标与文字，只能复制黏贴"></a>微信输入框无法显示光标与文字，只能复制黏贴</h3><p>下载 <a href="/downloads/2019/12/riched20.dll">Windows 版的 riched20.dll 动态链接库（必须是这个版本）</a>，然后将下载得到的 <code>riched20.dll</code> 文件拷贝到 CrossOver 容器对应的 <code>system32</code>、<code>syswow64</code>（重点） 目录下，即覆盖掉 CrossOver 容器内的 <code>riched20.dll</code> 文件。例如当 CrossOver 容器的名称为 <code>WinXp-64-bit</code>，那么则需要将 Windows 版的 <code>riched20.dll</code> 拷贝到 <code>~/.cxoffice/WinXp-64-bit/drive_c/windows/system32</code> 和 <code>~/.cxoffice/WinXp-64-bit/drive_c/windows/syswow64</code> 目录下，拷贝完成后重启微信客户端。</p><h3 id="微信输入框无法使用搜狗输入法（Linux-版）输入中文"><a href="#微信输入框无法使用搜狗输入法（Linux-版）输入中文" class="headerlink" title="微信输入框无法使用搜狗输入法（Linux 版）输入中文"></a>微信输入框无法使用搜狗输入法（Linux 版）输入中文</h3><p>如果在 Linux 系统内，已经安装了 Linux 版的搜狗输入法，但无法在微信的输入框内输入中文，这可能是系统缺少了输入法的环境变量配置信息导致的。Crossover 的应用快捷方式文件默认存放在 <code>~/.local/share/applications/</code> 文件夹中，从中找到 <code>xxx微信xxx.desktop</code> 文件，然后在 desktop 文件中找到 <code>lnk</code> 文件的路径，最后使用编辑器添加相关配置信息到 <code>lnk</code> 文件中，完成后重启微信客户端。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看微信的应用快捷方式文件</span></span><br><span class="line"><span class="keyword"># cat</span> ~/.<span class="built_in">local</span>/share/applications/cxmenu-cxoffice-955d8f89-fd24-4c49-addb-5dc0e8a63a1e-2l9ih12-微信.desktop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 找到这行内容：Exec="/home/xxxx/.cxoffice/WinXp-64-bit/desktopdata/cxmenu/StartMenu.C^5E3A_ProgramData_Microsoft_Windows_Start^2BMenu/Programs/微信/微信.lnk" %u</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑lnk文件，在 #!/bin/sh 之后和 exec 之前添加以下环境变量配置</span></span><br><span class="line"><span class="keyword"># vim</span> /home/xxxx/.cxoffice/WinXp-64-bit/desktopdata/cxmenu/StartMenu.C^5E3A_ProgramData_Microsoft_Windows_Start^2BMenu/Programs/微信/微信.lnk</span><br><span class="line"><span class="built_in">export</span> XIM=fcitx</span><br><span class="line"><span class="built_in">export</span> GTK_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> QT_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> QT4_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> XMODIFIERS=<span class="string">"@im=fcitx"</span></span><br></pre></td></tr></tbody></table></figure><h2 id="CrossOver-安装小小中文输入法"><a href="#CrossOver-安装小小中文输入法" class="headerlink" title="CrossOver 安装小小中文输入法"></a>CrossOver 安装小小中文输入法</h2><p>若上面配置了输入法的环境变量，依然无法解决微信中文输入的问题，此时可将<a target="_blank" rel="external nofollow" href="http://yongim.ys168.com/">小小输入法</a>安装到与微信同一 CrossOver 容器之下，安装后可以使用该输入法输入中文。值得一提的是，CrossOver 安装小小输入法的方法和上面 CrossOver 安装微信的方法是一样的，<a href="/downloads/2019/12/yong-2.5.0-0.zip">点击此处</a>可从本站下载小小输入法（V2.5.0-0）的 EXE 安装文件。</p><h3 id="小小中文输入法的安装注意事项"><a href="#小小中文输入法的安装注意事项" class="headerlink" title="小小中文输入法的安装注意事项"></a>小小中文输入法的安装注意事项</h3><ul><li>小小输入法安装完成后，不要勾选” 运行小小输入法”，直接点击” 完成” 按钮即可，否则 CrossOver 的安装程序会一直运行，除非点击菜单栏的托盘图标手动退出小小输入法</li><li>小小输入法安装完成后，容器不会出现小小输入法的启动快捷方式，即在应用程序列表中无法直接通过点击图标的方式来启动输入法，但可以参照以下方法手动创建小小输入法的启动快捷方式</li><li>由于在容器中的 <code>c:/Program Files (x86)/yong/</code> 目录下已经有了安装后的文件夹，因此可以在容器中通过 <code>"运行命令"</code> 的功能，手动创建小小输入法的快捷方式或者输入命令 <code>/home/xxxx/.cxoffice/WinXp-64-bit/dosdevices/c:/Program Files (x86)/yong/yong.exe</code> 来直接运行小小输入法，其中创建小小输入法快捷方式的步骤如下图：</li></ul><p><img data-src="../../../asset/2019/12/yong-input-0.png" alt="yong-input-0"></p><p><img data-src="../../../asset/2019/12/yong-input-1.png" alt="yong-input-1"></p><p><img data-src="../../../asset/2019/12/yong-input-2.png" alt="yong-input-2"></p><p><img data-src="../../../asset/2019/12/yong-input-3.png" alt="yong-input-3"></p><h3 id="小小中文输入法的使用注意事项"><a href="#小小中文输入法的使用注意事项" class="headerlink" title="小小中文输入法的使用注意事项"></a>小小中文输入法的使用注意事项</h3><ul><li>通过 CrossOver 安装的程序使用小小输入法后与宿主机上安装的输入法是互不干扰的，两者都可以独立正常使用</li><li>小小输入法中英文切换的默认快捷键是左边的 Ctrl 键，支持自定义输入法的快捷键</li><li>小小输入法每次都需要手动启动，且首次使用需要通过小小输入法在菜单栏上的托盘图标切换到拼音输入法</li><li>若已经通过菜单栏的托盘图标切换到拼音输入法，但在微信输入框中依然无法输入中文，此时可以单击菜单栏上的托盘图标，直至右下角出现小小输入法的状态栏，然后再尝试输入中文</li><li>若上面的方法都无法使用小小输入法输入中文，此时试试重启输入法，然后再多试几次</li><li>建议先启动小小输入法，然后再启动微信应用</li></ul><h2 id="微信运行的最终效果图"><a href="#微信运行的最终效果图" class="headerlink" title="微信运行的最终效果图"></a>微信运行的最终效果图</h2><p><img data-src="../../../asset/2019/12/crossover-wechat.png" alt="crossover-wechat"></p><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="微信版本升级"><a href="#微信版本升级" class="headerlink" title="微信版本升级"></a>微信版本升级</h3><p>若需要升级微信的版本，首先在官网下载最新版微信 PC 客户端的二进制执行文件，然后通过 UI 界面卸载 CrossOver 容器里的旧版微信，最后在容器里安装最新版的微信 PC 客户端即可。</p><h3 id="CrossOver-试用期已过"><a href="#CrossOver-试用期已过" class="headerlink" title="CrossOver 试用期已过"></a>CrossOver 试用期已过</h3><p>CrossOver 默认试用时间为 15 天，在 Linux 系统下，如果 15 天过后还想继续试用，可以执行以下操作进行破解。CrossOver 的试用时间验证信息是写在每一个 <code>winebottle</code> 容器中的（其本质就是在容器所在目录下创建文件了名称为 <code>.eval</code> 的隐藏文件 ），不同容器之间是完全隔离的（不是写在全局配置中）。即使一个已使用的容器过期了，依然可以创建新的容器，并重新计算试用期，所以不需要重装 CrossOver 软件。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除.eval文件</span></span><br><span class="line"><span class="keyword">$ rm</span> ~/.cxoffice/容器名称/.<span class="built_in">eval</span></span><br></pre></td></tr></tbody></table></figure><h3 id="安装其他-Windows-原生应用"><a href="#安装其他-Windows-原生应用" class="headerlink" title="安装其他 Windows 原生应用"></a>安装其他 Windows 原生应用</h3><p>在 Linux 环境下，若需要安装 QQ、TIM、迅雷、Office 等其他主流的 Windows 应用，可以参考上面 CrossOver 安装微信 PC 客户端的过程；因为安装步骤基本都是大同小异的，重点在于细节问题的解决。</p><h2 id="Linux-安装微信的可选方案总结"><a href="#Linux-安装微信的可选方案总结" class="headerlink" title="Linux 安装微信的可选方案总结"></a>Linux 安装微信的可选方案总结</h2><ul><li>腾讯官方 Web 版微信</li><li><a target="_blank" rel="external nofollow" href="https://meetfranz.com/">Franz</a> + 微信（基于 Web 版）</li><li>Electronic-Wechat（基于 Web 版）</li><li>虚拟机 + 微信原生 PC 客户端</li><li> CrossOver + 微信原生 PC 客户端</li><li><a target="_blank" rel="external nofollow" href="https://github.com/Winetricks/winetricks">Winetricks（基于 Wine）</a> + 微信原生 PC 客户端</li><li><a target="_blank" rel="external nofollow" href="https://github.com/hillwoodroc/winetricks-zh">Winetricks-ZH（基于 Wine）</a> + 微信原生 PC 客户端</li><li> AppImage + <a target="_blank" rel="external nofollow" href="https://github.com/Hackerl/Wine_Appimage">AppImage 打包构建的（Wine + 微信原生 PC 客户端）</a></li><li>Flatpak + <a target="_blank" rel="external nofollow" href="https://gitee.com/wsgalaxy/flatpak-deepinwine-wiki">Flatpak 打包构建的（Deepin-Wine + 微信原生 PC 客户端）</a></li><li>Wine + PlayonLinux + 微信原生 PC 客户端</li></ul><h2 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h2><ul><li><a target="_blank" rel="external nofollow" href="https://mark1998.com/wechat-and-tim-on-linux/">在 Ubuntu 中使用 TIM 和微信</a></li><li><a target="_blank" rel="external nofollow" href="https://www.cnblogs.com/makefile/p/6079451.html">Linux 下的 Wine 生活（QQ、微信、Office）</a></li><li><a target="_blank" rel="external nofollow" href="https://www.v2ex.com/t/534165">Linux 上有什么好的 QQ 和微信登陆解决方案</a></li><li><a target="_blank" rel="external nofollow" href="https://forum.ubuntu.com.cn/viewtopic.php?f=121&amp;t=484452&amp;start=15">优麒麟 16.04 安装 CrossOver，QQ 输入不了中文</a></li><li><a target="_blank" rel="external nofollow" href="https://parrotsec-cn.org/t/qq/544">在 CrossOver 容器安装小小输入法解决无法输入中文的问题</a></li></ul><div id="readmore-expansion" class="pjax"></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script data-pjax="" src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script data-pjax="">var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),allowMobile=!1;if(!isMobile||isMobile&&allowMobile)try{var plugin=new ReadmorePlugin;plugin.init({type:"hexo",id:"readmore-container",name:"全栈技术驿站",blogId:"96641-5333172926158-056",qrcode:"https://www.techgrow.cn/img/wx_mp_qr.png",keyword:"Tech",random:"1",height:"auto",expires:"365",lockToc:"yes",interval:"30",baseUrl:"",execute:"yes",tocSelector:""})}catch(e){console.warn("readmore plugin occurred error: "+e.name+" | "+e.message)}</script></div><footer class="post-footer"><div class="reward-container"><div>支持一根棒棒糖！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/a1930361.html" title="CrossOver 安装微信（WeChat）">https://www.techgrow.cn/posts/a1930361.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎添加博主微信，请备注 "博客"，届时会邀请您加入微信群</span><br> <img src="/img/wx_account_qr.png"></div></div></div><div class="post-tags"><a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/8980c415.html" rel="prev" title="12306 抢票软件的安装与使用"><i class="fa fa-angle-left"></i> 12306 抢票软件的安装与使用</a></div><div class="post-nav-item"> <a href="/posts/7ffec382.html" rel="next" title="Hexo 更新 NPM 模块">Hexo 更新 NPM 模块<i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> Copyright © 2018 – <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">1.1m</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 ≈</span> <span title="站点阅读时长">16:31</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & Docker | "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="beian"> <span><img src="/img/gonganbeian.png" alt=""></span> <span><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤 ICP 备 19024664 号</a></span> <span>|&nbsp;</span> <span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302004035" rel="external nofollow" target="_blank">粤公网安备 44011302004035 号</a></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div> <a href="https://github.com/rqh656418510" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="external nofollow" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-g2xji1rlE3KsGVClvuxTbcR0Kn2+wtQADSff2Tbb4zA="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"/lib/mermaid/dist/mermaid.min.js","integrity":"sha256-9y71g5Lz/KLsHjB8uXwnkuWDtAMDSzD/HdIbqhJfTAI="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/pace.js"></script><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://www.techgrow.cn/lib/darkmode/darkmode@1.5.7.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '30px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js"></script><script>
    var qiniu_domain = "https://qiniu.techgrow.cn";
    var qiniu_token_url = "https://open.techgrow.cn/app/api/qiniu/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline.techgrow.cn:9360","cssUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css","commentCount":true,"pageview":false,"copyright":false,"allowUploadImage":true,"libUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.js","locale":{"placeholder":"支持匿名评论啦，若希望及时收到博主的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧"},"dark":"body.darkmode--activated","emoji":["https://www.techgrow.cn/lib/@waline/emojis/1.0.1/weibo"],"meta":["nick","mail","link"],"login":"enable","pageSize":10,"qiniuDebug":false,"qiniuDomain":"https://qiniu.techgrow.cn","qiniuTokenUrl":"https://open.techgrow.cn/app/api/qiniu/token/upload","qiniuLibUrl":"https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js","el":"#waline","comment":true,"path":"/posts/a1930361.html"}</script><link rel="stylesheet" href="https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css"><script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.imageUploader = false;
  }
  else if (CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.imageUploader = qiniuUploadImage;
  } else {
   CONFIG.waline.imageUploader = true;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),e="ipad"==i.match(/ipad/i),a="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),r="ucweb"==i.match(/ucweb/i),c="android"==i.match(/android/i),l="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(e||a||o||n||r||c||l||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;jQuery(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||jQuery("#aplayer").css("display","block"))}),jQuery(window).on("load",function(){aplayerEnable&&jQuery(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>