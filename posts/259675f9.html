<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.13.0","exturl":false,"sidebar":{"position":"left","width":300,"display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="本文主要记录 ES6 的快速入门教程，包括 ES6 介绍、ES6 的新特性、新 API 等内容。"><meta property="og:type" content="article"><meta property="og:title" content="ES6 快速入门教程"><meta property="og:url" content="https://www.techgrow.cn/posts/259675f9.html"><meta property="og:site_name" content="Clay 的技术博客"><meta property="og:description" content="本文主要记录 ES6 的快速入门教程，包括 ES6 介绍、ES6 的新特性、新 API 等内容。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.techgrow.cn/asset/2022/09/es6-study-1.png"><meta property="article:published_time" content="2021-04-03T13:19:25.000Z"><meta property="article:modified_time" content="2021-04-03T13:19:25.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="前端"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.techgrow.cn/asset/2022/09/es6-study-1.png"><link rel="canonical" href="https://www.techgrow.cn/posts/259675f9.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/259675f9.html","path":"posts/259675f9.html","title":"ES6 快速入门教程"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>ES6 快速入门教程 | Clay 的技术博客</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn:9360"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术博客" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><script src="/lib/jquery/dist/jquery.min.js"></script><script data-pjax>!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><link rel="stylesheet" href="/lib/aplayer/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="/lib/aplayer/dist/APlayer.min.js"></script><script src="/lib/aplayer/dist/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=jQuery("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=jQuery("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}jQuery(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://open.techgrow.cn/app/api/wechat/js/signature?url="+a+"&noncestr="+i+"&timestamp="+r;jQuery.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt></div><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术博客</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-openplatform"><a href="https://open.techgrow.cn/" rel="external nofollow" target="_blank"><i class="fa fa-toolbox fa-fw"></i>开放平台</a></li><li class="menu-item menu-item-readingnotes"><a href="https://docs.techgrow.cn/notes/" rel="external nofollow" target="_blank"><i class="fa fa-book-open-reader fa-fw"></i>读书笔记</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn:9360/ui/login?lng=zh-cn" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ECMAScript"><span class="nav-number">1.</span> <span class="nav-text">ECMAScript</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ECMAScript-%E7%AE%80%E4%BB%8B"><span class="nav-number">1.1.</span> <span class="nav-text">ECMAScript 简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B%E5%9B%9E%E9%A1%BE"><span class="nav-number">1.2.</span> <span class="nav-text">前端发展历程回顾</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ES6-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="nav-number">2.</span> <span class="nav-text">ES6 快速入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ES6-%E7%AE%80%E4%BB%8B"><span class="nav-number">2.1.</span> <span class="nav-text">ES6 简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E"><span class="nav-number">2.2.</span> <span class="nav-text">变量声明</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#let-%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F"><span class="nav-number">2.2.1.</span> <span class="nav-text">let 声明变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#const-%E5%A3%B0%E6%98%8E%E5%B8%B8%E9%87%8F"><span class="nav-number">2.2.2.</span> <span class="nav-text">const 声明常量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E6%9E%84%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">2.3.</span> <span class="nav-text">解构表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E8%A7%A3%E6%9E%84"><span class="nav-number">2.3.1.</span> <span class="nav-text">数组解构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E8%A7%A3%E6%9E%84"><span class="nav-number">2.3.2.</span> <span class="nav-text">对象解构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%89%A9%E5%B1%95"><span class="nav-number">2.4.</span> <span class="nav-text">字符串扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B0-API-%E5%87%BD%E6%95%B0"><span class="nav-number">2.4.1.</span> <span class="nav-text">新 API 函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E7%89%88"><span class="nav-number">2.4.2.</span> <span class="nav-text">字符串模版</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E4%BC%98%E5%8C%96"><span class="nav-number">2.5.</span> <span class="nav-text">函数优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="nav-number">2.5.1.</span> <span class="nav-text">函数参数默认值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%AE%9A%E5%8F%82%E6%95%B0"><span class="nav-number">2.5.2.</span> <span class="nav-text">不定参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="nav-number">2.6.</span> <span class="nav-text">箭头函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E5%8D%95%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E5%87%BD%E6%95%B0"><span class="nav-number">2.6.1.</span> <span class="nav-text">声明单个参数的函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E5%87%BD%E6%95%B0"><span class="nav-number">2.6.2.</span> <span class="nav-text">声明多个参数的函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E7%BB%93%E5%90%88%E8%A7%A3%E6%9E%84%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">2.6.3.</span> <span class="nav-text">箭头函数结合解构表达式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E4%BC%98%E5%8C%96"><span class="nav-number">2.7.</span> <span class="nav-text">对象优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B0-API-%E5%87%BD%E6%95%B0-1"><span class="nav-number">2.7.1.</span> <span class="nav-text">新 API 函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E5%AF%B9%E8%B1%A1%E7%AE%80%E5%86%99"><span class="nav-number">2.7.2.</span> <span class="nav-text">声明对象简写</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%87%BD%E6%95%B0%E5%B1%9E%E6%80%A7%E7%AE%80%E5%86%99"><span class="nav-number">2.7.3.</span> <span class="nav-text">对象的函数属性简写</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E6%8B%93%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.7.4.</span> <span class="nav-text">对象拓展运算符</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#map-%E5%92%8C-reduce-%E5%87%BD%E6%95%B0"><span class="nav-number">2.8.</span> <span class="nav-text">map 和 reduce 函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#map-%E5%87%BD%E6%95%B0"><span class="nav-number">2.8.1.</span> <span class="nav-text">map 函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reduce-%E5%87%BD%E6%95%B0"><span class="nav-number">2.8.2.</span> <span class="nav-text">reduce 函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Promise"><span class="nav-number">2.9.</span> <span class="nav-text">Promise</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%A0%E7%BB%9F-Ajax-%E5%9B%9E%E8%B0%83%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">2.9.1.</span> <span class="nav-text">传统 Ajax 回调使用案例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E"><span class="nav-number">2.9.1.1.</span> <span class="nav-text">需求说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF%E6%8E%A5%E5%8F%A3"><span class="nav-number">2.9.1.2.</span> <span class="nav-text">后端接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3"><span class="nav-number">2.9.1.3.</span> <span class="nav-text">调用接口</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Promise-%E8%AF%AD%E6%B3%95"><span class="nav-number">2.9.2.</span> <span class="nav-text">Promise 语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Prmise-%E5%A4%84%E7%90%86%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C"><span class="nav-number">2.9.3.</span> <span class="nav-text">Prmise 处理执行结果</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Promise-%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">2.9.4.</span> <span class="nav-text">Promise 使用案例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Promise-%E4%BC%98%E5%8C%96%E5%A4%84%E7%90%86"><span class="nav-number">2.9.5.</span> <span class="nav-text">Promise 优化处理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="nav-number">2.10.</span> <span class="nav-text">模块化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E4%BB%8B%E7%BB%8D"><span class="nav-number">2.10.1.</span> <span class="nav-text">模块化介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#export-%E6%8C%87%E4%BB%A4"><span class="nav-number">2.10.2.</span> <span class="nav-text">export 指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#import-%E6%8C%87%E4%BB%A4"><span class="nav-number">2.10.3.</span> <span class="nav-text">import 指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E6%94%AF%E6%8C%81%E8%AF%B4%E6%98%8E"><span class="nav-number">2.10.4.</span> <span class="nav-text">浏览器支持说明</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <span class="site-state-item-count">424</span> <span class="site-state-item-name">文章</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">43</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → &#x2F;sitemap.xml"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div> <a href="https://github.com/rqh656418510" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/259675f9.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术博客"><meta itemprop="description" content="专注于 Java、前端、移动端、微服务、分布式系统、数据库、系统架构、人工智能、大数据、云计算、物联网、虚拟化学习的技术博客。"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="ES6 快速入门教程 | Clay 的技术博客"><meta itemprop="description" content="本文主要记录 ES6 的快速入门教程，包括 ES6 介绍、ES6 的新特性、新 API 等内容。"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> ES6 快速入门教程</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-04-03 21:19:25" itemprop="dateCreated datePublished" datetime="2021-04-03T21:19:25+08:00">2021-04-03</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/259675f9.html#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/259675f9.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>3.5k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>3 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><div id="readmore-container"><h2 id="ECMAScript"><a href="#ECMAScript" class="headerlink" title="ECMAScript"></a>ECMAScript</h2><h3 id="ECMAScript-简介"><a href="#ECMAScript-简介" class="headerlink" title="ECMAScript 简介"></a>ECMAScript 简介</h3><p>ECMAScript 是一种由 Ecma 国际（前身为欧洲计算机制造商协会，英文名称是 European Computer Manufacturers Association）通过 ECMA-262 标准化的脚本程序设计语言。ECMAScript 是浏览器脚本语言的规范，而 JavaScript 和 JScript 都是 ECMAScript 规范的实现者。</p><h3 id="前端发展历程回顾"><a href="#前端发展历程回顾" class="headerlink" title="前端发展历程回顾"></a>前端发展历程回顾</h3><ul><li><p>Web 1.0 时代</p><ul><li>最初的网页以 HTML 为主，是纯静态的网页。网页是只读的，信息流只能从服务到客户端单向流通。开发人员只关心页面的样式和内容即可。</li></ul></li><li><p>Web 2.0 时代</p><ul><li>1995 年，网景工程师 Brendan Eich 花了 10 天时间设计了 JavaScript 语言。</li><li>1996 年，微软发布了 JScript，其实是 JavaScript 的逆向工程实现。</li><li>1996 年 11 月，JavaScript 的创造者 Netscape 公司，决定将 JavaScript 提交给标准化组织 ECMA，希望这种语言能够成为国际标准。</li><li>1997 年，ECMA 发布 262 号标准文件（ECMA-262）的第一版，规定了浏览器脚本语言的标准，并将这种语言称为 ECMAScript，这个版本就是 1.0 版。</li><li>JavaScript 和 JScript 都是 ECMAScript 规范的实现者，随后各大浏览器厂商纷纷实现了 ECMAScript 规范。</li></ul></li></ul><span id="more"></span><h2 id="ES6-快速入门"><a href="#ES6-快速入门" class="headerlink" title="ES6 快速入门"></a>ES6 快速入门</h2><h3 id="ES6-简介"><a href="#ES6-简介" class="headerlink" title="ES6 简介"></a>ES6 简介</h3><p>ECMAScript 6.0（简称 ES6）是 JavaScript 语言的下一代标准，在 2015 年 6 月正式发布，并且从 ECMAScript 6 开始，开始采用年号来做版本。因此，<strong>ECMAScript 2015，也被称为 ECMAScript 6。</strong>它的目标，是使得 JavaScript 语言可以用来编写复杂的大型应用程序，成为企业级开发语言。 ECMAScript 每年发布一个新版本，从版本发布的概念上，不同版本的 ECMAScript 可以类比不同版本的 Java JDK（例如 JDK 8、JDK 11、JDK 15）。</p><p><img data-src="../../../asset/2022/09/es6-study-1.png"></p><h3 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h3><h4 id="let-声明变量"><a href="#let-声明变量" class="headerlink" title="let 声明变量"></a>let 声明变量</h4><ul><li><code>let</code> 声明的变量有严格的局部作用域，而 <code>var</code> 声明的变量往往会越域</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">}</span><br><span class="line"><span class="built_in">console</span>.log(a);   <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(b);   <span class="comment">// ReferenceError: b is not defined</span></span><br></pre></td></tr></tbody></table></figure><ul><li>同一个变量，<code>let</code> 只可以声明一次，而 <code>var</code> 可以声明多次</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">3</span>;</span><br><span class="line"><span class="comment">// let b = 4;     // 同一个变量声明多次会出现语法错误</span></span><br><span class="line"><span class="built_in">console</span>.log(a);   <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(b);   <span class="comment">// 3</span></span><br></pre></td></tr></tbody></table></figure><ul><li><code>let</code> 不存在变量提升，而 <code>var</code> 存在变量提升</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a);   <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(y);   <span class="comment">// ReferenceError: Cannot access 'y' before initialization</span></span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2</span>;</span><br></pre></td></tr></tbody></table></figure><h4 id="const-声明常量"><a href="#const-声明常量" class="headerlink" title="const 声明常量"></a>const 声明常量</h4><ul><li><code>const</code> 用于声明常量，声明后不允许改变常量的值，一旦声明必须初始化，否则会出现语法错误</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line">a = <span class="number">2</span>;   <span class="comment">// Uncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></tbody></table></figure><h3 id="解构表达式"><a href="#解构表达式" class="headerlink" title="解构表达式"></a>解构表达式</h3><h4 id="数组解构"><a href="#数组解构" class="headerlink" title="数组解构"></a>数组解构</h4><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一种写法（普通），通过角标获取数组元素</span></span><br><span class="line"><span class="keyword">let</span> a1 = arr[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> a2 = arr[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">let</span> a3 = arr[<span class="number">2</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a1, a2, a3);    <span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种写法（数组解构），b1, b2, b3 将与 arr 数组中的每个位置对应来取值</span></span><br><span class="line"><span class="keyword">let</span> [b1, b2, b3] = arr;</span><br><span class="line"><span class="built_in">console</span>.log(b1, b2, b3);    <span class="comment">// 1 2 3</span></span><br></pre></td></tr></tbody></table></figure><h4 id="对象解构"><a href="#对象解构" class="headerlink" title="对象解构"></a>对象解构</h4><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = {</span><br><span class="line">    <span class="attr">name</span>: <span class="string">"jack"</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">23</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一种写法（普通），通过对象来获取属性值</span></span><br><span class="line"><span class="keyword">const</span> name1 = person.name;</span><br><span class="line"><span class="keyword">const</span> age1 = person.age;</span><br><span class="line"><span class="built_in">console</span>.log(name1, age1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种写法（对象解构），对象里面的每个属性和左边对应赋值</span></span><br><span class="line"><span class="keyword">const</span> {name, age} = person;</span><br><span class="line"><span class="built_in">console</span>.log(name, age);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三种写法（对象解构），对象里面的每个属性和左边对应赋值，并使用变量别名</span></span><br><span class="line"><span class="keyword">const</span> {<span class="attr">name</span>:name2, <span class="attr">age</span>:age2} = person;</span><br><span class="line"><span class="built_in">console</span>.log(name2, age2);</span><br></pre></td></tr></tbody></table></figure><h3 id="字符串扩展"><a href="#字符串扩展" class="headerlink" title="字符串扩展"></a>字符串扩展</h3><h4 id="新-API-函数"><a href="#新-API-函数" class="headerlink" title="新 API 函数"></a>新 API 函数</h4><ul><li><code>includes()</code>：返回布尔值，表示是否找到了参数字符串</li><li><code>startsWith()</code>：返回布尔值，表示参数字符串是否在原字符串的头部</li><li><code>endsWith()</code>：返回布尔值，表示参数字符串是否在原字符串的尾部</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">"hello world"</span>; </span><br><span class="line"><span class="built_in">console</span>.log(str.startsWith(<span class="string">"hello"</span>));    <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">"world"</span>));      <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">"e"</span>));          <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">"hello"</span>));      <span class="comment">// true</span></span><br></pre></td></tr></tbody></table></figure><h4 id="字符串模版"><a href="#字符串模版" class="headerlink" title="字符串模版"></a>字符串模版</h4><p>模板字符串相当于加强版的字符串，使用反引号 ` 包裹，除了可以作为普通字符串，还可以用来定义多行字符串，也可以在字符串中加入变量和表达式。</p><ul><li>定义多行字符串</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;</span></span><br><span class="line"><span class="string">            &lt;span&gt;Hello World&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br></pre></td></tr></tbody></table></figure><ul><li>字符串中插入变量，变量名写在 <code>${}</code> 内</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">"Jack"</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">let</span> info = <span class="string">`我是<span class="subst">${name}</span>, 年龄是<span class="subst">${age}</span>岁`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(info);</span><br></pre></td></tr></tbody></table></figure><ul><li>字符串中插入表达式，<code>${}</code> 内可以放入 JavaScript 表达式，例如函数调用</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"This is a function."</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在字符串中调用函数</span></span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">`Return Message : <span class="subst">${fun()}</span>`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str2);</span><br></pre></td></tr></tbody></table></figure><h3 id="函数优化"><a href="#函数优化" class="headerlink" title="函数优化"></a>函数优化</h3><h4 id="函数参数默认值"><a href="#函数参数默认值" class="headerlink" title="函数参数默认值"></a>函数参数默认值</h4><p>ES6 支持给函数参数设置默认值，语法为 <code>参数名称 = 默认值</code></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 ES6 之前，无法给一个函数参数设置默认值，只能采用变通的写法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>{</span><br><span class="line">    <span class="comment">// 判断 b 是否为空，为空则赋默认值 1</span></span><br><span class="line">    b = b || <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 只传递一个参数</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>));   <span class="comment">// 11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 可以这么写，直接给参数设置默认值，如果没有传递就会自动使用默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sub</span>(<span class="params">a, b = <span class="number">1</span></span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 只传递一个参数</span></span><br><span class="line"><span class="built_in">console</span>.log(sub(<span class="number">3</span>));    <span class="comment">// 2</span></span><br></pre></td></tr></tbody></table></figure><h4 id="不定参数"><a href="#不定参数" class="headerlink" title="不定参数"></a>不定参数</h4><p>不定参数用来表示不确定参数个数，语法为 <code>... 变量名</code>，由 <code>...</code> 加上一个具名参数标识符组成。特别注意，具名参数只能放在参数列表的最后，并且有且只能有一个不定参数。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">... params</span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(params.length);</span><br><span class="line">}</span><br><span class="line">fun(<span class="string">"a"</span>, <span class="string">"b"</span>);              <span class="comment">// 2</span></span><br><span class="line">fun(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>);    <span class="comment">// 4</span></span><br></pre></td></tr></tbody></table></figure><h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><h4 id="声明单个参数的函数"><a href="#声明单个参数的函数" class="headerlink" title="声明单个参数的函数"></a>声明单个参数的函数</h4><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 ES6 之前，声明单个参数函数的写法</span></span><br><span class="line"><span class="keyword">var</span> print = <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(param);</span><br><span class="line">};</span><br><span class="line">print(<span class="string">"Hello World"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 ES6 中，声明单个参数函数的写法（第一种）</span></span><br><span class="line"><span class="keyword">var</span> echo = <span class="function">(<span class="params">param</span>) =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(param);</span><br><span class="line">}</span><br><span class="line">echo(<span class="string">"Hello World"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 ES6 中，声明单个参数函数的写法（第二种），只有一个参数时，可省略括号 ()</span></span><br><span class="line"><span class="keyword">var</span> output = <span class="function"><span class="params">param</span> =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(param);</span><br><span class="line">}</span><br><span class="line">output(<span class="string">"Hello World"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 ES6 中，声明单个参数函数的写法（第三种），函数体只有一行语句时，可以省略 {}</span></span><br><span class="line"><span class="keyword">var</span> display = <span class="function"><span class="params">param</span> =&gt;</span> <span class="built_in">console</span>.log(param);</span><br><span class="line">display(<span class="string">"Hello World"</span>)</span><br></pre></td></tr></tbody></table></figure><h4 id="声明多个参数的函数"><a href="#声明多个参数的函数" class="headerlink" title="声明多个参数的函数"></a>声明多个参数的函数</h4><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 ES6 之前，声明多个参数函数的写法</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(a + b);</span><br><span class="line">}</span><br><span class="line">sum(<span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 ES6 中，声明多个参数函数的写法（第一种）</span></span><br><span class="line"><span class="keyword">var</span> sub = <span class="function">(<span class="params">a, b</span>) =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(a - b);</span><br><span class="line">}</span><br><span class="line">sub(<span class="number">5</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 ES6 中，声明多个参数函数的写法（第二种），函数体只有一行语句时，可以省略 {}</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="built_in">console</span>.log(a / b);</span><br><span class="line">div(<span class="number">8</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 ES6 中，声明多个参数函数的写法（第三种），函数体只有一行语句时，并且需要返回结果时，可以省略 {}，会自动返回结果</span></span><br><span class="line"><span class="keyword">var</span> multi = <span class="function">(<span class="params">a, b</span>) =&gt;</span>  a * b;</span><br><span class="line"><span class="built_in">console</span>.log(multi(<span class="number">3</span>, <span class="number">7</span>));</span><br></pre></td></tr></tbody></table></figure><h4 id="箭头函数结合解构表达式"><a href="#箭头函数结合解构表达式" class="headerlink" title="箭头函数结合解构表达式"></a>箭头函数结合解构表达式</h4><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = {</span><br><span class="line">    <span class="attr">name</span>: <span class="string">"jack"</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">23</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 ES6 之前，声明一个对象，将对象作为函数参数，然后在函数体内访问对象属性的写法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printPerson</span>(<span class="params">person</span>)</span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"hello "</span> + person.name);</span><br><span class="line">}</span><br><span class="line">printPerson(person);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 ES6 中，声明一个对象，将对象作为函数参数，然后在函数体内访问对象属性的写法</span></span><br><span class="line"><span class="keyword">var</span> echoPerson = <span class="function">(<span class="params">{ name }</span>) =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"hello "</span> + name);</span><br><span class="line">}</span><br><span class="line">echoPerson(person);</span><br></pre></td></tr></tbody></table></figure><h3 id="对象优化"><a href="#对象优化" class="headerlink" title="对象优化"></a>对象优化</h3><h4 id="新-API-函数-1"><a href="#新-API-函数-1" class="headerlink" title="新 API 函数"></a>新 API 函数</h4><p>ES6 给 Object 对象拓展了许多新的 API 函数，如：</p><ul><li><code>keys(obj)</code>：获取对象的所有 <code>key</code> 形成的数组</li><li><code>values(obj)</code>：获取对象的所有 <code>value</code> 形成的数组</li><li><code>entries(obj)</code>：获取对象的所有 key 和 value 形成的二维数组，格式：<code>[[k1,v1], [k2,v2], ...]</code></li><li><code>assign(dest, ...src)</code>：将多个 <code>src</code> 对象的值拷贝到 <code>dest</code> 中（第一层为深拷贝，第二层为浅拷贝）。</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = {</span><br><span class="line">    <span class="attr">name</span>: <span class="string">"jack"</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">}</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(person));       <span class="comment">// ['name', 'age']</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(person));     <span class="comment">// ['jack', 25]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(person));    <span class="comment">// [Array(2), Array(2)]</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dest = {<span class="attr">a</span> : <span class="number">1</span>};</span><br><span class="line"><span class="keyword">const</span> source1 = {<span class="attr">b</span>: <span class="number">2</span>};</span><br><span class="line"><span class="keyword">const</span> source2 = {<span class="attr">c</span>: <span class="number">3</span>};</span><br><span class="line"></span><br><span class="line"><span class="comment">// Object.assign() 拷贝函数的第一个参数是目标对象，后面的参数都是源对象</span></span><br><span class="line"><span class="built_in">Object</span>.assign(dest, source1, source2);</span><br><span class="line"><span class="built_in">console</span>.log(dest);   <span class="comment">// {a:1, b:2, c:3}</span></span><br></pre></td></tr></tbody></table></figure><h4 id="声明对象简写"><a href="#声明对象简写" class="headerlink" title="声明对象简写"></a>声明对象简写</h4><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> age = <span class="number">23</span>;</span><br><span class="line"><span class="keyword">const</span> name = <span class="string">"Jack"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 ES6 之前，声明对象的写法</span></span><br><span class="line"><span class="keyword">const</span> person1 = {<span class="attr">age</span>: age, <span class="attr">name</span>: name};</span><br><span class="line"><span class="built_in">console</span>.log(person1);   <span class="comment">// {age: 23, name: "Jack"}</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 ES6 中，声明对象时支持简写</span></span><br><span class="line"><span class="keyword">const</span> person2 = {age, name};</span><br><span class="line"><span class="built_in">console</span>.log(person2);   <span class="comment">// {age: 23, name: "Jack"}</span></span><br></pre></td></tr></tbody></table></figure><h4 id="对象的函数属性简写"><a href="#对象的函数属性简写" class="headerlink" title="对象的函数属性简写"></a>对象的函数属性简写</h4><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = {</span><br><span class="line">    <span class="attr">name</span>: <span class="string">"Jack"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在 ES6 之前，对象的函数属性的写法</span></span><br><span class="line">    <span class="attr">eat</span>: <span class="function"><span class="keyword">function</span> (<span class="params">food</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">" eat "</span> + food);</span><br><span class="line">    },</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在 ES6 中，对象的函数属性的第一种写法（箭头函数版本），这里拿不到 this 对象</span></span><br><span class="line">    <span class="attr">play1</span>: <span class="function">(<span class="params">toy</span>) =&gt;</span> {</span><br><span class="line">        <span class="built_in">console</span>.log(person.name + <span class="string">" play "</span> + toy);</span><br><span class="line">    },</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在 ES6 中，对象的函数属性的第二种写法（简写版本），这里可以拿到 this 对象</span></span><br><span class="line">    play2 (toy) {</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">" play "</span> + toy);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">person.eat(<span class="string">'apple'</span>);        <span class="comment">// Jack eat apple</span></span><br><span class="line">person.play1(<span class="string">"computer"</span>);   <span class="comment">// Jack play computer</span></span><br><span class="line">person.play2(<span class="string">"computer"</span>);   <span class="comment">// Jack play computer</span></span><br></pre></td></tr></tbody></table></figure><h4 id="对象拓展运算符"><a href="#对象拓展运算符" class="headerlink" title="对象拓展运算符"></a>对象拓展运算符</h4><p>对象拓展运算符 <code>...</code> 用于取出参数对象所有可遍历的属性，然后拷贝给当前对象。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 拷贝对象（深拷贝）</span></span><br><span class="line"><span class="keyword">let</span> person1 = { <span class="attr">name</span>: <span class="string">"Jack"</span>, <span class="attr">age</span>: <span class="number">23</span> };</span><br><span class="line"><span class="keyword">let</span> someone = { ...person1 };</span><br><span class="line"><span class="built_in">console</span>.log(someone);       <span class="comment">// {name: "Jack", age: 23}</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 合并对象，如果两个对象的属性有重复，后面对象的属性值会覆盖前面对象的属性值</span></span><br><span class="line"><span class="keyword">let</span> person2 = { <span class="attr">age</span>: <span class="number">15</span> };</span><br><span class="line"><span class="keyword">let</span> person3 = { <span class="attr">name</span>: <span class="string">"Jack"</span> };</span><br><span class="line"><span class="keyword">let</span> person4 = { ...person2, ...person3 };</span><br><span class="line"><span class="built_in">console</span>.log(person4);       <span class="comment">// {age: 15, name:"Jack"}</span></span><br></pre></td></tr></tbody></table></figure><h3 id="map-和-reduce-函数"><a href="#map-和-reduce-函数" class="headerlink" title="map 和 reduce 函数"></a>map 和 reduce 函数</h3><p>ES6 在数组中新增了 <code>map</code> 和 <code>reduce</code> 函数。</p><h4 id="map-函数"><a href="#map-函数" class="headerlink" title="map 函数"></a>map 函数</h4><ul><li>语法：<code>arr.map(callback)</code></li><li>描述：<code>map</code> 函数的参数是一个回调函数，将原数组中的所有元素用这个回调函数处理后放入新数组并返回。</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">"1"</span>, <span class="string">"23"</span>, <span class="string">"5"</span>, <span class="string">"16"</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr);       <span class="comment">// ["1", "23", "5", "16"]</span></span><br><span class="line"></span><br><span class="line">arr = arr.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">parseInt</span>(item));</span><br><span class="line"><span class="built_in">console</span>.log(arr);       <span class="comment">// [1, 23, 5, 16]</span></span><br><span class="line"></span><br><span class="line">arr = arr.map(<span class="function"><span class="params">item</span> =&gt;</span> item * <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr);       <span class="comment">// [2, 46, 10, 32]</span></span><br></pre></td></tr></tbody></table></figure><h4 id="reduce-函数"><a href="#reduce-函数" class="headerlink" title="reduce 函数"></a>reduce 函数</h4><ul><li><p>语法：<code>arr.reduce(callback, [initialValue])</code></p></li><li><p>描述：<code>reduce</code> 函数会为数组中的每一个元素依次执行回调函数，不包括数组中被删除或从未被赋值的元素</p></li><li><p><code>callback</code>：处理数组中每个元素的回调函数，包含四个参数</p><ul><li><code>previousValue</code>：上一次调用回调函数返回的值，或者是提供的初始值（initialValue）</li><li><code>currentValue</code>：数组中当前被处理的元素</li><li><code>index</code>：当前元素在数组中的索引</li><li><code>array</code>：调用 <code>reduce</code> 函数的数组</li></ul></li><li><p><code>initialValue</code>：作为第一次调用 <code>callback</code> 回调函数的初始值（或者上一次回调函数的返回值）</p></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">20</span>, -<span class="number">5</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有初始值</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b));       <span class="comment">// 19 = 1 + 20 + (-5) + 3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a * b));       <span class="comment">// -300 = 1 * 20 * (-5) * 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 拥有初始值</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">1</span>));    <span class="comment">// 20 = 1 + 1 + 20 + (-5) + 3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a * b, <span class="number">0</span>));    <span class="comment">// -0 = 0 * 1 * 20 * (-5) * 3</span></span><br></pre></td></tr></tbody></table></figure><h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p>在 JavaScript 的世界中，所有代码都是单线程执行的。由于这个 “缺陷”，导致 JavaScript 的所有网络操作，浏览器事件，都必须是异步执行。异步执行可以用回调函数实现。一旦有一连串的 Ajax 请求 a，b，c，d … 后面的请求依赖前面的请求结果，就需要层层嵌套。这种缩进和层层嵌套的方式，非常容易造成上下文代码混乱，开发者不得不非常小心翼翼处理内层函数与外层函数的数据，一旦内层函数使用了上层函数的变量，这种混乱程度就会加剧。总之，这种<code>层叠上下文</code>的层层嵌套方式，着实增加了开发的难度。</p><h4 id="传统-Ajax-回调使用案例"><a href="#传统-Ajax-回调使用案例" class="headerlink" title="传统 Ajax 回调使用案例"></a>传统 Ajax 回调使用案例</h4><p>这里将演示传统 Ajax 回调的使用案例，目的是让读者对层层嵌套的代码有一个直观的了解。</p><h5 id="需求说明"><a href="#需求说明" class="headerlink" title="需求说明"></a>需求说明</h5><p>用户登录后，展示该用户的各科成绩。在页面发送三次请求:</p><ul><li>1、查询用户，查询成功说明可以登录</li><li> 2、根据用户的查询结果，查询科目信息</li><li> 3、根据科目的查询结果，获取科目成绩</li></ul><h5 id="后端接口"><a href="#后端接口" class="headerlink" title="后端接口"></a>后端接口</h5><p>此时后台应该提供三个接口，一个提供用户的查询接口，一个提供科目的查询接口，一个提供各科成绩的查询接口。为了渲染方便，建议最好是响应 JSON 数据。在这里就不编写后台接口了，而是提供三个 JSON 文件，通过直接提供 JSON 数据的方式来模拟后台的接口。</p><ul><li>user.json</li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"zhangsan"</span>,</span><br><span class="line">    <span class="attr">"password"</span>: <span class="string">"123456"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>user_corse_1.json</li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"chinese"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>corse_score_10.json</li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">"score"</span>: <span class="number">90</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="调用接口"><a href="#调用接口" class="headerlink" title="调用接口"></a>调用接口</h5><p>在传统的 Jquery Ajax 回调方式中，回调函数层层嵌套，也被称为 <code>回调地狱</code>。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$.ajax({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"mock/user.json"</span>,</span><br><span class="line">    <span class="function"><span class="title">success</span>(<span class="params">data</span>)</span> {</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"查询到用户:"</span>, data);</span><br><span class="line">        $.ajax({</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`mock/user_corse_<span class="subst">${data.id}</span>.json`</span>,</span><br><span class="line">            <span class="function"><span class="title">success</span>(<span class="params">data</span>)</span> {</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"查询到课程:"</span>, data);</span><br><span class="line">                $.ajax({</span><br><span class="line">                    <span class="attr">url</span>: <span class="string">`mock/corse_score_<span class="subst">${data.id}</span>.json`</span>,</span><br><span class="line">                    <span class="function"><span class="title">success</span>(<span class="params">data</span>)</span> {</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"查询到分数:"</span>, data);</span><br><span class="line">                    },</span><br><span class="line">                    <span class="function"><span class="title">error</span>(<span class="params">error</span>)</span> {</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"出现异常了:"</span> + error);</span><br><span class="line">                    }</span><br><span class="line">                });</span><br><span class="line">            },</span><br><span class="line">            <span class="function"><span class="title">error</span>(<span class="params">error</span>)</span> {</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"出现异常了:"</span> + error);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">error</span>(<span class="params">error</span>)</span> {</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"出现异常了:"</span> + error);</span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><h4 id="Promise-语法"><a href="#Promise-语法" class="headerlink" title="Promise 语法"></a>Promise 语法</h4><ul><li>基础版的语法</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>{</span><br><span class="line">    <span class="comment">// 执行异步操作</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// 判断异步操作执行的结果</span></span><br><span class="line">    <span class="keyword">if</span> (result) {</span><br><span class="line">        resolve(value);     <span class="comment">// 调用 resolve 函数，代表 Promise 将返回成功的结果</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        reject(error);      <span class="comment">// 调用 reject 函数，代表 Promise 将会返回失败结果</span></span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><ul><li>箭头函数版的语法</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">    <span class="comment">// 执行异步操作</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// 判断异步操作执行的结果</span></span><br><span class="line">    <span class="keyword">if</span> (result) {</span><br><span class="line">        resolve(value);     <span class="comment">// 调用 resolve 函数，代表 Promise 将返回成功的结果</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        reject(error);      <span class="comment">// 调用 reject 函数，代表 Promise 将会返回失败结果</span></span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><h4 id="Prmise-处理执行结果"><a href="#Prmise-处理执行结果" class="headerlink" title="Prmise 处理执行结果"></a>Prmise 处理执行结果</h4><p>如果想要等待异步执行完成后做一些事情，可以通过 Promise 的 <code>then</code> 函数来实现。如果想要处理 Promise 异步执行失败的事件，还可以使用 <code>catch</code> 函数。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">promise.then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>{</span><br><span class="line">    <span class="comment">// 异步执行成功后的回调</span></span><br><span class="line">}).catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>{</span><br><span class="line">    <span class="comment">// 异步执行失败后的回调</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><h4 id="Promise-使用案例"><a href="#Promise-使用案例" class="headerlink" title="Promise 使用案例"></a>Promise 使用案例</h4><p>上述的 Jquery Ajax 回调代码，使用 Promise 改造后如下：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">    $.ajax({</span><br><span class="line">        <span class="attr">url</span>: <span class="string">"mock/user.json"</span>,</span><br><span class="line">        <span class="function"><span class="title">success</span>(<span class="params">data</span>)</span> {</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"查询到用户:"</span>, data);</span><br><span class="line">            resolve(data.id);</span><br><span class="line">        },</span><br><span class="line">        <span class="function"><span class="title">error</span>(<span class="params">error</span>)</span> {</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"出现异常了:"</span> + error);</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">}).then(<span class="function">(<span class="params">userId</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">        $.ajax({</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`mock/user_corse_<span class="subst">${userId}</span>.json`</span>, <span class="function"><span class="title">success</span>(<span class="params">data</span>)</span> {</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"查询到课程:"</span>, data);</span><br><span class="line">                resolve(data.id);</span><br><span class="line">            },</span><br><span class="line">            <span class="function"><span class="title">error</span>(<span class="params">error</span>)</span> {</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"出现异常了:"</span> + error);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    });</span><br><span class="line">}).then(<span class="function">(<span class="params">corseId</span>) =&gt;</span> {</span><br><span class="line">    $.ajax({</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`mock/corse_score_<span class="subst">${corseId}</span>.json`</span>,</span><br><span class="line">        <span class="function"><span class="title">success</span>(<span class="params">data</span>)</span> {</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"查询到分数:"</span>, data);</span><br><span class="line">        },</span><br><span class="line">        <span class="function"><span class="title">error</span>(<span class="params">error</span>)</span> {</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"出现异常了:"</span> + error);</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><h4 id="Promise-优化处理"><a href="#Promise-优化处理" class="headerlink" title="Promise 优化处理"></a>Promise 优化处理</h4><p>通常在企业开发中，会把 Promise 封装成通用方法，下述的代码封装了一个通用的 <code>get</code> 请求方法：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 企业开发中，往往会将 get 方法单独放到 common.js 中</span></span><br><span class="line"><span class="keyword">let</span> get = <span class="function"><span class="keyword">function</span> (<span class="params">url, data</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">        $.ajax({</span><br><span class="line">            <span class="attr">url</span>: url,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">"GET"</span>,</span><br><span class="line">            <span class="attr">data</span>: data,</span><br><span class="line">            <span class="function"><span class="title">success</span>(<span class="params">result</span>)</span> {</span><br><span class="line">                resolve(result);</span><br><span class="line">            },</span><br><span class="line">            <span class="function"><span class="title">error</span>(<span class="params">error</span>)</span> {</span><br><span class="line">                reject(error);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用封装的 get 方法，实现分数查询</span></span><br><span class="line">get(<span class="string">"mock/user.json"</span>).then(<span class="function">(<span class="params">result</span>) =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"查询到用户:"</span>, result);</span><br><span class="line">    <span class="keyword">return</span> get(<span class="string">`mock/user_corse_<span class="subst">${result.id}</span>.json`</span>);</span><br><span class="line">}).then(<span class="function">(<span class="params">result</span>) =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"查询到课程:"</span>, result);</span><br><span class="line">    <span class="keyword">return</span> get(<span class="string">`mock/corse_score_<span class="subst">${result.id}</span>.json`</span>)</span><br><span class="line">}).then(<span class="function">(<span class="params">result</span>) =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"查询到分数:"</span>, result);</span><br><span class="line">}).catch(<span class="function">() =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"出现异常了:"</span> + error);</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><h3 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h3><h4 id="模块化介绍"><a href="#模块化介绍" class="headerlink" title="模块化介绍"></a>模块化介绍</h4><p>模块化就是把代码进行拆分，方便重复利用。类似 Java 中的导包操作：要使用一个包，必须先导包。而 JavaScript 中没有包的概念，换来的是模块。模块功能主要由两个指令构成： <code>export</code> 和 <code>import</code>。</p><ul><li><code>export</code>：用于规定模块的对外接口</li><li><code>import</code>：用于导入其他模块提供的功能</li></ul><h4 id="export-指令"><a href="#export-指令" class="headerlink" title="export 指令"></a>export 指令</h4><p>比如定义一个 JavaScript 文件 <code>hello.js</code>，里面有一个对象，可以使用 <code>export</code> 指令将这个对象导出：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> util = {</span><br><span class="line">    sum (a, b) {</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> {util};</span><br></pre></td></tr></tbody></table></figure><p>当然，也可以简写为：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> util = {</span><br><span class="line">    sum (a, b) {</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>export</code> 指定不仅可以导出对象，一切 JavaScript 变量都可以导出，包括基本类型变量、函数、数组、对象。当要导出多个值时，还可以简写，比如定义 <code>user.js</code> 文件：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"jack"</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">21</span></span><br><span class="line"><span class="keyword">export</span> {name, age}</span><br></pre></td></tr></tbody></table></figure><p>在上面的导出代码中，都明确指定了导出的变量名，这样其它人在导入使用时就必须准确写出变量名，否则就会出错。因此 JavaScript 提供了 <code>default</code> 关键字，可以对导出的变量名进行省略</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">    sum (a, b) {</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="import-指令"><a href="#import-指令" class="headerlink" title="import 指令"></a>import 指令</h4><p>使用 <code>export</code> 命令定义了模块的对外接口以后，其他 JavaScript 文件就可以通过 <code>import</code> 指令加载这个模块。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> util <span class="keyword">from</span> <span class="string">'hello.js'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用util对象中的属性</span></span><br><span class="line">util.sum(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></tbody></table></figure><p>批量导入前面在 <code>user.js</code> 中导出的 <code>name</code> 和 <code>age</code> 变量</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {name, age} <span class="keyword">from</span> <span class="string">'user.js'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name + <span class="string">" , 今年"</span> + age + <span class="string">"岁了"</span>);</span><br></pre></td></tr></tbody></table></figure><h4 id="浏览器支持说明"><a href="#浏览器支持说明" class="headerlink" title="浏览器支持说明"></a>浏览器支持说明</h4><p>上面的代码暂时无法直接在浏览器运行，因为浏览器目前还不支持 ES6 的导入和导出功能。除非借助于第三方工具，将 ES6 的语法进行编译降级到 ES5，比如 <code>Babel</code> 工具。值得一提的是，<code>Babel</code> 是一个工具链，主要用于将 ES6+ 版本的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。</p></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script>var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(!isMobile)try{var plugin=new ReadmorePlugin;plugin.init({id:"readmore-container",blogId:"96641-5333172926158-056",name:"全栈技术驿站",qrcode:"https://www.techgrow.cn/img/wx_mp_qr.png",keyword:"Tech",lockToc:"yes",type:"hexo",random:"0.9",interval:"30",expires:"365",height:"auto"})}catch(e){console.warn("readmore plugin occurred error: "+e.name+" | "+e.message)}</script></div><footer class="post-footer"><div class="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/259675f9.html" title="ES6 快速入门教程">https://www.techgrow.cn/posts/259675f9.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎加入微信群</span><br> <img src="/img/wx-group-qr-technology.png"></div></div></div><div class="post-tags"><a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"><i class="fa fa-tag"></i> 前端</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/57722de1.html" rel="prev" title="Nacos 2.0 发布，性能提升 10 倍"><i class="fa fa-chevron-left"></i> Nacos 2.0 发布，性能提升 10 倍</a></div><div class="post-nav-item"> <a href="/posts/4da97727.html" rel="next" title="Docker 基于 Gitolite 搭建 Git 服务器">Docker 基于 Gitolite 搭建 Git 服务器<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> Copyright &copy; 2018 – <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">838k</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 &asymp;</span> <span title="站点阅读时长">12:42</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & Docker | "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="beian"> <span><img src="/img/gonganbeian.png" alt></span> <span><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤ICP备19024664号</a></span></div></div></footer><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-tu9j5pBilBQrWSDePOOajCUdz6hWsid/lBNzK4KgEPM="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"/lib/mermaid/dist/mermaid.min.js","integrity":"sha256-ZfzwelSToHk5YAcr9wbXAmWgyn9Jyq08fSLrLhZE89w="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://unpkg.com/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '30px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://unpkg.com/qiniu-js@3.3.1/dist/qiniu.min.js"></script><script>
    var qiniu_domain = "https://qiniu.techgrow.cn";
    var qiniu_token_url = "https://open.techgrow.cn/app/api/qiniu/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline.techgrow.cn:9360","cssUrl":"https://unpkg.com/@waline/client@2.5.1/dist/waline.css","commentCount":true,"pageview":false,"copyright":false,"allowUploadImage":true,"libUrl":"https://unpkg.com/@waline/client@2.5.1/dist/waline.js","locale":{"placeholder":"支持匿名评论啦，若希望及时收到博主的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧"},"dark":"body.darkmode--activated","emoji":["https://unpkg.com/@waline/emojis@1.0.1/weibo"],"meta":["nick","mail","link"],"login":"enable","pageSize":10,"qiniuDebug":false,"qiniuDomain":"https://qiniu.techgrow.cn","qiniuTokenUrl":"https://open.techgrow.cn/app/api/qiniu/token/upload","el":"#waline","comment":true,"path":"/posts/259675f9.html"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@2.5.1/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.imageUploader = false;
  }
  else if (CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.imageUploader = qiniuUploadImage;
  } else {
   CONFIG.waline.imageUploader = true;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),e="ipad"==i.match(/ipad/i),a="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),r="ucweb"==i.match(/ucweb/i),c="android"==i.match(/android/i),l="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(e||a||o||n||r||c||l||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;jQuery(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||jQuery("#aplayer").css("display","block"))}),jQuery(window).on("load",function(){aplayerEnable&&jQuery(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>