<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="/lib/pace-js/themes/blue/pace-theme-minimal.css"><script src="/lib/pace-js/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.techgrow.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><meta name="description" content="本文主要介绍 Meson 的入门教程，包括 Windows/Linux 系统如何使用 Meson 构建 C++ 和 C 语言项目。"><meta property="og:type" content="article"><meta property="og:title" content="Meson 入门指南之一"><meta property="og:url" content="https://www.techgrow.cn/posts/68d93948.html"><meta property="og:site_name" content="Clay 的技术空间"><meta property="og:description" content="本文主要介绍 Meson 的入门教程，包括 Windows/Linux 系统如何使用 Meson 构建 C++ 和 C 语言项目。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-08-12T14:25:49.000Z"><meta property="article:modified_time" content="2020-08-12T14:25:49.000Z"><meta property="article:author" content="Clay"><meta property="article:tag" content="Linux系统编程"><meta property="article:tag" content="C语言"><meta property="article:tag" content="C++"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.techgrow.cn/posts/68d93948.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.techgrow.cn/posts/68d93948.html","path":"posts/68d93948.html","title":"Meson 入门指南之一"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Meson 入门指南之一 | Clay 的技术空间</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-135294383-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-135294383-1","only_pageview":false,"measure_protocol_api_secret":null}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script class="next-config" data-name="baidu_analytics" type="application/json">"84c09b30349a65573c5c642ff336969b"</script><script src="/js/third-party/analytics/baidu-analytics.js"></script><link rel="dns-prefetch" href="https://waline.techgrow.cn"><link rel="stylesheet" type="text/css" href="/css/injector/main.css"><link rel="preload" as="style" href="/css/injector/light.css"><link rel="preload" as="style" href="/css/injector/dark.css"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.admonition{margin:1.5625em 0;padding:.6rem;overflow:hidden;font-size:.64rem;page-break-inside:avoid;border-left:.3rem solid #42b983;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);background-color:#fafafa}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;background-color:rgba(66,185,131,.1)}.admonition-title::before{position:absolute;top:.9rem;left:1rem;width:12px;height:12px;background-color:#42b983;border-radius:50%;content:' '}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.1)}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.1)}.error>.admonition-title,.fail>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.1)}.admonition.info,.admonition.todo{border-color:#00b8d4}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.admonition.error,.admonition.fail,.admonition.failure,.admonition.missing{border-color:#ff5252}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4;border-radius:50%}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100;border-radius:50%}.error>.admonition-title::before,.fail>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252;border-radius:50%}.admonition>:last-child{margin-bottom:0!important}</style><link rel="alternate" href="/atom.xml" title="Clay 的技术空间" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion"><script src="/lib/jquery/dist/jquery.min.js"></script><script data-pjax="">!function(){var t=window.location.host;if(-1==t.indexOf("127.0.0.1")&&-1==t.indexOf("localhost")){var o=document.createElement("script"),e=window.location.protocol.split(":")[0];o.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}}()</script><link rel="stylesheet" href="/lib/aplayer/dist/APlayer.min.css"><div id="aplayer" style="display:none"></div><script src="/lib/aplayer/dist/APlayer.min.js"></script><script src="/lib/aplayer/dist/color-thief.js"></script><script src="/lib/aplayer-init.js"></script><script src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script><script>function getTitle(){var t=jQuery("meta[property='og:title']");return t?t.attr("content"):""}function getDesc(){var t=jQuery("meta[property='og:description']");return t?t.attr("content"):""}function randomString(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",r=0;r<t;++r)i+=e.charAt(Math.floor(Math.random()*n));return i}function initWx(t){wx.config({debug:!1,appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(){}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,type:"link",dataUrl:"",success:function(){}}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})}),wx.error(function(t){})}jQuery(function(){var e=getDesc(),n=getTitle(),i=randomString(16),r=(new Date).getTime(),a=window.location.href,t="https://open.techgrow.cn/api/wechat/js/signature?url="+a+"&noncestr="+i+"&timestamp="+r;jQuery.getJSON(t,function(t){initWx({desc:e,title:n,link:a,nonceStr:i,timestamp:r,signature:t.data,appId:"wx1fcf69355af43d41",imgUrl:"https://www.techgrow.cn/img/wx_share.jpg"})})})</script><div style="display:none"><img src="https://www.techgrow.cn/img/wx_share.jpg" alt=""></div><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Clay 的技术空间</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">用进废退 | 艺不压身</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a href="/search" rel="section"><i class="fa fa-search fa-fw"></i>搜索</a></li><li class="menu-item menu-item-links"><a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-readingnotes"><a href="https://www.techgrow.cn/reading/" rel="section"><i class="fa fa-book-open-reader fa-fw"></i>读书笔记</a></li><li class="menu-item menu-item-commentmanage"><a href="https://waline.techgrow.cn/" rel="external nofollow" target="_blank"><i class="fa fa-comment fa-fw"></i>评论管理</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Meson-%E4%BB%8B%E7%BB%8D"><span class="nav-text">Meson 介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Meson-%E7%9A%84%E7%AE%80%E4%BB%8B"><span class="nav-text">Meson 的简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ninja-%E7%9A%84%E7%AE%80%E4%BB%8B"><span class="nav-text">Ninja 的简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Meson-%E7%9A%84%E7%89%B9%E6%80%A7"><span class="nav-text">Meson 的特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Meson-%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="nav-text">Meson 的依赖</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Meson-%E5%AE%89%E8%A3%85"><span class="nav-text">Meson 安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Windows-%E5%B9%B3%E5%8F%B0"><span class="nav-text">Windows 平台</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Debian-Ubuntu"><span class="nav-text">Debian/Ubuntu</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Fedora-CentOS"><span class="nav-text">Fedora/CentOS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-PyPi-%E5%AE%89%E8%A3%85"><span class="nav-text">通过 PyPi 安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Meson-%E8%BF%90%E8%A1%8C"><span class="nav-text">Meson 运行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Meson-%E6%8C%87%E5%AE%9A%E7%BC%96%E8%AF%91%E5%8F%82%E6%95%B0"><span class="nav-text">Meson 指定编译参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Meson-%E6%89%93%E5%8D%B0%E7%BC%96%E8%AF%91%E4%BF%A1%E6%81%AF"><span class="nav-text">Meson 打印编译信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Meson-%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-text">Meson 实战应用案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E5%8F%AF%E6%89%A7%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="nav-text">构建可执行项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E9%9D%99%E6%80%81%E5%BA%93%E9%A1%B9%E7%9B%AE"><span class="nav-text">构建静态库项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E5%8A%A0%E8%BD%BD%E7%AC%AC%E4%B8%89%E6%96%B9%E9%9D%99%E6%80%81%E5%BA%93%E7%9A%84%E5%8F%AF%E6%89%A7%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="nav-text">构建加载第三方静态库的可执行项目</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E5%8D%9A%E5%AE%A2"><span class="nav-text">参考博客</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Clay" src="/img/head.jpg"></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <span class="site-state-item-count">698</span> <span class="site-state-item-name">文章</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">53</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/rqh656418510" title="GitHub → https://github.com/rqh656418510" rel="external nofollow" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:rong656418510@gmail.com" title="E-Mail → mailto:rong656418510@gmail.com" rel="external nofollow" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i> RSS</a></span><span class="links-of-author-item"><a href="/sitemap.xml" title="SiteMap → /sitemap.xml" rel="noopener me"><i class="fa fa-sitemap fa-fw"></i> SiteMap</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.techgrow.cn/posts/68d93948.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/head.jpg"><meta itemprop="name" content="Clay"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Clay 的技术空间"><meta itemprop="description" content="专注于 Java 后端、分布式、微服务、云原生、数据库、系统架构、大数据、云计算、虚拟化、人工智能学习的技术博客。"></span><span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Meson 入门指南之一 | Clay 的技术空间"><meta itemprop="description" content="本文主要介绍 Meson 的入门教程，包括 Windows/Linux 系统如何使用 Meson 构建 C++ 和 C 语言项目。"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Meson 入门指南之一</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-08-12 22:25:49" itemprop="dateCreated datePublished" datetime="2020-08-12T22:25:49+08:00">2020-08-12</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="waline" href="/posts/68d93948.html#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/68d93948.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.8k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 ≈</span> <span>3 分钟</span></span></div></div></header><div class="post-body post-container" itemprop="articleBody" id="readmore-container"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul><li><a target="_blank" rel="external nofollow" href="https://mesonbuild.com/">Meson 官网</a></li><li><a target="_blank" rel="external nofollow" href="https://mesonbuild.com/index.html">Meson 官方文档</a></li><li><a target="_blank" rel="external nofollow" href="https://github.com/mesonbuild/meson">Meson GitHub 项目</a></li></ul><h2 id="Meson-介绍"><a href="#Meson-介绍" class="headerlink" title="Meson 介绍"></a>Meson 介绍</h2><h3 id="Meson-的简介"><a href="#Meson-的简介" class="headerlink" title="Meson 的简介"></a>Meson 的简介</h3><p>Meson（The Meson Build System）是个项目构建系统，类似的构建系统有 <code>Makefile</code>、<code>CMake</code>、<code>automake</code> …。 Meson 是一个由 Python 实现的开源项目，其思想是，开发人员花费在构建调试上的每一秒都是浪费，同样等待构建过程直到真正开始编译都是不值得的。因此，Meson 的设计目的是在用户友好的同时不损害性能，Meson 提供客户语言（custom language）作为主要工具，用户可以使用它完成项目构建的描述。客户语言的设计目标是简单（simplicity）、清晰（clarity）、简洁（conciseness），其中很多灵感来源于 Python 语言。Meson 的另个一主要设计目的是为现代编程工具提供优秀的支持和最好的实现。这包括一些特性如：单元测试（unit testing）、代码覆盖率报告（code coverage reporting）、头文件预编译（precompiled headers）。用户不需要寻找第三方宏指令（third party macros）或编写 Shell 脚本来实现这些特性，Meson 可以开箱即用。Meson 相比 CMake 来说，不仅仅支持 C/C++，还支持多种编程语言。如今，很多项目都由 CMake 转向到了 Meson，例如 <code>DPDK</code> 和 <code>Mapnik</code>。</p><span id="more"></span><h3 id="Ninja-的简介"><a href="#Ninja-的简介" class="headerlink" title="Ninja 的简介"></a>Ninja 的简介</h3><p>项目开发中一般将 Meson 和 Ninja 配合使用，Meson 负责构建项目依赖关系，Ninja 负责编译代码。Ninja 是一个轻量的构建系统，主要关注构建的速度。它与其他构建系统的区别主要在于两个方面：一是 Ninja 被设计成需要一个输入文件的形式，这个输入文件则由高级别的构建系统生成；二是 Ninja 被设计成尽可能快速执行构建的工具。</p><h3 id="Meson-的特性"><a href="#Meson-的特性" class="headerlink" title="Meson 的特性"></a>Meson 的特性</h3><ul><li>支持多种平台，包括 Linux、macOS、Windows、GCC、Clang、Visual Studio 等</li><li>支持多种编程语言，包括 C/C++、D、Fortran、Java、Rust</li><li> 支持在一个非常可读和用户友好的非图灵完整 DSL 中构建定义</li><li>支持很多操作系统和裸机进行交叉编译</li><li>支持极快的完整和增量构建而优化，而不牺牲正确性</li><li>支持与发行版包一起工作的内置多平台依赖提供程序</li></ul><h3 id="Meson-的依赖"><a href="#Meson-的依赖" class="headerlink" title="Meson 的依赖"></a>Meson 的依赖</h3><p>Meson 是依赖 Python 与 Ninja 实现的，依赖的版本如下：</p><ul><li>Python (version 3.6 or newer)</li><li>Ninja (version 1.8.2 or newer)</li></ul><h2 id="Meson-安装"><a href="#Meson-安装" class="headerlink" title="Meson 安装"></a>Meson 安装</h2><h3 id="Windows-平台"><a href="#Windows-平台" class="headerlink" title="Windows 平台"></a>Windows 平台</h3><ul><li>a）在 <a target="_blank" rel="external nofollow" href="https://github.com/mesonbuild/meson/releases">Meson GitHub Releases</a> 网站下载 Windows 版的安装程序，如 <code>meson-0.60.3-64.msi</code></li><li>b）双击 <code>meson-0.60.3-64.msi</code> 安装程序，按默认选项直接安装 Meson</li><li>c）在系统的 <code>开始菜单栏</code> 里，找到 Visual Studio 开发人员工具（<code>Native Tools Command Prompt for VS xxxx</code>），双击运行后，在 CMD 窗口内执行以下命令查看 Meson 和 Ninja 的版本<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; meson --version</span><br><span class="line">0.60.3</span><br><span class="line"></span><br><span class="line">&gt; ninja --version</span><br><span class="line">1.10.2</span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="Debian-Ubuntu"><a href="#Debian-Ubuntu" class="headerlink" title="Debian/Ubuntu"></a>Debian/Ubuntu</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword"># apt</span> install<span class="params"> -y</span> meson ninja-build</span><br></pre></td></tr></tbody></table></figure><h3 id="Fedora-CentOS"><a href="#Fedora-CentOS" class="headerlink" title="Fedora/CentOS"></a>Fedora/CentOS</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword"># yum</span> install<span class="params"> -y</span> meson ninja-build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword"># dnf</span> install<span class="params"> -y</span> meson ninja-build</span><br></pre></td></tr></tbody></table></figure><h3 id="通过-PyPi-安装"><a href="#通过-PyPi-安装" class="headerlink" title="通过 PyPi 安装"></a>通过 PyPi 安装</h3><p>Meson 可以直接通过 <a target="_blank" rel="external nofollow" href="https://pypi.python.org/pypi/meson">PyPi</a> 安装，但必须确保使用的是 Python3 的 <code>pip</code>，安装命令如下：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword"># pip3</span> install meson ninja</span><br></pre></td></tr></tbody></table></figure><p>或者使用标准的 Python 命令安装 Meson</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装meson</span></span><br><span class="line"><span class="keyword"># python3</span><span class="params"> -m</span> pip install meson</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装ninja</span></span><br><span class="line"><span class="keyword"># python3</span><span class="params"> -m</span> pip install ninja</span><br></pre></td></tr></tbody></table></figure><h2 id="Meson-运行"><a href="#Meson-运行" class="headerlink" title="Meson 运行"></a>Meson 运行</h2><div class="admonition warning"><p class="admonition-title">注意</p><p>若使用的是 Windows 平台，则需要在 Visual Studio 开发人员工具（<code>Native Tools Command Prompt for VS xxxx</code>）里执行 Meson 的命令，这是因为 C/C++ 编译器只会在该工具上运行。</p></div><ul><li>通过 Mesonn 初始化新的 C/C++ 项目，并使用 Meson 构建项目</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个新目录来保存项目文件</span></span><br><span class="line"><span class="keyword">$ mkdir</span> meson_project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入项目目录</span></span><br><span class="line"><span class="keyword">$ cd</span> meson_project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用Meson初始化并构建一个新的C/C++项目，会自动生成"meson.build"配置文件和C/C++源文件</span></span><br><span class="line"><span class="keyword">$ meson</span> init<span class="params"> --name</span> meson_project<span class="params"> --build</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 项目构建完成后，默认的构建目录是build，可以直接运行构建生成的可执行文件</span></span><br><span class="line"><span class="keyword">$ build</span>/meson_project</span><br></pre></td></tr></tbody></table></figure><ul><li>当项目代码发生变更后，可以进入 <code>build</code> 目录重新构建代码</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入build目录</span></span><br><span class="line"><span class="keyword">$ cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新构建代码</span></span><br><span class="line"><span class="keyword">$ meson</span> compile</span><br></pre></td></tr></tbody></table></figure><ul><li>Meson 项目的顶层目录结构如下</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">meson_project</span><br><span class="line">├── build               # Meson的构建目录</span><br><span class="line">├── meson.build         # Meson的配置文件</span><br><span class="line">└── meson_project.c     # C/C++源文件</span><br></pre></td></tr></tbody></table></figure><h2 id="Meson-指定编译参数"><a href="#Meson-指定编译参数" class="headerlink" title="Meson 指定编译参数"></a>Meson 指定编译参数</h2><p>通过 <code>meson configure</code> 命令可以查看 Meson 内置的编译参数、默认值以及可选值</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入Meson项目的根目录</span></span><br><span class="line"><span class="keyword">$ cd</span> meson_project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看Meson的编译参数</span></span><br><span class="line"><span class="keyword">$ meson</span> configure</span><br></pre></td></tr></tbody></table></figure><p>Meson 项目可以通过 <code>meson_options.txt</code> 配置文件来增加项目特有的编译参数，如：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">option('tests', type: 'boolean', value: true,</span><br><span class="line">	description: 'build unit tests')</span><br><span class="line">option('use_hpet', type: 'boolean', value: false,</span><br><span class="line">	description: 'use HPET timer in EAL')</span><br></pre></td></tr></tbody></table></figure><p>Meson 还支持在生成项目编译配置时，通过 <code>-D</code> 指定编译参数</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入Meson项目的根目录</span></span><br><span class="line"><span class="keyword">$ cd</span> meson_project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定编译参数，生成输出目录</span></span><br><span class="line"><span class="keyword">$ meson</span> build<span class="params"> -Dprefix</span>=/usr<span class="params"> -Dtests</span>=disabled</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入输出目录</span></span><br><span class="line"><span class="keyword">$ cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译代码</span></span><br><span class="line"><span class="keyword">$ ninja</span><span class="params"> -j8</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Meson-打印编译信息"><a href="#Meson-打印编译信息" class="headerlink" title="Meson 打印编译信息"></a>Meson 打印编译信息</h2><p>通过 <code>--verbose</code> 参数，Messon 和 Ninja 可以打印详细的编译信息，包括编译项目时，执行的所有命令</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入输出目录</span></span><br><span class="line"><span class="keyword">$ cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译代码</span></span><br><span class="line"><span class="keyword">$ meson</span> compile<span class="params"> --verbose</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译代码</span></span><br><span class="line"><span class="keyword">$ ninja</span><span class="params"> --verbose</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Meson-实战应用案例"><a href="#Meson-实战应用案例" class="headerlink" title="Meson 实战应用案例"></a>Meson 实战应用案例</h2><h3 id="构建可执行项目"><a href="#构建可执行项目" class="headerlink" title="构建可执行项目"></a>构建可执行项目</h3><div class="admonition warning"><p class="admonition-title">注意</p><p>若使用的是 Windows 平台，则需要在 Visual Studio 开发人员工具（<code>Native Tools Command Prompt for VS xxxx</code>）里执行 Meson 的命令，这是因为 C/C++ 编译器只会在该工具上运行。</p></div><p>第一步：创建项目，目录结构如下，<a href="/downloads/2021/12/meson_demo.zip">点击下载</a>完整的案例代码</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">meson_demo</span><br><span class="line">├── main.c</span><br><span class="line">└── meson.build</span><br></pre></td></tr></tbody></table></figure><p><code>main.c</code> 的文件内容</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>{</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Hello World!\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>meson.build</code> 的文件内容</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">project('meson_demo', 'c')</span><br><span class="line">exe = executable('main', 'main.c')</span><br></pre></td></tr></tbody></table></figure><ul><li>第二步：构建项目</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入项目目录</span></span><br><span class="line"><span class="keyword">$ meson_demo</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成构建目录，build是构建目录的名称，可以自定义</span></span><br><span class="line"><span class="keyword">$ meson</span> build   <span class="comment"># 或者 meson setup build</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入构建目录</span></span><br><span class="line"><span class="keyword">$ cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译项目代码</span></span><br><span class="line"><span class="keyword">$ ninja</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行可执行文件</span></span><br><span class="line">$ ./main</span><br></pre></td></tr></tbody></table></figure><p>Meson 配置文件（<code>meson.build</code>）的说明如下：</p><ul><li><code>project('meson_demo', 'c')</code>：指定项目名称和编程语言的类型</li><li><code>exe = executable('main', 'main.c')</code>：指定可执行文件的文件名和入口源文件</li></ul><h3 id="构建静态库项目"><a href="#构建静态库项目" class="headerlink" title="构建静态库项目"></a>构建静态库项目</h3><div class="admonition warning"><p class="admonition-title">注意</p><p>若使用的是 Windows 平台，则需要在 Visual Studio 开发人员工具（<code>Native Tools Command Prompt for VS xxxx</code>）里执行 Meson 的命令，这是因为 C/C++ 编译器只会在该工具上运行。</p></div><ul><li>第一步：创建静态库的项目，目录结构如下，<a href="/downloads/2021/12/static_lib_project.zip">点击下载</a>完整的案例代码</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">static_lib_project</span><br><span class="line">├── meson.build</span><br><span class="line">└── src</span><br><span class="line">    ├── static_lib.c</span><br><span class="line">    └── static_lib.h</span><br></pre></td></tr></tbody></table></figure><p><code>static_lib.h</code> 的文件内容</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _THIRD_LIB_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _THIRD_LIB_</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">info_print</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure><p><code>static_lib.c</code> 的文件内容</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"static_lib.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">info_print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"hello static library\n"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>meson.build</code> 的文件内容</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">project('static_lib_project', 'c')</span><br><span class="line">static_library('static_lib', 'src/static_lib.c')</span><br></pre></td></tr></tbody></table></figure><ul><li>第二步：构建项目</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入项目目录</span></span><br><span class="line"><span class="keyword">$ cd</span> static_lib_project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成构建目录，build是构建目录的名称，可以自定义</span></span><br><span class="line"><span class="keyword">$ meson</span> build   <span class="comment"># 或者 meson setup build</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入构建目录</span></span><br><span class="line"><span class="keyword">$ cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译项目代码</span></span><br><span class="line"><span class="keyword">$ ninja</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 项目成功编译后，会生成静态库文件"libstatic_lib.a“ </span></span><br><span class="line"><span class="keyword">$ ls</span><span class="params"> -al</span></span><br><span class="line">drwxr-xr-x. 6 clay clay 4096 08月 12 21:05 .</span><br><span class="line">drwxr-xr-x. 4 clay clay   46 08月 12 10:13 ..<span class="params"></span></span><br><span class="line"><span class="params">-rw</span>-r--r--. 1 clay clay 2972 08月 12 10:13 build.ninja<span class="params"></span></span><br><span class="line"><span class="params">-rw</span>-r--r--. 1 clay clay  430 08月 12 10:13 compile_commands.json<span class="params"></span></span><br><span class="line"><span class="params">-rw</span>-r--r--. 1 clay clay 3564 08月 12 21:05 libstatic_lib.a</span><br><span class="line">drwxr-xr-x. 2 clay clay   31 08月 12 21:05 libstatic_lib.a.p</span><br><span class="line">drwxr-xr-x. 2 clay clay 4096 08月 12 10:13 meson-info</span><br><span class="line">drwxr-xr-x. 2 clay clay   26 08月 12 10:13 meson-logs</span><br><span class="line">drwxr-xr-x. 2 clay clay 4096 08月 12 10:13 meson-private<span class="params"></span></span><br><span class="line"><span class="params">-rw</span>-r--r--. 1 clay clay  808 08月 12 21:05 .ninja_deps<span class="params"></span></span><br><span class="line"><span class="params">-rw</span>-r--r--. 1 clay clay  152 08月 12 21:05 .ninja_log</span><br></pre></td></tr></tbody></table></figure><p>Meson 配置文件（<code>meson.build</code>）的说明如下：</p><ul><li><code>project('static_lib_project', 'c')</code>：指定项目名称和编程语言的类型</li><li><code>static_library('static_lib', 'src/static_lib.c')</code>：指定静态库文件的文件名和入口源文件</li></ul><h3 id="构建加载第三方静态库的可执行项目"><a href="#构建加载第三方静态库的可执行项目" class="headerlink" title="构建加载第三方静态库的可执行项目"></a>构建加载第三方静态库的可执行项目</h3><div class="admonition warning"><p class="admonition-title">注意</p><p>若使用的是 Windows 平台，则需要在 Visual Studio 开发人员工具（<code>Native Tools Command Prompt for VS xxxx</code>）里执行 Meson 的命令，这是因为 C/C++ 编译器只会在该工具上运行。</p></div><ul><li>第一步：创建静态库的项目，目录结构如下，<a href="/downloads/2021/12/load_static_lib_project.zip">点击下载</a>完整的案例代码</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">load_static_lib_project</span><br><span class="line">├── meson.build</span><br><span class="line">└── src</span><br><span class="line">    ├── include</span><br><span class="line">    │&nbsp;&nbsp; └── static_lib.h</span><br><span class="line">    ├── lib</span><br><span class="line">    │&nbsp;&nbsp; └── libstatic_lib.a</span><br><span class="line">    └── main.c</span><br></pre></td></tr></tbody></table></figure><p><code>static_lib.h</code> 的文件内容</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _THIRD_LIB_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _THIRD_LIB_</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">info_print</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure><p><code>main.c</code> 的文件内容</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"static_lib.h"</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>{</span><br><span class="line">        info_print();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>meson.build</code> 的文件内容</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">project('load_static_lib_project', 'c')</span><br><span class="line">libs=meson.get_compiler('c').find_library('static_lib', dirs : join_paths(meson.source_root(),'src/lib'))</span><br><span class="line">executable('load_static_lib', 'src/main.c', dependencies : libs, include_directories : 'src/include')</span><br></pre></td></tr></tbody></table></figure><ul><li>第二步：构建项目</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入项目目录</span></span><br><span class="line"><span class="keyword">$ cd</span> load_static_lib_project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成构建目录，build是构建目录的名称，可以自定义</span></span><br><span class="line"><span class="keyword">$ meson</span> build   <span class="comment"># 或者 meson setup build</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入构建目录</span></span><br><span class="line"><span class="keyword">$ cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译项目代码</span></span><br><span class="line"><span class="keyword">$ ninja</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行可执行文件</span></span><br><span class="line">$ ./load_static_lib</span><br></pre></td></tr></tbody></table></figure><p>Meson 配置文件（<code>meson.build</code>）的说明如下：</p><ul><li><code>第一行</code>：指定项目名称和编程语言的类型</li><li><code>第二行</code>：指定静态库文件的名称和所在目录的路径，文件名称不需要加”lib” 前缀</li><li><code>第三行</code>：指定可执行文件的文件名、入口源文件、静态库的头文件所在目录的路径</li></ul><h2 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h2><ul><li><a target="_blank" rel="external nofollow" href="https://my.oschina.net/u/4349408/blog/3295014">Meson 的使用</a></li><li><a target="_blank" rel="external nofollow" href="https://blog.csdn.net/u010074726/article/details/108695256">Meson 构建系统</a></li></ul><div id="readmore-expansion" class="pjax"></div><link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css"><script data-pjax="" src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script><script data-pjax="">var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),allowMobile=!1;if(!isMobile||isMobile&&allowMobile)try{var plugin=new ReadmorePlugin;plugin.init({type:"hexo",id:"readmore-container",name:"全栈技术驿站",blogId:"96641-5333172926158-056",qrcode:"https://www.techgrow.cn/img/wx_mp_qr.png",keyword:"Tech",random:"1",height:"auto",expires:"365",lockToc:"yes",interval:"30",baseUrl:"",execute:"yes",tocSelector:""})}catch(e){console.warn("readmore plugin occurred error: "+e.name+" | "+e.message)}</script></div><footer class="post-footer"><div class="reward-container"><div>支持一根棒棒糖！</div> <button> 赞赏</button><div class="post-reward"><div> <img src="/img/pay_wx.png" alt="Clay 微信"> <span>微信</span></div><div> <img src="/img/pay_zfb.png" alt="Clay 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Clay</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.techgrow.cn/posts/68d93948.html" title="Meson 入门指南之一">https://www.techgrow.cn/posts/68d93948.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="contactme"><div class="social-list"><div class="social-item"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">欢迎添加博主微信，请备注 "博客"，届时会邀请您加入百人微信群</span><br> <img src="/img/wx_account_qr.png"></div></div></div><div class="post-tags"><a href="/tags/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/" rel="tag"><i class="fa fa-tag"></i> Linux系统编程</a><a href="/tags/C%E8%AF%AD%E8%A8%80/" rel="tag"><i class="fa fa-tag"></i> C语言</a><a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C++</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/feb80593.html" rel="prev" title="C++ 高频面试题之二"><i class="fa fa-angle-left"></i> C++ 高频面试题之二</a></div><div class="post-nav-item"> <a href="/posts/3cc999a7.html" rel="next" title="Vmware 虚拟机安装黑苹果系统">Vmware 虚拟机安装黑苹果系统<i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> Copyright © 2018 – <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Clay</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i></span> <span>站点总字数：</span> <span title="站点总字数">1.8m</span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span>站点阅读时长 ≈</span> <span title="站点阅读时长">27:31</span></span></div><div id="site-runtime"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span><span id="runtime"></span></div><script language="javascript">function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<t.length;n++)if(0<e.indexOf(t[n]))return!1;return!0}function siteTime(e,t){window.setTimeout("siteTime(openOnPC, start)",1e3);var n=36e5,o=24*n;t=new Date("2018-12-27 08:00:00");var i=new Date,r=(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i-t),a=Math.floor(r/31536e6),s=Math.floor(r/o-365*a),d=Math.floor((r-(365*a+s)*o)/n),l=Math.floor((r-(365*a+s)*o-d*n)/6e4),u=Math.floor((r-(365*a+s)*o-d*n-6e4*l)/1e3);document.getElementById("runtime").innerHTML="Powered by Hexo & Docker | "+a+" 年 "+s+" 日 "+d+" 小时 "+l+" 分钟 "+u+" 秒 "}var showOnMobile=!1,openOnPC=isPC(),start=new Date;siteTime(openOnPC,start),openOnPC||showOnMobile||(document.getElementById("site-runtime").style.display="none")</script><div class="beian"> <span><img src="/img/gonganbeian.png" alt=""></span> <span><a href="https://beian.miit.gov.cn/" rel="external nofollow" target="_blank">粤ICP备 19024664号-1</a></span> <span>|&nbsp;</span> <span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302004035" rel="external nofollow" target="_blank">粤公网安备 44011302004035号</a></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div> <a href="https://github.com/rqh656418510" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="external nofollow" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script size="200" alpha="0.5" zindex="-1" src="/lib/ribbon.js/dist/ribbon.min.js"></script><script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script><script src="/lib/lozad/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"/lib/pdfobject/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"/lib/mermaid/dist/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/pace.js"></script><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://www.techgrow.cn/lib/darkmode/darkmode@1.5.7.min.js"></script><script>
var options = {
  bottom: '64px',
  right: '30px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#282828',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script><script src="https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js"></script><script>
    var qiniu_domain = "https://oss.techgrow.cn";
    var qiniu_token_url = "https://open.techgrow.cn/api/oss/qiniu/token/upload";
    var qiniu_debug = "true" === "false";

    // date format
    Date.prototype.format = function (fmt) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
      };
      if (/(y+)/.test(fmt)) {
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
      }
      for (var k in o) {
        if (new RegExp("(" + k + ")").test(fmt)) {
          fmt = fmt.replace(
            RegExp.$1,
            (RegExp.$1.length == 1)
              ? (o[k])
              : (("00" + o[k]).substr(("" + o[k]).length))
          );
        }
      }
      return fmt;
    }

    // generate uuid
    function uuid() {
      var s = [];
      var hexDigits = "0123456789abcdef";
      for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
      }
      s[14] = "4";
      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
      s[8] = s[13] = s[18] = s[23] = "-";
      var uuid = s.join("");
      return uuid;
    }

    // sync get request
    function syncGet(url) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      }
      xhr.open('GET', url, false);
      xhr.send();
      return xhr;
    }

    // get upload file path
    function getUploadFilePath() {
      var now = new Date();
      var name = uuid().replace(/-/g, "");
      var nowStr = now.format("/yyyy/MM/dd/");
      return "uploads" + nowStr + name;
    }

    // get qiniu upload token
    function getUploadToken() {
      try {
        var xhr = syncGet(qiniu_token_url);
        var responseStatus = xhr.status;
        var responseJson = JSON.parse(xhr.responseText);
        if (responseStatus === 200) {
          return responseJson.data;
        } else if (responseStatus === 403) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，非法请求来源！");
        } else if (responseStatus === 429) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，上传过于频繁！");
        } else if (responseStatus === 500) {
          alert(responseJson.msg || "图片上传失败，无法获取UploadToken，系统内部出错！");
        } else {
          alert("图片上传失败，无法获取UploadToken，未知Http响应状态码！");
        }
      } catch (err) {
        if (qiniu_debug) {
          console.error(err);
        }
        alert("图片上传失败，无法获取UploadToken，未知错误！");
      }
      return null;
    }

    // qiniu upload image
    async function qiniuUploadImage(file) {
      var image_path = null;
      await uploadImage(file).then(function onFulfilled(res) {
        image_path = res;
      }).catch(function onRejected(err) {
        if (qiniu_debug) {
          console.error(err);
        }
      });
      return image_path;
    }

    // upload image
    function uploadImage(file) {
      return new Promise((resolve, reject) => {
        var config = null;
        var putExtra = null;
        var token = getUploadToken();
        var key = getUploadFilePath();
        // upload init
        var observable = qiniu.upload(file, key, token, putExtra, config);
        // upload start
        observable.subscribe({
          next(res) {
            // upload progress
          },
          error(err) {
            // upload falied
            reject("falied to upload image for qiniu: " + err.name);
          },
          complete(res) {
            // upload successed
            resolve(qiniu_domain + "/" + key);
          }
        });
      });
    }
  </script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline.techgrow.cn","cssUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css","commentCount":true,"pageview":false,"copyright":false,"allowUploadImage":true,"libUrl":"https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.js","locale":{"placeholder":"支持匿名评论啦，若希望及时收到博主的反馈，建议登录评论或者在上方的邮箱输入框留下邮箱地址哦 (๑•̀ㅂ•́)و✧"},"dark":"body.darkmode--activated","emoji":["https://www.techgrow.cn/lib/@waline/emojis/1.0.1/weibo"],"meta":["nick","mail","link"],"login":"enable","pageSize":10,"qiniuDebug":false,"qiniuDomain":"https://oss.techgrow.cn","qiniuTokenUrl":"https://open.techgrow.cn/api/oss/qiniu/token/upload","qiniuLibUrl":"https://www.techgrow.cn/lib/qiniu/qiniu@3.3.1.min.js","el":"#waline","comment":true,"path":"/posts/68d93948.html"}</script><link rel="stylesheet" href="https://www.techgrow.cn/lib/@waline/client/client@2.5.1.min.css"><script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.waline.allowUploadImage) {
    CONFIG.waline.imageUploader = false;
  }
  else if (CONFIG.waline.qiniuDomain && CONFIG.waline.qiniuTokenUrl) {
    CONFIG.waline.imageUploader = qiniuUploadImage;
  } else {
   CONFIG.waline.imageUploader = true;
  }
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script><div class="moon-menu"><div class="moon-menu-items"><div id="moon-menu-item-back2bottom" class="moon-menu-item"><i class="fas fa-chevron-down"></i></div><div id="moon-menu-item-back2top" class="moon-menu-item"><i class="fas fa-chevron-up"></i></div></div><div class="moon-menu-button"><svg class="moon-menu-bg"><circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle><circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle></svg><div class="moon-menu-content"><div class="moon-menu-icon"><i class="fas fa-ellipsis-v"></i></div><div class="moon-menu-text"></div></div></div></div><script src="/js/injector.js"></script><div class="comments" id="waline-comments" style="display:none"></div><script>function isMobile(){var i=navigator.userAgent.toLowerCase(),e="ipad"==i.match(/ipad/i),a="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),n="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),r="ucweb"==i.match(/ucweb/i),c="android"==i.match(/android/i),l="windows ce"==i.match(/windows ce/i),d="windows mobile"==i.match(/windows mobile/i);return!!(e||a||o||n||r||c||l||d)}var openOnMobile=isMobile(),showOnMobile=!1,aplayerEnable=!0;jQuery(document).ready(function(){aplayerEnable&&(openOnMobile&&!showOnMobile||jQuery("#aplayer").css("display","block"))}),jQuery(window).on("load",function(){aplayerEnable&&jQuery(".aplayer\\-icon.aplayer\\-icon\\-lrc").trigger("click")})</script></body></html>